{"version":3,"file":"webix.resources.d3d6ba75c1ca2e49fb4d.js","mappings":"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","sources":["webpack://ab_platform_web/./js/webix/components/gantt/ sync","webpack://ab_platform_web/./js/webix/components/pivot/ sync","webpack://ab_platform_web/./js/webix/components/reports/ sync","webpack://ab_platform_web/./js/webix/components/scheduler/ sync","webpack://ab_platform_web/./js/webix/components/gantt/gantt.min.css","webpack://ab_platform_web/./js/webix/components/hint/hint.css","webpack://ab_platform_web/./js/webix/components/query/query.min.css","webpack://ab_platform_web/./js/webix/components/querybuilder/querybuilder.min.css","webpack://ab_platform_web/./js/webix/components/reports/reports.min.css","webpack://ab_platform_web/./js/webix/components/scheduler/scheduler.min.css","webpack://ab_platform_web/./js/webix/components/node_modules/webix-jet/dist/es6/jet.js","webpack://ab_platform_web/./js/webix/components/node_modules/@xbs/jet-helpers/rLayout.js","webpack://ab_platform_web/./js/webix/components/node_modules/@xbs/jet-helpers/jetWin.js","webpack://ab_platform_web/./js/webix/components/node_modules/jet-restate/index.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/dragscroll.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/dnd.js","webpack://ab_platform_web/./js/webix/components/sources/views/chart/bars.js","webpack://ab_platform_web/./js/webix/components/sources/views/chart/scale.js","webpack://ab_platform_web/./js/webix/components/sources/views/chart/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/rdiagram/diagram.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/common.js","webpack://ab_platform_web/./js/webix/components/sources/views/rdiagram/tree.js","webpack://ab_platform_web/./js/webix/components/sources/views/rdiagram/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/task/baseline.js","webpack://ab_platform_web/./js/webix/components/sources/views/task/links.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/numeditor.js","webpack://ab_platform_web/./js/webix/components/sources/views/task/resources.js","webpack://ab_platform_web/./js/webix/components/sources/views/task/form.js","webpack://ab_platform_web/./js/webix/components/sources/views/task/info.js","webpack://ab_platform_web/./js/webix/components/sources/views/task/popup.js","webpack://ab_platform_web/./js/webix/components/sources/views/tree.js","webpack://ab_platform_web/./js/webix/components/sources/views/top.js","webpack://ab_platform_web/./js/webix/components/sources/export_views.js","webpack://ab_platform_web/./js/webix/components/sources/models/Local.js","webpack://ab_platform_web/./js/webix/components/sources/models/Backend.js","webpack://ab_platform_web/./js/webix/components/sources/models/Operations.js","webpack://ab_platform_web/./js/webix/components/node_modules/@xbs/webix-gantt-lib/dist/wgantt.es6.js","webpack://ab_platform_web/./js/webix/components/sources/models/Helpers.js","webpack://ab_platform_web/./js/webix/components/sources/models/Grouping.js","webpack://ab_platform_web/./js/webix/components/sources/app.js","webpack://ab_platform_web/./js/webix/components/sources/locales/en.js","webpack://ab_platform_web/./js/webix/components/sources/header.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/image.js","webpack://ab_platform_web/./js/webix/components/sources/common.js","webpack://ab_platform_web/./js/webix/components/sources/list.js","webpack://ab_platform_web/./js/webix/components/sources/dataview.js","webpack://ab_platform_web/./js/webix/components/sources/kanban.js","webpack://ab_platform_web/./js/webix/components/sources/uploader.js","webpack://ab_platform_web/./js/webix/components/sources/locale.js","webpack://ab_platform_web/./js/webix/components/sources/editor.js","webpack://ab_platform_web/./js/webix/components/sources/userlist.js","webpack://ab_platform_web/./js/webix/components/sources/menu.js","webpack://ab_platform_web/./js/webix/components/sources/comments.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/portlet.js","webpack://ab_platform_web/./js/webix/components/sources/views/config/properties/index.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/complex.js","webpack://ab_platform_web/./js/webix/components/sources/views/config/properties/values.js","webpack://ab_platform_web/./js/webix/components/sources/views/config/properties/group.js","webpack://ab_platform_web/./js/webix/components/sources/views/config/properties/chart.js","webpack://ab_platform_web/./js/webix/components/sources/views/config/properties/table.js","webpack://ab_platform_web/./js/webix/components/sources/views/filter.js","webpack://ab_platform_web/./js/webix/components/sources/views/mode.js","webpack://ab_platform_web/./js/webix/components/sources/views/toolbar.js","webpack://ab_platform_web/./js/webix/components/sources/views/chart.js","webpack://ab_platform_web/./js/webix/components/sources/views/config/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/config/popup.js","webpack://ab_platform_web/./js/webix/components/sources/views/main.js","webpack://ab_platform_web/./js/webix/components/sources/views/table.js","webpack://ab_platform_web/./js/webix/components/node_modules/@xbs/rengine/dist/rengine.es6.js","webpack://ab_platform_web/./js/webix/components/sources/models/LocalData.js","webpack://ab_platform_web/./js/webix/components/sources/views/common/export.js","webpack://ab_platform_web/./js/webix/components/sources/views/common/toolbar.js","webpack://ab_platform_web/./js/webix/components/sources/jet-restate-bind/index.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/inputlist.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/icons.js","webpack://ab_platform_web/./js/webix/components/node_modules/@xbs/query/codebase/query.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/common.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/prompt.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/queryselect.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/query.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/data.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/other/summarypopup.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/other/bucket.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/other/bucketpopup.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/groupselect.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/other/buckets.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/other/datepopup.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/other/summary.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/other/groups.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/other/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/other/sorts.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/structure/axis.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/structure/baseview.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/structure/colorpopup.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/rsearch.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/structure/chartseries.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/structure/chart.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/structure/column.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/structure/heatmap.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/structure/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/editor/structure/table.js","webpack://ab_platform_web/./js/webix/components/sources/views/empty.js","webpack://ab_platform_web/./js/webix/components/sources/views/heatmap.js","webpack://ab_platform_web/./js/webix/components/sources/views/menu.js","webpack://ab_platform_web/./js/webix/components/sources/views/modules.js","webpack://ab_platform_web/./js/webix/components/sources/views/table/export.js","webpack://ab_platform_web/./js/webix/components/sources/views/table/toolbar.js","webpack://ab_platform_web/./js/webix/components/sources/views/table/index.js","webpack://ab_platform_web/./js/webix/components/node_modules/jet-hotkey/index.js","webpack://ab_platform_web/./js/webix/components/sources/models/Charts.js","webpack://ab_platform_web/./js/webix/components/node_modules/@xbs/jet-helpers/waitVisible.js","webpack://ab_platform_web/./js/webix/components/sources/views/bars/add.js","webpack://ab_platform_web/./js/webix/components/sources/views/bars/date.js","webpack://ab_platform_web/./js/webix/components/sources/views/bars/nav.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/palette.js","webpack://ab_platform_web/./js/webix/components/sources/views/side/editor.js","webpack://ab_platform_web/./js/webix/components/sources/views/side/popup.js","webpack://ab_platform_web/./js/webix/components/sources/views/side/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/bars/navpopup.js","webpack://ab_platform_web/./js/webix/components/sources/views/bars/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/event/actionmenu.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/dates.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/ical.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/recurring.js","webpack://ab_platform_web/./js/webix/components/sources/views/event/recurringform.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/editrecurring.js","webpack://ab_platform_web/./js/webix/components/sources/views/event/form.js","webpack://ab_platform_web/./js/webix/components/sources/views/event/formpopup.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/copypaste.js","webpack://ab_platform_web/./js/webix/components/sources/views/event/info.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/colors.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/common/actionpopup.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/templates.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/common/unitlist.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/agenda/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/common/hourscale.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/common/multimore.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/selection.js","webpack://ab_platform_web/./js/webix/components/sources/helpers/resizer.js","webpack://ab_platform_web/./js/webix/components/node_modules/@xbs/webix-gantt-lib/dist/wgantt.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/day/events.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/day/multiday.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/day/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/month/compact.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/month/more.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/month/events.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/month/header.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/month/list.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/month/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/timeline/bar.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/timeline/more.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/timeline/chart.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/timeline/scale.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/timeline/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/units/events.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/units/header.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/units/multidaylist.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/units/multiday.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/units/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/week/compact.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/week/header.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/week/multiday.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/week/index.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/year/calendar.js","webpack://ab_platform_web/./js/webix/components/sources/views/modes/year/index.js","webpack://ab_platform_web/./js/webix/locales/th-TH.js","webpack://ab_platform_web/./js/webix/components/gantt/gantt.min.css?01a8","webpack://ab_platform_web/./js/webix/components/reports/reports.min.css?71d1","webpack://ab_platform_web/./js/webix/components/query/query.min.css?5ecb","webpack://ab_platform_web/./js/webix/components/scheduler/scheduler.min.css?b355","webpack://ab_platform_web/./js/webix/components/querybuilder/querybuilder.min.css?d1c4","webpack://ab_platform_web/./js/webix/components/hint/hint.css?8c20","webpack://ab_platform_web/./js/webix/extras/tinymce.js","webpack://ab_platform_web/./js/webix/webixResources.js"],"sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 69907;\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 24327;\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 31163;\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 38509;\nmodule.exports = webpackEmptyContext;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@charset \\\"UTF-8\\\";.webix_gantt_tree .wxi-plus,.webix_gantt_tree .wxi-plus-circle{line-height:42px;font-size:22px}.webix_gantt_link{top:6px;width:16px;height:16px}.webix_gantt_milestone .webix_gantt_link{top:2px}.webix_gantt_milestone .webix_gantt_link_left.webix_gantt_link{left:-24px}.webix_gantt_milestone .webix_gantt_link_right.webix_gantt_link{right:-24px}.webix_gantt_scale .webix_template{padding:0}.webix_gantt_scale_row{display:flex;box-sizing:border-box}.webix_gantt_scale_row:not(:last-child){border-bottom:1px solid #dadee0}.webix_gantt_scale_cell{display:flex;flex:0 0 auto;justify-content:center;align-items:center;border-right:1px solid #dadee0;box-sizing:border-box;background-color:#f4f5f9}.webix_gantt_layer{position:absolute;top:0;left:0;width:100%;height:100%}.webix_gantt_task_base{position:absolute;box-sizing:border-box;border-radius:2px;color:#fff;cursor:pointer}.webix_gantt_project{background-color:#38aea2}.webix_gantt_task{background-color:#6ba8cb}.webix_gantt_project:hover,.webix_gantt_task:hover{z-index:3;box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_gantt_milestone{background-color:transparent}.webix_gantt_in_action .webix_gantt_task_base,.webix_gantt_task_in_action{pointer-events:none}.webix_drag_zone.webix_gantt_task_base{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_drag_zone.webix_gantt_task_base.webix_gantt_milestone{box-shadow:none}.webix_drag_zone.webix_gantt_task_base.webix_gantt_milestone .webix_gantt_content{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_gantt_progress{height:100%;background-color:#4d96c0;border-radius:2px 0 0 2px}.webix_gantt_project .webix_gantt_progress{background-color:#2e8f85}.webix_gantt_milestone .webix_gantt_content{transform:rotate(45deg);background-color:#cf89d5;border-radius:inherit;padding:0;width:100%;text-overflow:clip}.webix_gantt_milestone .webix_gantt_content span{visibility:hidden}.webix_gantt_milestone:hover .webix_gantt_content,.webix_gantt_milestone .webix_gantt_content:hover{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_gantt_progress_drag{position:absolute;z-index:1;cursor:ew-resize;top:100%;border:10px solid transparent;border-bottom:10px solid #dadee0;margin-top:-19px;margin-left:-10px;visibility:hidden}.webix_gantt_task_base:hover .webix_gantt_progress_drag,.webix_gantt_mode_progress .webix_gantt_progress_drag{visibility:visible}.webix_gantt_progress_drag::before{content:\\\"\\\";position:absolute;border:8px solid transparent;border-bottom:8px solid #fff;top:-7px;left:-8px}.webix_gantt_progress_percent{position:absolute;left:-10px;top:9px;display:inline-block;line-height:14px;width:20px;border:1px solid #dadee0;border-top:0;border-radius:2px 2px 4px 4px;box-sizing:border-box;background:#fff;color:#1ca1c1;text-align:center;font-size:10px}.webix_gantt_content{text-align:center;line-height:30px;position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;user-select:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 12px}.webix_gantt_link{position:absolute;z-index:2;border-radius:50%;border:1px solid #dadee0;background-color:#fff;cursor:pointer;user-select:none;opacity:0}.webix_gantt_link_visible .webix_gantt_content:hover,.webix_gantt_task_base.webix_gantt_link_visible:hover,.webix_gantt_task_base.webix_gantt_link_visible:hover .webix_gantt_content{box-shadow:none}.webix_gantt_task,.webix_gantt_project{box-shadow:#fff 1px 0 0}.webix_gantt_milestone .webix_gantt_content{box-shadow:#fff 1px -1px 0}.webix_gantt_task.webix_gantt_link_visible .webix_gantt_progress_drag{visibility:hidden}.webix_gantt_link_visible .webix_gantt_link{opacity:1}.webix_gantt_link_left{left:-9px}.webix_gantt_link_right{right:-9px}.webix_gantt_task_base:hover .webix_gantt_link,.webix_gantt_link:hover{opacity:1}.webix_gantt_readonly .webix_gantt_task_base .webix_gantt_link{display:none}.webix_gantt_group.webix_gantt_project{cursor:default}.webix_gantt_group.webix_gantt_project .webix_gantt_link{display:none}.webix_gantt_touch_bars .webix_gantt_task .webix_gantt_content{padding:0 32px}.webix_gantt_touch_bars .webix_gantt_task::before,.webix_gantt_touch_bars .webix_gantt_task::after{content:\\\"\\\";font-size:20px;font-family:\\\"Webix Material Icons\\\";position:absolute;visibility:hidden;top:50%;margin-top:-10px}.webix_gantt_touch_bars .webix_gantt_task::before{left:12px}.webix_gantt_touch_bars .webix_gantt_task::after{right:12px}.webix_gantt_touch_bars .webix_gantt_task_base .webix_gantt_progress_drag{visibility:hidden}.webix_gantt_touch_bars .webix_gantt_mode_start::before,.webix_gantt_touch_bars .webix_gantt_mode_end::after,.webix_gantt_touch_bars .webix_gantt_task:hover::before,.webix_gantt_touch_bars .webix_gantt_task:hover::after{visibility:visible}.webix_gantt_task_base.webix_gantt_last::after{content:\\\"\\\";display:block;height:7px}.webix_gantt_task_base.webix_gantt_last .webix_gantt_progress_drag{transform:rotate(180deg);top:unset;bottom:100%;margin-bottom:-19px}.webix_gantt_task_base.webix_gantt_last .webix_gantt_progress_percent{transform:rotate(180deg);top:8.5px;border-radius:4px 4px 2px 2px;border:1px solid #dadee0;border-bottom:0}.webix_gantt_bars,.webix_gantt_touch_bars,.webix_gantt_links,.webix_gantt_holidays{background:transparent}.webix_gantt_bars,.webix_gantt_touch_bars{border-color:#fff}.webix_gantt_links .webix_template{position:relative;padding:0}.webix_gantt_links polyline{stroke:orange;fill:transparent;stroke-width:2}.webix_gantt_temp_line{pointer-events:none;position:absolute;z-index:1;top:0;left:0}.webix_gantt_bar_selection{background-color:rgba(195,200,222,0.2);position:absolute;top:-100px;pointer-events:none}.webix_gantt_markers{pointer-events:none;position:absolute}.webix_gantt_marker{position:absolute;left:-100px;top:0;width:2px;height:inherit;margin-left:-1px;background-color:#1ca1c1;opacity:.6}.webix_gantt_marker_text{display:inline-block;padding:4px 8px;line-height:16px;white-space:nowrap;border-bottom-right-radius:4px;background-color:inherit;color:#fff}.webix_gantt_marker.webix_gantt_today_marker{background-color:#ff5c4c}.webix_gantt_holidays .webix_template{position:relative;padding:0}.webix_gantt_bar_holidays,.webix_gantt_bar_resource_holidays{position:absolute;pointer-events:none}.webix_gantt_holiday{position:absolute;background-color:rgba(97,120,151,0.12)}.webix_gantt_bar_resource_holidays .webix_gantt_holiday{background-color:rgba(97,120,151,0.12)}.webix_gantt_bar_resource_holidays .webix_gantt_work_day{position:absolute;background-color:#fff}.webix_gantt_bar_holidays .webix_gantt_holiday{top:0;height:inherit}.webix_gantt_scale_cell.webix_gantt_holiday_scale{background-color:rgba(97,120,151,0.12)}.webix_gantt_critical.webix_gantt_task{background:#ff5c4c}.webix_gantt_critical.webix_gantt_task .webix_gantt_progress{background:#ff3723}.webix_gantt_critical.webix_gantt_milestone{background-color:transparent}.webix_gantt_critical.webix_gantt_milestone .webix_gantt_content{background:#ff5c4c}.webix_gantt_critical.webix_gantt_project{background-color:#f50}.webix_gantt_critical.webix_gantt_project .webix_gantt_progress{background-color:#d64700}.webix_gantt_links polyline.webix_gantt_line_critical{stroke:#ff5c4c}.webix_gantt_split_selection{position:absolute;z-index:2;background-color:rgba(107,168,203,0.2);border:1px solid #6ba8cb;border-radius:2px}.webix_gantt_split_task .webix_tree_close{visibility:hidden}.webix_gantt_split_container{position:absolute;pointer-events:none;background-image:linear-gradient(to right,#1ca1c1 50%,rgba(255,255,255,0) 0);background-position:bottom;background-size:14px 2px;background-repeat:repeat-x}.webix_gantt_baseline_task,.webix_gantt_baseline_project{position:absolute;height:5px;border-radius:2px}.webix_gantt_baseline_task{background-color:rgba(24,80,111,0.75)}.webix_gantt_baseline_project{background-color:rgba(7,80,73,0.8)}.webix_gantt_task_info ul{margin:0;padding:5px 0 0 15px}.webix_gantt_task_info .webix_template{overflow:auto;padding:0 0 0 2px;line-height:20px}ul.webix_gantt_info_list_resources{padding:5px 0 0}.webix_gantt_info_resource{display:flex;align-items:stretch;padding:0 0 1px;line-height:normal}.webix_gantt_info_list_text_row{display:flex;align-items:baseline;padding-top:4px}.webix_gantt_info_list_text{min-width:130px;margin-left:8px;margin-right:8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.webix_gantt_info_list_text.webix_gantt_resource_section{padding-left:0}.webix_gantt_task_title{color:#313131;font-weight:500;font-size:16px}.webix_gantt_task_text{line-height:20px}.webix_gantt_info_list_planned{padding-top:5px}.webix_gantt_form_tree .webix_gantt_title .webix_cell{padding-left:8px}.webix_gantt_form_tree .webix_gantt_action .wxi-trash{margin-left:-10px;height:20px;font-size:18px}.webix_gantt_form_tree .webix_cell{border-bottom-color:transparent}.webix_gantt_form_tree .webix_gantt_type .webix_cell,.webix_gantt_form_tree .webix_gantt_value .webix_cell{padding-right:4px;text-align:right}.webix_gantt_form_tree .webix_dt_editor input{text-align:right}.webix_gantt_form_counter .webix_inp_counter_value{width:calc(50% - 60px)}.webix_list .webix_gantt_resource_section{float:right;text-align:right}.webix_gantt_resource_section{padding-left:5px;color:#888;width:80px;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.webix_gantt_resource_table .webix_gantt_title .webix_cell.webix_gantt_select_editor{box-shadow:inset 0 0 0 1px #1ca1c1;border-radius:2px;padding-left:8px;background:#fff}.webix_gantt_select_editor_popup .webix_selected{box-shadow:none}.webix_gantt_select_editor_popup .webix_list_item,.webix_gantt_select_editor_popup .webix_list_item.webix_selected{padding:0 8px;line-height:36px}.webix_gantt_form_unit_title{padding-right:12px}.webix_gantt_table_hover[aria-level=\\\"2\\\"],.webix_gantt_link_table_hover[aria-level=\\\"2\\\"]{background:rgba(244,245,249,0.6)}.webix_gantt .webix_transparent .webix_button{color:#1ca1c1}.webix_gantt .webix_transparent .webix_el_box:not(.webix_disabled_box) .webix_icon_btn{color:#1ca1c1}.webix_gantt_select_editor_popup .webix_scroll_cont:empty:before{content:attr(placeholder);font-size:12px;font-style:italic;color:#888;text-align:center;display:inline-block;width:100%;line-height:28px}.webix_gantt_datepicker .webix_cal_icon_clear{display:none}.webix_gantt_tree .webix_gantt_action .webix_icon{cursor:pointer}.webix_gantt_tree .webix_gantt_action .webix_icon:hover{color:#1ca1c1}.webix_gantt_tree .webix_column.webix_gantt_action>div,.webix_gantt_tree .webix_hcell.webix_gantt_action{padding:0 11px}.webix_gantt_tree .webix_gantt_title .webix_cell{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.webix_gantt_tree .webix_column>div.webix_row_select{background-color:#f4f5f9;color:#475466}.webix_gantt_tree .webix_ss_body .webix_column>div{border-right-color:transparent;border-left-color:transparent}.webix_gantt_resizer{background-color:#ebedf0}.webix_gantt_resizer.webix_resizer_x{z-index:5;position:relative;overflow:visible}.webix_gantt_resizer.webix_resizer_x:after{position:absolute;left:-4px;height:100%;content:\\\"\\\";width:9px}.webix_drag_zone .webix_dd_drag.webix_gantt_tree_no_icon .webix_tree_close{visibility:hidden}@font-face{font-family:\\\"gantt-webfont\\\";src:url(\\\"fonts/gantt-webfont.woff2\\\") format(\\\"woff2\\\"),url(\\\"fonts/gantt-webfont.woff\\\") format(\\\"woff\\\");font-weight:normal;font-style:normal}[class^=gti-]:before,[class*=gti-]:before{font-family:\\\"gantt-webfont\\\";display:inline-block;font-style:normal;font-weight:normal;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transform:translate(0,0)}.gti-menu:before{content:\\\"\\\"}.webix_gantt_accordion .webix_accordionitem{border-color:transparent}.webix_gantt_accordion .webix_accordionitem_header{border-color:transparent;font-size:inherit}.webix_gantt_accordion .webix_accordionitem_header .webix_accordionitem_button{color:#94a1b3}.webix_gantt_accordion .webix_accordionitem.collapsed .webix_accordionitem_header .webix_accordionitem_button{color:#94a1b3}.webix_gantt_accordion .webix_accordionitem .webix_accordionitem_header.collapsed .webix_accordionitem_button:before{content:\\\"\\\"}.webix_gantt_accordion .webix_accordionitem .webix_accordionitem_header .webix_accordionitem_button{margin:0 6px 0 1px}.webix_gantt_accordion .webix_accordionitem .webix_accordionitem_header .webix_accordionitem_button:before{content:\\\"\\\"}.webix_gantt_accordion .webix_accordionitem.collapsed .webix_accordionitem_header:hover,.webix_gantt_accordion .webix_accordionitem .webix_accordionitem_header:hover{background-color:rgba(195,200,222,0.2)}.webix_gantt_accordion .webix_accordionitem_label{color:#313131}.webix_gantt_accordion .webix_accordionitem .webix_accordionitem_header{background-color:#f4f5f9}.webix_gantt_person_avatar,.webix_gantt_cell_remain_num{vertical-align:middle;margin:4px 4px 4px 0;height:24px;line-height:24px;flex-shrink:0;width:24px;font-size:12px;border-radius:50%;display:inline-block;text-align:center;color:rgba(255,255,255,0.9)}.webix_gantt_person_avatar_big{height:32px;line-height:32px;width:32px;font-size:14px}.webix_gantt_person_avatar_0{background:#00a037}.webix_gantt_person_avatar_1{background:#13a1aa}.webix_gantt_person_avatar_2{background:#fd772c}.webix_gantt_person_avatar_3{background:#b26bd3}.webix_gantt_person_avatar_4{background:#c87095}.webix_gantt_person_avatar_5{background:#eb2f89}.webix_gantt_person_avatar_6{background:#9bb402}.webix_gantt_person_avatar_7{background:#e7a90b}.webix_gantt_person_avatar_8{background:#0bbed7}.webix_gantt_person_avatar_9{background:#038cd9}.webix_gantt_tree_column_resources .webix_cell{padding:0 8px}.webix_gantt_cell_assigned_text{font-size:12px}.webix_gantt_cell_assigned_last{width:24px;display:inline-block}.webix_gantt_cell_remain_num{position:relative;left:-28px;z-index:1;background:rgba(0,0,0,0.5)}.webix_gantt_avatar_box{height:100%;display:flex;align-items:center}.webix_gantt_avatar_box .webix_icon{flex-basis:20px}.webix_gantt_avatar_box_inline{display:inline-flex;align-items:center}.webix_gantt_avatar_option_box{display:flex;align-items:center;justify-content:space-between}.webix_gantt_editor_avatar_name{max-width:170px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-left:2px}.webix_popup .webix_gantt_editor_avatar_name{max-width:190px}.webix_gantt_absbutton{border-radius:50%;z-index:91}.webix_gantt_absbutton .webix_el_box{background-color:#1ca1c1}.webix_gantt_absbutton .webix_el_box .webix_icon_button:hover:before{background-color:#1992af}.webix_gantt_absbutton .webix_el_box .webix_icon{color:#fff}.webix_gantt_resdiagram_tree .webix_tree_none,.webix_gantt_resdiagram_tree .webix_tree_folder_open{cursor:default}.webix_gantt_resdiagram_tree .webix_cell{text-overflow:ellipsis}.webix_gantt_resdiagram_tree .webix_ss_body .webix_column>div{border-right-color:transparent;border-left-color:transparent}.webix_gantt_resdiagram_chart.webix_tree .webix_scroll_cont>.webix_tree_leaves{padding:0}.webix_gantt_resdiagram_chart.webix_tree .webix_scroll_cont>.webix_tree_leaves:last-child::after{content:\\\"\\\";display:block;height:2px}.webix_gantt_diagram_marker{display:inline-block;position:absolute;color:#fff;text-align:center;background-color:#55cd97;border-radius:32px;width:32px;height:32px;line-height:32px}.webix_gantt_diagram_marker.webix_gantt_overload{background-color:#ff5c4c}.webix_gantt_diagram_line.webix_tree_item{padding:4px}.webix_gantt .webix_progress_top{z-index:10000}.webix_gantt_scale{border-bottom-color:#5ccce7}.webix_gantt_danger .webix_button{color:#ff5c4c;background-color:#fff1ef}.webix_gantt_danger .webix_button:hover,.webix_gantt_danger .webix_button:focus{background-color:#ffe7e5}.webix_gantt_danger .webix_button:active{background-color:#ffdedb}\", \"\",{\"version\":3,\"sources\":[\"webpack://./js/webix/components/gantt/gantt.min.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"@charset \\\"UTF-8\\\";.webix_gantt_tree .wxi-plus,.webix_gantt_tree .wxi-plus-circle{line-height:42px;font-size:22px}.webix_gantt_link{top:6px;width:16px;height:16px}.webix_gantt_milestone .webix_gantt_link{top:2px}.webix_gantt_milestone .webix_gantt_link_left.webix_gantt_link{left:-24px}.webix_gantt_milestone .webix_gantt_link_right.webix_gantt_link{right:-24px}.webix_gantt_scale .webix_template{padding:0}.webix_gantt_scale_row{display:flex;box-sizing:border-box}.webix_gantt_scale_row:not(:last-child){border-bottom:1px solid #dadee0}.webix_gantt_scale_cell{display:flex;flex:0 0 auto;justify-content:center;align-items:center;border-right:1px solid #dadee0;box-sizing:border-box;background-color:#f4f5f9}.webix_gantt_layer{position:absolute;top:0;left:0;width:100%;height:100%}.webix_gantt_task_base{position:absolute;box-sizing:border-box;border-radius:2px;color:#fff;cursor:pointer}.webix_gantt_project{background-color:#38aea2}.webix_gantt_task{background-color:#6ba8cb}.webix_gantt_project:hover,.webix_gantt_task:hover{z-index:3;box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_gantt_milestone{background-color:transparent}.webix_gantt_in_action .webix_gantt_task_base,.webix_gantt_task_in_action{pointer-events:none}.webix_drag_zone.webix_gantt_task_base{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_drag_zone.webix_gantt_task_base.webix_gantt_milestone{box-shadow:none}.webix_drag_zone.webix_gantt_task_base.webix_gantt_milestone .webix_gantt_content{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_gantt_progress{height:100%;background-color:#4d96c0;border-radius:2px 0 0 2px}.webix_gantt_project .webix_gantt_progress{background-color:#2e8f85}.webix_gantt_milestone .webix_gantt_content{transform:rotate(45deg);background-color:#cf89d5;border-radius:inherit;padding:0;width:100%;text-overflow:clip}.webix_gantt_milestone .webix_gantt_content span{visibility:hidden}.webix_gantt_milestone:hover .webix_gantt_content,.webix_gantt_milestone .webix_gantt_content:hover{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_gantt_progress_drag{position:absolute;z-index:1;cursor:ew-resize;top:100%;border:10px solid transparent;border-bottom:10px solid #dadee0;margin-top:-19px;margin-left:-10px;visibility:hidden}.webix_gantt_task_base:hover .webix_gantt_progress_drag,.webix_gantt_mode_progress .webix_gantt_progress_drag{visibility:visible}.webix_gantt_progress_drag::before{content:\\\"\\\";position:absolute;border:8px solid transparent;border-bottom:8px solid #fff;top:-7px;left:-8px}.webix_gantt_progress_percent{position:absolute;left:-10px;top:9px;display:inline-block;line-height:14px;width:20px;border:1px solid #dadee0;border-top:0;border-radius:2px 2px 4px 4px;box-sizing:border-box;background:#fff;color:#1ca1c1;text-align:center;font-size:10px}.webix_gantt_content{text-align:center;line-height:30px;position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;user-select:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 12px}.webix_gantt_link{position:absolute;z-index:2;border-radius:50%;border:1px solid #dadee0;background-color:#fff;cursor:pointer;user-select:none;opacity:0}.webix_gantt_link_visible .webix_gantt_content:hover,.webix_gantt_task_base.webix_gantt_link_visible:hover,.webix_gantt_task_base.webix_gantt_link_visible:hover .webix_gantt_content{box-shadow:none}.webix_gantt_task,.webix_gantt_project{box-shadow:#fff 1px 0 0}.webix_gantt_milestone .webix_gantt_content{box-shadow:#fff 1px -1px 0}.webix_gantt_task.webix_gantt_link_visible .webix_gantt_progress_drag{visibility:hidden}.webix_gantt_link_visible .webix_gantt_link{opacity:1}.webix_gantt_link_left{left:-9px}.webix_gantt_link_right{right:-9px}.webix_gantt_task_base:hover .webix_gantt_link,.webix_gantt_link:hover{opacity:1}.webix_gantt_readonly .webix_gantt_task_base .webix_gantt_link{display:none}.webix_gantt_group.webix_gantt_project{cursor:default}.webix_gantt_group.webix_gantt_project .webix_gantt_link{display:none}.webix_gantt_touch_bars .webix_gantt_task .webix_gantt_content{padding:0 32px}.webix_gantt_touch_bars .webix_gantt_task::before,.webix_gantt_touch_bars .webix_gantt_task::after{content:\\\"\\\";font-size:20px;font-family:\\\"Webix Material Icons\\\";position:absolute;visibility:hidden;top:50%;margin-top:-10px}.webix_gantt_touch_bars .webix_gantt_task::before{left:12px}.webix_gantt_touch_bars .webix_gantt_task::after{right:12px}.webix_gantt_touch_bars .webix_gantt_task_base .webix_gantt_progress_drag{visibility:hidden}.webix_gantt_touch_bars .webix_gantt_mode_start::before,.webix_gantt_touch_bars .webix_gantt_mode_end::after,.webix_gantt_touch_bars .webix_gantt_task:hover::before,.webix_gantt_touch_bars .webix_gantt_task:hover::after{visibility:visible}.webix_gantt_task_base.webix_gantt_last::after{content:\\\"\\\";display:block;height:7px}.webix_gantt_task_base.webix_gantt_last .webix_gantt_progress_drag{transform:rotate(180deg);top:unset;bottom:100%;margin-bottom:-19px}.webix_gantt_task_base.webix_gantt_last .webix_gantt_progress_percent{transform:rotate(180deg);top:8.5px;border-radius:4px 4px 2px 2px;border:1px solid #dadee0;border-bottom:0}.webix_gantt_bars,.webix_gantt_touch_bars,.webix_gantt_links,.webix_gantt_holidays{background:transparent}.webix_gantt_bars,.webix_gantt_touch_bars{border-color:#fff}.webix_gantt_links .webix_template{position:relative;padding:0}.webix_gantt_links polyline{stroke:orange;fill:transparent;stroke-width:2}.webix_gantt_temp_line{pointer-events:none;position:absolute;z-index:1;top:0;left:0}.webix_gantt_bar_selection{background-color:rgba(195,200,222,0.2);position:absolute;top:-100px;pointer-events:none}.webix_gantt_markers{pointer-events:none;position:absolute}.webix_gantt_marker{position:absolute;left:-100px;top:0;width:2px;height:inherit;margin-left:-1px;background-color:#1ca1c1;opacity:.6}.webix_gantt_marker_text{display:inline-block;padding:4px 8px;line-height:16px;white-space:nowrap;border-bottom-right-radius:4px;background-color:inherit;color:#fff}.webix_gantt_marker.webix_gantt_today_marker{background-color:#ff5c4c}.webix_gantt_holidays .webix_template{position:relative;padding:0}.webix_gantt_bar_holidays,.webix_gantt_bar_resource_holidays{position:absolute;pointer-events:none}.webix_gantt_holiday{position:absolute;background-color:rgba(97,120,151,0.12)}.webix_gantt_bar_resource_holidays .webix_gantt_holiday{background-color:rgba(97,120,151,0.12)}.webix_gantt_bar_resource_holidays .webix_gantt_work_day{position:absolute;background-color:#fff}.webix_gantt_bar_holidays .webix_gantt_holiday{top:0;height:inherit}.webix_gantt_scale_cell.webix_gantt_holiday_scale{background-color:rgba(97,120,151,0.12)}.webix_gantt_critical.webix_gantt_task{background:#ff5c4c}.webix_gantt_critical.webix_gantt_task .webix_gantt_progress{background:#ff3723}.webix_gantt_critical.webix_gantt_milestone{background-color:transparent}.webix_gantt_critical.webix_gantt_milestone .webix_gantt_content{background:#ff5c4c}.webix_gantt_critical.webix_gantt_project{background-color:#f50}.webix_gantt_critical.webix_gantt_project .webix_gantt_progress{background-color:#d64700}.webix_gantt_links polyline.webix_gantt_line_critical{stroke:#ff5c4c}.webix_gantt_split_selection{position:absolute;z-index:2;background-color:rgba(107,168,203,0.2);border:1px solid #6ba8cb;border-radius:2px}.webix_gantt_split_task .webix_tree_close{visibility:hidden}.webix_gantt_split_container{position:absolute;pointer-events:none;background-image:linear-gradient(to right,#1ca1c1 50%,rgba(255,255,255,0) 0);background-position:bottom;background-size:14px 2px;background-repeat:repeat-x}.webix_gantt_baseline_task,.webix_gantt_baseline_project{position:absolute;height:5px;border-radius:2px}.webix_gantt_baseline_task{background-color:rgba(24,80,111,0.75)}.webix_gantt_baseline_project{background-color:rgba(7,80,73,0.8)}.webix_gantt_task_info ul{margin:0;padding:5px 0 0 15px}.webix_gantt_task_info .webix_template{overflow:auto;padding:0 0 0 2px;line-height:20px}ul.webix_gantt_info_list_resources{padding:5px 0 0}.webix_gantt_info_resource{display:flex;align-items:stretch;padding:0 0 1px;line-height:normal}.webix_gantt_info_list_text_row{display:flex;align-items:baseline;padding-top:4px}.webix_gantt_info_list_text{min-width:130px;margin-left:8px;margin-right:8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.webix_gantt_info_list_text.webix_gantt_resource_section{padding-left:0}.webix_gantt_task_title{color:#313131;font-weight:500;font-size:16px}.webix_gantt_task_text{line-height:20px}.webix_gantt_info_list_planned{padding-top:5px}.webix_gantt_form_tree .webix_gantt_title .webix_cell{padding-left:8px}.webix_gantt_form_tree .webix_gantt_action .wxi-trash{margin-left:-10px;height:20px;font-size:18px}.webix_gantt_form_tree .webix_cell{border-bottom-color:transparent}.webix_gantt_form_tree .webix_gantt_type .webix_cell,.webix_gantt_form_tree .webix_gantt_value .webix_cell{padding-right:4px;text-align:right}.webix_gantt_form_tree .webix_dt_editor input{text-align:right}.webix_gantt_form_counter .webix_inp_counter_value{width:calc(50% - 60px)}.webix_list .webix_gantt_resource_section{float:right;text-align:right}.webix_gantt_resource_section{padding-left:5px;color:#888;width:80px;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.webix_gantt_resource_table .webix_gantt_title .webix_cell.webix_gantt_select_editor{box-shadow:inset 0 0 0 1px #1ca1c1;border-radius:2px;padding-left:8px;background:#fff}.webix_gantt_select_editor_popup .webix_selected{box-shadow:none}.webix_gantt_select_editor_popup .webix_list_item,.webix_gantt_select_editor_popup .webix_list_item.webix_selected{padding:0 8px;line-height:36px}.webix_gantt_form_unit_title{padding-right:12px}.webix_gantt_table_hover[aria-level=\\\"2\\\"],.webix_gantt_link_table_hover[aria-level=\\\"2\\\"]{background:rgba(244,245,249,0.6)}.webix_gantt .webix_transparent .webix_button{color:#1ca1c1}.webix_gantt .webix_transparent .webix_el_box:not(.webix_disabled_box) .webix_icon_btn{color:#1ca1c1}.webix_gantt_select_editor_popup .webix_scroll_cont:empty:before{content:attr(placeholder);font-size:12px;font-style:italic;color:#888;text-align:center;display:inline-block;width:100%;line-height:28px}.webix_gantt_datepicker .webix_cal_icon_clear{display:none}.webix_gantt_tree .webix_gantt_action .webix_icon{cursor:pointer}.webix_gantt_tree .webix_gantt_action .webix_icon:hover{color:#1ca1c1}.webix_gantt_tree .webix_column.webix_gantt_action>div,.webix_gantt_tree .webix_hcell.webix_gantt_action{padding:0 11px}.webix_gantt_tree .webix_gantt_title .webix_cell{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.webix_gantt_tree .webix_column>div.webix_row_select{background-color:#f4f5f9;color:#475466}.webix_gantt_tree .webix_ss_body .webix_column>div{border-right-color:transparent;border-left-color:transparent}.webix_gantt_resizer{background-color:#ebedf0}.webix_gantt_resizer.webix_resizer_x{z-index:5;position:relative;overflow:visible}.webix_gantt_resizer.webix_resizer_x:after{position:absolute;left:-4px;height:100%;content:\\\"\\\";width:9px}.webix_drag_zone .webix_dd_drag.webix_gantt_tree_no_icon .webix_tree_close{visibility:hidden}@font-face{font-family:\\\"gantt-webfont\\\";src:url(\\\"fonts/gantt-webfont.woff2\\\") format(\\\"woff2\\\"),url(\\\"fonts/gantt-webfont.woff\\\") format(\\\"woff\\\");font-weight:normal;font-style:normal}[class^=gti-]:before,[class*=gti-]:before{font-family:\\\"gantt-webfont\\\";display:inline-block;font-style:normal;font-weight:normal;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transform:translate(0,0)}.gti-menu:before{content:\\\"\\\"}.webix_gantt_accordion .webix_accordionitem{border-color:transparent}.webix_gantt_accordion .webix_accordionitem_header{border-color:transparent;font-size:inherit}.webix_gantt_accordion .webix_accordionitem_header .webix_accordionitem_button{color:#94a1b3}.webix_gantt_accordion .webix_accordionitem.collapsed .webix_accordionitem_header .webix_accordionitem_button{color:#94a1b3}.webix_gantt_accordion .webix_accordionitem .webix_accordionitem_header.collapsed .webix_accordionitem_button:before{content:\\\"\\\"}.webix_gantt_accordion .webix_accordionitem .webix_accordionitem_header .webix_accordionitem_button{margin:0 6px 0 1px}.webix_gantt_accordion .webix_accordionitem .webix_accordionitem_header .webix_accordionitem_button:before{content:\\\"\\\"}.webix_gantt_accordion .webix_accordionitem.collapsed .webix_accordionitem_header:hover,.webix_gantt_accordion .webix_accordionitem .webix_accordionitem_header:hover{background-color:rgba(195,200,222,0.2)}.webix_gantt_accordion .webix_accordionitem_label{color:#313131}.webix_gantt_accordion .webix_accordionitem .webix_accordionitem_header{background-color:#f4f5f9}.webix_gantt_person_avatar,.webix_gantt_cell_remain_num{vertical-align:middle;margin:4px 4px 4px 0;height:24px;line-height:24px;flex-shrink:0;width:24px;font-size:12px;border-radius:50%;display:inline-block;text-align:center;color:rgba(255,255,255,0.9)}.webix_gantt_person_avatar_big{height:32px;line-height:32px;width:32px;font-size:14px}.webix_gantt_person_avatar_0{background:#00a037}.webix_gantt_person_avatar_1{background:#13a1aa}.webix_gantt_person_avatar_2{background:#fd772c}.webix_gantt_person_avatar_3{background:#b26bd3}.webix_gantt_person_avatar_4{background:#c87095}.webix_gantt_person_avatar_5{background:#eb2f89}.webix_gantt_person_avatar_6{background:#9bb402}.webix_gantt_person_avatar_7{background:#e7a90b}.webix_gantt_person_avatar_8{background:#0bbed7}.webix_gantt_person_avatar_9{background:#038cd9}.webix_gantt_tree_column_resources .webix_cell{padding:0 8px}.webix_gantt_cell_assigned_text{font-size:12px}.webix_gantt_cell_assigned_last{width:24px;display:inline-block}.webix_gantt_cell_remain_num{position:relative;left:-28px;z-index:1;background:rgba(0,0,0,0.5)}.webix_gantt_avatar_box{height:100%;display:flex;align-items:center}.webix_gantt_avatar_box .webix_icon{flex-basis:20px}.webix_gantt_avatar_box_inline{display:inline-flex;align-items:center}.webix_gantt_avatar_option_box{display:flex;align-items:center;justify-content:space-between}.webix_gantt_editor_avatar_name{max-width:170px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-left:2px}.webix_popup .webix_gantt_editor_avatar_name{max-width:190px}.webix_gantt_absbutton{border-radius:50%;z-index:91}.webix_gantt_absbutton .webix_el_box{background-color:#1ca1c1}.webix_gantt_absbutton .webix_el_box .webix_icon_button:hover:before{background-color:#1992af}.webix_gantt_absbutton .webix_el_box .webix_icon{color:#fff}.webix_gantt_resdiagram_tree .webix_tree_none,.webix_gantt_resdiagram_tree .webix_tree_folder_open{cursor:default}.webix_gantt_resdiagram_tree .webix_cell{text-overflow:ellipsis}.webix_gantt_resdiagram_tree .webix_ss_body .webix_column>div{border-right-color:transparent;border-left-color:transparent}.webix_gantt_resdiagram_chart.webix_tree .webix_scroll_cont>.webix_tree_leaves{padding:0}.webix_gantt_resdiagram_chart.webix_tree .webix_scroll_cont>.webix_tree_leaves:last-child::after{content:\\\"\\\";display:block;height:2px}.webix_gantt_diagram_marker{display:inline-block;position:absolute;color:#fff;text-align:center;background-color:#55cd97;border-radius:32px;width:32px;height:32px;line-height:32px}.webix_gantt_diagram_marker.webix_gantt_overload{background-color:#ff5c4c}.webix_gantt_diagram_line.webix_tree_item{padding:4px}.webix_gantt .webix_progress_top{z-index:10000}.webix_gantt_scale{border-bottom-color:#5ccce7}.webix_gantt_danger .webix_button{color:#ff5c4c;background-color:#fff1ef}.webix_gantt_danger .webix_button:hover,.webix_gantt_danger .webix_button:focus{background-color:#ffe7e5}.webix_gantt_danger .webix_button:active{background-color:#ffdedb}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".webix_hint_view.webix_hint_animated .webix_hint_overlay_hole_el {\\n  fill: #000;\\n  -webkit-transition: fill 0.4s ease-in;\\n  -o-transition: fill 0.4s ease-in;\\n  transition: fill 0.4s ease-in;\\n}\\n.webix_hint_view.webix_hint_animated .webix_hint {\\n  opacity: 1;\\n  -webkit-transition: opacity 0.4s ease-in;\\n  -o-transition: opacity 0.4s ease-in;\\n  transition: opacity 0.4s ease-in;\\n}\\n.webix_hint_overlay {\\n  position: fixed;\\n  width: 100%;\\n  height: 100%;\\n  top: 0;\\n  left: 0;\\n  z-index: 1010;\\n  pointer-events: none;\\n  overflow: hidden;\\n  opacity: 0.6;\\n}\\n.webix_hint_view svg {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n.webix_hint_overflow {\\n  pointer-events: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  position: relative;\\n  height: 100%;\\n  width: 100%;\\n  min-width: 100%;\\n}\\n.webix_hint_overflow .webix_window,\\n.webix_hint_overflow .webix_popup {\\n  pointer-events: all;\\n  -webkit-user-select: text;\\n  -moz-user-select: text;\\n  -ms-user-select: text;\\n  user-select: text;\\n}\\n.webix_hint {\\n  position: fixed;\\n  pointer-events: all;\\n  -webkit-user-select: text;\\n  -moz-user-select: text;\\n  -ms-user-select: text;\\n  user-select: text;\\n  display: block;\\n  z-index: 1012;\\n  width: 310px;\\n  border-radius: 2px;\\n  background-color: #FFFFFF;\\n  padding: 22px 50px 80px 22px;\\n  -webkit-box-sizing: border-box;\\n  box-sizing: border-box;\\n  -webkit-box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.1);\\n  box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.1);\\n  opacity: 0;\\n}\\n.webix_hint .webix_hint_label {\\n  color: rgba(0, 0, 0, 0.54);\\n  font-size: 16px;\\n  line-height: 24px;\\n  margin: -5px 0;\\n}\\n.webix_hint .webix_hint_title {\\n  color: rgba(0, 0, 0, 0.87);\\n  font-size: 20px;\\n  font-weight: 500;\\n  line-height: 1;\\n  margin-bottom: 15px;\\n}\\n.webix_hint_buttons {\\n  position: absolute;\\n  bottom: 11px;\\n  right: 22px;\\n}\\n.webix_hint_buttons .webix_hint_button {\\n  display: inline-block;\\n  pointer-events: all;\\n  -webkit-box-sizing: content-box;\\n  box-sizing: content-box;\\n  cursor: pointer;\\n  margin: 0 auto;\\n  height: 32px;\\n  padding: 0px 16px;\\n  border: none;\\n  border-radius: 2px;\\n  font-size: 14px;\\n  font-weight: 500;\\n  line-height: 16px;\\n  text-transform: uppercase;\\n}\\n.webix_hint_buttons .webix_hint_button.webix_hint_button_next {\\n  margin-left: 17px;\\n  background-color: #00BFC7;\\n  color: #fff;\\n}\\n.webix_hint_buttons .webix_hint_button.webix_hint_button_next:hover {\\n  background-color: #27D6DD;\\n}\\n.webix_hint_buttons .webix_hint_button.webix_hint_button_prev {\\n  color: #0097A7;\\n  background-color: #fff;\\n}\\n.webix_hint_buttons .webix_hint_button.webix_hint_button_prev:hover {\\n  background-color: rgba(0, 191, 199, 0.1);\\n}\\n.webix_hint_buttons .webix_hint_button.webix_hint_button_prev.webix_hint_button_hidden {\\n  display: none;\\n}\\n.webix_hint_progress {\\n  position: absolute;\\n  bottom: 17px;\\n  left: 22px;\\n  color: rgba(0, 0, 0, 0.54);\\n  font-size: 14px;\\n}\\n.webix_hint_button_close {\\n  position: absolute;\\n  right: 22px;\\n  top: 20px;\\n  z-index: 1012;\\n  background: transparent;\\n  border: none;\\n  font-size: 22px;\\n  color: rgba(0, 0, 0, 0.54);\\n  pointer-events: all;\\n  cursor: pointer;\\n  padding: 0;\\n  line-height: 1;\\n}\\n.webix_hint_button_close:hover {\\n  color: rgba(0, 0, 0, 0.7);\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./js/webix/components/hint/hint.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,UAAU;EACV,qCAAqC;EACrC,gCAAgC;EAChC,6BAA6B;AAC/B;AACA;EACE,UAAU;EACV,wCAAwC;EACxC,mCAAmC;EACnC,gCAAgC;AAClC;AACA;EACE,eAAe;EACf,WAAW;EACX,YAAY;EACZ,MAAM;EACN,OAAO;EACP,aAAa;EACb,oBAAoB;EACpB,gBAAgB;EAChB,YAAY;AACd;AACA;EACE,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,OAAO;EACP,MAAM;AACR;AACA;EACE,oBAAoB;EACpB,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;EACjB,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,eAAe;AACjB;AACA;;EAEE,mBAAmB;EACnB,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;AACA;EACE,eAAe;EACf,mBAAmB;EACnB,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;EACjB,cAAc;EACd,aAAa;EACb,YAAY;EACZ,kBAAkB;EAClB,yBAAyB;EACzB,4BAA4B;EAC5B,8BAA8B;EAC9B,sBAAsB;EACtB,kFAAkF;EAClF,0EAA0E;EAC1E,UAAU;AACZ;AACA;EACE,0BAA0B;EAC1B,eAAe;EACf,iBAAiB;EACjB,cAAc;AAChB;AACA;EACE,0BAA0B;EAC1B,eAAe;EACf,gBAAgB;EAChB,cAAc;EACd,mBAAmB;AACrB;AACA;EACE,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;AACA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,+BAA+B;EAC/B,uBAAuB;EACvB,eAAe;EACf,cAAc;EACd,YAAY;EACZ,iBAAiB;EACjB,YAAY;EACZ,kBAAkB;EAClB,eAAe;EACf,gBAAgB;EAChB,iBAAiB;EACjB,yBAAyB;AAC3B;AACA;EACE,iBAAiB;EACjB,yBAAyB;EACzB,WAAW;AACb;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,cAAc;EACd,sBAAsB;AACxB;AACA;EACE,wCAAwC;AAC1C;AACA;EACE,aAAa;AACf;AACA;EACE,kBAAkB;EAClB,YAAY;EACZ,UAAU;EACV,0BAA0B;EAC1B,eAAe;AACjB;AACA;EACE,kBAAkB;EAClB,WAAW;EACX,SAAS;EACT,aAAa;EACb,uBAAuB;EACvB,YAAY;EACZ,eAAe;EACf,0BAA0B;EAC1B,mBAAmB;EACnB,eAAe;EACf,UAAU;EACV,cAAc;AAChB;AACA;EACE,yBAAyB;AAC3B\",\"sourcesContent\":[\".webix_hint_view.webix_hint_animated .webix_hint_overlay_hole_el {\\n  fill: #000;\\n  -webkit-transition: fill 0.4s ease-in;\\n  -o-transition: fill 0.4s ease-in;\\n  transition: fill 0.4s ease-in;\\n}\\n.webix_hint_view.webix_hint_animated .webix_hint {\\n  opacity: 1;\\n  -webkit-transition: opacity 0.4s ease-in;\\n  -o-transition: opacity 0.4s ease-in;\\n  transition: opacity 0.4s ease-in;\\n}\\n.webix_hint_overlay {\\n  position: fixed;\\n  width: 100%;\\n  height: 100%;\\n  top: 0;\\n  left: 0;\\n  z-index: 1010;\\n  pointer-events: none;\\n  overflow: hidden;\\n  opacity: 0.6;\\n}\\n.webix_hint_view svg {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n.webix_hint_overflow {\\n  pointer-events: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  position: relative;\\n  height: 100%;\\n  width: 100%;\\n  min-width: 100%;\\n}\\n.webix_hint_overflow .webix_window,\\n.webix_hint_overflow .webix_popup {\\n  pointer-events: all;\\n  -webkit-user-select: text;\\n  -moz-user-select: text;\\n  -ms-user-select: text;\\n  user-select: text;\\n}\\n.webix_hint {\\n  position: fixed;\\n  pointer-events: all;\\n  -webkit-user-select: text;\\n  -moz-user-select: text;\\n  -ms-user-select: text;\\n  user-select: text;\\n  display: block;\\n  z-index: 1012;\\n  width: 310px;\\n  border-radius: 2px;\\n  background-color: #FFFFFF;\\n  padding: 22px 50px 80px 22px;\\n  -webkit-box-sizing: border-box;\\n  box-sizing: border-box;\\n  -webkit-box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.1);\\n  box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.1);\\n  opacity: 0;\\n}\\n.webix_hint .webix_hint_label {\\n  color: rgba(0, 0, 0, 0.54);\\n  font-size: 16px;\\n  line-height: 24px;\\n  margin: -5px 0;\\n}\\n.webix_hint .webix_hint_title {\\n  color: rgba(0, 0, 0, 0.87);\\n  font-size: 20px;\\n  font-weight: 500;\\n  line-height: 1;\\n  margin-bottom: 15px;\\n}\\n.webix_hint_buttons {\\n  position: absolute;\\n  bottom: 11px;\\n  right: 22px;\\n}\\n.webix_hint_buttons .webix_hint_button {\\n  display: inline-block;\\n  pointer-events: all;\\n  -webkit-box-sizing: content-box;\\n  box-sizing: content-box;\\n  cursor: pointer;\\n  margin: 0 auto;\\n  height: 32px;\\n  padding: 0px 16px;\\n  border: none;\\n  border-radius: 2px;\\n  font-size: 14px;\\n  font-weight: 500;\\n  line-height: 16px;\\n  text-transform: uppercase;\\n}\\n.webix_hint_buttons .webix_hint_button.webix_hint_button_next {\\n  margin-left: 17px;\\n  background-color: #00BFC7;\\n  color: #fff;\\n}\\n.webix_hint_buttons .webix_hint_button.webix_hint_button_next:hover {\\n  background-color: #27D6DD;\\n}\\n.webix_hint_buttons .webix_hint_button.webix_hint_button_prev {\\n  color: #0097A7;\\n  background-color: #fff;\\n}\\n.webix_hint_buttons .webix_hint_button.webix_hint_button_prev:hover {\\n  background-color: rgba(0, 191, 199, 0.1);\\n}\\n.webix_hint_buttons .webix_hint_button.webix_hint_button_prev.webix_hint_button_hidden {\\n  display: none;\\n}\\n.webix_hint_progress {\\n  position: absolute;\\n  bottom: 17px;\\n  left: 22px;\\n  color: rgba(0, 0, 0, 0.54);\\n  font-size: 14px;\\n}\\n.webix_hint_button_close {\\n  position: absolute;\\n  right: 22px;\\n  top: 20px;\\n  z-index: 1012;\\n  background: transparent;\\n  border: none;\\n  font-size: 22px;\\n  color: rgba(0, 0, 0, 0.54);\\n  pointer-events: all;\\n  cursor: pointer;\\n  padding: 0;\\n  line-height: 1;\\n}\\n.webix_hint_button_close:hover {\\n  color: rgba(0, 0, 0, 0.7);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".wbq-query_list .wbq-field-value,.wbq-query_bar .wbq-field-value{color:#1ca1c1}.wbq-query_list .wbq-field-name,.wbq-query_bar .wbq-field-name{font-weight:500}.wbq-query_list .action-close,.wbq-query_list .action-menu{cursor:pointer;margin-top:10px;right:4px;position:absolute}.wbq-query_bar .action-close,.wbq-query_bar .action-menu{cursor:pointer;margin:8px -10px 0 8px}.wbq-query_list .webix_scroll_cont>.webix_tree_leaves{padding:8px 0}.wbq-query_list .webix_tree_item{height:auto;padding:0 16px;user-select:none;position:relative;background:#f4f5f9;border-radius:2px;white-space:nowrap;overflow:visible !important}.wbq-query_list .webix_tree_item.active-editor{line-height:32px;padding:0;margin-left:4px;margin-right:4px;background-color:#fff}.wbq-query_list .webix_tree_item+.webix_tree_leaves{padding-top:10px;border-left:1px solid #ccd7e6;margin-left:20px;padding-left:16px}.wbq-query_list .webix_tree_item.group{margin:0}.wbq-filter_join{position:absolute;z-index:2;top:-24px;height:20px;line-height:20px;left:0;width:40px;border-radius:20px;text-align:center;display:block;cursor:pointer}.wbq-filter_join_and{color:#fff;background:#fdbf4c}.wbq-filter_join_or{color:#fff;background:#55cd97}.wbq-query_list .webix_tree_leaves>div:first-child>div:first-child .wbq-filter_join{display:none}.wbq-query_bar .webix_tree_leaves>div:first-child>div:first-child .wbq-filter_join{display:none}.wbq-field-box{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:250px}.wbq-query_bar .webix_scroll_cont>.webix_tree_leaves{padding:0;white-space:nowrap;padding:4px 0 4px 0}.wbq-query_bar .webix_tree_leaves,.wbq-query_bar .webix_tree_leaves div{display:inline-block}.wbq-query_bar .webix_tree_item{height:32px;line-height:32px;margin:0 52px 0 0;padding:0 16px;user-select:none;position:relative;background:#f4f5f9;border-radius:2px;white-space:nowrap;overflow:visible !important}.wbq-query_bar .webix_tree_branch_1 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_1 .webix_tree_leaves:after{color:#a78fd5}.wbq-query_bar .webix_tree_branch_2 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_2 .webix_tree_leaves:after{color:#68ccd2}.wbq-query_bar .webix_tree_branch_3 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_3 .webix_tree_leaves:after{color:#999}.wbq-query_bar .group+.webix_tree_leaves:before,.wbq-query_bar .group+.webix_tree_leaves:after{content:\\\"(\\\";margin:0 2px 0 -4px;display:inline-block;transform:scaleX(0.75);font-size:30px;line-height:0;position:relative}.wbq-query_bar .group+.webix_tree_leaves:after{content:\\\")\\\";margin:0 -4px 0 2px}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{border-radius:2px;margin-left:0;margin-right:52px}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves .webix_tree_item{background:#fff;margin-top:0;line-height:32px}.wbq-query_bar .webix_tree_leaves>div:last-child>div{margin-right:0}.wbq-query_bar .webix_tree_leaves>.webix_tree_branch_1>.webix_tree_leaves{padding:4px;margin-top:-4px;margin-bottom:-4px}.wbq-query_bar .wbq-filter_join{top:6px;left:-44px;width:36px}.wbq-query_bar .group{padding:0;height:20px;margin-right:0;background:transparent}.webix_toolbar .wbq-query_bar{background-color:transparent}.wbq-query_list.webix_tree .webix_scroll_cont>.webix_tree_leaves{display:block}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{display:inline-block}.wbq-filter_join_disabled{cursor:default;pointer-events:none}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{background:#f4f5f9}.wbq-query_list .webix_tree_item{line-height:36px;margin-bottom:32px}.wbq-query_bar .group+.webix_tree_leaves:before,.wbq-query_bar .group+.webix_tree_leaves:after{top:4px}.wbq-field-box{margin-bottom:-13px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./js/webix/components/query/query.min.css\"],\"names\":[],\"mappings\":\"AAAA,iEAAiE,aAAa,CAAC,+DAA+D,eAAe,CAAC,2DAA2D,cAAc,CAAC,eAAe,CAAC,SAAS,CAAC,iBAAiB,CAAC,yDAAyD,cAAc,CAAC,sBAAsB,CAAC,sDAAsD,aAAa,CAAC,iCAAiC,WAAW,CAAC,cAAc,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,2BAA2B,CAAC,+CAA+C,gBAAgB,CAAC,SAAS,CAAC,eAAe,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,oDAAoD,gBAAgB,CAAC,6BAA6B,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,uCAAuC,QAAQ,CAAC,iBAAiB,iBAAiB,CAAC,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC,gBAAgB,CAAC,MAAM,CAAC,UAAU,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,aAAa,CAAC,cAAc,CAAC,qBAAqB,UAAU,CAAC,kBAAkB,CAAC,oBAAoB,UAAU,CAAC,kBAAkB,CAAC,oFAAoF,YAAY,CAAC,mFAAmF,YAAY,CAAC,eAAe,oBAAoB,CAAC,eAAe,CAAC,sBAAsB,CAAC,kBAAkB,CAAC,eAAe,CAAC,qDAAqD,SAAS,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,wEAAwE,oBAAoB,CAAC,gCAAgC,WAAW,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,cAAc,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,2BAA2B,CAAC,2HAA2H,aAAa,CAAC,2HAA2H,aAAa,CAAC,2HAA2H,UAAU,CAAC,+FAA+F,WAAW,CAAC,mBAAmB,CAAC,oBAAoB,CAAC,sBAAsB,CAAC,cAAc,CAAC,aAAa,CAAC,iBAAiB,CAAC,+CAA+C,WAAW,CAAC,mBAAmB,CAAC,qDAAqD,iBAAiB,CAAC,aAAa,CAAC,iBAAiB,CAAC,sEAAsE,eAAe,CAAC,YAAY,CAAC,gBAAgB,CAAC,qDAAqD,cAAc,CAAC,0EAA0E,WAAW,CAAC,eAAe,CAAC,kBAAkB,CAAC,gCAAgC,OAAO,CAAC,UAAU,CAAC,UAAU,CAAC,sBAAsB,SAAS,CAAC,WAAW,CAAC,cAAc,CAAC,sBAAsB,CAAC,8BAA8B,4BAA4B,CAAC,iEAAiE,aAAa,CAAC,qDAAqD,oBAAoB,CAAC,0BAA0B,cAAc,CAAC,mBAAmB,CAAC,qDAAqD,kBAAkB,CAAC,iCAAiC,gBAAgB,CAAC,kBAAkB,CAAC,+FAA+F,OAAO,CAAC,eAAe,mBAAmB\",\"sourcesContent\":[\".wbq-query_list .wbq-field-value,.wbq-query_bar .wbq-field-value{color:#1ca1c1}.wbq-query_list .wbq-field-name,.wbq-query_bar .wbq-field-name{font-weight:500}.wbq-query_list .action-close,.wbq-query_list .action-menu{cursor:pointer;margin-top:10px;right:4px;position:absolute}.wbq-query_bar .action-close,.wbq-query_bar .action-menu{cursor:pointer;margin:8px -10px 0 8px}.wbq-query_list .webix_scroll_cont>.webix_tree_leaves{padding:8px 0}.wbq-query_list .webix_tree_item{height:auto;padding:0 16px;user-select:none;position:relative;background:#f4f5f9;border-radius:2px;white-space:nowrap;overflow:visible !important}.wbq-query_list .webix_tree_item.active-editor{line-height:32px;padding:0;margin-left:4px;margin-right:4px;background-color:#fff}.wbq-query_list .webix_tree_item+.webix_tree_leaves{padding-top:10px;border-left:1px solid #ccd7e6;margin-left:20px;padding-left:16px}.wbq-query_list .webix_tree_item.group{margin:0}.wbq-filter_join{position:absolute;z-index:2;top:-24px;height:20px;line-height:20px;left:0;width:40px;border-radius:20px;text-align:center;display:block;cursor:pointer}.wbq-filter_join_and{color:#fff;background:#fdbf4c}.wbq-filter_join_or{color:#fff;background:#55cd97}.wbq-query_list .webix_tree_leaves>div:first-child>div:first-child .wbq-filter_join{display:none}.wbq-query_bar .webix_tree_leaves>div:first-child>div:first-child .wbq-filter_join{display:none}.wbq-field-box{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:250px}.wbq-query_bar .webix_scroll_cont>.webix_tree_leaves{padding:0;white-space:nowrap;padding:4px 0 4px 0}.wbq-query_bar .webix_tree_leaves,.wbq-query_bar .webix_tree_leaves div{display:inline-block}.wbq-query_bar .webix_tree_item{height:32px;line-height:32px;margin:0 52px 0 0;padding:0 16px;user-select:none;position:relative;background:#f4f5f9;border-radius:2px;white-space:nowrap;overflow:visible !important}.wbq-query_bar .webix_tree_branch_1 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_1 .webix_tree_leaves:after{color:#a78fd5}.wbq-query_bar .webix_tree_branch_2 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_2 .webix_tree_leaves:after{color:#68ccd2}.wbq-query_bar .webix_tree_branch_3 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_3 .webix_tree_leaves:after{color:#999}.wbq-query_bar .group+.webix_tree_leaves:before,.wbq-query_bar .group+.webix_tree_leaves:after{content:\\\"(\\\";margin:0 2px 0 -4px;display:inline-block;transform:scaleX(0.75);font-size:30px;line-height:0;position:relative}.wbq-query_bar .group+.webix_tree_leaves:after{content:\\\")\\\";margin:0 -4px 0 2px}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{border-radius:2px;margin-left:0;margin-right:52px}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves .webix_tree_item{background:#fff;margin-top:0;line-height:32px}.wbq-query_bar .webix_tree_leaves>div:last-child>div{margin-right:0}.wbq-query_bar .webix_tree_leaves>.webix_tree_branch_1>.webix_tree_leaves{padding:4px;margin-top:-4px;margin-bottom:-4px}.wbq-query_bar .wbq-filter_join{top:6px;left:-44px;width:36px}.wbq-query_bar .group{padding:0;height:20px;margin-right:0;background:transparent}.webix_toolbar .wbq-query_bar{background-color:transparent}.wbq-query_list.webix_tree .webix_scroll_cont>.webix_tree_leaves{display:block}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{display:inline-block}.wbq-filter_join_disabled{cursor:default;pointer-events:none}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{background:#f4f5f9}.wbq-query_list .webix_tree_item{line-height:36px;margin-bottom:32px}.wbq-query_bar .group+.webix_tree_leaves:before,.wbq-query_bar .group+.webix_tree_leaves:after{top:4px}.wbq-field-box{margin-bottom:-13px}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@font-face{font-family:Webix Querybuilder Icons;font-style:normal;font-weight:400;src:url(fonts/querybuilder-webfont.woff2) format(\\\"woff2\\\"),url(fonts/querybuilder-webfont.woff) format(\\\"woff\\\"),url(fonts/querybuilder-webfont.ttf) format(\\\"truetype\\\"),url(fonts/querybuilder-webfont.svg) format(\\\"svg\\\")}.webix_qb_filter_icon{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:inherit;cursor:pointer;display:inline-block;font:400 400 400 24px/1 \\\"Webix Querybuilder Icons\\\";font-size:18px;line-height:inherit;text-rendering:auto}.webix_qb_filter_icon:hover{color:#1992af}.webix_qb_filter_icon:before{content:\\\"\\\\F001\\\"}.webix_qb_filter{text-align:center}.webix_qb_wrap{background-color:#ebedf0;position:relative}.webix_qb_wrap .webix_view{background-color:transparent}.webix_qb_wrap .webix_template{padding:0}.webix_qb_wrap .webix_el_combo span.webix_input_icon,.webix_qb_wrap .webix_el_datepicker span.webix_input_icon,.webix_qb_wrap .webix_el_richselect .webix_inp_static,.webix_qb_wrap .webix_el_richselect span.webix_input_icon,.webix_qb_wrap .webix_el_select select{border-radius:0}.webix_qb_wrap .webix_qb_wrap{border-left:1px solid #ccd7e6!important}.webix_qb_add{white-space:nowrap}.webix_qb_add_group,.webix_qb_add_rule{background:transparent;border:0;box-shadow:none;color:#1ca1c1;font-size:14px;line-height:1pc;margin:0 10px 0 0;outline:0;text-transform:uppercase}.webix_qb_add_group:active,.webix_qb_add_group:focus,.webix_qb_add_group:hover,.webix_qb_add_rule:active,.webix_qb_add_rule:focus,.webix_qb_add_rule:hover{color:#1992af}.webix_qb_line .webix_qb_close{cursor:pointer;right:25px;top:0}.webix_qb_line .webix_qb_close button{background-color:transparent;border:0;color:#94a1b3;padding:2px 1px;width:20px}.webix_qb_line .webix_qb_close button:active,.webix_qb_line .webix_qb_close button:focus,.webix_qb_line .webix_qb_close button:hover{box-shadow:none;color:#ff5c4c;outline:0}.webix_qb_buttons{background-color:#606060;border-radius:2px;height:26px;margin-top:2px;padding:3px 0;text-align:center;width:87px}.webix_qb_buttons button{background-color:#606060;border:0;border-radius:0;color:#ccc;cursor:pointer;font-size:14px;height:26px;padding:0;text-transform:capitalize;width:38px}.webix_qb_and{margin-right:3px}.webix_qb_and.webix_active,.webix_qb_or.webix_active{background-color:#1ca1c1;color:#fff}.webix_qb_line{position:relative}.webix_qb_line .webix_control,.webix_qb_line .webix_inp_static,.webix_qb_line input{border-radius:0}.webix_qb_line .webix_el_slider.webix_invalid .webix_el_box{background-color:rgba(254,165,168,.2392)}.webix_qb_line .webix_qb_rule_input,.webix_qb_line .webix_qb_rule_select,.webix_qb_line .webix_qb_value_select{display:inline-block;font-size:14px}.webix_qb_line .webix_qb_rule_input .webix_input_icon,.webix_qb_line .webix_qb_rule_select .webix_input_icon,.webix_qb_line .webix_qb_value_select .webix_input_icon{display:none}.webix_column_qb .webix_qb_rule_input,.webix_column_qb .webix_qb_rule_select,.webix_column_qb .webix_qb_value_select{display:block}.webix_qb_sorting{position:absolute;right:7px;top:9px;width:390px;z-index:2}.webix_qb_sorting .webix_control{display:inline-block;margin-right:10px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./js/webix/components/querybuilder/querybuilder.min.css\"],\"names\":[],\"mappings\":\"AAAA,WAAW,oCAAoC,CAAC,iBAAiB,CAAC,eAAe,CAAC,sNAAsN,CAAC,sBAAsB,iCAAiC,CAAC,kCAAkC,CAAC,aAAa,CAAC,cAAc,CAAC,oBAAoB,CAAC,kDAAkD,CAAC,cAAc,CAAC,mBAAmB,CAAC,mBAAmB,CAAC,4BAA4B,aAAa,CAAC,6BAA6B,eAAe,CAAC,iBAAiB,iBAAiB,CAAC,eAAe,wBAAwB,CAAC,iBAAiB,CAAC,2BAA2B,4BAA4B,CAAC,+BAA+B,SAAS,CAAC,sQAAsQ,eAAe,CAAC,8BAA8B,uCAAuC,CAAC,cAAc,kBAAkB,CAAC,uCAAuC,sBAAsB,CAAC,QAAQ,CAAC,eAAe,CAAC,aAAa,CAAC,cAAc,CAAC,eAAe,CAAC,iBAAiB,CAAC,SAAS,CAAC,wBAAwB,CAAC,2JAA2J,aAAa,CAAC,+BAA+B,cAAc,CAAC,UAAU,CAAC,KAAK,CAAC,sCAAsC,4BAA4B,CAAC,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,UAAU,CAAC,qIAAqI,eAAe,CAAC,aAAa,CAAC,SAAS,CAAC,kBAAkB,wBAAwB,CAAC,iBAAiB,CAAC,WAAW,CAAC,cAAc,CAAC,aAAa,CAAC,iBAAiB,CAAC,UAAU,CAAC,yBAAyB,wBAAwB,CAAC,QAAQ,CAAC,eAAe,CAAC,UAAU,CAAC,cAAc,CAAC,cAAc,CAAC,WAAW,CAAC,SAAS,CAAC,yBAAyB,CAAC,UAAU,CAAC,cAAc,gBAAgB,CAAC,qDAAqD,wBAAwB,CAAC,UAAU,CAAC,eAAe,iBAAiB,CAAC,oFAAoF,eAAe,CAAC,4DAA4D,wCAAwC,CAAC,+GAA+G,oBAAoB,CAAC,cAAc,CAAC,qKAAqK,YAAY,CAAC,qHAAqH,aAAa,CAAC,kBAAkB,iBAAiB,CAAC,SAAS,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,iCAAiC,oBAAoB,CAAC,iBAAiB\",\"sourcesContent\":[\"@font-face{font-family:Webix Querybuilder Icons;font-style:normal;font-weight:400;src:url(fonts/querybuilder-webfont.woff2) format(\\\"woff2\\\"),url(fonts/querybuilder-webfont.woff) format(\\\"woff\\\"),url(fonts/querybuilder-webfont.ttf) format(\\\"truetype\\\"),url(fonts/querybuilder-webfont.svg) format(\\\"svg\\\")}.webix_qb_filter_icon{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:inherit;cursor:pointer;display:inline-block;font:400 400 400 24px/1 \\\"Webix Querybuilder Icons\\\";font-size:18px;line-height:inherit;text-rendering:auto}.webix_qb_filter_icon:hover{color:#1992af}.webix_qb_filter_icon:before{content:\\\"\\\\F001\\\"}.webix_qb_filter{text-align:center}.webix_qb_wrap{background-color:#ebedf0;position:relative}.webix_qb_wrap .webix_view{background-color:transparent}.webix_qb_wrap .webix_template{padding:0}.webix_qb_wrap .webix_el_combo span.webix_input_icon,.webix_qb_wrap .webix_el_datepicker span.webix_input_icon,.webix_qb_wrap .webix_el_richselect .webix_inp_static,.webix_qb_wrap .webix_el_richselect span.webix_input_icon,.webix_qb_wrap .webix_el_select select{border-radius:0}.webix_qb_wrap .webix_qb_wrap{border-left:1px solid #ccd7e6!important}.webix_qb_add{white-space:nowrap}.webix_qb_add_group,.webix_qb_add_rule{background:transparent;border:0;box-shadow:none;color:#1ca1c1;font-size:14px;line-height:1pc;margin:0 10px 0 0;outline:0;text-transform:uppercase}.webix_qb_add_group:active,.webix_qb_add_group:focus,.webix_qb_add_group:hover,.webix_qb_add_rule:active,.webix_qb_add_rule:focus,.webix_qb_add_rule:hover{color:#1992af}.webix_qb_line .webix_qb_close{cursor:pointer;right:25px;top:0}.webix_qb_line .webix_qb_close button{background-color:transparent;border:0;color:#94a1b3;padding:2px 1px;width:20px}.webix_qb_line .webix_qb_close button:active,.webix_qb_line .webix_qb_close button:focus,.webix_qb_line .webix_qb_close button:hover{box-shadow:none;color:#ff5c4c;outline:0}.webix_qb_buttons{background-color:#606060;border-radius:2px;height:26px;margin-top:2px;padding:3px 0;text-align:center;width:87px}.webix_qb_buttons button{background-color:#606060;border:0;border-radius:0;color:#ccc;cursor:pointer;font-size:14px;height:26px;padding:0;text-transform:capitalize;width:38px}.webix_qb_and{margin-right:3px}.webix_qb_and.webix_active,.webix_qb_or.webix_active{background-color:#1ca1c1;color:#fff}.webix_qb_line{position:relative}.webix_qb_line .webix_control,.webix_qb_line .webix_inp_static,.webix_qb_line input{border-radius:0}.webix_qb_line .webix_el_slider.webix_invalid .webix_el_box{background-color:rgba(254,165,168,.2392)}.webix_qb_line .webix_qb_rule_input,.webix_qb_line .webix_qb_rule_select,.webix_qb_line .webix_qb_value_select{display:inline-block;font-size:14px}.webix_qb_line .webix_qb_rule_input .webix_input_icon,.webix_qb_line .webix_qb_rule_select .webix_input_icon,.webix_qb_line .webix_qb_value_select .webix_input_icon{display:none}.webix_column_qb .webix_qb_rule_input,.webix_column_qb .webix_qb_rule_select,.webix_column_qb .webix_qb_value_select{display:block}.webix_qb_sorting{position:absolute;right:7px;top:9px;width:390px;z-index:2}.webix_qb_sorting .webix_control{display:inline-block;margin-right:10px}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@charset \\\"UTF-8\\\";.wbq-query_list .wbq-field-value,.wbq-query_bar .wbq-field-value{color:#1ca1c1}.wbq-query_list .wbq-field-name,.wbq-query_bar .wbq-field-name{font-weight:500}.wbq-query_list .action-close,.wbq-query_list .action-menu{cursor:pointer;margin-top:10px;right:4px;position:absolute}.wbq-query_bar .action-close,.wbq-query_bar .action-menu{cursor:pointer;margin:8px -10px 0 8px}.wbq-query_list .webix_scroll_cont>.webix_tree_leaves{padding:8px 0}.wbq-query_list .webix_tree_item{height:auto;padding:0 16px;user-select:none;position:relative;background:#f4f5f9;border-radius:2px;white-space:nowrap;overflow:visible !important}.wbq-query_list .webix_tree_item.active-editor{line-height:32px;padding:0;margin-left:4px;margin-right:4px;background-color:#fff}.wbq-query_list .webix_tree_item+.webix_tree_leaves{padding-top:10px;border-left:1px solid #ccd7e6;margin-left:20px;padding-left:16px}.wbq-query_list .webix_tree_item.group{margin:0}.wbq-filter_join{position:absolute;z-index:2;top:-24px;height:20px;line-height:20px;left:0;width:40px;border-radius:20px;text-align:center;display:block;cursor:pointer}.wbq-filter_join_and{color:#fff;background:#fdbf4c}.wbq-filter_join_or{color:#fff;background:#55cd97}.wbq-query_list .webix_tree_leaves>div:first-child>div:first-child .wbq-filter_join{display:none}.wbq-query_bar .webix_tree_leaves>div:first-child>div:first-child .wbq-filter_join{display:none}.wbq-field-box{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:250px}.wbq-query_bar .webix_scroll_cont>.webix_tree_leaves{padding:0;white-space:nowrap;padding:4px 0 4px 0}.wbq-query_bar .webix_tree_leaves,.wbq-query_bar .webix_tree_leaves div{display:inline-block}.wbq-query_bar .webix_tree_item{height:32px;line-height:32px;margin:0 52px 0 0;padding:0 16px;user-select:none;position:relative;background:#f4f5f9;border-radius:2px;white-space:nowrap;overflow:visible !important}.wbq-query_bar .webix_tree_branch_1 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_1 .webix_tree_leaves:after{color:#a78fd5}.wbq-query_bar .webix_tree_branch_2 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_2 .webix_tree_leaves:after{color:#68ccd2}.wbq-query_bar .webix_tree_branch_3 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_3 .webix_tree_leaves:after{color:#999}.wbq-query_bar .group+.webix_tree_leaves:before,.wbq-query_bar .group+.webix_tree_leaves:after{content:\\\"(\\\";margin:0 2px 0 -4px;display:inline-block;transform:scaleX(0.75);font-size:30px;line-height:0;position:relative}.wbq-query_bar .group+.webix_tree_leaves:after{content:\\\")\\\";margin:0 -4px 0 2px}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{border-radius:2px;margin-left:0;margin-right:52px}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves .webix_tree_item{background:#fff;margin-top:0;line-height:32px}.wbq-query_bar .webix_tree_leaves>div:last-child>div{margin-right:0}.wbq-query_bar .webix_tree_leaves>.webix_tree_branch_1>.webix_tree_leaves{padding:4px;margin-top:-4px;margin-bottom:-4px}.wbq-query_bar .wbq-filter_join{top:6px;left:-44px;width:36px}.wbq-query_bar .group{padding:0;height:20px;margin-right:0;background:transparent}.webix_toolbar .wbq-query_bar{background-color:transparent}.wbq-query_list.webix_tree .webix_scroll_cont>.webix_tree_leaves{display:block}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{display:inline-block}.wbq-filter_join_disabled{cursor:default;pointer-events:none}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{background:#f4f5f9}.wbq-query_list .webix_tree_item{line-height:36px;margin-bottom:32px}.wbq-query_bar .group+.webix_tree_leaves:before,.wbq-query_bar .group+.webix_tree_leaves:after{top:4px}.wbq-field-box{margin-bottom:-13px}.webix_el_label.webix_rpt_not_saved .webix_el_box{color:#ff5c4c}.webix_reports .webix_pressed .webix_button{box-shadow:none}.webix_rpt_found_record{background:#f9eab3}.webix_rpt_list .webix_scroll_cont:empty:before{content:attr(placeholder);color:#8693a5;text-align:center;display:inline-block;width:100%;line-height:60px}.webix_rpt_empty{position:relative;background:transparent}.webix_rpt_empty .webix_template{display:flex;justify-content:center;flex-flow:row wrap}.webix_rpt_empty_placeholder{color:#8693a5;font-size:16px;font-weight:500;position:absolute;top:15%}.webix_rpt_empty svg{width:80%;height:80%;display:block;margin:auto;max-width:390px}.webix_rpt_query .webix_el_toggle button,.webix_rpt_query .webix_el_toggle .webix_pressed button{box-shadow:none}.webix_rpt_query .webix_el_toggle{text-align:center}.webix_rpt_query .webix_el_toggle button{width:300px}.webix_rpt_query .webix_el_toggle .wxi-checkbox-blank{color:#94a1b3}.webix_rpt_query .webix_tree .webix_scroll_cont>.webix_tree_leaves{display:block}@font-face{font-family:\\\"report-webfont\\\";src:url(\\\"fonts/report-webfont.woff2?1597778382139\\\") format(\\\"woff2\\\"),url(\\\"fonts/report-webfont.woff?1597778382139\\\") format(\\\"woff\\\");font-weight:normal;font-style:normal}[class^=rpi-]:before,[class*=rpi-]:before{font-family:\\\"report-webfont\\\";display:inline-block;font-style:normal;font-weight:normal;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transform:translate(0,0)}.rpi-plus:before{content:\\\"\\\"}.rpi-delete:before{content:\\\"\\\"}.rpi-content-copy:before{content:\\\"\\\"}.rpi-export:before{content:\\\"\\\"}.rpi-sort-alphabetical-descending:before{content:\\\"\\\"}.rpi-sort-alphabetical-ascending:before{content:\\\"\\\"}.rpi-sort-calendar-descending:before{content:\\\"\\\"}.rpi-sort-calendar-ascending:before{content:\\\"\\\"}.rpi-pencil:before{content:\\\"\\\"}.rpi-square-edit-outline:before{content:\\\"\\\"}.rpi-menu:before{content:\\\"\\\"}.rpi-menu-open:before{content:\\\"\\\"}.rpi-dots-vertical:before{content:\\\"\\\"}.rpi-magnify:before{content:\\\"\\\"}.rpi-close:before{content:\\\"\\\"}.rpi-drag-vertical:before{content:\\\"\\\"}.rpi-eye:before{content:\\\"\\\"}.rpi-eye-off-outline:before{content:\\\"\\\"}.rpi-arrow-horizontal-lock:before{content:\\\"\\\"}.rpi-cog:before{content:\\\"\\\"}.rpi-arrow-up:before{content:\\\"\\\"}.rpi-arrow-down:before{content:\\\"\\\"}.rpi-table:before{content:\\\"\\\"}.rpi-poll:before{content:\\\"\\\"}.rpi-chart-tree:before{content:\\\"\\\"}.rpi-chart-line:before{content:\\\"\\\"}.rpi-chart-bell-curve-cumulative:before{content:\\\"\\\"}.rpi-chart-areaspline:before{content:\\\"\\\"}.rpi-chart-line-stacked:before{content:\\\"\\\"}.rpi-chart-areaspline-variant:before{content:\\\"\\\"}.rpi-chart-bar-stacked:before{content:\\\"\\\"}.rpi-vector-triangle:before{content:\\\"\\\"}.rpi-chart-bar:before{content:\\\"\\\"}.rpi-circle-outline:before{content:\\\"\\\"}.rpi-square-outline:before{content:\\\"\\\"}.rpi-triangle-outline:before{content:\\\"\\\"}.rpi-rhombus-outline:before{content:\\\"\\\"}.rpi-trash-can-outline:before{content:\\\"\\\"}.rpi-pail-outline:before{content:\\\"\\\"}.wbx-mark_frozen{text-align:center;cursor:ns-resize}.wbx-mark_frozen .webix_rpt_config_row_name{width:100%;font-size:13px}.wbx-mark_frozen .webix_rpt_config_row_name .webix_icon{vertical-align:middle}.wbx-mark_frozen.webix_dd_drag div{border-color:transparent;background:inherit}.webix_rpt_config_row,.webix_rpt_item_suggest{display:flex;justify-content:space-between;align-items:center}.webix_rpt_config_row .webix_icon,.webix_rpt_item_suggest .webix_icon{line-height:inherit}.webix_rpt_config_row_name{width:310px}.webix_rpt_chart_config .webix_rpt_config_row_name{padding-left:10px}.webix_rpt_columns_list .rpi-drag-vertical{color:#94a1b3;cursor:ns-resize}.webix_rpt_columns_list .webix_cell:not(.webix_dtable_subview):hover{background:#f4f5f9}.webix_rpt_columns_list .webix_cell:not(.webix_dtable_subview):hover .rpi-drag-vertical{color:#475466}.webix_rpt_columns_list .webix_dtable_subview .webix_view{border-left-width:0}.webix_rpt_columns_list .webix_dtable_subview{background-color:transparent}.webix_rpt_columns_list .webix_dtable_subview .webix_inp_label{font-weight:normal}.webix_rpt_drag{cursor:ns-resize}.webix_drag_zone .webix_rpt_config_row .rpi-drag-vertical,.webix_drag_zone .webix_rpt_config_row .webix_tree_close{visibility:hidden}.webix_rpt_delete .webix_button{color:#ff5c4c}.webix_rpt_title{color:#313131;font-weight:500}.webix_rpt_subtitle .webix_inp_label,.webix_rpt_subtitle .webix_el_box{color:#475466;font-weight:normal}.webix_rpt_date_selector{color:#1ca1c1;display:inline-block;line-height:1}.webix_rpt_date_selector .webix_rpt_sort_selector .webix_rpt_date_selector .webix_icon{cursor:pointer}.webix_rpt_grouppopup .webix_icon{padding-top:6px;float:right}.webix_rpt_grouppopup .wxi-radiobox-marked{color:#1ca1c1}.webix_rpt_grouppopup .wxi-radiobox-blank{color:#94a1b3}.webix_rpt_groupselect_delete,.webix_rpt_multicombo .webix_multicombo_delete{font-size:16px;width:20px;line-height:20px}.webix_rpt_groupselect_delete:after,.webix_rpt_multicombo .webix_multicombo_delete:after{content:\\\"\\\"}.webix_rpt_summary_form{border-color:transparent}.webix_rpt_chart_color{width:24px;height:24px;border-radius:2px;margin-left:10px}.webix_rpt_config_row_hover{background:#f4f5f9}.webix_rpt_colorpicker .webix_input_icon{position:absolute;right:32px}.webix_rpt_colorpicker .webix_input_icon:before{font-size:20px;content:\\\"\\\";left:30px;position:absolute;color:#94a1b3;top:2px}.webix_rpt_markerselect .webix_icon{font-size:18px;margin-right:2px}.webix_rpt_markerselect_list .webix_icon{font-size:18px;margin-right:17px}.webix_rpt_action_remove{color:#94a1b3;margin-top:6px}.webix_rpt_description .webix_template{padding-left:2px;font-size:13px}.webix_rpt_qselect_icon{padding-top:7px;float:right;color:#94a1b3}.webix_rpt_qselect_suggest .webix_scroll_cont:empty:before{content:attr(placeholder);font-size:13px;font-style:italic;color:#8693a5;text-align:center;display:inline-block;width:100%;line-height:25px}.webix_rpt_groupselect .webix_multicombo_value{display:flex;align-items:center;padding-right:6px}.webix_rpt_groupselect .webix_multicombo_value .webix_rpt_groupselect_delete{margin-top:0;position:static;line-height:1;margin-left:5px;height:auto}.webix_rpt_groupselect .webix_multicombo_value>span{vertical-align:middle}.webix_rpt_groupselect_sep{padding:0 6px 0 3px}.webix_rpt_bcols .webix_dtable_subview{padding-left:0}.webix_rpt_bucket_values .webix_list_item{display:flex;align-items:center}.webix_rpt_bucket_values .webix_list_item .webix_rpt_bucket_value{width:170px}.webix_rpt_multicombo .webix_multicombo_text{display:flex;align-items:center}.webix_rpt_bucket_value{max-width:170px;text-overflow:ellipsis;display:inline-block;overflow:hidden}.webix_multicombo_value .webix_rpt_bucket_icon{display:none}.webix_rpt_bucket_icon{width:25px;text-align:right;color:#94a1b3}.webix_rpt_bucket_sublabel{font-size:13px;color:#8693a5}.webix_rpt_bucket_sublabel.webix_icon{font-size:15px}.webix_rpt_buckets_num{margin-right:15px}.webix_rpt_subview .webix_invalid .webix_el_box input,.webix_rpt_subview .webix_invalid .webix_el_box .webix_inp_static{background:#fff;color:#475466}.webix_rpt_bucket_delete{width:40px;color:#94a1b3}.webix_rpt_bucket_delete:hover{color:#475466}.webix_rpt_bucket_value_selected{color:#8693a5}.webix_el_search .webix_badge{cursor:default;padding-left:4px}.webix_rpt .webix_treemap_item.l0{background-color:#42a5f5}.webix_rpt .webix_treemap_item.l1{background-color:#64b5f6}.webix_rpt .webix_treemap_item.l2{background-color:#90caf9}.webix_rpt .webix_treemap_item.l3{background-color:#bbdefb}.webix_rpt_list_btn .webix_cell{padding:0}.webix_rpt_list_btn .webix_icon{line-height:38px;border-radius:50%;width:38px;height:38px;color:#8693a5}.webix_rpt_list_btn .webix_icon:hover{background:rgba(0,0,0,0.07);color:#475466}.webix_rpt_list .webix_selected .webix_rpt_list_report_date,.webix_rpt_list .webix_selected .webix_icon,.webix_rpt_list .webix_selected:focus .webix_rpt_list_report_date,.webix_rpt_list .webix_selected:focus .webix_icon{color:#8693a5}.webix_rpt_list .webix_selected .webix_icon:hover,.webix_rpt_list .webix_selected:focus .webix_icon:hover{color:#475466}.webix_rpt_list_block{position:relative;padding-top:6px}.webix_rpt_list_report_date,.webix_rpt_list_report_name{width:260px;line-height:22px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.webix_rpt_list_report_date{color:#8693a5;font-size:13px;line-height:20px;height:20px;overflow:hidden}.webix_rpt_action_menu{position:absolute;right:0;top:50%;color:#94a1b3;margin-top:-8px}.webix_rpt_action_menu:hover{color:#475466}.webix_rpt_btn_active.webix_rpt_sort_icon .webix_icon,.webix_rpt_btn_active.webix_rpt_sort_icon button:hover .webix_icon{color:#1ca1c1}.webix_rpt_sort_icon .webix_icon{color:#94a1b3}.webix_rpt_sources_path{float:right;color:#888;font-size:12px}.webix_multicombo_value .webix_rpt_sources_path{display:none}.wbq-field-name .webix_rpt_sources_path{position:absolute;right:30px}.webix_rpt_popup_menu .webix_list_item{padding-left:7px}.webix_rpt_popup_menu .webix_icon{color:#94a1b3;float:left;font-size:19px;margin-top:6px;margin-right:5px}.webix_rpt_popup_menu .webix_disabled .webix_icon{color:#bfccdf}.webix_rpt_popup_menu .webix_list_item:active,.webix_rpt_popup_menu .webix_list_item:focus{background:transparent}.webix_rpt_vertical_chart_labels .webix_axis_item_x{transform:rotate(-45deg);text-align:right;transform-origin:75% 320%}.webix_rpt_vertical_chart_labels .webix_rpt_chart_label{width:80px}.webix_rpt_chart_label{max-width:80px}.webix_rpt_vertical_chart_labels .webix_rpt_chart_label0{left:40px !important}.webix_el_search .webix_badge{top:9px;right:29px}.webix_rpt_cls1{fill:#9dbabf;fill-opacity:.25}.webix_rpt_cls2{fill:#edeff0}.webix_rpt_cls3{fill:#b4dfea}.webix_rpt_cls4{fill:#fafbff}.webix_rpt_cls5{fill:#dedede}.webix_rpt_cls6{fill:#f2f2f2}.webix_rpt_cls7{fill:#fff}.webix_rpt_cls8{fill:#b4dfea}.webix_rpt_cls9{fill:#f4f5f9}\", \"\",{\"version\":3,\"sources\":[\"webpack://./js/webix/components/reports/reports.min.css\"],\"names\":[],\"mappings\":\"AAAA,gBAAgB,CAAC,iEAAiE,aAAa,CAAC,+DAA+D,eAAe,CAAC,2DAA2D,cAAc,CAAC,eAAe,CAAC,SAAS,CAAC,iBAAiB,CAAC,yDAAyD,cAAc,CAAC,sBAAsB,CAAC,sDAAsD,aAAa,CAAC,iCAAiC,WAAW,CAAC,cAAc,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,2BAA2B,CAAC,+CAA+C,gBAAgB,CAAC,SAAS,CAAC,eAAe,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,oDAAoD,gBAAgB,CAAC,6BAA6B,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,uCAAuC,QAAQ,CAAC,iBAAiB,iBAAiB,CAAC,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC,gBAAgB,CAAC,MAAM,CAAC,UAAU,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,aAAa,CAAC,cAAc,CAAC,qBAAqB,UAAU,CAAC,kBAAkB,CAAC,oBAAoB,UAAU,CAAC,kBAAkB,CAAC,oFAAoF,YAAY,CAAC,mFAAmF,YAAY,CAAC,eAAe,oBAAoB,CAAC,eAAe,CAAC,sBAAsB,CAAC,kBAAkB,CAAC,eAAe,CAAC,qDAAqD,SAAS,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,wEAAwE,oBAAoB,CAAC,gCAAgC,WAAW,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,cAAc,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,2BAA2B,CAAC,2HAA2H,aAAa,CAAC,2HAA2H,aAAa,CAAC,2HAA2H,UAAU,CAAC,+FAA+F,WAAW,CAAC,mBAAmB,CAAC,oBAAoB,CAAC,sBAAsB,CAAC,cAAc,CAAC,aAAa,CAAC,iBAAiB,CAAC,+CAA+C,WAAW,CAAC,mBAAmB,CAAC,qDAAqD,iBAAiB,CAAC,aAAa,CAAC,iBAAiB,CAAC,sEAAsE,eAAe,CAAC,YAAY,CAAC,gBAAgB,CAAC,qDAAqD,cAAc,CAAC,0EAA0E,WAAW,CAAC,eAAe,CAAC,kBAAkB,CAAC,gCAAgC,OAAO,CAAC,UAAU,CAAC,UAAU,CAAC,sBAAsB,SAAS,CAAC,WAAW,CAAC,cAAc,CAAC,sBAAsB,CAAC,8BAA8B,4BAA4B,CAAC,iEAAiE,aAAa,CAAC,qDAAqD,oBAAoB,CAAC,0BAA0B,cAAc,CAAC,mBAAmB,CAAC,qDAAqD,kBAAkB,CAAC,iCAAiC,gBAAgB,CAAC,kBAAkB,CAAC,+FAA+F,OAAO,CAAC,eAAe,mBAAmB,CAAC,kDAAkD,aAAa,CAAC,4CAA4C,eAAe,CAAC,wBAAwB,kBAAkB,CAAC,gDAAgD,yBAAyB,CAAC,aAAa,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,UAAU,CAAC,gBAAgB,CAAC,iBAAiB,iBAAiB,CAAC,sBAAsB,CAAC,iCAAiC,YAAY,CAAC,sBAAsB,CAAC,kBAAkB,CAAC,6BAA6B,aAAa,CAAC,cAAc,CAAC,eAAe,CAAC,iBAAiB,CAAC,OAAO,CAAC,qBAAqB,SAAS,CAAC,UAAU,CAAC,aAAa,CAAC,WAAW,CAAC,eAAe,CAAC,iGAAiG,eAAe,CAAC,kCAAkC,iBAAiB,CAAC,yCAAyC,WAAW,CAAC,sDAAsD,aAAa,CAAC,mEAAmE,aAAa,CAAC,WAAW,4BAA4B,CAAC,iIAAiI,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,0CAA0C,4BAA4B,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,aAAa,CAAC,kCAAkC,CAAC,iCAAiC,CAAC,wBAAwB,CAAC,iBAAiB,WAAW,CAAC,mBAAmB,WAAW,CAAC,yBAAyB,WAAW,CAAC,mBAAmB,WAAW,CAAC,yCAAyC,WAAW,CAAC,wCAAwC,WAAW,CAAC,qCAAqC,WAAW,CAAC,oCAAoC,WAAW,CAAC,mBAAmB,WAAW,CAAC,gCAAgC,WAAW,CAAC,iBAAiB,WAAW,CAAC,sBAAsB,WAAW,CAAC,0BAA0B,WAAW,CAAC,oBAAoB,WAAW,CAAC,kBAAkB,WAAW,CAAC,0BAA0B,WAAW,CAAC,gBAAgB,WAAW,CAAC,4BAA4B,WAAW,CAAC,kCAAkC,WAAW,CAAC,gBAAgB,WAAW,CAAC,qBAAqB,WAAW,CAAC,uBAAuB,WAAW,CAAC,kBAAkB,WAAW,CAAC,iBAAiB,WAAW,CAAC,uBAAuB,WAAW,CAAC,uBAAuB,WAAW,CAAC,wCAAwC,WAAW,CAAC,6BAA6B,WAAW,CAAC,+BAA+B,WAAW,CAAC,qCAAqC,WAAW,CAAC,8BAA8B,WAAW,CAAC,4BAA4B,WAAW,CAAC,sBAAsB,WAAW,CAAC,2BAA2B,WAAW,CAAC,2BAA2B,WAAW,CAAC,6BAA6B,WAAW,CAAC,4BAA4B,WAAW,CAAC,8BAA8B,WAAW,CAAC,yBAAyB,WAAW,CAAC,iBAAiB,iBAAiB,CAAC,gBAAgB,CAAC,4CAA4C,UAAU,CAAC,cAAc,CAAC,wDAAwD,qBAAqB,CAAC,mCAAmC,wBAAwB,CAAC,kBAAkB,CAAC,8CAA8C,YAAY,CAAC,6BAA6B,CAAC,kBAAkB,CAAC,sEAAsE,mBAAmB,CAAC,2BAA2B,WAAW,CAAC,mDAAmD,iBAAiB,CAAC,2CAA2C,aAAa,CAAC,gBAAgB,CAAC,qEAAqE,kBAAkB,CAAC,wFAAwF,aAAa,CAAC,0DAA0D,mBAAmB,CAAC,8CAA8C,4BAA4B,CAAC,+DAA+D,kBAAkB,CAAC,gBAAgB,gBAAgB,CAAC,mHAAmH,iBAAiB,CAAC,gCAAgC,aAAa,CAAC,iBAAiB,aAAa,CAAC,eAAe,CAAC,uEAAuE,aAAa,CAAC,kBAAkB,CAAC,yBAAyB,aAAa,CAAC,oBAAoB,CAAC,aAAa,CAAC,uFAAuF,cAAc,CAAC,kCAAkC,eAAe,CAAC,WAAW,CAAC,2CAA2C,aAAa,CAAC,0CAA0C,aAAa,CAAC,6EAA6E,cAAc,CAAC,UAAU,CAAC,gBAAgB,CAAC,yFAAyF,WAAW,CAAC,wBAAwB,wBAAwB,CAAC,uBAAuB,UAAU,CAAC,WAAW,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,4BAA4B,kBAAkB,CAAC,yCAAyC,iBAAiB,CAAC,UAAU,CAAC,gDAAgD,cAAc,CAAC,WAAW,CAAC,SAAS,CAAC,iBAAiB,CAAC,aAAa,CAAC,OAAO,CAAC,oCAAoC,cAAc,CAAC,gBAAgB,CAAC,yCAAyC,cAAc,CAAC,iBAAiB,CAAC,yBAAyB,aAAa,CAAC,cAAc,CAAC,uCAAuC,gBAAgB,CAAC,cAAc,CAAC,wBAAwB,eAAe,CAAC,WAAW,CAAC,aAAa,CAAC,2DAA2D,yBAAyB,CAAC,cAAc,CAAC,iBAAiB,CAAC,aAAa,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,UAAU,CAAC,gBAAgB,CAAC,+CAA+C,YAAY,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,6EAA6E,YAAY,CAAC,eAAe,CAAC,aAAa,CAAC,eAAe,CAAC,WAAW,CAAC,oDAAoD,qBAAqB,CAAC,2BAA2B,mBAAmB,CAAC,uCAAuC,cAAc,CAAC,0CAA0C,YAAY,CAAC,kBAAkB,CAAC,kEAAkE,WAAW,CAAC,6CAA6C,YAAY,CAAC,kBAAkB,CAAC,wBAAwB,eAAe,CAAC,sBAAsB,CAAC,oBAAoB,CAAC,eAAe,CAAC,+CAA+C,YAAY,CAAC,uBAAuB,UAAU,CAAC,gBAAgB,CAAC,aAAa,CAAC,2BAA2B,cAAc,CAAC,aAAa,CAAC,sCAAsC,cAAc,CAAC,uBAAuB,iBAAiB,CAAC,wHAAwH,eAAe,CAAC,aAAa,CAAC,yBAAyB,UAAU,CAAC,aAAa,CAAC,+BAA+B,aAAa,CAAC,iCAAiC,aAAa,CAAC,8BAA8B,cAAc,CAAC,gBAAgB,CAAC,kCAAkC,wBAAwB,CAAC,kCAAkC,wBAAwB,CAAC,kCAAkC,wBAAwB,CAAC,kCAAkC,wBAAwB,CAAC,gCAAgC,SAAS,CAAC,gCAAgC,gBAAgB,CAAC,iBAAiB,CAAC,UAAU,CAAC,WAAW,CAAC,aAAa,CAAC,sCAAsC,2BAA2B,CAAC,aAAa,CAAC,4NAA4N,aAAa,CAAC,0GAA0G,aAAa,CAAC,sBAAsB,iBAAiB,CAAC,eAAe,CAAC,wDAAwD,WAAW,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,eAAe,CAAC,sBAAsB,CAAC,4BAA4B,aAAa,CAAC,cAAc,CAAC,gBAAgB,CAAC,WAAW,CAAC,eAAe,CAAC,uBAAuB,iBAAiB,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,CAAC,6BAA6B,aAAa,CAAC,yHAAyH,aAAa,CAAC,iCAAiC,aAAa,CAAC,wBAAwB,WAAW,CAAC,UAAU,CAAC,cAAc,CAAC,gDAAgD,YAAY,CAAC,wCAAwC,iBAAiB,CAAC,UAAU,CAAC,uCAAuC,gBAAgB,CAAC,kCAAkC,aAAa,CAAC,UAAU,CAAC,cAAc,CAAC,cAAc,CAAC,gBAAgB,CAAC,kDAAkD,aAAa,CAAC,2FAA2F,sBAAsB,CAAC,oDAAoD,wBAAwB,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,wDAAwD,UAAU,CAAC,uBAAuB,cAAc,CAAC,yDAAyD,oBAAoB,CAAC,8BAA8B,OAAO,CAAC,UAAU,CAAC,gBAAgB,YAAY,CAAC,gBAAgB,CAAC,gBAAgB,YAAY,CAAC,gBAAgB,YAAY,CAAC,gBAAgB,YAAY,CAAC,gBAAgB,YAAY,CAAC,gBAAgB,YAAY,CAAC,gBAAgB,SAAS,CAAC,gBAAgB,YAAY,CAAC,gBAAgB,YAAY\",\"sourcesContent\":[\"@charset \\\"UTF-8\\\";.wbq-query_list .wbq-field-value,.wbq-query_bar .wbq-field-value{color:#1ca1c1}.wbq-query_list .wbq-field-name,.wbq-query_bar .wbq-field-name{font-weight:500}.wbq-query_list .action-close,.wbq-query_list .action-menu{cursor:pointer;margin-top:10px;right:4px;position:absolute}.wbq-query_bar .action-close,.wbq-query_bar .action-menu{cursor:pointer;margin:8px -10px 0 8px}.wbq-query_list .webix_scroll_cont>.webix_tree_leaves{padding:8px 0}.wbq-query_list .webix_tree_item{height:auto;padding:0 16px;user-select:none;position:relative;background:#f4f5f9;border-radius:2px;white-space:nowrap;overflow:visible !important}.wbq-query_list .webix_tree_item.active-editor{line-height:32px;padding:0;margin-left:4px;margin-right:4px;background-color:#fff}.wbq-query_list .webix_tree_item+.webix_tree_leaves{padding-top:10px;border-left:1px solid #ccd7e6;margin-left:20px;padding-left:16px}.wbq-query_list .webix_tree_item.group{margin:0}.wbq-filter_join{position:absolute;z-index:2;top:-24px;height:20px;line-height:20px;left:0;width:40px;border-radius:20px;text-align:center;display:block;cursor:pointer}.wbq-filter_join_and{color:#fff;background:#fdbf4c}.wbq-filter_join_or{color:#fff;background:#55cd97}.wbq-query_list .webix_tree_leaves>div:first-child>div:first-child .wbq-filter_join{display:none}.wbq-query_bar .webix_tree_leaves>div:first-child>div:first-child .wbq-filter_join{display:none}.wbq-field-box{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:250px}.wbq-query_bar .webix_scroll_cont>.webix_tree_leaves{padding:0;white-space:nowrap;padding:4px 0 4px 0}.wbq-query_bar .webix_tree_leaves,.wbq-query_bar .webix_tree_leaves div{display:inline-block}.wbq-query_bar .webix_tree_item{height:32px;line-height:32px;margin:0 52px 0 0;padding:0 16px;user-select:none;position:relative;background:#f4f5f9;border-radius:2px;white-space:nowrap;overflow:visible !important}.wbq-query_bar .webix_tree_branch_1 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_1 .webix_tree_leaves:after{color:#a78fd5}.wbq-query_bar .webix_tree_branch_2 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_2 .webix_tree_leaves:after{color:#68ccd2}.wbq-query_bar .webix_tree_branch_3 .webix_tree_leaves:before,.wbq-query_bar .webix_tree_branch_3 .webix_tree_leaves:after{color:#999}.wbq-query_bar .group+.webix_tree_leaves:before,.wbq-query_bar .group+.webix_tree_leaves:after{content:\\\"(\\\";margin:0 2px 0 -4px;display:inline-block;transform:scaleX(0.75);font-size:30px;line-height:0;position:relative}.wbq-query_bar .group+.webix_tree_leaves:after{content:\\\")\\\";margin:0 -4px 0 2px}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{border-radius:2px;margin-left:0;margin-right:52px}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves .webix_tree_item{background:#fff;margin-top:0;line-height:32px}.wbq-query_bar .webix_tree_leaves>div:last-child>div{margin-right:0}.wbq-query_bar .webix_tree_leaves>.webix_tree_branch_1>.webix_tree_leaves{padding:4px;margin-top:-4px;margin-bottom:-4px}.wbq-query_bar .wbq-filter_join{top:6px;left:-44px;width:36px}.wbq-query_bar .group{padding:0;height:20px;margin-right:0;background:transparent}.webix_toolbar .wbq-query_bar{background-color:transparent}.wbq-query_list.webix_tree .webix_scroll_cont>.webix_tree_leaves{display:block}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{display:inline-block}.wbq-filter_join_disabled{cursor:default;pointer-events:none}.wbq-query_bar .webix_tree_leaves .webix_tree_leaves{background:#f4f5f9}.wbq-query_list .webix_tree_item{line-height:36px;margin-bottom:32px}.wbq-query_bar .group+.webix_tree_leaves:before,.wbq-query_bar .group+.webix_tree_leaves:after{top:4px}.wbq-field-box{margin-bottom:-13px}.webix_el_label.webix_rpt_not_saved .webix_el_box{color:#ff5c4c}.webix_reports .webix_pressed .webix_button{box-shadow:none}.webix_rpt_found_record{background:#f9eab3}.webix_rpt_list .webix_scroll_cont:empty:before{content:attr(placeholder);color:#8693a5;text-align:center;display:inline-block;width:100%;line-height:60px}.webix_rpt_empty{position:relative;background:transparent}.webix_rpt_empty .webix_template{display:flex;justify-content:center;flex-flow:row wrap}.webix_rpt_empty_placeholder{color:#8693a5;font-size:16px;font-weight:500;position:absolute;top:15%}.webix_rpt_empty svg{width:80%;height:80%;display:block;margin:auto;max-width:390px}.webix_rpt_query .webix_el_toggle button,.webix_rpt_query .webix_el_toggle .webix_pressed button{box-shadow:none}.webix_rpt_query .webix_el_toggle{text-align:center}.webix_rpt_query .webix_el_toggle button{width:300px}.webix_rpt_query .webix_el_toggle .wxi-checkbox-blank{color:#94a1b3}.webix_rpt_query .webix_tree .webix_scroll_cont>.webix_tree_leaves{display:block}@font-face{font-family:\\\"report-webfont\\\";src:url(\\\"fonts/report-webfont.woff2?1597778382139\\\") format(\\\"woff2\\\"),url(\\\"fonts/report-webfont.woff?1597778382139\\\") format(\\\"woff\\\");font-weight:normal;font-style:normal}[class^=rpi-]:before,[class*=rpi-]:before{font-family:\\\"report-webfont\\\";display:inline-block;font-style:normal;font-weight:normal;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transform:translate(0,0)}.rpi-plus:before{content:\\\"\\\"}.rpi-delete:before{content:\\\"\\\"}.rpi-content-copy:before{content:\\\"\\\"}.rpi-export:before{content:\\\"\\\"}.rpi-sort-alphabetical-descending:before{content:\\\"\\\"}.rpi-sort-alphabetical-ascending:before{content:\\\"\\\"}.rpi-sort-calendar-descending:before{content:\\\"\\\"}.rpi-sort-calendar-ascending:before{content:\\\"\\\"}.rpi-pencil:before{content:\\\"\\\"}.rpi-square-edit-outline:before{content:\\\"\\\"}.rpi-menu:before{content:\\\"\\\"}.rpi-menu-open:before{content:\\\"\\\"}.rpi-dots-vertical:before{content:\\\"\\\"}.rpi-magnify:before{content:\\\"\\\"}.rpi-close:before{content:\\\"\\\"}.rpi-drag-vertical:before{content:\\\"\\\"}.rpi-eye:before{content:\\\"\\\"}.rpi-eye-off-outline:before{content:\\\"\\\"}.rpi-arrow-horizontal-lock:before{content:\\\"\\\"}.rpi-cog:before{content:\\\"\\\"}.rpi-arrow-up:before{content:\\\"\\\"}.rpi-arrow-down:before{content:\\\"\\\"}.rpi-table:before{content:\\\"\\\"}.rpi-poll:before{content:\\\"\\\"}.rpi-chart-tree:before{content:\\\"\\\"}.rpi-chart-line:before{content:\\\"\\\"}.rpi-chart-bell-curve-cumulative:before{content:\\\"\\\"}.rpi-chart-areaspline:before{content:\\\"\\\"}.rpi-chart-line-stacked:before{content:\\\"\\\"}.rpi-chart-areaspline-variant:before{content:\\\"\\\"}.rpi-chart-bar-stacked:before{content:\\\"\\\"}.rpi-vector-triangle:before{content:\\\"\\\"}.rpi-chart-bar:before{content:\\\"\\\"}.rpi-circle-outline:before{content:\\\"\\\"}.rpi-square-outline:before{content:\\\"\\\"}.rpi-triangle-outline:before{content:\\\"\\\"}.rpi-rhombus-outline:before{content:\\\"\\\"}.rpi-trash-can-outline:before{content:\\\"\\\"}.rpi-pail-outline:before{content:\\\"\\\"}.wbx-mark_frozen{text-align:center;cursor:ns-resize}.wbx-mark_frozen .webix_rpt_config_row_name{width:100%;font-size:13px}.wbx-mark_frozen .webix_rpt_config_row_name .webix_icon{vertical-align:middle}.wbx-mark_frozen.webix_dd_drag div{border-color:transparent;background:inherit}.webix_rpt_config_row,.webix_rpt_item_suggest{display:flex;justify-content:space-between;align-items:center}.webix_rpt_config_row .webix_icon,.webix_rpt_item_suggest .webix_icon{line-height:inherit}.webix_rpt_config_row_name{width:310px}.webix_rpt_chart_config .webix_rpt_config_row_name{padding-left:10px}.webix_rpt_columns_list .rpi-drag-vertical{color:#94a1b3;cursor:ns-resize}.webix_rpt_columns_list .webix_cell:not(.webix_dtable_subview):hover{background:#f4f5f9}.webix_rpt_columns_list .webix_cell:not(.webix_dtable_subview):hover .rpi-drag-vertical{color:#475466}.webix_rpt_columns_list .webix_dtable_subview .webix_view{border-left-width:0}.webix_rpt_columns_list .webix_dtable_subview{background-color:transparent}.webix_rpt_columns_list .webix_dtable_subview .webix_inp_label{font-weight:normal}.webix_rpt_drag{cursor:ns-resize}.webix_drag_zone .webix_rpt_config_row .rpi-drag-vertical,.webix_drag_zone .webix_rpt_config_row .webix_tree_close{visibility:hidden}.webix_rpt_delete .webix_button{color:#ff5c4c}.webix_rpt_title{color:#313131;font-weight:500}.webix_rpt_subtitle .webix_inp_label,.webix_rpt_subtitle .webix_el_box{color:#475466;font-weight:normal}.webix_rpt_date_selector{color:#1ca1c1;display:inline-block;line-height:1}.webix_rpt_date_selector .webix_rpt_sort_selector .webix_rpt_date_selector .webix_icon{cursor:pointer}.webix_rpt_grouppopup .webix_icon{padding-top:6px;float:right}.webix_rpt_grouppopup .wxi-radiobox-marked{color:#1ca1c1}.webix_rpt_grouppopup .wxi-radiobox-blank{color:#94a1b3}.webix_rpt_groupselect_delete,.webix_rpt_multicombo .webix_multicombo_delete{font-size:16px;width:20px;line-height:20px}.webix_rpt_groupselect_delete:after,.webix_rpt_multicombo .webix_multicombo_delete:after{content:\\\"\\\"}.webix_rpt_summary_form{border-color:transparent}.webix_rpt_chart_color{width:24px;height:24px;border-radius:2px;margin-left:10px}.webix_rpt_config_row_hover{background:#f4f5f9}.webix_rpt_colorpicker .webix_input_icon{position:absolute;right:32px}.webix_rpt_colorpicker .webix_input_icon:before{font-size:20px;content:\\\"\\\";left:30px;position:absolute;color:#94a1b3;top:2px}.webix_rpt_markerselect .webix_icon{font-size:18px;margin-right:2px}.webix_rpt_markerselect_list .webix_icon{font-size:18px;margin-right:17px}.webix_rpt_action_remove{color:#94a1b3;margin-top:6px}.webix_rpt_description .webix_template{padding-left:2px;font-size:13px}.webix_rpt_qselect_icon{padding-top:7px;float:right;color:#94a1b3}.webix_rpt_qselect_suggest .webix_scroll_cont:empty:before{content:attr(placeholder);font-size:13px;font-style:italic;color:#8693a5;text-align:center;display:inline-block;width:100%;line-height:25px}.webix_rpt_groupselect .webix_multicombo_value{display:flex;align-items:center;padding-right:6px}.webix_rpt_groupselect .webix_multicombo_value .webix_rpt_groupselect_delete{margin-top:0;position:static;line-height:1;margin-left:5px;height:auto}.webix_rpt_groupselect .webix_multicombo_value>span{vertical-align:middle}.webix_rpt_groupselect_sep{padding:0 6px 0 3px}.webix_rpt_bcols .webix_dtable_subview{padding-left:0}.webix_rpt_bucket_values .webix_list_item{display:flex;align-items:center}.webix_rpt_bucket_values .webix_list_item .webix_rpt_bucket_value{width:170px}.webix_rpt_multicombo .webix_multicombo_text{display:flex;align-items:center}.webix_rpt_bucket_value{max-width:170px;text-overflow:ellipsis;display:inline-block;overflow:hidden}.webix_multicombo_value .webix_rpt_bucket_icon{display:none}.webix_rpt_bucket_icon{width:25px;text-align:right;color:#94a1b3}.webix_rpt_bucket_sublabel{font-size:13px;color:#8693a5}.webix_rpt_bucket_sublabel.webix_icon{font-size:15px}.webix_rpt_buckets_num{margin-right:15px}.webix_rpt_subview .webix_invalid .webix_el_box input,.webix_rpt_subview .webix_invalid .webix_el_box .webix_inp_static{background:#fff;color:#475466}.webix_rpt_bucket_delete{width:40px;color:#94a1b3}.webix_rpt_bucket_delete:hover{color:#475466}.webix_rpt_bucket_value_selected{color:#8693a5}.webix_el_search .webix_badge{cursor:default;padding-left:4px}.webix_rpt .webix_treemap_item.l0{background-color:#42a5f5}.webix_rpt .webix_treemap_item.l1{background-color:#64b5f6}.webix_rpt .webix_treemap_item.l2{background-color:#90caf9}.webix_rpt .webix_treemap_item.l3{background-color:#bbdefb}.webix_rpt_list_btn .webix_cell{padding:0}.webix_rpt_list_btn .webix_icon{line-height:38px;border-radius:50%;width:38px;height:38px;color:#8693a5}.webix_rpt_list_btn .webix_icon:hover{background:rgba(0,0,0,0.07);color:#475466}.webix_rpt_list .webix_selected .webix_rpt_list_report_date,.webix_rpt_list .webix_selected .webix_icon,.webix_rpt_list .webix_selected:focus .webix_rpt_list_report_date,.webix_rpt_list .webix_selected:focus .webix_icon{color:#8693a5}.webix_rpt_list .webix_selected .webix_icon:hover,.webix_rpt_list .webix_selected:focus .webix_icon:hover{color:#475466}.webix_rpt_list_block{position:relative;padding-top:6px}.webix_rpt_list_report_date,.webix_rpt_list_report_name{width:260px;line-height:22px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.webix_rpt_list_report_date{color:#8693a5;font-size:13px;line-height:20px;height:20px;overflow:hidden}.webix_rpt_action_menu{position:absolute;right:0;top:50%;color:#94a1b3;margin-top:-8px}.webix_rpt_action_menu:hover{color:#475466}.webix_rpt_btn_active.webix_rpt_sort_icon .webix_icon,.webix_rpt_btn_active.webix_rpt_sort_icon button:hover .webix_icon{color:#1ca1c1}.webix_rpt_sort_icon .webix_icon{color:#94a1b3}.webix_rpt_sources_path{float:right;color:#888;font-size:12px}.webix_multicombo_value .webix_rpt_sources_path{display:none}.wbq-field-name .webix_rpt_sources_path{position:absolute;right:30px}.webix_rpt_popup_menu .webix_list_item{padding-left:7px}.webix_rpt_popup_menu .webix_icon{color:#94a1b3;float:left;font-size:19px;margin-top:6px;margin-right:5px}.webix_rpt_popup_menu .webix_disabled .webix_icon{color:#bfccdf}.webix_rpt_popup_menu .webix_list_item:active,.webix_rpt_popup_menu .webix_list_item:focus{background:transparent}.webix_rpt_vertical_chart_labels .webix_axis_item_x{transform:rotate(-45deg);text-align:right;transform-origin:75% 320%}.webix_rpt_vertical_chart_labels .webix_rpt_chart_label{width:80px}.webix_rpt_chart_label{max-width:80px}.webix_rpt_vertical_chart_labels .webix_rpt_chart_label0{left:40px !important}.webix_el_search .webix_badge{top:9px;right:29px}.webix_rpt_cls1{fill:#9dbabf;fill-opacity:.25}.webix_rpt_cls2{fill:#edeff0}.webix_rpt_cls3{fill:#b4dfea}.webix_rpt_cls4{fill:#fafbff}.webix_rpt_cls5{fill:#dedede}.webix_rpt_cls6{fill:#f2f2f2}.webix_rpt_cls7{fill:#fff}.webix_rpt_cls8{fill:#b4dfea}.webix_rpt_cls9{fill:#f4f5f9}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@charset \\\"UTF-8\\\";@font-face{font-family:\\\"scheduler-webfont\\\";src:url(\\\"fonts/scheduler-webfont.woff2\\\") format(\\\"woff2\\\"),url(\\\"fonts/scheduler-webfont.woff\\\") format(\\\"woff\\\");font-weight:normal;font-style:normal}[class^=shi-]:before,[class*=shi-]:before{font-family:\\\"scheduler-webfont\\\";display:inline-block;font-style:normal;font-weight:normal;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transform:translate(0,0)}.shi-agenda:before{content:\\\"\\\"}.shi-day:before{content:\\\"\\\"}.shi-month:before{content:\\\"\\\"}.shi-week:before{content:\\\"\\\"}.shi-back:before{content:\\\"\\\"}.shi-menu:before{content:\\\"\\\"}.shi-timeline:before{content:\\\"\\\"}.shi-units:before{content:\\\"\\\"}.shi-content-copy:before{content:\\\"\\\"}.shi-year:before{content:\\\"\\\"}.webix_scheduler_info .webix_template{overflow:auto;padding:0 0 0 2px}.webix_scheduler_info .webix_template .webix_scheduler_event_title{color:#313131;font-weight:500;margin-top:7px;margin-bottom:20px}.webix_scheduler_info .webix_template .webix_scheduler_event_from_to,.webix_scheduler_info .webix_template .webix_scheduler_event_recurring_pattern{margin-bottom:20px;line-height:20px}.webix_scheduler_info .webix_template .webix_scheduler_event_details_title,.webix_scheduler_info .webix_template .webix_scheduler_event_units_title{color:#313131;font-weight:500;margin-bottom:10px}.webix_scheduler_info .webix_template .webix_scheduler_event_text{line-height:20px}.webix_scheduler_info .webix_template .webix_scheduler_event_units{margin-bottom:10px}.webix_scheduler_info .webix_template .webix_scheduler_event_units .webix_scheduler_event_unit_item{display:inline-block;margin-right:6px}.webix_scheduler_section_tpl{margin-top:20px;margin-bottom:20px}.webix_scheduler_section_tpl .webix_scheduler_section_title{font-weight:500;color:#313131}.webix_scheduler_cal_color .webix_inp_static{padding-right:50px}.webix_scheduler_cal_color_suggest .webix_list_item,.webix_scheduler_cal_color_suggest .webix_list_item.webix_selected{position:relative;padding-right:32px}.webix_scheduler_cal_color_suggest .webix_scheduler_cal_marker{right:4px}.webix_scheduler_cal_marker{display:block;width:24px;height:24px;border-radius:2px;position:absolute;right:26px;top:50%;margin-top:-12px}.webix_scheduler_counter .webix_inp_counter_value{width:calc(100% - 60px)}.webix_scheduler_subform_popup{border-width:1px}.webix_scheduler_subform_popup .webix_win_head{border-bottom-color:transparent}.webix_scheduler_cal_disabled{color:#94a1b3}.webix_scheduler_cal_disabled .webix_scheduler_calendar_marker{opacity:.6}.webix_scheduler_day_events{border-color:#edeff0;position:relative}.webix_scheduler_day_events .webix_list_item{padding:0;cursor:default;padding:0}.webix_scheduler_day_event{padding:8px 8px 16px;overflow:hidden;cursor:pointer;position:absolute;border-radius:2px;border-left:3px solid;box-sizing:border-box;transition:box-shadow .15s}.webix_scheduler_day_event:hover{z-index:1;box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_scheduler_day_event:hover .webix_scheduler_resizer{visibility:visible}.webix_active_resize .webix_scheduler_day_events .webix_scheduler_day_event,.webix_active_resize .webix_scheduler_day_events .webix_list_item{cursor:ns-resize}.webix_drag_event,.webix_drag_event:hover{border-radius:2px;box-shadow:3px 3px 7px rgba(0,0,0,0.3),2px 2px 4px rgba(0,0,0,0.2)}.webix_active_resize .webix_scheduler_day_event:hover,.webix_noselect .webix_scheduler_day_event:hover{box-shadow:none}.webix_active_resize .webix_scheduler_day_event:hover .webix_scheduler_resizer,.webix_noselect .webix_scheduler_day_event:hover .webix_scheduler_resizer{visibility:hidden}.webix_active_resize .webix_scheduler_day_event.webix_resize_event:hover .webix_scheduler_resizer{visibility:visible}.webix_resize_event{border-radius:2px;box-shadow:3px 3px 7px rgba(0,0,0,0.3),2px 2px 4px rgba(0,0,0,0.2)}.webix_resize_event .webix_scheduler_resizer{visibility:visible}.webix_scheduler_resizer{position:absolute;bottom:0;left:0;width:100%;height:16px;font-size:16px;visibility:hidden;cursor:ns-resize}.webix_scheduler_resizer::before{content:\\\"\\\";transform:rotate(90deg);position:absolute;margin-left:-10px}.webix_scheduler_multilist{border-left-color:#edeff0;border-bottom-color:transparent}.webix_scheduler_multilist .webix_list_item{cursor:default;padding:0;line-height:normal;font-weight:500;position:relative;border-color:transparent}.webix_scheduler_multilist .webix_scheduler_multi_more .webix_scheduler_multiday_event{transition:background-color .3s;background-color:#f4f5f9;text-align:center;border:0}.webix_scheduler_multilist .webix_scheduler_multi_more .webix_scheduler_multiday_event:hover{background-color:#e7e9f2;box-shadow:none}.webix_scheduler_multilist .webix_scheduler_multiday_event{top:4px;left:1px}.webix_scheduler_multiday_event{cursor:pointer;position:absolute;border-radius:2px;border-left:3px solid;padding:0 8px;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:box-shadow .15s}.webix_scheduler_multiday_event:hover{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_scheduler_event_break_left.webix_scheduler_event_break_right:hover,.webix_scheduler_event_break_left.webix_scheduler_event_break_right.webix_scheduler_event_selected{box-shadow:3px 9px 5px -7px rgba(0,0,0,0.3),2px 8px 2px -7px rgba(0,0,0,0.2)}.webix_scheduler_event_name{display:inline-block;line-height:20px;font-weight:500;font-size:14px}.webix_scheduler_event_time{line-height:14px;margin-top:4px;font-size:12px}.webix_scheduler_scale .webix_list_item{cursor:default;padding:0;border-bottom-color:transparent;text-align:center}.webix_scheduler_inner_day{height:100%;overflow:hidden}.webix_scheduler_day_scroll{border-top-color:#edeff0;position:relative}.webix_scheduler_day_header .webix_template{font-weight:500;line-height:32px;text-align:center;padding:0 0 0 50px}.webix_scheduler_today_marker{z-index:2;position:absolute;background-color:#ea764f;width:100%;height:2px;margin-top:-1px;pointer-events:none}.webix_scheduler_today_marker:before{content:\\\"\\\";display:block;background:inherit;width:12px;height:12px;margin-top:-5px;border-radius:50%}.webix_scheduler_multilist .webix_drag_event.webix_list_item{box-shadow:none;background:transparent}.webix_scheduler_multilist .webix_drag_event.webix_list_item .webix_scheduler_multiday_event{box-shadow:3px 3px 7px rgba(0,0,0,0.3),2px 2px 4px rgba(0,0,0,0.2)}.webix_scheduler_day_header .webix_dataview_item{border-color:transparent;text-align:center;line-height:31px;padding:0;cursor:default}.webix_scheduler_day_header .webix_dataview_item .webix_scheduler_weekday{font-size:12px}.webix_scheduler_day_header .webix_dataview_item .webix_scheduler_monthday{font-size:16px;font-weight:500}.webix_scheduler_day_header .webix_dataview_item.webix_scheduler_list_today .webix_scheduler_monthday{width:22px;height:22px;line-height:22px}.webix_scheduler_week_days{border-top-color:#edeff0;position:relative}.webix_scheduler_week .webix_unit_header{color:#313131;border-color:transparent;font-weight:normal;line-height:28px}.webix_scheduler_week .webix_unit_header_inner{margin-right:8px}.webix_scheduler_week .webix_scheduler_monthday{font-size:16px;font-weight:500}.webix_scheduler_week .webix_scheduler_monthday.webix_scheduler_today{width:22px;height:22px;line-height:22px}.webix_scheduler_multidays{border-left-color:#edeff0;border-bottom-color:transparent}.webix_scheduler_multidays .webix_dataview_item{border-color:transparent;cursor:default}.webix_scheduler_multidays .webix_scheduler_multiday_event{font-weight:500}.webix_scheduler_multidays .webix_scheduler_multi_more{transition:background-color .3s;background-color:#f4f5f9;text-align:center;border:0}.webix_scheduler_multidays .webix_scheduler_multi_more:hover{background-color:#e7e9f2;box-shadow:none}.webix_drag_event .webix_scheduler_multiday_event:hover,.webix_noselect .webix_scheduler_multiday_event:hover{box-shadow:none}.webix_drag_event .webix_scheduler_multiday_event.webix_scheduler_multi_more,.webix_noselect .webix_scheduler_multiday_event.webix_scheduler_multi_more{background-color:#e7e9f2}.webix_scheduler_list_today .webix_scheduler_monthday,.webix_scheduler_monthday.webix_scheduler_today{display:inline-block;width:20px;height:20px;line-height:20px;border-radius:50%;border:1px solid #1ca1c1;text-align:center}.webix_cal_day_with_event .webix_cal_day_inner{position:relative}.webix_cal_day_with_event .webix_cal_day_inner::after{content:\\\"\\\";position:absolute;display:block;top:70%;left:50%;width:4px;height:4px;margin-left:-2px;border-radius:50%;background-color:#1ca1c1}.webix_cal_select.webix_cal_day_with_event .webix_cal_day_inner::after{background-color:#fff}.webix_cal_outside.webix_cal_day_with_event .webix_cal_day_inner::after{background-color:#94a1b3}.webix_scheduler_calendar .webix_cal_day{position:relative;padding:2px 0 0 2px;line-height:20px;font-size:14px;cursor:default}.webix_scheduler_calendar .webix_cal_day:nth-child(7n){border-right-color:transparent}.webix_scheduler_calendar .webix_cal_event{color:#1ca1c1;font-weight:normal}.webix_scheduler_calendar .webix_event_marker{width:16px;margin-right:2px}.webix_scheduler_calendar .webix_event_marker_inner{margin:0 3px;vertical-align:middle}.webix_scheduler_calendar .webix_cal_date{display:inline-block;line-height:24px;height:24px;width:24px;border:1px solid transparent;cursor:pointer;text-align:center;border-radius:50%}.webix_scheduler_calendar .webix_cal_date:hover{background-color:#f4f5f9;color:#1ca1c1;font-weight:500}.webix_scheduler_calendar .webix_cal_today .webix_cal_date{border-color:#1ca1c1}.webix_scheduler_calendar .webix_event_time{font-weight:500;margin-right:4px}.webix_drag_event .webix_scheduler_month_event:hover,.webix_noselect .webix_scheduler_month_event:hover{box-shadow:none}.webix_drag_event .webix_scheduler_month_event_single:hover,.webix_noselect .webix_scheduler_month_event_single:hover{background-color:transparent}.webix_drag_event.webix_scheduler_more_list .webix_scheduler_month_event,.webix_drag_event.webix_scheduler_more_list .webix_scheduler_month_event_single{width:100%}.webix_scheduler_calendar_header .webix_dataview_item{text-align:center;line-height:32px;border-color:transparent;cursor:default}.webix_scheduler_month_events{position:relative}.webix_scheduler_month_event,.webix_scheduler_month_event_single{z-index:1;position:absolute;box-sizing:border-box;border-radius:2px;padding:0 8px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;user-select:none;cursor:pointer}.webix_scheduler_month_event.webix_scheduler_past_event,.webix_scheduler_month_event_single.webix_scheduler_past_event{color:#8393a9}.webix_scheduler_month_event{border-left:3px solid;transition:box-shadow .15s}.webix_scheduler_month_event_single{transition:background .15s;padding:0 8px 0 4px}.webix_scheduler_month_event:hover{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_scheduler_month_event_single:hover{background-color:#f4f5f9}.webix_scheduler_more{display:inline-block;border-radius:20px;height:20px;width:auto;padding:0 8px;color:#475466;font-size:14px;font-weight:500;transition:background .15s;position:absolute;right:8px;top:5px}.webix_scheduler_more:hover{background-color:#f4f5f9}.webix_scheduler_more_list .webix_scheduler_month_event,.webix_scheduler_more_list .webix_scheduler_month_event_single{box-sizing:border-box;width:calc(100% - 8px);display:block;border-radius:2px;line-height:20px}.webix_scheduler_more_list .webix_scheduler_month_event{padding:4px 8px}.webix_scheduler_more_list .webix_scheduler_month_event .webix_event_text{width:100%;padding:0}.webix_scheduler_more_list .webix_scheduler_month_event_single{padding:4px 8px 4px 4px}.webix_scheduler_more_list .webix_scheduler_month_event_single .webix_event_text{width:calc(100% - 14px)}.webix_scheduler_more_list .webix_list_item{padding:4px;border:0}.webix_scheduler_more_list .webix_event_marker{float:left;height:40px;margin-right:4px}.webix_scheduler_more_list .webix_event_marker_inner{margin-top:4px}.webix_scheduler_more_list .webix_event_text{float:left;font-weight:500;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.webix_scheduler_more_list .webix_event_time{float:left;font-size:12px;line-height:16px;margin-top:4px}.webix_scheduler_month_event_single.webix_scheduler_event_selected{background-color:#f4f5f9;box-shadow:none}.webix_scheduler_event_break_left::before,.webix_scheduler_event_break_right::after{content:\\\"\\\";height:100%;display:block;position:absolute;top:0;box-sizing:border-box;border-top:12px solid transparent;border-bottom:12px solid transparent;border-right:8px solid}.webix_scheduler_event_break_left{border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0;padding-left:11px}.webix_scheduler_event_break_left::before{left:0;border-right-color:inherit;border-top-color:#fff;border-bottom-color:#fff}.webix_scheduler_event_break_right::after{right:0;border-right-color:#fff}.webix_scheduler_event_break_left:hover,.webix_scheduler_event_break_left.webix_scheduler_event_selected{box-shadow:6px 6px 5px -4px rgba(0,0,0,0.3),5px 5px 2px -4px rgba(0,0,0,0.2)}.webix_scheduler_event_break_right:hover,.webix_scheduler_event_break_right.webix_scheduler_event_selected{box-shadow:-1px 5px 5px -3px rgba(0,0,0,0.3),-2px 4px 2px -3px rgba(0,0,0,0.2)}.webix_drag_zone .webix_scheduler_event_break_left::before,.webix_drag_zone .webix_scheduler_event_break_right::after{visibility:hidden}.webix_drag_zone .webix_scheduler_event_break_left{border-radius:2px;border-left-width:3px;padding-left:8px}.webix_scheduler_dnd_1 .webix_scheduler_event_break_left::before{border-top-color:#f4f5f9;border-bottom-color:#f4f5f9}.webix_scheduler_dnd_n .webix_scheduler_event_break_right::after{border-right-color:#f4f5f9}.webix_scheduler_year{justify-content:space-evenly}.webix_scheduler_year .webix_cal_month,.webix_scheduler_year .webix_cal_month .webix_cal_month_name{cursor:pointer}.webix_scheduler_year .webix_cal_month:hover .webix_cal_month_name{color:#1ca1c1}.webix_scheduler_year .webix_cal_outside{visibility:hidden}.webix_scheduler_absbutton{border-radius:50%;z-index:91}.webix_scheduler_absbutton .webix_el_box{background-color:#1ca1c1}.webix_scheduler_absbutton .webix_el_box .webix_icon_button:hover:before{background-color:#1992af}.webix_scheduler_absbutton .webix_el_box .webix_icon{color:#fff}.webix_scheduler_navlist .webix_icon{color:#94a1b3}.webix_scheduler_navlist .webix_selected .webix_icon{color:#1ca1c1}.webix_scheduler_navlist .webix_list_item,.webix_scheduler_navlist .webix_list_item.webix_selected{border-bottom-color:transparent}.webix_scheduler_navlist .webix_list_item:hover,.webix_scheduler_navlist .webix_list_item.webix_selected:hover{background-color:#f4f5f9}.webix_scheduler_navlist .webix_list_item.webix_selected{color:#475466;background-color:#f4f5f9}.webix_scheduler_cal_list .webix_list_item{padding:2px 8px 2px 0}.webix_scheduler_cal_list .webix_list_item span{float:left}.webix_scheduler_cal_list .webix_list_item .webix_icon{line-height:inherit}.webix_scheduler_cal_list .webix_list_item:hover .webix_scheduler_cal_edit{color:#94a1b3}.webix_scheduler_cal_list .webix_list_item.webix_selected{box-shadow:none;padding:2px 8px 2px 0;background-color:transparent}.webix_scheduler_cal_list .webix_list_item.webix_selected .webix_scheduler_cal_edit{color:#1ca1c1}.webix_scheduler_cal_list .webix_list_item.webix_selected .webix_scheduler_cal_edit::before{content:\\\"\\\"}.webix_scheduler_cal_list .webix_dt_editor input{padding-left:23px;border-color:transparent;border-bottom-color:#1ca1c1}.webix_scheduler_cal_popup .webix_win_head{border-bottom-color:transparent}.webix_scheduler_active{margin-right:4px}.webix_scheduler_cal_title{overflow:hidden;width:calc(100% - 24px - 29px - 4px);white-space:nowrap;text-overflow:ellipsis}.webix_scheduler_cal_edit{color:transparent;font-size:18px;width:31px;line-height:31px;border-radius:50%}.webix_scheduler_cal_edit:hover{color:#1ca1c1;background-color:#f4f5f9}.webix_scheduler_cal_edit.webix_scheduler_cal_visible{color:#94a1b3}.webix_scheduler_settings .webix_template{padding:0;text-align:center;font-weight:500;line-height:38px}.webix_scheduler_settings .webix_template:hover{background-color:#f4f5f9}.webix_event_overall{padding:0 8px 0 20px;height:100%;line-height:49px;display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-align-items:center}.webix_event_overall.webix_scheduler_past_event{color:#8393a9}.webix_event_overall.webix_scheduler_past_event .webix_event_time .end{color:#8393a9}.webix_event_overall .webix_event_time{flex-basis:70px;flex-shrink:0;display:block;text-align:center}.webix_event_overall .webix_event_time .start,.webix_event_overall .webix_event_time .end{font-size:12px;line-height:16px}.webix_event_overall .webix_event_time .end{color:#94a1b3}.webix_list_item .webix_event_text{padding-left:10px;display:block;-webkit-box-flex:1;-webkit-flex:1;flex:1;white-space:nowrap;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis}.webix_event_marker{display:inline-block;width:10px}.webix_event_marker_inner{display:inline-block;border-radius:50%;width:10px;height:10px}.webix_scheduler_event_selected{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_scheduler_multi_space{text-align:center}.webix_scheduler_multi_space .webix_template{padding:0}.webix_scheduler_multi_space .webix_scheduler_more_icon{cursor:pointer;color:#94a1b3;transition:color .3s;position:relative;top:calc(100% - 26px);height:26px;width:26px}.webix_scheduler_multi_space .webix_scheduler_more_icon:hover{color:#475466}.webix_scheduler_multi_space .webix_scheduler_more_icon:after{content:\\\"\\\";transition:background-color .3s;height:26px;width:26px;border-radius:50%;position:absolute;top:-4px;left:0;z-index:-1}.webix_scheduler_multi_space .webix_scheduler_more_icon:hover:after{background-color:rgba(148,161,179,0.1)}.webix_scheduler_agenda .webix_scroll_cont{padding-left:120px}.webix_scheduler_agenda .webix_list_item{border-color:transparent;padding:0;width:calc(100% - 120px) !important}.webix_scheduler_agenda .webix_event_overall{line-height:40px;height:40px}.webix_scheduler_agenda .webix_event_overall:hover{background-color:#f4f5f9}.webix_scheduler_agenda .webix_event_overall.webix_scheduler_past_event{color:#8393a9}.webix_scheduler_agenda .webix_event_first{padding-top:8px}.webix_scheduler_agenda .webix_event_last{padding-bottom:8px}.webix_scheduler_agenda .webix_event_last:not(:last-child){border-color:#edeff0}.webix_scheduler_agenda .webix_agenda_selected{background-color:#f4f5f9}.webix_scheduler_agenda .webix_unit_header{float:left;margin-left:-120px;width:120px !important;background-color:transparent;border-bottom-width:0;line-height:18px;padding:6px 8px;box-sizing:border-box}.webix_scheduler_agenda .webix_unit_header:not(:first-child){border-top:1px solid #edeff0;margin-top:-1px}.webix_scheduler_agenda .webix_unit_header .webix_scheduler_dayofweek{color:#94a1b3;font-weight:normal;font-size:12px}.webix_scheduler_timeline_scale .webix_template{padding:0}.webix_scheduler_timeline_scale_row{display:flex;box-sizing:border-box}.webix_scheduler_timeline_scale_row:not(:last-child){border-bottom:1px solid #dadee0}.webix_scheduler_timeline_scale_cell{display:flex;flex:0 0 auto;justify-content:center;align-items:center;border-right:1px solid #dadee0;box-sizing:border-box;background-color:#f4f5f9}.webix_scheduler_timeline_event{position:absolute;box-sizing:border-box;border-radius:2px;color:#fff;cursor:pointer;border-left:3px solid;transition:box-shadow .15s;overflow:hidden}.webix_scheduler_timeline_event:hover{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_scheduler_timeline_content{text-align:center;line-height:30px;position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;user-select:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 12px}.webix_scheduler_timeline_task .webix_scheduler_timeline_content{padding:0 32px}.webix_scheduler_timeline_bars .webix_list_item,.webix_scheduler_timeline_sections .webix_cell{border-color:#dadee0;text-overflow:ellipsis}.webix_scheduler_timeline_bars .webix_list_item{cursor:default}.webix_scheduler_timeline_sections .webix_c_scroll_y div{color:transparent;background-color:transparent}.webix_scheduler_timeline_space{background-color:#f4f5f9}.webix_scheduler_timeline_event.webix_scheduler_multi_more{transition:background-color .3s;background-color:#f4f5f9}.webix_scheduler_timeline_event.webix_scheduler_multi_more .webix_scheduler_timeline_content{text-align:left;color:#475466}.webix_scheduler_timeline_event.webix_scheduler_multi_more:hover{background-color:#e7e9f2;box-shadow:none}.webix_scheduler_timeline_event.webix_scheduler_event_break_left{border-left-width:0;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.webix_scheduler_timeline_event.webix_scheduler_event_break_left:hover{box-shadow:6px 6px 5px -4px rgba(0,0,0,0.2),5px 5px 2px -4px rgba(0,0,0,0.2)}.webix_scheduler_timeline_event.webix_scheduler_event_break_right:hover{box-shadow:-1px 5px 5px -3px rgba(0,0,0,0.3),-2px 4px 2px -3px rgba(0,0,0,0.2)}.webix_scheduler_copy.webix_scheduler_day_event.webix_scheduler_event_selected,.webix_scheduler_copy.webix_scheduler_day_event,.webix_scheduler_copy.webix_scheduler_month_event.webix_scheduler_event_selected,.webix_scheduler_copy.webix_scheduler_month_event,.webix_scheduler_copy.webix_scheduler_multiday_event,.webix_scheduler_copy.webix_scheduler_timeline_event.webix_scheduler_event_selected,.webix_scheduler_copy.webix_scheduler_timeline_event{box-shadow:2px 2px 5px #1ca1c1,1px 1px 2px #1ca1c1}.webix_scheduler_copy.webix_scheduler_multiday_event.webix_scheduler_event_break_right,.webix_scheduler_copy.webix_scheduler_month_event.webix_scheduler_event_break_right,.webix_scheduler_copy.webix_scheduler_timeline_event.webix_scheduler_event_break_right{box-shadow:3px 9px 5px -7px #1ca1c1,-6px 9px 3px -7px #1ca1c1}.webix_scheduler_copy.webix_scheduler_multiday_event.webix_scheduler_event_break_left,.webix_scheduler_copy.webix_scheduler_month_event.webix_scheduler_event_break_left,.webix_scheduler_copy.webix_scheduler_timeline_event.webix_scheduler_event_break_left{box-shadow:3px 9px 5px -7px #1ca1c1,2px 8px 2px -7px #1ca1c1}.webix_scheduler_copy .webix_scheduler_multiday_event.webix_scheduler_event_break_right{box-shadow:3px 9px 5px -7px #1ca1c1,-6px 9px 3px -7px #1ca1c1}.webix_scheduler_copy .webix_scheduler_multiday_event.webix_scheduler_event_break_left{box-shadow:3px 9px 5px -7px #1ca1c1,2px 8px 2px -7px #1ca1c1}.webix_scheduler_cut{opacity:.5}.webix_scheduler_month_event_single.webix_scheduler_event_selected.webix_scheduler_copy,.webix_scheduler_month_event_single.webix_scheduler_copy{background-color:rgba(28,161,193,0.2)}.webix_scheduler_paste_target{box-shadow:inset 0 2px 0 0 #1ca1c1,inset 0 -2px 0 0 #1ca1c1}.webix_scheduler_clipboard_target.webix_scheduler_calendar .webix_cal_day,.webix_scheduler_clipboard_target.webix_scheduler_timeline_bars .webix_list_item,.webix_scheduler_clipboard_target.webix_scheduler_day_events .webix_list_item,.webix_scheduler_clipboard_target.webix_scheduler_multilist{cursor:pointer}.webix_scheduler .webix_progress_top{z-index:10000}.webix_scheduler_action_popup .webix_win_head{border-bottom-color:transparent}.webix_scheduler_sidemenu{z-index:1 !important}.webix_toolbar.webix_scheduler_toolbar .webix_view,.webix_toolbar.webix_scheduler_toolbar .webix_control.webix_el_tabbar{background-color:transparent}.webix_toolbar.webix_scheduler_toolbar .webix_item_tab{background:transparent;color:#fff}.webix_toolbar.webix_scheduler_toolbar .webix_item_tab:hover{background-color:rgba(0,0,0,0.2)}.webix_toolbar.webix_scheduler_toolbar .webix_item_tab.webix_selected,.webix_toolbar.webix_scheduler_toolbar .webix_item_tab.webix_selected:focus{color:#fff;box-shadow:inset 0 -2px #fff}.webix_scheduler_cal_title{width:calc(100% - 24px - 31px - 4px)}.webix_scheduler_danger .webix_button{color:#ff5c4c;background-color:#fff1ef}.webix_scheduler_danger .webix_button:hover,.webix_scheduler_danger .webix_button:focus{background-color:#ffe7e5}.webix_scheduler_danger .webix_button:active{background-color:#ffdedb}.webix_scheduler_checkbox_allday .webix_custom_checkbox::before{margin-left:-2px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./js/webix/components/scheduler/scheduler.min.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"@charset \\\"UTF-8\\\";@font-face{font-family:\\\"scheduler-webfont\\\";src:url(\\\"fonts/scheduler-webfont.woff2\\\") format(\\\"woff2\\\"),url(\\\"fonts/scheduler-webfont.woff\\\") format(\\\"woff\\\");font-weight:normal;font-style:normal}[class^=shi-]:before,[class*=shi-]:before{font-family:\\\"scheduler-webfont\\\";display:inline-block;font-style:normal;font-weight:normal;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transform:translate(0,0)}.shi-agenda:before{content:\\\"\\\"}.shi-day:before{content:\\\"\\\"}.shi-month:before{content:\\\"\\\"}.shi-week:before{content:\\\"\\\"}.shi-back:before{content:\\\"\\\"}.shi-menu:before{content:\\\"\\\"}.shi-timeline:before{content:\\\"\\\"}.shi-units:before{content:\\\"\\\"}.shi-content-copy:before{content:\\\"\\\"}.shi-year:before{content:\\\"\\\"}.webix_scheduler_info .webix_template{overflow:auto;padding:0 0 0 2px}.webix_scheduler_info .webix_template .webix_scheduler_event_title{color:#313131;font-weight:500;margin-top:7px;margin-bottom:20px}.webix_scheduler_info .webix_template .webix_scheduler_event_from_to,.webix_scheduler_info .webix_template .webix_scheduler_event_recurring_pattern{margin-bottom:20px;line-height:20px}.webix_scheduler_info .webix_template .webix_scheduler_event_details_title,.webix_scheduler_info .webix_template .webix_scheduler_event_units_title{color:#313131;font-weight:500;margin-bottom:10px}.webix_scheduler_info .webix_template .webix_scheduler_event_text{line-height:20px}.webix_scheduler_info .webix_template .webix_scheduler_event_units{margin-bottom:10px}.webix_scheduler_info .webix_template .webix_scheduler_event_units .webix_scheduler_event_unit_item{display:inline-block;margin-right:6px}.webix_scheduler_section_tpl{margin-top:20px;margin-bottom:20px}.webix_scheduler_section_tpl .webix_scheduler_section_title{font-weight:500;color:#313131}.webix_scheduler_cal_color .webix_inp_static{padding-right:50px}.webix_scheduler_cal_color_suggest .webix_list_item,.webix_scheduler_cal_color_suggest .webix_list_item.webix_selected{position:relative;padding-right:32px}.webix_scheduler_cal_color_suggest .webix_scheduler_cal_marker{right:4px}.webix_scheduler_cal_marker{display:block;width:24px;height:24px;border-radius:2px;position:absolute;right:26px;top:50%;margin-top:-12px}.webix_scheduler_counter .webix_inp_counter_value{width:calc(100% - 60px)}.webix_scheduler_subform_popup{border-width:1px}.webix_scheduler_subform_popup .webix_win_head{border-bottom-color:transparent}.webix_scheduler_cal_disabled{color:#94a1b3}.webix_scheduler_cal_disabled .webix_scheduler_calendar_marker{opacity:.6}.webix_scheduler_day_events{border-color:#edeff0;position:relative}.webix_scheduler_day_events .webix_list_item{padding:0;cursor:default;padding:0}.webix_scheduler_day_event{padding:8px 8px 16px;overflow:hidden;cursor:pointer;position:absolute;border-radius:2px;border-left:3px solid;box-sizing:border-box;transition:box-shadow .15s}.webix_scheduler_day_event:hover{z-index:1;box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_scheduler_day_event:hover .webix_scheduler_resizer{visibility:visible}.webix_active_resize .webix_scheduler_day_events .webix_scheduler_day_event,.webix_active_resize .webix_scheduler_day_events .webix_list_item{cursor:ns-resize}.webix_drag_event,.webix_drag_event:hover{border-radius:2px;box-shadow:3px 3px 7px rgba(0,0,0,0.3),2px 2px 4px rgba(0,0,0,0.2)}.webix_active_resize .webix_scheduler_day_event:hover,.webix_noselect .webix_scheduler_day_event:hover{box-shadow:none}.webix_active_resize .webix_scheduler_day_event:hover .webix_scheduler_resizer,.webix_noselect .webix_scheduler_day_event:hover .webix_scheduler_resizer{visibility:hidden}.webix_active_resize .webix_scheduler_day_event.webix_resize_event:hover .webix_scheduler_resizer{visibility:visible}.webix_resize_event{border-radius:2px;box-shadow:3px 3px 7px rgba(0,0,0,0.3),2px 2px 4px rgba(0,0,0,0.2)}.webix_resize_event .webix_scheduler_resizer{visibility:visible}.webix_scheduler_resizer{position:absolute;bottom:0;left:0;width:100%;height:16px;font-size:16px;visibility:hidden;cursor:ns-resize}.webix_scheduler_resizer::before{content:\\\"\\\";transform:rotate(90deg);position:absolute;margin-left:-10px}.webix_scheduler_multilist{border-left-color:#edeff0;border-bottom-color:transparent}.webix_scheduler_multilist .webix_list_item{cursor:default;padding:0;line-height:normal;font-weight:500;position:relative;border-color:transparent}.webix_scheduler_multilist .webix_scheduler_multi_more .webix_scheduler_multiday_event{transition:background-color .3s;background-color:#f4f5f9;text-align:center;border:0}.webix_scheduler_multilist .webix_scheduler_multi_more .webix_scheduler_multiday_event:hover{background-color:#e7e9f2;box-shadow:none}.webix_scheduler_multilist .webix_scheduler_multiday_event{top:4px;left:1px}.webix_scheduler_multiday_event{cursor:pointer;position:absolute;border-radius:2px;border-left:3px solid;padding:0 8px;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:box-shadow .15s}.webix_scheduler_multiday_event:hover{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_scheduler_event_break_left.webix_scheduler_event_break_right:hover,.webix_scheduler_event_break_left.webix_scheduler_event_break_right.webix_scheduler_event_selected{box-shadow:3px 9px 5px -7px rgba(0,0,0,0.3),2px 8px 2px -7px rgba(0,0,0,0.2)}.webix_scheduler_event_name{display:inline-block;line-height:20px;font-weight:500;font-size:14px}.webix_scheduler_event_time{line-height:14px;margin-top:4px;font-size:12px}.webix_scheduler_scale .webix_list_item{cursor:default;padding:0;border-bottom-color:transparent;text-align:center}.webix_scheduler_inner_day{height:100%;overflow:hidden}.webix_scheduler_day_scroll{border-top-color:#edeff0;position:relative}.webix_scheduler_day_header .webix_template{font-weight:500;line-height:32px;text-align:center;padding:0 0 0 50px}.webix_scheduler_today_marker{z-index:2;position:absolute;background-color:#ea764f;width:100%;height:2px;margin-top:-1px;pointer-events:none}.webix_scheduler_today_marker:before{content:\\\"\\\";display:block;background:inherit;width:12px;height:12px;margin-top:-5px;border-radius:50%}.webix_scheduler_multilist .webix_drag_event.webix_list_item{box-shadow:none;background:transparent}.webix_scheduler_multilist .webix_drag_event.webix_list_item .webix_scheduler_multiday_event{box-shadow:3px 3px 7px rgba(0,0,0,0.3),2px 2px 4px rgba(0,0,0,0.2)}.webix_scheduler_day_header .webix_dataview_item{border-color:transparent;text-align:center;line-height:31px;padding:0;cursor:default}.webix_scheduler_day_header .webix_dataview_item .webix_scheduler_weekday{font-size:12px}.webix_scheduler_day_header .webix_dataview_item .webix_scheduler_monthday{font-size:16px;font-weight:500}.webix_scheduler_day_header .webix_dataview_item.webix_scheduler_list_today .webix_scheduler_monthday{width:22px;height:22px;line-height:22px}.webix_scheduler_week_days{border-top-color:#edeff0;position:relative}.webix_scheduler_week .webix_unit_header{color:#313131;border-color:transparent;font-weight:normal;line-height:28px}.webix_scheduler_week .webix_unit_header_inner{margin-right:8px}.webix_scheduler_week .webix_scheduler_monthday{font-size:16px;font-weight:500}.webix_scheduler_week .webix_scheduler_monthday.webix_scheduler_today{width:22px;height:22px;line-height:22px}.webix_scheduler_multidays{border-left-color:#edeff0;border-bottom-color:transparent}.webix_scheduler_multidays .webix_dataview_item{border-color:transparent;cursor:default}.webix_scheduler_multidays .webix_scheduler_multiday_event{font-weight:500}.webix_scheduler_multidays .webix_scheduler_multi_more{transition:background-color .3s;background-color:#f4f5f9;text-align:center;border:0}.webix_scheduler_multidays .webix_scheduler_multi_more:hover{background-color:#e7e9f2;box-shadow:none}.webix_drag_event .webix_scheduler_multiday_event:hover,.webix_noselect .webix_scheduler_multiday_event:hover{box-shadow:none}.webix_drag_event .webix_scheduler_multiday_event.webix_scheduler_multi_more,.webix_noselect .webix_scheduler_multiday_event.webix_scheduler_multi_more{background-color:#e7e9f2}.webix_scheduler_list_today .webix_scheduler_monthday,.webix_scheduler_monthday.webix_scheduler_today{display:inline-block;width:20px;height:20px;line-height:20px;border-radius:50%;border:1px solid #1ca1c1;text-align:center}.webix_cal_day_with_event .webix_cal_day_inner{position:relative}.webix_cal_day_with_event .webix_cal_day_inner::after{content:\\\"\\\";position:absolute;display:block;top:70%;left:50%;width:4px;height:4px;margin-left:-2px;border-radius:50%;background-color:#1ca1c1}.webix_cal_select.webix_cal_day_with_event .webix_cal_day_inner::after{background-color:#fff}.webix_cal_outside.webix_cal_day_with_event .webix_cal_day_inner::after{background-color:#94a1b3}.webix_scheduler_calendar .webix_cal_day{position:relative;padding:2px 0 0 2px;line-height:20px;font-size:14px;cursor:default}.webix_scheduler_calendar .webix_cal_day:nth-child(7n){border-right-color:transparent}.webix_scheduler_calendar .webix_cal_event{color:#1ca1c1;font-weight:normal}.webix_scheduler_calendar .webix_event_marker{width:16px;margin-right:2px}.webix_scheduler_calendar .webix_event_marker_inner{margin:0 3px;vertical-align:middle}.webix_scheduler_calendar .webix_cal_date{display:inline-block;line-height:24px;height:24px;width:24px;border:1px solid transparent;cursor:pointer;text-align:center;border-radius:50%}.webix_scheduler_calendar .webix_cal_date:hover{background-color:#f4f5f9;color:#1ca1c1;font-weight:500}.webix_scheduler_calendar .webix_cal_today .webix_cal_date{border-color:#1ca1c1}.webix_scheduler_calendar .webix_event_time{font-weight:500;margin-right:4px}.webix_drag_event .webix_scheduler_month_event:hover,.webix_noselect .webix_scheduler_month_event:hover{box-shadow:none}.webix_drag_event .webix_scheduler_month_event_single:hover,.webix_noselect .webix_scheduler_month_event_single:hover{background-color:transparent}.webix_drag_event.webix_scheduler_more_list .webix_scheduler_month_event,.webix_drag_event.webix_scheduler_more_list .webix_scheduler_month_event_single{width:100%}.webix_scheduler_calendar_header .webix_dataview_item{text-align:center;line-height:32px;border-color:transparent;cursor:default}.webix_scheduler_month_events{position:relative}.webix_scheduler_month_event,.webix_scheduler_month_event_single{z-index:1;position:absolute;box-sizing:border-box;border-radius:2px;padding:0 8px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;user-select:none;cursor:pointer}.webix_scheduler_month_event.webix_scheduler_past_event,.webix_scheduler_month_event_single.webix_scheduler_past_event{color:#8393a9}.webix_scheduler_month_event{border-left:3px solid;transition:box-shadow .15s}.webix_scheduler_month_event_single{transition:background .15s;padding:0 8px 0 4px}.webix_scheduler_month_event:hover{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_scheduler_month_event_single:hover{background-color:#f4f5f9}.webix_scheduler_more{display:inline-block;border-radius:20px;height:20px;width:auto;padding:0 8px;color:#475466;font-size:14px;font-weight:500;transition:background .15s;position:absolute;right:8px;top:5px}.webix_scheduler_more:hover{background-color:#f4f5f9}.webix_scheduler_more_list .webix_scheduler_month_event,.webix_scheduler_more_list .webix_scheduler_month_event_single{box-sizing:border-box;width:calc(100% - 8px);display:block;border-radius:2px;line-height:20px}.webix_scheduler_more_list .webix_scheduler_month_event{padding:4px 8px}.webix_scheduler_more_list .webix_scheduler_month_event .webix_event_text{width:100%;padding:0}.webix_scheduler_more_list .webix_scheduler_month_event_single{padding:4px 8px 4px 4px}.webix_scheduler_more_list .webix_scheduler_month_event_single .webix_event_text{width:calc(100% - 14px)}.webix_scheduler_more_list .webix_list_item{padding:4px;border:0}.webix_scheduler_more_list .webix_event_marker{float:left;height:40px;margin-right:4px}.webix_scheduler_more_list .webix_event_marker_inner{margin-top:4px}.webix_scheduler_more_list .webix_event_text{float:left;font-weight:500;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.webix_scheduler_more_list .webix_event_time{float:left;font-size:12px;line-height:16px;margin-top:4px}.webix_scheduler_month_event_single.webix_scheduler_event_selected{background-color:#f4f5f9;box-shadow:none}.webix_scheduler_event_break_left::before,.webix_scheduler_event_break_right::after{content:\\\"\\\";height:100%;display:block;position:absolute;top:0;box-sizing:border-box;border-top:12px solid transparent;border-bottom:12px solid transparent;border-right:8px solid}.webix_scheduler_event_break_left{border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0;padding-left:11px}.webix_scheduler_event_break_left::before{left:0;border-right-color:inherit;border-top-color:#fff;border-bottom-color:#fff}.webix_scheduler_event_break_right::after{right:0;border-right-color:#fff}.webix_scheduler_event_break_left:hover,.webix_scheduler_event_break_left.webix_scheduler_event_selected{box-shadow:6px 6px 5px -4px rgba(0,0,0,0.3),5px 5px 2px -4px rgba(0,0,0,0.2)}.webix_scheduler_event_break_right:hover,.webix_scheduler_event_break_right.webix_scheduler_event_selected{box-shadow:-1px 5px 5px -3px rgba(0,0,0,0.3),-2px 4px 2px -3px rgba(0,0,0,0.2)}.webix_drag_zone .webix_scheduler_event_break_left::before,.webix_drag_zone .webix_scheduler_event_break_right::after{visibility:hidden}.webix_drag_zone .webix_scheduler_event_break_left{border-radius:2px;border-left-width:3px;padding-left:8px}.webix_scheduler_dnd_1 .webix_scheduler_event_break_left::before{border-top-color:#f4f5f9;border-bottom-color:#f4f5f9}.webix_scheduler_dnd_n .webix_scheduler_event_break_right::after{border-right-color:#f4f5f9}.webix_scheduler_year{justify-content:space-evenly}.webix_scheduler_year .webix_cal_month,.webix_scheduler_year .webix_cal_month .webix_cal_month_name{cursor:pointer}.webix_scheduler_year .webix_cal_month:hover .webix_cal_month_name{color:#1ca1c1}.webix_scheduler_year .webix_cal_outside{visibility:hidden}.webix_scheduler_absbutton{border-radius:50%;z-index:91}.webix_scheduler_absbutton .webix_el_box{background-color:#1ca1c1}.webix_scheduler_absbutton .webix_el_box .webix_icon_button:hover:before{background-color:#1992af}.webix_scheduler_absbutton .webix_el_box .webix_icon{color:#fff}.webix_scheduler_navlist .webix_icon{color:#94a1b3}.webix_scheduler_navlist .webix_selected .webix_icon{color:#1ca1c1}.webix_scheduler_navlist .webix_list_item,.webix_scheduler_navlist .webix_list_item.webix_selected{border-bottom-color:transparent}.webix_scheduler_navlist .webix_list_item:hover,.webix_scheduler_navlist .webix_list_item.webix_selected:hover{background-color:#f4f5f9}.webix_scheduler_navlist .webix_list_item.webix_selected{color:#475466;background-color:#f4f5f9}.webix_scheduler_cal_list .webix_list_item{padding:2px 8px 2px 0}.webix_scheduler_cal_list .webix_list_item span{float:left}.webix_scheduler_cal_list .webix_list_item .webix_icon{line-height:inherit}.webix_scheduler_cal_list .webix_list_item:hover .webix_scheduler_cal_edit{color:#94a1b3}.webix_scheduler_cal_list .webix_list_item.webix_selected{box-shadow:none;padding:2px 8px 2px 0;background-color:transparent}.webix_scheduler_cal_list .webix_list_item.webix_selected .webix_scheduler_cal_edit{color:#1ca1c1}.webix_scheduler_cal_list .webix_list_item.webix_selected .webix_scheduler_cal_edit::before{content:\\\"\\\"}.webix_scheduler_cal_list .webix_dt_editor input{padding-left:23px;border-color:transparent;border-bottom-color:#1ca1c1}.webix_scheduler_cal_popup .webix_win_head{border-bottom-color:transparent}.webix_scheduler_active{margin-right:4px}.webix_scheduler_cal_title{overflow:hidden;width:calc(100% - 24px - 29px - 4px);white-space:nowrap;text-overflow:ellipsis}.webix_scheduler_cal_edit{color:transparent;font-size:18px;width:31px;line-height:31px;border-radius:50%}.webix_scheduler_cal_edit:hover{color:#1ca1c1;background-color:#f4f5f9}.webix_scheduler_cal_edit.webix_scheduler_cal_visible{color:#94a1b3}.webix_scheduler_settings .webix_template{padding:0;text-align:center;font-weight:500;line-height:38px}.webix_scheduler_settings .webix_template:hover{background-color:#f4f5f9}.webix_event_overall{padding:0 8px 0 20px;height:100%;line-height:49px;display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-align-items:center}.webix_event_overall.webix_scheduler_past_event{color:#8393a9}.webix_event_overall.webix_scheduler_past_event .webix_event_time .end{color:#8393a9}.webix_event_overall .webix_event_time{flex-basis:70px;flex-shrink:0;display:block;text-align:center}.webix_event_overall .webix_event_time .start,.webix_event_overall .webix_event_time .end{font-size:12px;line-height:16px}.webix_event_overall .webix_event_time .end{color:#94a1b3}.webix_list_item .webix_event_text{padding-left:10px;display:block;-webkit-box-flex:1;-webkit-flex:1;flex:1;white-space:nowrap;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis}.webix_event_marker{display:inline-block;width:10px}.webix_event_marker_inner{display:inline-block;border-radius:50%;width:10px;height:10px}.webix_scheduler_event_selected{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_scheduler_multi_space{text-align:center}.webix_scheduler_multi_space .webix_template{padding:0}.webix_scheduler_multi_space .webix_scheduler_more_icon{cursor:pointer;color:#94a1b3;transition:color .3s;position:relative;top:calc(100% - 26px);height:26px;width:26px}.webix_scheduler_multi_space .webix_scheduler_more_icon:hover{color:#475466}.webix_scheduler_multi_space .webix_scheduler_more_icon:after{content:\\\"\\\";transition:background-color .3s;height:26px;width:26px;border-radius:50%;position:absolute;top:-4px;left:0;z-index:-1}.webix_scheduler_multi_space .webix_scheduler_more_icon:hover:after{background-color:rgba(148,161,179,0.1)}.webix_scheduler_agenda .webix_scroll_cont{padding-left:120px}.webix_scheduler_agenda .webix_list_item{border-color:transparent;padding:0;width:calc(100% - 120px) !important}.webix_scheduler_agenda .webix_event_overall{line-height:40px;height:40px}.webix_scheduler_agenda .webix_event_overall:hover{background-color:#f4f5f9}.webix_scheduler_agenda .webix_event_overall.webix_scheduler_past_event{color:#8393a9}.webix_scheduler_agenda .webix_event_first{padding-top:8px}.webix_scheduler_agenda .webix_event_last{padding-bottom:8px}.webix_scheduler_agenda .webix_event_last:not(:last-child){border-color:#edeff0}.webix_scheduler_agenda .webix_agenda_selected{background-color:#f4f5f9}.webix_scheduler_agenda .webix_unit_header{float:left;margin-left:-120px;width:120px !important;background-color:transparent;border-bottom-width:0;line-height:18px;padding:6px 8px;box-sizing:border-box}.webix_scheduler_agenda .webix_unit_header:not(:first-child){border-top:1px solid #edeff0;margin-top:-1px}.webix_scheduler_agenda .webix_unit_header .webix_scheduler_dayofweek{color:#94a1b3;font-weight:normal;font-size:12px}.webix_scheduler_timeline_scale .webix_template{padding:0}.webix_scheduler_timeline_scale_row{display:flex;box-sizing:border-box}.webix_scheduler_timeline_scale_row:not(:last-child){border-bottom:1px solid #dadee0}.webix_scheduler_timeline_scale_cell{display:flex;flex:0 0 auto;justify-content:center;align-items:center;border-right:1px solid #dadee0;box-sizing:border-box;background-color:#f4f5f9}.webix_scheduler_timeline_event{position:absolute;box-sizing:border-box;border-radius:2px;color:#fff;cursor:pointer;border-left:3px solid;transition:box-shadow .15s;overflow:hidden}.webix_scheduler_timeline_event:hover{box-shadow:2px 2px 5px rgba(0,0,0,0.3),1px 1px 2px rgba(0,0,0,0.2)}.webix_scheduler_timeline_content{text-align:center;line-height:30px;position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;user-select:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 12px}.webix_scheduler_timeline_task .webix_scheduler_timeline_content{padding:0 32px}.webix_scheduler_timeline_bars .webix_list_item,.webix_scheduler_timeline_sections .webix_cell{border-color:#dadee0;text-overflow:ellipsis}.webix_scheduler_timeline_bars .webix_list_item{cursor:default}.webix_scheduler_timeline_sections .webix_c_scroll_y div{color:transparent;background-color:transparent}.webix_scheduler_timeline_space{background-color:#f4f5f9}.webix_scheduler_timeline_event.webix_scheduler_multi_more{transition:background-color .3s;background-color:#f4f5f9}.webix_scheduler_timeline_event.webix_scheduler_multi_more .webix_scheduler_timeline_content{text-align:left;color:#475466}.webix_scheduler_timeline_event.webix_scheduler_multi_more:hover{background-color:#e7e9f2;box-shadow:none}.webix_scheduler_timeline_event.webix_scheduler_event_break_left{border-left-width:0;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.webix_scheduler_timeline_event.webix_scheduler_event_break_left:hover{box-shadow:6px 6px 5px -4px rgba(0,0,0,0.2),5px 5px 2px -4px rgba(0,0,0,0.2)}.webix_scheduler_timeline_event.webix_scheduler_event_break_right:hover{box-shadow:-1px 5px 5px -3px rgba(0,0,0,0.3),-2px 4px 2px -3px rgba(0,0,0,0.2)}.webix_scheduler_copy.webix_scheduler_day_event.webix_scheduler_event_selected,.webix_scheduler_copy.webix_scheduler_day_event,.webix_scheduler_copy.webix_scheduler_month_event.webix_scheduler_event_selected,.webix_scheduler_copy.webix_scheduler_month_event,.webix_scheduler_copy.webix_scheduler_multiday_event,.webix_scheduler_copy.webix_scheduler_timeline_event.webix_scheduler_event_selected,.webix_scheduler_copy.webix_scheduler_timeline_event{box-shadow:2px 2px 5px #1ca1c1,1px 1px 2px #1ca1c1}.webix_scheduler_copy.webix_scheduler_multiday_event.webix_scheduler_event_break_right,.webix_scheduler_copy.webix_scheduler_month_event.webix_scheduler_event_break_right,.webix_scheduler_copy.webix_scheduler_timeline_event.webix_scheduler_event_break_right{box-shadow:3px 9px 5px -7px #1ca1c1,-6px 9px 3px -7px #1ca1c1}.webix_scheduler_copy.webix_scheduler_multiday_event.webix_scheduler_event_break_left,.webix_scheduler_copy.webix_scheduler_month_event.webix_scheduler_event_break_left,.webix_scheduler_copy.webix_scheduler_timeline_event.webix_scheduler_event_break_left{box-shadow:3px 9px 5px -7px #1ca1c1,2px 8px 2px -7px #1ca1c1}.webix_scheduler_copy .webix_scheduler_multiday_event.webix_scheduler_event_break_right{box-shadow:3px 9px 5px -7px #1ca1c1,-6px 9px 3px -7px #1ca1c1}.webix_scheduler_copy .webix_scheduler_multiday_event.webix_scheduler_event_break_left{box-shadow:3px 9px 5px -7px #1ca1c1,2px 8px 2px -7px #1ca1c1}.webix_scheduler_cut{opacity:.5}.webix_scheduler_month_event_single.webix_scheduler_event_selected.webix_scheduler_copy,.webix_scheduler_month_event_single.webix_scheduler_copy{background-color:rgba(28,161,193,0.2)}.webix_scheduler_paste_target{box-shadow:inset 0 2px 0 0 #1ca1c1,inset 0 -2px 0 0 #1ca1c1}.webix_scheduler_clipboard_target.webix_scheduler_calendar .webix_cal_day,.webix_scheduler_clipboard_target.webix_scheduler_timeline_bars .webix_list_item,.webix_scheduler_clipboard_target.webix_scheduler_day_events .webix_list_item,.webix_scheduler_clipboard_target.webix_scheduler_multilist{cursor:pointer}.webix_scheduler .webix_progress_top{z-index:10000}.webix_scheduler_action_popup .webix_win_head{border-bottom-color:transparent}.webix_scheduler_sidemenu{z-index:1 !important}.webix_toolbar.webix_scheduler_toolbar .webix_view,.webix_toolbar.webix_scheduler_toolbar .webix_control.webix_el_tabbar{background-color:transparent}.webix_toolbar.webix_scheduler_toolbar .webix_item_tab{background:transparent;color:#fff}.webix_toolbar.webix_scheduler_toolbar .webix_item_tab:hover{background-color:rgba(0,0,0,0.2)}.webix_toolbar.webix_scheduler_toolbar .webix_item_tab.webix_selected,.webix_toolbar.webix_scheduler_toolbar .webix_item_tab.webix_selected:focus{color:#fff;box-shadow:inset 0 -2px #fff}.webix_scheduler_cal_title{width:calc(100% - 24px - 31px - 4px)}.webix_scheduler_danger .webix_button{color:#ff5c4c;background-color:#fff1ef}.webix_scheduler_danger .webix_button:hover,.webix_scheduler_danger .webix_button:focus{background-color:#ffe7e5}.webix_scheduler_danger .webix_button:active{background-color:#ffdedb}.webix_scheduler_checkbox_allday .webix_custom_checkbox::before{margin-left:-2px}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","class NavigationBlocked {\r\n}\n\nclass JetBase {\r\n    constructor(webix, config) {\r\n        this.webixJet = true;\r\n        this.webix = webix;\r\n        this._events = [];\r\n        this._subs = {};\r\n        this._data = {};\r\n        if (config && config.params)\r\n            webix.extend(this._data, config.params);\r\n    }\r\n    getRoot() {\r\n        return this._root;\r\n    }\r\n    destructor() {\r\n        this._detachEvents();\r\n        this._destroySubs();\r\n        this._events = this._container = this.app = this._parent = this._root = null;\r\n    }\r\n    setParam(id, value, url) {\r\n        if (this._data[id] !== value) {\r\n            this._data[id] = value;\r\n            this._segment.update(id, value, 0);\r\n            if (url) {\r\n                return this.show(null);\r\n            }\r\n        }\r\n    }\r\n    getParam(id, parent) {\r\n        const value = this._data[id];\r\n        if (typeof value !== \"undefined\" || !parent) {\r\n            return value;\r\n        }\r\n        const view = this.getParentView();\r\n        if (view) {\r\n            return view.getParam(id, parent);\r\n        }\r\n    }\r\n    getUrl() {\r\n        return this._segment.suburl();\r\n    }\r\n    getUrlString() {\r\n        return this._segment.toString();\r\n    }\r\n    getParentView() {\r\n        return this._parent;\r\n    }\r\n    $$(id) {\r\n        if (typeof id === \"string\") {\r\n            const root = this.getRoot();\r\n            return root.queryView((obj => (obj.config.id === id || obj.config.localId === id) &&\r\n                (obj.$scope === root.$scope)), \"self\");\r\n        }\r\n        else {\r\n            return id;\r\n        }\r\n    }\r\n    on(obj, name, code) {\r\n        const id = obj.attachEvent(name, code);\r\n        this._events.push({ obj, id });\r\n        return id;\r\n    }\r\n    contains(view) {\r\n        for (const key in this._subs) {\r\n            const kid = this._subs[key].view;\r\n            if (kid === view || kid.contains(view)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    getSubView(name) {\r\n        const sub = this.getSubViewInfo(name);\r\n        if (sub) {\r\n            return sub.subview.view;\r\n        }\r\n    }\r\n    getSubViewInfo(name) {\r\n        const sub = this._subs[name || \"default\"];\r\n        if (sub) {\r\n            return { subview: sub, parent: this };\r\n        }\r\n        if (name === \"_top\") {\r\n            this._subs[name] = { url: \"\", id: null, popup: true };\r\n            return this.getSubViewInfo(name);\r\n        }\r\n        // when called from a child view, searches for nearest parent with subview\r\n        if (this._parent) {\r\n            return this._parent.getSubViewInfo(name);\r\n        }\r\n        return null;\r\n    }\r\n    _detachEvents() {\r\n        const events = this._events;\r\n        for (let i = events.length - 1; i >= 0; i--) {\r\n            events[i].obj.detachEvent(events[i].id);\r\n        }\r\n    }\r\n    _destroySubs() {\r\n        // destroy sub views\r\n        for (const key in this._subs) {\r\n            const subView = this._subs[key].view;\r\n            // it possible that subview was not loaded with any content yet\r\n            // so check on null\r\n            if (subView) {\r\n                subView.destructor();\r\n            }\r\n        }\r\n        // reset to prevent memory leaks\r\n        this._subs = {};\r\n    }\r\n    _init_url_data() {\r\n        const url = this._segment.current();\r\n        this._data = {};\r\n        this.webix.extend(this._data, url.params, true);\r\n    }\r\n    _getDefaultSub() {\r\n        if (this._subs.default) {\r\n            return this._subs.default;\r\n        }\r\n        for (const key in this._subs) {\r\n            const sub = this._subs[key];\r\n            if (!sub.branch && sub.view && key !== \"_top\") {\r\n                const child = sub.view._getDefaultSub();\r\n                if (child) {\r\n                    return child;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _routed_view() {\r\n        const parent = this.getParentView();\r\n        if (!parent) {\r\n            return true;\r\n        }\r\n        const sub = parent._getDefaultSub();\r\n        if (!sub && sub !== this) {\r\n            return false;\r\n        }\r\n        return parent._routed_view();\r\n    }\r\n}\n\nfunction parse(url) {\r\n    // remove starting /\r\n    if (url[0] === \"/\") {\r\n        url = url.substr(1);\r\n    }\r\n    // split url by \"/\"\r\n    const parts = url.split(\"/\");\r\n    const chunks = [];\r\n    // for each page in url\r\n    for (let i = 0; i < parts.length; i++) {\r\n        const test = parts[i];\r\n        const result = {};\r\n        // detect params\r\n        // support old \t\t\tsome:a=b:c=d\r\n        // and new notation\t\tsome?a=b&c=d\r\n        let pos = test.indexOf(\":\");\r\n        if (pos === -1) {\r\n            pos = test.indexOf(\"?\");\r\n        }\r\n        if (pos !== -1) {\r\n            const params = test.substr(pos + 1).split(/[\\:\\?\\&]/g);\r\n            // create hash of named params\r\n            for (const param of params) {\r\n                const dchunk = param.split(\"=\");\r\n                result[dchunk[0]] = decodeURIComponent(dchunk[1]);\r\n            }\r\n        }\r\n        // store parsed values\r\n        chunks[i] = {\r\n            page: (pos > -1 ? test.substr(0, pos) : test),\r\n            params: result,\r\n            isNew: true\r\n        };\r\n    }\r\n    // return array of page objects\r\n    return chunks;\r\n}\r\nfunction url2str(stack) {\r\n    const url = [];\r\n    for (const chunk of stack) {\r\n        url.push(\"/\" + chunk.page);\r\n        const params = obj2str(chunk.params);\r\n        if (params) {\r\n            url.push(\"?\" + params);\r\n        }\r\n    }\r\n    return url.join(\"\");\r\n}\r\nfunction obj2str(obj) {\r\n    const str = [];\r\n    for (const key in obj) {\r\n        if (typeof obj[key] === \"object\")\r\n            continue;\r\n        if (str.length) {\r\n            str.push(\"&\");\r\n        }\r\n        str.push(key + \"=\" + encodeURIComponent(obj[key]));\r\n    }\r\n    return str.join(\"\");\r\n}\n\nclass Route {\r\n    constructor(route, index) {\r\n        this._next = 1;\r\n        if (typeof route === \"string\") {\r\n            this.route = {\r\n                url: parse(route),\r\n                path: route\r\n            };\r\n        }\r\n        else {\r\n            this.route = route;\r\n        }\r\n        this.index = index;\r\n    }\r\n    current() {\r\n        return this.route.url[this.index];\r\n    }\r\n    next() {\r\n        return this.route.url[this.index + this._next];\r\n    }\r\n    suburl() {\r\n        return this.route.url.slice(this.index);\r\n    }\r\n    shift(params) {\r\n        const route = new Route(this.route, this.index + this._next);\r\n        route.setParams(route.route.url, params, route.index);\r\n        return route;\r\n    }\r\n    setParams(url, params, index) {\r\n        if (params) {\r\n            const old = url[index].params;\r\n            for (var key in params)\r\n                old[key] = params[key];\r\n        }\r\n    }\r\n    refresh() {\r\n        const url = this.route.url;\r\n        for (let i = this.index + 1; i < url.length; i++) {\r\n            url[i].isNew = true;\r\n        }\r\n    }\r\n    toString() {\r\n        const str = url2str(this.suburl());\r\n        return str ? str.substr(1) : \"\";\r\n    }\r\n    _join(path, kids) {\r\n        let url = this.route.url;\r\n        if (path === null) { // change of parameters, route elements are not affected\r\n            return url;\r\n        }\r\n        const old = this.route.url;\r\n        let reset = true;\r\n        url = old.slice(0, this.index + (kids ? this._next : 0));\r\n        if (path) {\r\n            url = url.concat(parse(path));\r\n            for (let i = 0; i < url.length; i++) {\r\n                if (old[i]) {\r\n                    url[i].view = old[i].view;\r\n                }\r\n                if (reset && old[i] && url[i].page === old[i].page) {\r\n                    url[i].isNew = false;\r\n                }\r\n                else if (url[i].isNew) {\r\n                    // if some segment was marked as new, all subsegments must be updated as well\r\n                    reset = false;\r\n                }\r\n            }\r\n        }\r\n        return url;\r\n    }\r\n    append(path) {\r\n        const url = this._join(path, true);\r\n        this.route.path = url2str(url);\r\n        this.route.url = url;\r\n        return this.route.path;\r\n    }\r\n    show(path, view, kids) {\r\n        const url = this._join(path.url, kids);\r\n        this.setParams(url, path.params, this.index + (kids ? this._next : 0));\r\n        return new Promise((res, rej) => {\r\n            const redirect = url2str(url);\r\n            const obj = {\r\n                url,\r\n                redirect,\r\n                confirm: Promise.resolve()\r\n            };\r\n            const app = view ? view.app : null;\r\n            // when creating a new route, it possible that it will not have any content\r\n            // guard is not necessary in such case\r\n            if (app) {\r\n                const result = app.callEvent(\"app:guard\", [obj.redirect, view, obj]);\r\n                if (!result) {\r\n                    rej(new NavigationBlocked());\r\n                    return;\r\n                }\r\n            }\r\n            obj.confirm.catch(err => rej(err)).then(() => {\r\n                if (obj.redirect === null) {\r\n                    rej(new NavigationBlocked());\r\n                    return;\r\n                }\r\n                if (obj.redirect !== redirect) {\r\n                    app.show(obj.redirect);\r\n                    rej(new NavigationBlocked());\r\n                    return;\r\n                }\r\n                this.route.path = redirect;\r\n                this.route.url = url;\r\n                res();\r\n            });\r\n        });\r\n    }\r\n    size(n) {\r\n        this._next = n;\r\n    }\r\n    split() {\r\n        const route = {\r\n            url: this.route.url.slice(this.index + 1),\r\n            path: \"\"\r\n        };\r\n        if (route.url.length) {\r\n            route.path = url2str(route.url);\r\n        }\r\n        return new Route(route, 0);\r\n    }\r\n    update(name, value, index) {\r\n        const chunk = this.route.url[this.index + (index || 0)];\r\n        if (!chunk) {\r\n            this.route.url.push({ page: \"\", params: {} });\r\n            return this.update(name, value, index);\r\n        }\r\n        if (name === \"\") {\r\n            chunk.page = value;\r\n        }\r\n        else {\r\n            chunk.params[name] = value;\r\n        }\r\n        this.route.path = url2str(this.route.url);\r\n    }\r\n}\n\nclass JetView extends JetBase {\r\n    constructor(app, config) {\r\n        super(app.webix);\r\n        this.app = app;\r\n        //this.$config = config;\r\n        this._children = [];\r\n    }\r\n    ui(ui, config) {\r\n        config = config || {};\r\n        const container = config.container || ui.container;\r\n        const jetview = this.app.createView(ui);\r\n        this._children.push(jetview);\r\n        jetview.render(container, this._segment, this);\r\n        if (typeof ui !== \"object\" || (ui instanceof JetBase)) {\r\n            // raw webix UI\r\n            return jetview;\r\n        }\r\n        else {\r\n            return jetview.getRoot();\r\n        }\r\n    }\r\n    show(path, config) {\r\n        config = config || {};\r\n        // convert parameters object to url\r\n        if (typeof path === \"object\") {\r\n            for (const key in path) {\r\n                this.setParam(key, path[key]);\r\n            }\r\n            path = null;\r\n        }\r\n        else {\r\n            // deligate to app in case of root prefix\r\n            if (path.substr(0, 1) === \"/\") {\r\n                return this.app.show(path, config);\r\n            }\r\n            // local path, do nothing\r\n            if (path.indexOf(\"./\") === 0) {\r\n                path = path.substr(2);\r\n            }\r\n            // parent path, call parent view\r\n            if (path.indexOf(\"../\") === 0) {\r\n                const parent = this.getParentView();\r\n                if (parent) {\r\n                    return parent.show(path.substr(3), config);\r\n                }\r\n                else {\r\n                    return this.app.show(\"/\" + path.substr(3));\r\n                }\r\n            }\r\n            const sub = this.getSubViewInfo(config.target);\r\n            if (sub) {\r\n                if (sub.parent !== this) {\r\n                    return sub.parent.show(path, config);\r\n                }\r\n                else if (config.target && config.target !== \"default\") {\r\n                    return this._renderFrameLock(config.target, sub.subview, {\r\n                        url: path,\r\n                        params: config.params,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                if (path) {\r\n                    return this.app.show(\"/\" + path, config);\r\n                }\r\n            }\r\n        }\r\n        return this._show(this._segment, { url: path, params: config.params }, this);\r\n    }\r\n    _show(segment, path, view) {\r\n        return segment.show(path, view, true).then(() => {\r\n            this._init_url_data();\r\n            return this._urlChange();\r\n        }).then(() => {\r\n            if (segment.route.linkRouter) {\r\n                this.app.getRouter().set(segment.route.path, { silent: true });\r\n                this.app.callEvent(\"app:route\", [segment.route.path]);\r\n            }\r\n        });\r\n    }\r\n    init(_$view, _$) {\r\n        // stub\r\n    }\r\n    ready(_$view, _$url) {\r\n        // stub\r\n    }\r\n    config() {\r\n        this.app.webix.message(\"View:Config is not implemented\");\r\n    }\r\n    urlChange(_$view, _$url) {\r\n        // stub\r\n    }\r\n    destroy() {\r\n        // stub\r\n    }\r\n    destructor() {\r\n        this.destroy();\r\n        this._destroyKids();\r\n        // destroy actual UI\r\n        if (this._root) {\r\n            this._root.destructor();\r\n            super.destructor();\r\n        }\r\n    }\r\n    use(plugin, config) {\r\n        plugin(this.app, this, config);\r\n    }\r\n    refresh() {\r\n        const url = this.getUrl();\r\n        this.destroy();\r\n        this._destroyKids();\r\n        this._destroySubs();\r\n        this._detachEvents();\r\n        if (this._container.tagName) {\r\n            this._root.destructor();\r\n        }\r\n        this._segment.refresh();\r\n        return this._render(this._segment);\r\n    }\r\n    render(root, url, parent) {\r\n        if (typeof url === \"string\") {\r\n            url = new Route(url, 0);\r\n        }\r\n        this._segment = url;\r\n        this._parent = parent;\r\n        this._init_url_data();\r\n        root = root || document.body;\r\n        const _container = (typeof root === \"string\") ? this.webix.toNode(root) : root;\r\n        if (this._container !== _container) {\r\n            this._container = _container;\r\n            return this._render(url);\r\n        }\r\n        else {\r\n            return this._urlChange().then(() => this.getRoot());\r\n        }\r\n    }\r\n    _render(url) {\r\n        const config = this.config();\r\n        if (config.then) {\r\n            return config.then(cfg => this._render_final(cfg, url));\r\n        }\r\n        else {\r\n            return this._render_final(config, url);\r\n        }\r\n    }\r\n    _render_final(config, url) {\r\n        // get previous view in the same slot\r\n        let slot = null;\r\n        let container = null;\r\n        let show = false;\r\n        if (!this._container.tagName) {\r\n            slot = this._container;\r\n            if (slot.popup) {\r\n                container = document.body;\r\n                show = true;\r\n            }\r\n            else {\r\n                container = this.webix.$$(slot.id);\r\n            }\r\n        }\r\n        else {\r\n            container = this._container;\r\n        }\r\n        // view already destroyed\r\n        if (!this.app || !container) {\r\n            return Promise.reject(null);\r\n        }\r\n        let response;\r\n        const current = this._segment.current();\r\n        // using wrapper object, so ui can be changed from app:render event\r\n        const result = { ui: {} };\r\n        this.app.copyConfig(config, result.ui, this._subs);\r\n        this.app.callEvent(\"app:render\", [this, url, result]);\r\n        result.ui.$scope = this;\r\n        /* destroy old HTML attached views before creating new one */\r\n        if (!slot && current.isNew && current.view) {\r\n            current.view.destructor();\r\n        }\r\n        try {\r\n            // special handling for adding inside of multiview - preserve old id\r\n            if (slot && !show) {\r\n                const oldui = container;\r\n                const parent = oldui.getParentView();\r\n                if (parent && parent.name === \"multiview\" && !result.ui.id) {\r\n                    result.ui.id = oldui.config.id;\r\n                }\r\n            }\r\n            this._root = this.app.webix.ui(result.ui, container);\r\n            const asWin = this._root;\r\n            // check for url added to ignore this.ui calls\r\n            if (show && asWin.setPosition && !asWin.isVisible()) {\r\n                asWin.show();\r\n            }\r\n            // check, if we are replacing some older view\r\n            if (slot) {\r\n                if (slot.view && slot.view !== this && slot.view !== this.app) {\r\n                    slot.view.destructor();\r\n                }\r\n                slot.id = this._root.config.id;\r\n                if (this.getParentView() || !this.app.app)\r\n                    slot.view = this;\r\n                else {\r\n                    // when we have subapp, set whole app as a view\r\n                    // so on destruction, the whole app will be destroyed\r\n                    slot.view = this.app;\r\n                }\r\n            }\r\n            if (current.isNew) {\r\n                current.view = this;\r\n                current.isNew = false;\r\n            }\r\n            response = Promise.resolve(this._init(this._root, url)).then(() => {\r\n                return this._urlChange().then(() => {\r\n                    this._initUrl = null;\r\n                    return this.ready(this._root, url.suburl());\r\n                });\r\n            });\r\n        }\r\n        catch (e) {\r\n            response = Promise.reject(e);\r\n        }\r\n        return response.catch(err => this._initError(this, err));\r\n    }\r\n    _init(view, url) {\r\n        return this.init(view, url.suburl());\r\n    }\r\n    _urlChange() {\r\n        this.app.callEvent(\"app:urlchange\", [this, this._segment]);\r\n        const waits = [];\r\n        for (const key in this._subs) {\r\n            const frame = this._subs[key];\r\n            const wait = this._renderFrameLock(key, frame, null);\r\n            if (wait) {\r\n                waits.push(wait);\r\n            }\r\n        }\r\n        return Promise.all(waits).then(() => {\r\n            return this.urlChange(this._root, this._segment.suburl());\r\n        });\r\n    }\r\n    _renderFrameLock(key, frame, path) {\r\n        // if subview is not occupied by some rendering yet\r\n        if (!frame.lock) {\r\n            // retreive and store rendering end promise\r\n            const lock = this._renderFrame(key, frame, path);\r\n            if (lock) {\r\n                // clear lock after frame rendering\r\n                // as promise.finally is not supported by  Webix lesser than 6.2\r\n                // using a more verbose notation\r\n                frame.lock = lock.then(() => frame.lock = null, () => frame.lock = null);\r\n            }\r\n        }\r\n        // return rendering end promise\r\n        return frame.lock;\r\n    }\r\n    _renderFrame(key, frame, path) {\r\n        //default route\r\n        if (key === \"default\") {\r\n            if (this._segment.next()) {\r\n                // we have a next segment in url, render it\r\n                let params = path ? path.params : null;\r\n                if (frame.params) {\r\n                    params = this.webix.extend(params || {}, frame.params);\r\n                }\r\n                return this._createSubView(frame, this._segment.shift(params));\r\n            }\r\n            else if (frame.view && frame.popup) {\r\n                // there is no next segment, delete the existing sub-view\r\n                frame.view.destructor();\r\n                frame.view = null;\r\n            }\r\n        }\r\n        //if new path provided, set it to the frame\r\n        if (path !== null) {\r\n            frame.url = path.url;\r\n            if (frame.params) {\r\n                path.params = this.webix.extend(path.params || {}, frame.params);\r\n            }\r\n        }\r\n        // in case of routed sub-view\r\n        if (frame.route) {\r\n            // we have a new path for sub-view\r\n            if (path !== null) {\r\n                return frame.route.show(path, frame.view).then(() => {\r\n                    return this._createSubView(frame, frame.route);\r\n                });\r\n            }\r\n            // do not trigger onChange for isolated sub-views\r\n            if (frame.branch) {\r\n                return;\r\n            }\r\n        }\r\n        let view = frame.view;\r\n        // if view doesn't exists yet, init it\r\n        if (!view && frame.url) {\r\n            if (typeof frame.url === \"string\") {\r\n                // string, so we have isolated subview url\r\n                frame.route = new Route(frame.url, 0);\r\n                if (path)\r\n                    frame.route.setParams(frame.route.route.url, path.params, 0);\r\n                if (frame.params)\r\n                    frame.route.setParams(frame.route.route.url, frame.params, 0);\r\n                return this._createSubView(frame, frame.route);\r\n            }\r\n            else {\r\n                // object, so we have an embeded subview\r\n                if (typeof frame.url === \"function\" && !(view instanceof frame.url)) {\r\n                    view = new (this.app._override(frame.url))(this.app, \"\");\r\n                }\r\n                if (!view) {\r\n                    view = frame.url;\r\n                }\r\n            }\r\n        }\r\n        // trigger onChange for already existed view\r\n        if (view) {\r\n            return view.render(frame, (frame.route || this._segment), this);\r\n        }\r\n    }\r\n    _initError(view, err) {\r\n        /*\r\n            if view is destroyed, ignore any view related errors\r\n        */\r\n        if (this.app) {\r\n            this.app.error(\"app:error:initview\", [err, view]);\r\n        }\r\n        return true;\r\n    }\r\n    _createSubView(sub, suburl) {\r\n        return this.app.createFromURL(suburl.current()).then(view => {\r\n            return view.render(sub, suburl, this);\r\n        });\r\n    }\r\n    _destroyKids() {\r\n        // destroy child views\r\n        const uis = this._children;\r\n        for (let i = uis.length - 1; i >= 0; i--) {\r\n            if (uis[i] && uis[i].destructor) {\r\n                uis[i].destructor();\r\n            }\r\n        }\r\n        // reset vars for better GC processing\r\n        this._children = [];\r\n    }\r\n}\n\n// wrapper for raw objects and Jet 1.x structs\r\nclass JetViewRaw extends JetView {\r\n    constructor(app, config) {\r\n        super(app, config);\r\n        this._ui = config.ui;\r\n    }\r\n    config() {\r\n        return this._ui;\r\n    }\r\n}\n\nclass SubRouter {\r\n    constructor(cb, config, app) {\r\n        this.path = \"\";\r\n        this.app = app;\r\n    }\r\n    set(path, config) {\r\n        this.path = path;\r\n        const a = this.app;\r\n        a.app.getRouter().set(a._segment.append(this.path), { silent: true });\r\n    }\r\n    get() {\r\n        return this.path;\r\n    }\r\n}\n\nlet _once = true;\r\nclass JetAppBase extends JetBase {\r\n    constructor(config) {\r\n        const webix = (config || {}).webix || window.webix;\r\n        config = webix.extend({\r\n            name: \"App\",\r\n            version: \"1.0\",\r\n            start: \"/home\"\r\n        }, config, true);\r\n        super(webix, config);\r\n        this.config = config;\r\n        this.app = this.config.app;\r\n        this.ready = Promise.resolve();\r\n        this._services = {};\r\n        this.webix.extend(this, this.webix.EventSystem);\r\n    }\r\n    getUrl() {\r\n        return this._subSegment.suburl();\r\n    }\r\n    getUrlString() {\r\n        return this._subSegment.toString();\r\n    }\r\n    getService(name) {\r\n        let obj = this._services[name];\r\n        if (typeof obj === \"function\") {\r\n            obj = this._services[name] = obj(this);\r\n        }\r\n        return obj;\r\n    }\r\n    setService(name, handler) {\r\n        this._services[name] = handler;\r\n    }\r\n    destructor() {\r\n        this.getSubView().destructor();\r\n        super.destructor();\r\n    }\r\n    // copy object and collect extra handlers\r\n    copyConfig(obj, target, config) {\r\n        // raw ui config\r\n        if (obj instanceof JetBase ||\r\n            (typeof obj === \"function\" && obj.prototype instanceof JetBase)) {\r\n            obj = { $subview: obj };\r\n        }\r\n        // subview placeholder\r\n        if (typeof obj.$subview != \"undefined\") {\r\n            return this.addSubView(obj, target, config);\r\n        }\r\n        // process sub-properties\r\n        const isArray = obj instanceof Array;\r\n        target = target || (isArray ? [] : {});\r\n        for (const method in obj) {\r\n            let point = obj[method];\r\n            // view class\r\n            if (typeof point === \"function\" && point.prototype instanceof JetBase) {\r\n                point = { $subview: point };\r\n            }\r\n            if (point && typeof point === \"object\" &&\r\n                !(point instanceof this.webix.DataCollection) && !(point instanceof RegExp) && !(point instanceof Map)) {\r\n                if (point instanceof Date) {\r\n                    target[method] = new Date(point);\r\n                }\r\n                else {\r\n                    const copy = this.copyConfig(point, (point instanceof Array ? [] : {}), config);\r\n                    if (copy !== null) {\r\n                        if (isArray)\r\n                            target.push(copy);\r\n                        else\r\n                            target[method] = copy;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                target[method] = point;\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n    getRouter() {\r\n        return this.$router;\r\n    }\r\n    clickHandler(e, target) {\r\n        if (e) {\r\n            target = target || (e.target || e.srcElement);\r\n            if (target && target.getAttribute) {\r\n                const trigger = target.getAttribute(\"trigger\");\r\n                if (trigger) {\r\n                    this._forView(target, view => view.app.trigger(trigger));\r\n                    e.cancelBubble = true;\r\n                    return e.preventDefault();\r\n                }\r\n                const route = target.getAttribute(\"route\");\r\n                if (route) {\r\n                    this._forView(target, view => view.show(route));\r\n                    e.cancelBubble = true;\r\n                    return e.preventDefault();\r\n                }\r\n            }\r\n        }\r\n        const parent = target.parentNode;\r\n        if (parent) {\r\n            this.clickHandler(e, parent);\r\n        }\r\n    }\r\n    getRoot() {\r\n        return this.getSubView().getRoot();\r\n    }\r\n    refresh() {\r\n        if (!this._subSegment) {\r\n            return Promise.resolve(null);\r\n        }\r\n        return this.getSubView().refresh().then(view => {\r\n            this.callEvent(\"app:route\", [this.getUrl()]);\r\n            return view;\r\n        });\r\n    }\r\n    loadView(url) {\r\n        const views = this.config.views;\r\n        let result = null;\r\n        if (url === \"\") {\r\n            return Promise.resolve(this._loadError(\"\", new Error(\"Webix Jet: Empty url segment\")));\r\n        }\r\n        try {\r\n            if (views) {\r\n                if (typeof views === \"function\") {\r\n                    // custom loading strategy\r\n                    result = views(url);\r\n                }\r\n                else {\r\n                    // predefined hash\r\n                    result = views[url];\r\n                }\r\n                if (typeof result === \"string\") {\r\n                    url = result;\r\n                    result = null;\r\n                }\r\n            }\r\n            if (!result) {\r\n                if (url === \"_hidden\") {\r\n                    result = { hidden: true };\r\n                }\r\n                else if (url === \"_blank\") {\r\n                    result = {};\r\n                }\r\n                else {\r\n                    url = url.replace(/\\./g, \"/\");\r\n                    result = this.require(\"jet-views\", url);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            result = this._loadError(url, e);\r\n        }\r\n        // custom handler can return view or its promise\r\n        if (!result.then) {\r\n            result = Promise.resolve(result);\r\n        }\r\n        // set error handler\r\n        result = result\r\n            .then(module => module.__esModule ? module.default : module)\r\n            .catch(err => this._loadError(url, err));\r\n        return result;\r\n    }\r\n    _forView(target, handler) {\r\n        const view = this.webix.$$(target);\r\n        if (view) {\r\n            handler(view.$scope);\r\n        }\r\n    }\r\n    _loadViewDynamic(url) {\r\n        return null;\r\n    }\r\n    createFromURL(chunk) {\r\n        let view;\r\n        if (chunk.isNew || !chunk.view) {\r\n            view = this.loadView(chunk.page)\r\n                .then(ui => this.createView(ui, name, chunk.params));\r\n        }\r\n        else {\r\n            view = Promise.resolve(chunk.view);\r\n        }\r\n        return view;\r\n    }\r\n    _override(ui) {\r\n        const over = this.config.override;\r\n        if (over) {\r\n            let dv;\r\n            while (ui) {\r\n                dv = ui;\r\n                ui = over.get(ui);\r\n            }\r\n            return dv;\r\n        }\r\n        return ui;\r\n    }\r\n    createView(ui, name, params) {\r\n        ui = this._override(ui);\r\n        let obj;\r\n        if (typeof ui === \"function\") {\r\n            if (ui.prototype instanceof JetAppBase) {\r\n                // UI class\r\n                return new ui({ app: this, name, params, router: SubRouter });\r\n            }\r\n            else if (ui.prototype instanceof JetBase) {\r\n                // UI class\r\n                return new ui(this, { name, params });\r\n            }\r\n            else {\r\n                // UI factory functions\r\n                ui = ui(this);\r\n            }\r\n        }\r\n        if (ui instanceof JetBase) {\r\n            obj = ui;\r\n        }\r\n        else {\r\n            // UI object\r\n            obj = new JetViewRaw(this, { name, ui });\r\n        }\r\n        return obj;\r\n    }\r\n    // show view path\r\n    show(url, config) {\r\n        if (url && this.app && url.indexOf(\"//\") == 0)\r\n            return this.app.show(url.substr(1), config);\r\n        return this.render(this._container, url || this.config.start, config);\r\n    }\r\n    // event helpers\r\n    trigger(name, ...rest) {\r\n        this.apply(name, rest);\r\n    }\r\n    apply(name, data) {\r\n        this.callEvent(name, data);\r\n    }\r\n    action(name) {\r\n        return this.webix.bind(function (...rest) {\r\n            this.apply(name, rest);\r\n        }, this);\r\n    }\r\n    on(name, handler) {\r\n        this.attachEvent(name, handler);\r\n    }\r\n    use(plugin, config) {\r\n        plugin(this, null, config);\r\n    }\r\n    error(name, er) {\r\n        this.callEvent(name, er);\r\n        this.callEvent(\"app:error\", er);\r\n        /* tslint:disable */\r\n        if (this.config.debug) {\r\n            for (var i = 0; i < er.length; i++) {\r\n                console.error(er[i]);\r\n                if (er[i] instanceof Error) {\r\n                    let text = er[i].message;\r\n                    if (text.indexOf(\"Module build failed\") === 0) {\r\n                        text = text.replace(/\\x1b\\[[0-9;]*m/g, \"\");\r\n                        document.body.innerHTML = `<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>${text}</pre>`;\r\n                    }\r\n                    else {\r\n                        text += \"<br><br>Check console for more details\";\r\n                        this.webix.message({ type: \"error\", text: text, expire: -1 });\r\n                    }\r\n                }\r\n            }\r\n            debugger;\r\n        }\r\n        /* tslint:enable */\r\n    }\r\n    // renders top view\r\n    render(root, url, config) {\r\n        this._container = (typeof root === \"string\") ?\r\n            this.webix.toNode(root) :\r\n            (root || document.body);\r\n        const firstInit = !this.$router;\r\n        let path = null;\r\n        if (firstInit) {\r\n            if (_once && \"tagName\" in this._container) {\r\n                this.webix.event(document.body, \"click\", e => this.clickHandler(e));\r\n                _once = false;\r\n            }\r\n            if (typeof url === \"string\") {\r\n                url = new Route(url, 0);\r\n            }\r\n            this._subSegment = this._first_start(url);\r\n            this._subSegment.route.linkRouter = true;\r\n        }\r\n        else {\r\n            if (typeof url === \"string\") {\r\n                path = url;\r\n            }\r\n            else {\r\n                if (this.app) {\r\n                    path = url.split().route.path || this.config.start;\r\n                }\r\n                else {\r\n                    path = url.toString();\r\n                }\r\n            }\r\n        }\r\n        const params = config ? config.params : this.config.params || null;\r\n        const top = this.getSubView();\r\n        const segment = this._subSegment;\r\n        const ready = segment\r\n            .show({ url: path, params }, top)\r\n            .then(() => this.createFromURL(segment.current()))\r\n            .then(view => view.render(root, segment))\r\n            .then(base => {\r\n            this.$router.set(segment.route.path, { silent: true });\r\n            this.callEvent(\"app:route\", [this.getUrl()]);\r\n            return base;\r\n        });\r\n        this.ready = this.ready.then(() => ready);\r\n        return ready;\r\n    }\r\n    getSubView() {\r\n        if (this._subSegment) {\r\n            const view = this._subSegment.current().view;\r\n            if (view)\r\n                return view;\r\n        }\r\n        return new JetView(this, {});\r\n    }\r\n    require(type, url) { return null; }\r\n    _first_start(route) {\r\n        this._segment = route;\r\n        const cb = (a) => setTimeout(() => {\r\n            this.show(a).catch(e => {\r\n                if (!(e instanceof NavigationBlocked))\r\n                    throw e;\r\n            });\r\n        }, 1);\r\n        this.$router = new (this.config.router)(cb, this.config, this);\r\n        // start animation for top-level app\r\n        if (this._container === document.body && this.config.animation !== false) {\r\n            const node = this._container;\r\n            this.webix.html.addCss(node, \"webixappstart\");\r\n            setTimeout(() => {\r\n                this.webix.html.removeCss(node, \"webixappstart\");\r\n                this.webix.html.addCss(node, \"webixapp\");\r\n            }, 10);\r\n        }\r\n        if (!route) {\r\n            // if no url defined, check router first\r\n            let urlString = this.$router.get();\r\n            if (!urlString) {\r\n                urlString = this.config.start;\r\n                this.$router.set(urlString, { silent: true });\r\n            }\r\n            route = new Route(urlString, 0);\r\n        }\r\n        else if (this.app) {\r\n            const now = route.current().view;\r\n            route.current().view = this;\r\n            if (route.next()) {\r\n                route.refresh();\r\n                route = route.split();\r\n            }\r\n            else {\r\n                route = new Route(this.config.start, 0);\r\n            }\r\n            route.current().view = now;\r\n        }\r\n        return route;\r\n    }\r\n    // error during view resolving\r\n    _loadError(url, err) {\r\n        this.error(\"app:error:resolve\", [err, url]);\r\n        return { template: \" \" };\r\n    }\r\n    addSubView(obj, target, config) {\r\n        const url = obj.$subview !== true ? obj.$subview : null;\r\n        const name = obj.name || (url ? this.webix.uid() : \"default\");\r\n        target.id = obj.id || \"s\" + this.webix.uid();\r\n        const view = config[name] = {\r\n            id: target.id,\r\n            url,\r\n            branch: obj.branch,\r\n            popup: obj.popup,\r\n            params: obj.params\r\n        };\r\n        return view.popup ? null : target;\r\n    }\r\n}\n\nclass HashRouter {\r\n    constructor(cb, config) {\r\n        this.config = config || {};\r\n        this._detectPrefix();\r\n        this.cb = cb;\r\n        window.onpopstate = () => this.cb(this.get());\r\n    }\r\n    set(path, config) {\r\n        if (this.config.routes) {\r\n            const compare = path.split(\"?\", 2);\r\n            for (const key in this.config.routes) {\r\n                if (this.config.routes[key] === compare[0]) {\r\n                    path = key + (compare.length > 1 ? \"?\" + compare[1] : \"\");\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (this.get() !== path) {\r\n            window.history.pushState(null, null, this.prefix + this.sufix + path);\r\n        }\r\n        if (!config || !config.silent) {\r\n            setTimeout(() => this.cb(path), 1);\r\n        }\r\n    }\r\n    get() {\r\n        let path = this._getRaw().replace(this.prefix, \"\").replace(this.sufix, \"\");\r\n        path = (path !== \"/\" && path !== \"#\") ? path : \"\";\r\n        if (this.config.routes) {\r\n            const compare = path.split(\"?\", 2);\r\n            const key = this.config.routes[compare[0]];\r\n            if (key) {\r\n                path = key + (compare.length > 1 ? \"?\" + compare[1] : \"\");\r\n            }\r\n        }\r\n        return path;\r\n    }\r\n    _detectPrefix() {\r\n        // use \"#!\" for backward compatibility\r\n        const sufix = this.config.routerPrefix;\r\n        this.sufix = \"#\" + ((typeof sufix === \"undefined\") ? \"!\" : sufix);\r\n        this.prefix = document.location.href.split(\"#\", 2)[0];\r\n    }\r\n    _getRaw() {\r\n        return document.location.href;\r\n    }\r\n}\n\nlet isPatched = false;\r\nfunction patch(w) {\r\n    if (isPatched || !w) {\r\n        return;\r\n    }\r\n    isPatched = true;\r\n    // custom promise for IE8\r\n    const win = window;\r\n    if (!win.Promise) {\r\n        win.Promise = w.promise;\r\n    }\r\n    const version = w.version.split(\".\");\r\n    // will be fixed in webix 5.3\r\n    if (version[0] * 10 + version[1] * 1 < 53) {\r\n        w.ui.freeze = function (handler) {\r\n            // disabled because webix jet 5.0 can't handle resize of scrollview correctly\r\n            // w.ui.$freeze = true;\r\n            const res = handler();\r\n            if (res && res.then) {\r\n                res.then(function (some) {\r\n                    w.ui.$freeze = false;\r\n                    w.ui.resize();\r\n                    return some;\r\n                });\r\n            }\r\n            else {\r\n                w.ui.$freeze = false;\r\n                w.ui.resize();\r\n            }\r\n            return res;\r\n        };\r\n    }\r\n    // adding views as classes\r\n    const baseAdd = w.ui.baselayout.prototype.addView;\r\n    const baseRemove = w.ui.baselayout.prototype.removeView;\r\n    const config = {\r\n        addView(view, index) {\r\n            // trigger logic only for widgets inside of jet-view\r\n            // ignore case when addView used with already initialized widget\r\n            if (this.$scope && this.$scope.webixJet && !view.queryView) {\r\n                const jview = this.$scope;\r\n                const subs = {};\r\n                view = jview.app.copyConfig(view, {}, subs);\r\n                baseAdd.apply(this, [view, index]);\r\n                for (const key in subs) {\r\n                    jview._renderFrame(key, subs[key], null).then(() => {\r\n                        jview._subs[key] = subs[key];\r\n                    });\r\n                }\r\n                return view.id;\r\n            }\r\n            else {\r\n                return baseAdd.apply(this, arguments);\r\n            }\r\n        },\r\n        removeView() {\r\n            baseRemove.apply(this, arguments);\r\n            if (this.$scope && this.$scope.webixJet) {\r\n                const subs = this.$scope._subs;\r\n                // check all sub-views, destroy and clean the removed one\r\n                for (const key in subs) {\r\n                    const test = subs[key];\r\n                    if (!w.$$(test.id)) {\r\n                        test.view.destructor();\r\n                        delete subs[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    w.extend(w.ui.layout.prototype, config, true);\r\n    w.extend(w.ui.baselayout.prototype, config, true);\r\n    // wrapper for using Jet Apps as views\r\n    w.protoUI({\r\n        name: \"jetapp\",\r\n        $init(cfg) {\r\n            this.$app = new this.app(cfg);\r\n            const id = w.uid().toString();\r\n            cfg.body = { id };\r\n            this.$ready.push(function () {\r\n                this.callEvent(\"onInit\", [this.$app]);\r\n                this.$app.render({ id });\r\n            });\r\n        }\r\n    }, w.ui.proxy, w.EventSystem);\r\n}\n\nclass JetApp extends JetAppBase {\r\n    constructor(config) {\r\n        config.router = config.router || HashRouter;\r\n        super(config);\r\n        patch(this.webix);\r\n    }\r\n    require(type, url) {\r\n        return require(type + \"/\" + url);\r\n    }\r\n}\n\nclass StoreRouter {\r\n    constructor(cb, config, app) {\r\n        this.storage = config.storage || app.webix.storage.session;\r\n        this.name = (config.storeName || config.id + \":route\");\r\n        this.cb = cb;\r\n    }\r\n    set(path, config) {\r\n        this.storage.put(this.name, path);\r\n        if (!config || !config.silent) {\r\n            setTimeout(() => this.cb(path), 1);\r\n        }\r\n    }\r\n    get() {\r\n        return this.storage.get(this.name);\r\n    }\r\n}\n\nclass UrlRouter extends HashRouter {\r\n    _detectPrefix() {\r\n        this.prefix = \"\";\r\n        this.sufix = this.config.routerPrefix || \"\";\r\n    }\r\n    _getRaw() {\r\n        return document.location.pathname + (document.location.search || \"\");\r\n    }\r\n}\n\nclass EmptyRouter {\r\n    constructor(cb, _$config) {\r\n        this.path = \"\";\r\n        this.cb = cb;\r\n    }\r\n    set(path, config) {\r\n        this.path = path;\r\n        if (!config || !config.silent) {\r\n            setTimeout(() => this.cb(path), 1);\r\n        }\r\n    }\r\n    get() {\r\n        return this.path;\r\n    }\r\n}\n\nfunction UnloadGuard(app, view, config) {\r\n    view.on(app, `app:guard`, function (_$url, point, promise) {\r\n        if (point === view || point.contains(view)) {\r\n            const res = config();\r\n            if (res === false) {\r\n                promise.confirm = Promise.reject(new NavigationBlocked());\r\n            }\r\n            else {\r\n                promise.confirm = promise.confirm.then(() => res);\r\n            }\r\n        }\r\n    });\r\n}\n\n//     (c) 2012-2018 Airbnb, Inc.\n\n// var has = require('has');\nfunction has(store, key) {\n  return Object.prototype.hasOwnProperty.call(store, key);\n}\n// var forEach = require('for-each');\nfunction forEach(obj, handler, context) {\n  for (var key in obj) {\n    if (has(obj, key)) {\n      handler.call((context || obj), obj[key], key, obj);\n    }\n  }\n}\n// var trim = require('string.prototype.trim');\nfunction trim(str) {\n  return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n}\n// var warning = require('warning');\nfunction warn(message) {\n  message = 'Warning: ' + message;\n  if (typeof console !== 'undefined') {\n    console.error(message);\n  }\n\n  try { throw new Error(message); } catch (x) {}\n}\n\nvar replace = String.prototype.replace;\nvar split = String.prototype.split;\n\n// #### Pluralization methods\n// The string that separates the different phrase possibilities.\nvar delimiter = '||||';\n\nvar russianPluralGroups = function (n) {\n  var end = n % 10;\n  if (n !== 11 && end === 1) {\n    return 0;\n  }\n  if (2 <= end && end <= 4 && !(n >= 12 && n <= 14)) {\n    return 1;\n  }\n  return 2;\n};\n\n// Mapping from pluralization group plural logic.\nvar pluralTypes = {\n  arabic: function (n) {\n    // http://www.arabeyes.org/Plural_Forms\n    if (n < 3) { return n; }\n    var lastTwo = n % 100;\n    if (lastTwo >= 3 && lastTwo <= 10) return 3;\n    return lastTwo >= 11 ? 4 : 5;\n  },\n  bosnian_serbian: russianPluralGroups,\n  chinese: function () { return 0; },\n  croatian: russianPluralGroups,\n  french: function (n) { return n > 1 ? 1 : 0; },\n  german: function (n) { return n !== 1 ? 1 : 0; },\n  russian: russianPluralGroups,\n  lithuanian: function (n) {\n    if (n % 10 === 1 && n % 100 !== 11) { return 0; }\n    return n % 10 >= 2 && n % 10 <= 9 && (n % 100 < 11 || n % 100 > 19) ? 1 : 2;\n  },\n  czech: function (n) {\n    if (n === 1) { return 0; }\n    return (n >= 2 && n <= 4) ? 1 : 2;\n  },\n  polish: function (n) {\n    if (n === 1) { return 0; }\n    var end = n % 10;\n    return 2 <= end && end <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2;\n  },\n  icelandic: function (n) { return (n % 10 !== 1 || n % 100 === 11) ? 1 : 0; },\n  slovenian: function (n) {\n    var lastTwo = n % 100;\n    if (lastTwo === 1) {\n      return 0;\n    }\n    if (lastTwo === 2) {\n      return 1;\n    }\n    if (lastTwo === 3 || lastTwo === 4) {\n      return 2;\n    }\n    return 3;\n  }\n};\n\n\n// Mapping from pluralization group to individual language codes/locales.\n// Will look up based on exact match, if not found and it's a locale will parse the locale\n// for language code, and if that does not exist will default to 'en'\nvar pluralTypeToLanguages = {\n  arabic: ['ar'],\n  bosnian_serbian: ['bs-Latn-BA', 'bs-Cyrl-BA', 'srl-RS', 'sr-RS'],\n  chinese: ['id', 'id-ID', 'ja', 'ko', 'ko-KR', 'lo', 'ms', 'th', 'th-TH', 'zh'],\n  croatian: ['hr', 'hr-HR'],\n  german: ['fa', 'da', 'de', 'en', 'es', 'fi', 'el', 'he', 'hi-IN', 'hu', 'hu-HU', 'it', 'nl', 'no', 'pt', 'sv', 'tr'],\n  french: ['fr', 'tl', 'pt-br'],\n  russian: ['ru', 'ru-RU'],\n  lithuanian: ['lt'],\n  czech: ['cs', 'cs-CZ', 'sk'],\n  polish: ['pl'],\n  icelandic: ['is'],\n  slovenian: ['sl-SL']\n};\n\nfunction langToTypeMap(mapping) {\n  var ret = {};\n  forEach(mapping, function (langs, type) {\n    forEach(langs, function (lang) {\n      ret[lang] = type;\n    });\n  });\n  return ret;\n}\n\nfunction pluralTypeName(locale) {\n  var langToPluralType = langToTypeMap(pluralTypeToLanguages);\n  return langToPluralType[locale]\n    || langToPluralType[split.call(locale, /-/, 1)[0]]\n    || langToPluralType.en;\n}\n\nfunction pluralTypeIndex(locale, count) {\n  return pluralTypes[pluralTypeName(locale)](count);\n}\n\nfunction escape(token) {\n  return token.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nfunction constructTokenRegex(opts) {\n  var prefix = (opts && opts.prefix) || '%{';\n  var suffix = (opts && opts.suffix) || '}';\n\n  if (prefix === delimiter || suffix === delimiter) {\n    throw new RangeError('\"' + delimiter + '\" token is reserved for pluralization');\n  }\n\n  return new RegExp(escape(prefix) + '(.*?)' + escape(suffix), 'g');\n}\n\nvar dollarRegex = /\\$/g;\nvar dollarBillsYall = '$$';\nvar defaultTokenRegex = /%\\{(.*?)\\}/g;\n\n// ### transformPhrase(phrase, substitutions, locale)\n//\n// Takes a phrase string and transforms it by choosing the correct\n// plural form and interpolating it.\n//\n//     transformPhrase('Hello, %{name}!', {name: 'Spike'});\n//     // \"Hello, Spike!\"\n//\n// The correct plural form is selected if substitutions.smart_count\n// is set. You can pass in a number instead of an Object as `substitutions`\n// as a shortcut for `smart_count`.\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', {smart_count: 1}, 'en');\n//     // \"1 new message\"\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', {smart_count: 2}, 'en');\n//     // \"2 new messages\"\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', 5, 'en');\n//     // \"5 new messages\"\n//\n// You should pass in a third argument, the locale, to specify the correct plural type.\n// It defaults to `'en'` with 2 plural forms.\nfunction transformPhrase(phrase, substitutions, locale, tokenRegex) {\n  if (typeof phrase !== 'string') {\n    throw new TypeError('Polyglot.transformPhrase expects argument #1 to be string');\n  }\n\n  if (substitutions == null) {\n    return phrase;\n  }\n\n  var result = phrase;\n  var interpolationRegex = tokenRegex || defaultTokenRegex;\n\n  // allow number as a pluralization shortcut\n  var options = typeof substitutions === 'number' ? { smart_count: substitutions } : substitutions;\n\n  // Select plural form: based on a phrase text that contains `n`\n  // plural forms separated by `delimiter`, a `locale`, and a `substitutions.smart_count`,\n  // choose the correct plural form. This is only done if `count` is set.\n  if (options.smart_count != null && result) {\n    var texts = split.call(result, delimiter);\n    result = trim(texts[pluralTypeIndex(locale || 'en', options.smart_count)] || texts[0]);\n  }\n\n  // Interpolate: Creates a `RegExp` object for each interpolation placeholder.\n  result = replace.call(result, interpolationRegex, function (expression, argument) {\n    if (!has(options, argument) || options[argument] == null) { return expression; }\n    // Ensure replacement value is escaped to prevent special $-prefixed regex replace tokens.\n    return replace.call(options[argument], dollarRegex, dollarBillsYall);\n  });\n\n  return result;\n}\n\n// ### Polyglot class constructor\nfunction Polyglot(options) {\n  var opts = options || {};\n  this.phrases = {};\n  this.extend(opts.phrases || {});\n  this.currentLocale = opts.locale || 'en';\n  var allowMissing = opts.allowMissing ? transformPhrase : null;\n  this.onMissingKey = typeof opts.onMissingKey === 'function' ? opts.onMissingKey : allowMissing;\n  this.warn = opts.warn || warn;\n  this.tokenRegex = constructTokenRegex(opts.interpolation);\n}\n\n// ### polyglot.locale([locale])\n//\n// Get or set locale. Internally, Polyglot only uses locale for pluralization.\nPolyglot.prototype.locale = function (newLocale) {\n  if (newLocale) this.currentLocale = newLocale;\n  return this.currentLocale;\n};\n\n// ### polyglot.extend(phrases)\n//\n// Use `extend` to tell Polyglot how to translate a given key.\n//\n//     polyglot.extend({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     });\n//\n// The key can be any string.  Feel free to call `extend` multiple times;\n// it will override any phrases with the same key, but leave existing phrases\n// untouched.\n//\n// It is also possible to pass nested phrase objects, which get flattened\n// into an object with the nested keys concatenated using dot notation.\n//\n//     polyglot.extend({\n//       \"nav\": {\n//         \"hello\": \"Hello\",\n//         \"hello_name\": \"Hello, %{name}\",\n//         \"sidebar\": {\n//           \"welcome\": \"Welcome\"\n//         }\n//       }\n//     });\n//\n//     console.log(polyglot.phrases);\n//     // {\n//     //   'nav.hello': 'Hello',\n//     //   'nav.hello_name': 'Hello, %{name}',\n//     //   'nav.sidebar.welcome': 'Welcome'\n//     // }\n//\n// `extend` accepts an optional second argument, `prefix`, which can be used\n// to prefix every key in the phrases object with some string, using dot\n// notation.\n//\n//     polyglot.extend({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     }, \"nav\");\n//\n//     console.log(polyglot.phrases);\n//     // {\n//     //   'nav.hello': 'Hello',\n//     //   'nav.hello_name': 'Hello, %{name}'\n//     // }\n//\n// This feature is used internally to support nested phrase objects.\nPolyglot.prototype.extend = function (morePhrases, prefix) {\n  forEach(morePhrases, function (phrase, key) {\n    var prefixedKey = prefix ? prefix + '.' + key : key;\n    if (typeof phrase === 'object') {\n      this.extend(phrase, prefixedKey);\n    } else {\n      this.phrases[prefixedKey] = phrase;\n    }\n  }, this);\n};\n\n// ### polyglot.unset(phrases)\n// Use `unset` to selectively remove keys from a polyglot instance.\n//\n//     polyglot.unset(\"some_key\");\n//     polyglot.unset({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     });\n//\n// The unset method can take either a string (for the key), or an object hash with\n// the keys that you would like to unset.\nPolyglot.prototype.unset = function (morePhrases, prefix) {\n  if (typeof morePhrases === 'string') {\n    delete this.phrases[morePhrases];\n  } else {\n    forEach(morePhrases, function (phrase, key) {\n      var prefixedKey = prefix ? prefix + '.' + key : key;\n      if (typeof phrase === 'object') {\n        this.unset(phrase, prefixedKey);\n      } else {\n        delete this.phrases[prefixedKey];\n      }\n    }, this);\n  }\n};\n\n// ### polyglot.clear()\n//\n// Clears all phrases. Useful for special cases, such as freeing\n// up memory if you have lots of phrases but no longer need to\n// perform any translation. Also used internally by `replace`.\nPolyglot.prototype.clear = function () {\n  this.phrases = {};\n};\n\n// ### polyglot.replace(phrases)\n//\n// Completely replace the existing phrases with a new set of phrases.\n// Normally, just use `extend` to add more phrases, but under certain\n// circumstances, you may want to make sure no old phrases are lying around.\nPolyglot.prototype.replace = function (newPhrases) {\n  this.clear();\n  this.extend(newPhrases);\n};\n\n\n// ### polyglot.t(key, options)\n//\n// The most-used method. Provide a key, and `t` will return the\n// phrase.\n//\n//     polyglot.t(\"hello\");\n//     => \"Hello\"\n//\n// The phrase value is provided first by a call to `polyglot.extend()` or\n// `polyglot.replace()`.\n//\n// Pass in an object as the second argument to perform interpolation.\n//\n//     polyglot.t(\"hello_name\", {name: \"Spike\"});\n//     => \"Hello, Spike\"\n//\n// If you like, you can provide a default value in case the phrase is missing.\n// Use the special option key \"_\" to specify a default.\n//\n//     polyglot.t(\"i_like_to_write_in_language\", {\n//       _: \"I like to write in %{language}.\",\n//       language: \"JavaScript\"\n//     });\n//     => \"I like to write in JavaScript.\"\n//\nPolyglot.prototype.t = function (key, options) {\n  var phrase, result;\n  var opts = options == null ? {} : options;\n  if (typeof this.phrases[key] === 'string') {\n    phrase = this.phrases[key];\n  } else if (typeof opts._ === 'string') {\n    phrase = opts._;\n  } else if (this.onMissingKey) {\n    var onMissingKey = this.onMissingKey;\n    result = onMissingKey(key, opts, this.currentLocale, this.tokenRegex);\n  } else {\n    this.warn('Missing translation for key: \"' + key + '\"');\n    result = key;\n  }\n  if (typeof phrase === 'string') {\n    result = transformPhrase(phrase, opts, this.currentLocale, this.tokenRegex);\n  }\n  return result;\n};\n\n\n// ### polyglot.has(key)\n//\n// Check if polyglot has a translation for given key\nPolyglot.prototype.has = function (key) {\n  return has(this.phrases, key);\n};\n\n// export transformPhrase\nPolyglot.transformPhrase = function transform(phrase, substitutions, locale) {\n  return transformPhrase(phrase, substitutions, locale);\n};\n\nvar webixPolyglot = Polyglot;\n\nfunction Locale(app, _view, config) {\r\n    config = config || {};\r\n    const storage = config.storage;\r\n    let lang = storage ? (storage.get(\"lang\") || \"en\") : (config.lang || \"en\");\r\n    function setLangData(name, data, silent) {\r\n        if (data.__esModule) {\r\n            data = data.default;\r\n        }\r\n        const pconfig = { phrases: data };\r\n        if (config.polyglot) {\r\n            app.webix.extend(pconfig, config.polyglot);\r\n        }\r\n        const poly = service.polyglot = new webixPolyglot(pconfig);\r\n        poly.locale(name);\r\n        service._ = app.webix.bind(poly.t, poly);\r\n        lang = name;\r\n        if (storage) {\r\n            storage.put(\"lang\", lang);\r\n        }\r\n        if (config.webix) {\r\n            const locName = config.webix[name];\r\n            if (locName) {\r\n                app.webix.i18n.setLocale(locName);\r\n            }\r\n        }\r\n        if (!silent) {\r\n            return app.refresh();\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    function getLang() { return lang; }\r\n    function setLang(name, silent) {\r\n        // ignore setLang if loading by path is disabled\r\n        if (config.path === false) {\r\n            return;\r\n        }\r\n        const path = (config.path ? config.path + \"/\" : \"\") + name;\r\n        const data = app.require(\"jet-locales\", path);\r\n        setLangData(name, data, silent);\r\n    }\r\n    const service = {\r\n        getLang, setLang, setLangData, _: null, polyglot: null\r\n    };\r\n    app.setService(\"locale\", service);\r\n    setLang(lang, true);\r\n}\n\nfunction show(view, config, value) {\r\n    if (config.urls) {\r\n        value = config.urls[value] || value;\r\n    }\r\n    else if (config.param) {\r\n        value = { [config.param]: value };\r\n    }\r\n    view.show(value);\r\n}\r\nfunction Menu(app, view, config) {\r\n    const frame = view.getSubViewInfo().parent;\r\n    const ui = view.$$(config.id || config);\r\n    let silent = false;\r\n    ui.attachEvent(\"onchange\", function () {\r\n        if (!silent) {\r\n            show(frame, config, this.getValue());\r\n        }\r\n    });\r\n    ui.attachEvent(\"onafterselect\", function () {\r\n        if (!silent) {\r\n            let id = null;\r\n            if (ui.setValue) {\r\n                id = this.getValue();\r\n            }\r\n            else if (ui.getSelectedId) {\r\n                id = ui.getSelectedId();\r\n            }\r\n            show(frame, config, id);\r\n        }\r\n    });\r\n    view.on(app, `app:route`, function () {\r\n        let name = \"\";\r\n        if (config.param) {\r\n            name = view.getParam(config.param, true);\r\n        }\r\n        else {\r\n            const segment = frame.getUrl()[1];\r\n            if (segment) {\r\n                name = segment.page;\r\n            }\r\n        }\r\n        if (name) {\r\n            silent = true;\r\n            if (ui.setValue && ui.getValue() !== name) {\r\n                ui.setValue(name);\r\n            }\r\n            else if (ui.select && ui.exists(name) && ui.getSelectedId() !== name) {\r\n                ui.select(name);\r\n            }\r\n            silent = false;\r\n        }\r\n    });\r\n}\n\nconst baseicons = {\r\n    good: \"check\",\r\n    error: \"warning\",\r\n    saving: \"refresh fa-spin\"\r\n};\r\nconst basetext = {\r\n    good: \"Ok\",\r\n    error: \"Error\",\r\n    saving: \"Connecting...\"\r\n};\r\nfunction Status(app, view, config) {\r\n    let status = \"good\";\r\n    let count = 0;\r\n    let iserror = false;\r\n    let expireDelay = config.expire;\r\n    if (!expireDelay && expireDelay !== false) {\r\n        expireDelay = 2000;\r\n    }\r\n    const texts = config.texts || basetext;\r\n    const icons = config.icons || baseicons;\r\n    if (typeof config === \"string\") {\r\n        config = { target: config };\r\n    }\r\n    function refresh(content) {\r\n        const area = view.$$(config.target);\r\n        if (area) {\r\n            if (!content) {\r\n                content = \"<div class='status_\" +\r\n                    status +\r\n                    \"'><span class='webix_icon fa-\" +\r\n                    icons[status] + \"'></span> \" + texts[status] + \"</div>\";\r\n            }\r\n            area.setHTML(content);\r\n        }\r\n    }\r\n    function success() {\r\n        count--;\r\n        setStatus(\"good\");\r\n    }\r\n    function fail(err) {\r\n        count--;\r\n        setStatus(\"error\", err);\r\n    }\r\n    function start(promise) {\r\n        count++;\r\n        setStatus(\"saving\");\r\n        if (promise && promise.then) {\r\n            promise.then(success, fail);\r\n        }\r\n    }\r\n    function getStatus() {\r\n        return status;\r\n    }\r\n    function hideStatus() {\r\n        if (count === 0) {\r\n            refresh(\" \");\r\n        }\r\n    }\r\n    function setStatus(mode, err) {\r\n        if (count < 0) {\r\n            count = 0;\r\n        }\r\n        if (mode === \"saving\") {\r\n            status = \"saving\";\r\n            refresh();\r\n        }\r\n        else {\r\n            iserror = (mode === \"error\");\r\n            if (count === 0) {\r\n                status = iserror ? \"error\" : \"good\";\r\n                if (iserror) {\r\n                    app.error(\"app:error:server\", [err.responseText || err]);\r\n                }\r\n                else {\r\n                    if (expireDelay) {\r\n                        setTimeout(hideStatus, expireDelay);\r\n                    }\r\n                }\r\n                refresh();\r\n            }\r\n        }\r\n    }\r\n    function track(data) {\r\n        const dp = app.webix.dp(data);\r\n        if (dp) {\r\n            view.on(dp, \"onAfterDataSend\", start);\r\n            view.on(dp, \"onAfterSaveError\", (_id, _obj, response) => fail(response));\r\n            view.on(dp, \"onAfterSave\", success);\r\n        }\r\n    }\r\n    app.setService(\"status\", {\r\n        getStatus,\r\n        setStatus,\r\n        track\r\n    });\r\n    if (config.remote) {\r\n        view.on(app.webix, \"onRemoteCall\", start);\r\n    }\r\n    if (config.ajax) {\r\n        view.on(app.webix, \"onBeforeAjax\", (_mode, _url, _data, _request, _headers, _files, promise) => {\r\n            start(promise);\r\n        });\r\n    }\r\n    if (config.data) {\r\n        track(config.data);\r\n    }\r\n}\n\nfunction Theme(app, _view, config) {\r\n    config = config || {};\r\n    const storage = config.storage;\r\n    let theme = storage ?\r\n        (storage.get(\"theme\") || \"flat-default\")\r\n        :\r\n            (config.theme || \"flat-default\");\r\n    const service = {\r\n        getTheme() { return theme; },\r\n        setTheme(name, silent) {\r\n            const parts = name.split(\"-\");\r\n            const links = document.getElementsByTagName(\"link\");\r\n            for (let i = 0; i < links.length; i++) {\r\n                const lname = links[i].getAttribute(\"title\");\r\n                if (lname) {\r\n                    if (lname === name || lname === parts[0]) {\r\n                        links[i].disabled = false;\r\n                    }\r\n                    else {\r\n                        links[i].disabled = true;\r\n                    }\r\n                }\r\n            }\r\n            app.webix.skin.set(parts[0]);\r\n            // remove old css\r\n            app.webix.html.removeCss(document.body, \"theme-\" + theme);\r\n            // add new css\r\n            app.webix.html.addCss(document.body, \"theme-\" + name);\r\n            theme = name;\r\n            if (storage) {\r\n                storage.put(\"theme\", name);\r\n            }\r\n            if (!silent) {\r\n                app.refresh();\r\n            }\r\n        }\r\n    };\r\n    app.setService(\"theme\", service);\r\n    service.setTheme(theme, true);\r\n}\n\nfunction copyParams(data, url, route) {\r\n    for (let i = 0; i < route.length; i++) {\r\n        data[route[i]] = url[i + 1] ? url[i + 1].page : \"\";\r\n    }\r\n}\r\nfunction UrlParam(app, view, config) {\r\n    const route = config.route || config;\r\n    const data = {};\r\n    view.on(app, \"app:urlchange\", function (subview, segment) {\r\n        if (view === subview) {\r\n            copyParams(data, segment.suburl(), route);\r\n            segment.size(route.length + 1);\r\n        }\r\n    });\r\n    const os = view.setParam;\r\n    const og = view.getParam;\r\n    view.setParam = function (name, value, show) {\r\n        const index = route.indexOf(name);\r\n        if (index >= 0) {\r\n            data[name] = value;\r\n            this._segment.update(\"\", value, index + 1);\r\n            if (show) {\r\n                return view.show(null);\r\n            }\r\n        }\r\n        else {\r\n            return os.call(this, name, value, show);\r\n        }\r\n    };\r\n    view.getParam = function (key, mode) {\r\n        const val = data[key];\r\n        if (typeof val !== \"undefined\") {\r\n            return val;\r\n        }\r\n        return og.call(this, key, mode);\r\n    };\r\n    copyParams(data, view.getUrl(), route);\r\n}\n\nfunction User(app, _view, config) {\r\n    config = config || {};\r\n    const login = config.login || \"/login\";\r\n    const logout = config.logout || \"/logout\";\r\n    const afterLogin = config.afterLogin || app.config.start;\r\n    const afterLogout = config.afterLogout || \"/login\";\r\n    const ping = config.ping || 5 * 60 * 1000;\r\n    const model = config.model;\r\n    let user = config.user;\r\n    const service = {\r\n        getUser() {\r\n            return user;\r\n        },\r\n        getStatus(server) {\r\n            if (!server) {\r\n                return user !== null;\r\n            }\r\n            return model.status().catch(() => null).then(data => {\r\n                user = data;\r\n            });\r\n        },\r\n        login(name, pass) {\r\n            return model.login(name, pass).then(data => {\r\n                user = data;\r\n                if (!data) {\r\n                    throw new Error(\"Access denied\");\r\n                }\r\n                app.callEvent(\"app:user:login\", [user]);\r\n                app.show(afterLogin);\r\n            });\r\n        },\r\n        logout() {\r\n            user = null;\r\n            return model.logout().then(res => {\r\n                app.callEvent(\"app:user:logout\", []);\r\n                return res;\r\n            });\r\n        }\r\n    };\r\n    function canNavigate(url, obj) {\r\n        if (url === logout) {\r\n            service.logout();\r\n            obj.redirect = afterLogout;\r\n        }\r\n        else if (url !== login && !service.getStatus()) {\r\n            obj.redirect = login;\r\n        }\r\n    }\r\n    app.setService(\"user\", service);\r\n    app.attachEvent(`app:guard`, function (url, _$root, obj) {\r\n        if (config.public && config.public(url)) {\r\n            return true;\r\n        }\r\n        if (typeof user === \"undefined\") {\r\n            obj.confirm = service.getStatus(true).then(() => canNavigate(url, obj));\r\n        }\r\n        return canNavigate(url, obj);\r\n    });\r\n    if (ping) {\r\n        setInterval(() => service.getStatus(true), ping);\r\n    }\r\n}\n\n/*\r\nMIT License\r\nCopyright (c) 2019 XB Software\r\n*/\r\nlet webix = window.webix;\r\nif (webix) {\r\n    patch(webix);\r\n}\r\nconst plugins = {\r\n    UnloadGuard, Locale, Menu, Theme, User, Status, UrlParam\r\n};\r\nconst errors = { NavigationBlocked };\r\nconst w = window;\r\nif (!w.Promise) {\r\n    w.Promise = w.webix.promise;\r\n}\n\nexport { plugins, errors, JetApp, JetView, HashRouter, StoreRouter, UrlRouter, EmptyRouter, SubRouter };\n//# sourceMappingURL=jet.js.map\n","let once = false;\n\nexport function initRLayout(){\n    if (once) return;\n    once = true;\n\n    webix.protoUI(\n        {\n            name: \"r-layout\",\n            sizeTrigger(app, handler, value) {\n                this._compactValue = value;\n                this._compactHandler = handler;\n                this._app = app;\n\n                const config = app.config;\n                this._forceCompact = typeof config.params.forceCompact !== \"undefined\";\n                this._compactWidth = config.compactWidth;\n\n                if (!this._forceCompact) this._checkTrigger(this.$view.width, value);\n            },\n            _checkTrigger(x, value) {\n                if (this._compactWidth) {\n                    if (\n                        (x <= this._compactWidth && !value) ||\n                        (x > this._compactWidth && value)\n                    ) {\n                        this._compactWidth = null;\n                        this._compactHandler(!value);\n                        return false;\n                    }\n                }\n                return true;\n            },\n            $setSize(x, y) {\n                if (this._forceCompact || this._checkTrigger(x, this._compactValue))\n                    webix.ui.layout.prototype.$setSize.call(this, x, y);\n                if (this._app) this._app.callEvent(\"view:resize\", []); //edit popup resize\n            },\n        },\n        webix.ui.layout\n    );\n}\n","export function initJetWin(app) {\n\tlet appId;\n\n\tconst service = {\n\t\tupdateConfig(config){\n\t\t\tconst appView = app.getRoot();\n\t\t\tconst appNode = appView.$view;\n\n\t\t\tif(!appId){\n\t\t\t\tif(appNode.id)\n\t\t\t\t\tappId = appNode.id;\n\t\t\t\telse \n\t\t\t\t\tappNode.id = appId = \"webix_\" + webix.uid();\n\n\t\t\t\twebix.html.addStyle(`.webix_win_inside *:not(.webix_modal_box):not(.webix_modal_cover){ z-index: 0; }`);\n\t\t\t\twebix.html.addStyle(`#${appId}{ position: relative; }`);\n\t\t\t\twebix.html.addStyle(`#${appId} .webix_window{ z-index:2 !important; }`);\n\t\t\t\twebix.html.addStyle(`#${appId} .webix_disabled{ z-index:1 !important; }`);\n\t\t\t}\n\t\t\telse if(appId && !appNode.id) //app refresh\n\t\t\t\tappNode.id = appId;\n\n\t\t\tconfig.container = appId;\n\n\t\t\tif(config.fullscreen){\n\t\t\t\tconfig._fillApp = true;\n\t\t\t\tdelete config.fullscreen;\n\t\t\t}\n\n\t\t\tif(!config.on)\n\t\t\t\tconfig.on = {};\n\n\t\t\tlet firstShow = true;\n\t\t\tconst defaultHandler = config.on.onShow;\n\n\t\t\tconfig.on.onShow = function(){\n\t\t\t\tif(defaultHandler)\n\t\t\t\t\tdefaultHandler.apply(this, arguments);\n\n\t\t\t\tif(firstShow){\n\t\t\t\t\tthis.$setSize = (x, y) => {\n\t\t\t\t\t\tsetSize(this, appView, true);\n\t\t\t\t\t\twebix.ui.window.prototype.$setSize.apply(this, [x, y]);\n\t\t\t\t\t};\n\t\t\t\t\tsetHandlers(this, app);\n\t\t\t\t\tfirstShow = null;\n\t\t\t\t}\n\n\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\twebix.html.addCss(appNode, \"webix_win_inside\");\n\t\t\t\tappView.disable();\n\n\t\t\t\tsetSize(this, appView);\n\t\t\t}\n\n\t\t\treturn config;\n\t\t}\n\t};\n\n\tapp.setService(\"jet-win\", service);\n}\n\nfunction setSize(win, appView, silent){\n\tconst appWidth = appView.$width;\n\tconst appHeight = appView.$height;\n\n\tif(win.config._fillApp)\n\t\twin.define({\n\t\t\twidth: appWidth,\n\t\t\theight: appHeight,\n\t\t});\n\telse {\n\t\twin.define({\n\t\t\tleft: (appWidth - win.$width) / 2,\n\t\t\ttop: (appHeight - win.$height) / 2,\n\t\t});\n\t}\n\n\tif(!silent)\n\t\twin.resize();\n}\n\nfunction setHandlers(win, app){\n\tconst appView = app.getRoot();\n\n\twin.attachEvent(\"onHide\", ()=> {\n\t\tif(!appView.$destructed){\n\t\t\twebix.html.removeCss(appView.$view, \"webix_win_inside\");\n\t\t\tappView.enable();\n\t\t}\n\t});\n\n\tconst resizeEv = app.attachEvent(\"view:resize\", ()=> {\n\t\tsetSize(win, appView);\n\t});\n\n\twin.attachEvent(\"onDestruct\", ()=> {\n\t\tapp.detachEvent(resizeEv);\n\t});\n}\n","var index = 1;\nfunction uid() {\n\treturn index++;\n}\n\nvar empty = undefined;\n\nexport function ignoreInitial(code) {\n\tlet init = false;\n\treturn function() {\n\t\tif (init) return code.apply(this, arguments);\n\t\telse init = true;\n\t};\n}\n\nvar context = null;\nexport function withContext(value, code) {\n\tcontext = value;\n\tcode();\n\tcontext = null;\n}\n\nexport function filter(rule, handler) {\n\treturn function(v, o, obj, meta) {\n\t\tif (rule(v, meta)) handler.apply(this, arguments);\n\t};\n}\n\nexport function link(source, target, key) {\n\tObject.defineProperty(target, key, {\n\t\tget: () => source[key],\n\t\tset: value => (source[key] = value),\n\t});\n}\n\nexport function debounce(handler, delay) {\n\tdelay = delay || 200;\n\tlet timer = null;\n\tlet data = null;\n\treturn function() {\n\t\tdata = arguments;\n\t\tif (!timer) {\n\t\t\ttimer = setTimeout(() => {\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = null;\n\n\t\t\t\thandler.apply(this, data);\n\t\t\t}, delay);\n\t\t}\n\t};\n}\n\nexport function createState(data, config) {\n\tconfig = config || {};\n\tconst handlers = {};\n\tconst out = {};\n\n\tconst observe = function(mask, handler) {\n\t\tconst key = uid();\n\t\thandlers[key] = { mask, handler };\n\t\tif (mask === \"*\") handler(out, empty, mask);\n\t\telse handler(out[mask], empty, mask);\n\n\t\treturn key;\n\t};\n\n\tconst extend = function(data, sconfig){\n\t\tsconfig = sconfig || config;\n\t\t// normal js object\n\t\tfor (const key in data) {\n\t\t\tif (data.hasOwnProperty(key)) {\n\t\t\t\tconst test = data[key];\n\t\t\t\tif (sconfig.nested && typeof test === \"object\" && test) {\n\t\t\t\t\tout[key] = createState(test, sconfig);\n\t\t\t\t} else {\n\t\t\t\t\treactive(out, test, key, notify);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst observeEnd = function(id) {\n\t\tdelete handlers[id];\n\t};\n\n\tconst queue = [];\n\tlet waitInQueue = false;\n\n\tvar batch = function(code) {\n\t\tif (typeof code !== \"function\") {\n\t\t\tconst values = code;\n\t\t\tcode = () => {\n\t\t\t\tfor (const key in values) out[key] = values[key];\n\t\t\t};\n\t\t}\n\n\t\twaitInQueue = true;\n\t\tcode(out);\n\t\twaitInQueue = false;\n\t\twhile (queue.length) {\n\t\t\tconst obj = queue.shift();\n\t\t\tnotify.apply(this, obj);\n\t\t}\n\t};\n\n\tconst notify = function(key, old, value, meta) {\n\t\tif (waitInQueue) {\n\t\t\tqueue.push([key, old, value, meta]);\n\t\t\treturn;\n\t\t}\n\n\t\tconst list = Object.keys(handlers);\n\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\tconst obj = handlers[list[i]];\n\t\t\tif (!obj) continue;\n\t\t\tif (obj.mask === \"*\" || obj.mask === key) {\n\t\t\t\tobj.handler(value, old, key, meta);\n\t\t\t}\n\t\t}\n\t};\n\n\tObject.defineProperty(out, \"$changes\", {\n\t\tvalue: {\n\t\t\tattachEvent: observe,\n\t\t\tdetachEvent: observeEnd,\n\t\t},\n\t\tenumerable: false,\n\t\tconfigurable: false,\n\t});\n\tObject.defineProperty(out, \"$observe\", {\n\t\tvalue: observe,\n\t\tenumerable: false,\n\t\tconfigurable: false,\n\t});\n\tObject.defineProperty(out, \"$batch\", {\n\t\tvalue: batch,\n\t\tenumerable: false,\n\t\tconfigurable: false,\n\t});\n\tObject.defineProperty(out, \"$extend\", {\n\t\tvalue: extend,\n\t\tenumerable: false,\n\t\tconfigurable: false,\n\t});\n\n\tout.$extend(data, config);\n\treturn out;\n}\n\nfunction reactive(obj, val, key, notify) {\n\tObject.defineProperty(obj, key, {\n\t\tget: function() {\n\t\t\treturn val;\n\t\t},\n\t\tset: function(value) {\n\t\t\tvar changed = false;\n\t\t\tif (val === null || value === null) {\n\t\t\t\tchanged = val !== value;\n\t\t\t} else {\n\t\t\t\tchanged = val.valueOf() != value.valueOf();\n\t\t\t}\n\n\t\t\tif (changed) {\n\t\t\t\tvar old = val;\n\t\t\t\tval = value;\n\t\t\t\tnotify(key, old, value, context);\n\t\t\t}\n\t\t},\n\t\tenumerable: true,\n\t\tconfigurable: false,\n\t});\n}","function updateDragPos(e, pos) {\n\tif (webix.DragControl.active) {\n\t\tconst node = webix.DragControl.getNode();\n\n\t\tpos = webix.copy(pos);\n\t\twebix.DragControl.$dragPos(pos, e);\n\n\t\tnode.style.top = pos.y + webix.DragControl.top + \"px\";\n\t\tnode.style.left = pos.x + webix.DragControl.left + \"px\";\n\t}\n}\n\nconst DragScroll = {\n\tstart(ctx, e) {\n\t\tctx._auto_scroll_delay = webix.delay(\n\t\t\tDragScroll.autoScroll,\n\t\t\tctx,\n\t\t\t[e, webix.html.pos(e)],\n\t\t\t250\n\t\t);\n\t},\n\n\treset(ctx) {\n\t\tif (ctx._auto_scroll_delay)\n\t\t\tctx._auto_scroll_delay = window.clearTimeout(ctx._auto_scroll_delay);\n\t},\n\n\tautoScroll(e, pos) {\n\t\tconst yScroll = this.direction.indexOf(\"y\") !== -1;\n\t\tconst xScroll = this.direction.indexOf(\"x\") !== -1;\n\t\tconst box = webix.html.offset(this.from.$view);\n\n\t\tlet reset = false;\n\t\tif (yScroll && DragScroll.autoYScroll.call(this, pos, box, this.senseY))\n\t\t\treset = true;\n\t\tif (xScroll && DragScroll.autoXScroll.call(this, pos, box, this.senseX))\n\t\t\treset = true;\n\n\t\tif (reset) {\n\t\t\tupdateDragPos(e, pos);\n\t\t\tthis._auto_scroll_delay = webix.delay(\n\t\t\t\tDragScroll.autoScroll,\n\t\t\t\tthis,\n\t\t\t\t[e, pos],\n\t\t\t\t100\n\t\t\t);\n\t\t}\n\t},\n\n\tautoYScroll(pos, box, sense) {\n\t\tconst scroll = this.from.getScrollState();\n\n\t\tif (pos.y < box.y + sense) {\n\t\t\treturn DragScroll.autoScrollTo.call(\n\t\t\t\tthis,\n\t\t\t\tscroll.x,\n\t\t\t\tscroll.y - sense,\n\t\t\t\t\"y\"\n\t\t\t);\n\t\t} else if (pos.y > box.y + box.height - sense) {\n\t\t\treturn DragScroll.autoScrollTo.call(\n\t\t\t\tthis,\n\t\t\t\tscroll.x,\n\t\t\t\tscroll.y + sense,\n\t\t\t\t\"y\"\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t},\n\n\tautoXScroll(pos, box, sense) {\n\t\tconst scroll = this.from.getScrollState();\n\n\t\tif (pos.x < box.x + sense) {\n\t\t\treturn DragScroll.autoScrollTo.call(\n\t\t\t\tthis,\n\t\t\t\tscroll.x - sense,\n\t\t\t\tscroll.y,\n\t\t\t\t\"x\"\n\t\t\t);\n\t\t} else if (pos.x > box.x + box.width - sense) {\n\t\t\tconst x = this.snode\n\t\t\t\t? Math.min(scroll.x + sense, this.snode.scrollWidth - box.width)\n\t\t\t\t: scroll.x + sense;\n\t\t\treturn x == scroll.x\n\t\t\t\t? false\n\t\t\t\t: DragScroll.autoScrollTo.call(this, x, scroll.y, \"x\");\n\t\t}\n\t\treturn false;\n\t},\n\n\tautoScrollTo(x, y, mode) {\n\t\tthis.from.scrollTo(x, y);\n\t\tthis.from.callEvent(\"onAfterAutoScroll\", []);\n\n\t\tconst scroll = this.from.getScrollState();\n\t\treturn Math.abs((mode === \"x\" ? x : y) - scroll[mode]) < 1;\n\t},\n};\n\nexport default DragScroll;\n","import DragScroll from \"./dragscroll\";\n\nexport function initDnD(view) {\n\tconst ctrl = webix.copy(DragControl);\n\n\tctrl.view = view;\n\tctrl.master = this;\n\n\tctrl.Local = this.app.getService(\"local\");\n\n\twebix.DragControl.addDrag(view.$view, ctrl);\n\twebix.DragControl.addDrop(view.$view, ctrl, true);\n}\n\nexport function switchCursor(e, view) {\n\tif (webix.DragControl.active) return;\n\n\tconst id = webix.html.locate(e, \"webix_l_id\");\n\tif (id && view.getItem(id).type == \"task\") {\n\t\tconst node = view.getItemNode(id);\n\t\tconst mode = getMoveMode(node, e.clientX);\n\t\tnode.style.cursor = mode == \"move\" ? \"pointer\" : \"ew-resize\";\n\t}\n}\n\nfunction getMoveMode(node, x) {\n\tconst rect = node.getBoundingClientRect();\n\tconst p = (x - rect.left) / rect.width;\n\tconst minWidth = webix.env.touch ? 400 : 200;\n\tconst delta = 0.2 / (rect.width > minWidth ? rect.width / minWidth : 1);\n\n\tif (p < delta) return \"start\";\n\tif (p > 1 - delta) return \"end\";\n\treturn \"move\";\n}\n\nfunction updateDragScrollConfig(ds) {\n\tconst scales = this.Local.getScales();\n\tds.senseX = Math.round(scales.cellWidth * (webix.env.touch ? 1 : 0.5));\n\tds.senseY = Math.round(scales.cellHeight * (webix.env.touch ? 3 : 1));\n\treturn ds;\n}\n\nfunction isProgressDrag(t, node) {\n\twhile (t != node) {\n\t\tif (t.classList.contains(\"webix_gantt_progress_drag\")) return true;\n\t\tt = t.parentNode;\n\t}\n\treturn false;\n}\n\nconst DragControl = {\n\t$longTouchLimit: true,\n\t$dragCreate: function(t, e, pointer) {\n\t\tif (this.master.State.readonly) return false;\n\n\t\tconst ctx = this.getContext();\n\t\tctx.$touch = pointer === \"touch\";\n\n\t\tconst id = this.locateEvent(e);\n\t\tif (id) {\n\t\t\tconst item = this.view.getItem(id);\n\t\t\tif (item.$group) return false;\n\n\t\t\tconst target = e.target;\n\n\t\t\tif (target.classList.contains(\"webix_gantt_link\")) {\n\t\t\t\tctx.mode = \"links\";\n\t\t\t\treturn Modes[ctx.mode].$dragCreate.call(this, t, e, id);\n\t\t\t}\n\n\t\t\tconst node = this.view.getItemNode(id);\n\t\t\tif (!ctx.$touch && isProgressDrag(target, node)) {\n\t\t\t\tctx.mode = \"progress\";\n\t\t\t\treturn Modes[ctx.mode].$dragCreate.call(this, t, e, id);\n\t\t\t}\n\n\t\t\tconst scroll = this.view.getScrollState();\n\t\t\tconst evContext = this.getEventContext(e, ctx);\n\n\t\t\tlet mode = getMoveMode(node, evContext.x);\n\t\t\tif (item.type != \"task\" && (mode == \"start\" || mode == \"end\"))\n\t\t\t\tmode = \"move\";\n\n\t\t\tconst scales = this.Local.getScales();\n\t\t\tlet step = scales.cellWidth;\n\t\t\tif (scales.precise) {\n\t\t\t\tconst nsc = this.master.app\n\t\t\t\t\t.getService(\"helpers\")\n\t\t\t\t\t.getSmallerCount(scales.minUnit);\n\t\t\t\tstep = Math.round(step / (typeof nsc === \"number\" ? nsc : nsc()));\n\t\t\t}\n\n\t\t\twebix.extend(\n\t\t\t\tctx,\n\t\t\t\t{\n\t\t\t\t\tid,\n\t\t\t\t\tmode,\n\t\t\t\t\tnode,\n\t\t\t\t\tstep,\n\t\t\t\t\tdx: 0,\n\t\t\t\t\tfrom: this.view,\n\t\t\t\t\tsnode: t.querySelector(\".webix_scroll_cont\"),\n\t\t\t\t\tx: evContext.x,\n\t\t\t\t\tscroll: scroll,\n\t\t\t\t\tt: parseInt(node.style.top),\n\t\t\t\t\tl: parseInt(node.style.left),\n\t\t\t\t\tw: parseInt(node.style.width),\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\n\t\t\tif (!this.master.app.callEvent(\"bars:beforedrag\", [item, ctx]))\n\t\t\t\treturn false;\n\n\t\t\tif (Modes[ctx.mode].dragScroll)\n\t\t\t\twebix.extend(\n\t\t\t\t\tctx,\n\t\t\t\t\tupdateDragScrollConfig.call(this, Modes[ctx.mode].dragScroll)\n\t\t\t\t);\n\n\t\t\tconst html = node.cloneNode(true);\n\t\t\thtml.className += \" webix_drag_zone webix_gantt_mode_\" + mode;\n\n\t\t\tnode.style.visibility = \"hidden\";\n\t\t\twebix.html.addCss(t, \"webix_gantt_in_action\", true);\n\n\t\t\tt.style.cursor = mode == \"move\" ? \"move\" : \"ew-resize\";\n\t\t\tt.appendChild(html);\n\t\t\treturn html;\n\t\t} else if (\n\t\t\tthis.master.app.config.split &&\n\t\t\tthis.master.State.display !== \"resources\" &&\n\t\t\te.target == t\n\t\t) {\n\t\t\tctx.mode = \"split\";\n\t\t\treturn Modes[ctx.mode].$dragCreate.call(this, t, e);\n\t\t}\n\n\t\treturn false;\n\t},\n\t$dragDestroy: function(t, node) {\n\t\tconst ctx = this.getContext();\n\n\t\tif (Modes[ctx.mode].dragScroll) DragScroll.reset(ctx);\n\n\t\tif (ctx.mode && Modes[ctx.mode].$dragDestroy)\n\t\t\treturn Modes[ctx.mode].$dragDestroy.call(this, t, node);\n\n\t\tif (ctx.$waitUpdate) {\n\t\t\tctx.$waitUpdate.catch(() => {\n\t\t\t\tthis.master.Action({ action: \"update-task-time\", id: ctx.id });\n\t\t\t});\n\t\t} else\n\t\t\tctx.$waitUpdate = this.master.Action({\n\t\t\t\taction: \"update-task-time\",\n\t\t\t\tid: ctx.id,\n\t\t\t});\n\n\t\tctx.$waitUpdate.finally(() => {\n\t\t\tctx.node.style.visibility = \"\";\n\t\t\twebix.html.remove(node);\n\n\t\t\tif (this.master.app.config.split && ctx.id)\n\t\t\t\tthis.master.Action({\n\t\t\t\t\taction: \"split-resize\",\n\t\t\t\t\tid: ctx.id,\n\t\t\t\t});\n\t\t});\n\n\t\tt.style.cursor = \"\";\n\t\twebix.html.removeCss(t, \"webix_gantt_in_action\");\n\t\treturn false;\n\t},\n\t$dragIn: function(s, t, e) {\n\t\tconst ctx = this.getContext();\n\t\tif (!ctx.mode) return false;\n\n\t\tif (Modes[ctx.mode].dragScroll) {\n\t\t\tDragScroll.reset(ctx);\n\t\t\tDragScroll.start(ctx, e);\n\t\t}\n\n\t\tif (Modes[ctx.mode].$dragIn)\n\t\t\treturn Modes[ctx.mode].$dragIn.call(this, s, t, e);\n\t\treturn true;\n\t},\n\t$dragPos: function(pos) {\n\t\tconst ctx = this.getContext();\n\t\treturn Modes[ctx.mode].$dragPos.call(this, pos);\n\t},\n\t$dragOut: function(s, t, n, e) {\n\t\tconst ctx = this.getContext();\n\t\tif (Modes[ctx.mode].$dragOut)\n\t\t\treturn Modes[ctx.mode].$dragOut.call(this, s, t, n, e);\n\t\treturn null;\n\t},\n\t$drop: function(s, t, e) {\n\t\tconst ctx = this.getContext();\n\t\tif (!ctx.mode) return false;\n\n\t\tif (Modes[ctx.mode].$drop) return Modes[ctx.mode].$drop.call(this, s, t, e);\n\n\t\tconst { id, mode, dx, step } = ctx;\n\t\tconst time = Math.round(dx / step);\n\t\tctx.timeShift = time;\n\t\tif (\n\t\t\t!this.master.app.callEvent(\"bars:beforedrop\", [\n\t\t\t\tthis.view.getItem(ctx.id),\n\t\t\t\tctx,\n\t\t\t])\n\t\t)\n\t\t\treturn false;\n\n\t\tctx[\"$waitUpdate\"] = this.master.Action({\n\t\t\taction: \"update-task-time\",\n\t\t\tmode,\n\t\t\ttime,\n\t\t\tid,\n\t\t});\n\t},\n\tlocateEvent: function(ev, context) {\n\t\tif (context) {\n\t\t\tev = document.elementFromPoint(context.x, context.y);\n\t\t}\n\t\treturn webix.html.locate(ev, \"webix_l_id\");\n\t},\n\tgetEventContext: function(e, ctx) {\n\t\tif (ctx.$touch) {\n\t\t\tif (e.changedTouches && !(e.touches && e.touches[0])) {\n\t\t\t\tconst t = e.changedTouches[0];\n\t\t\t\treturn { x: t.pageX, y: t.pageY };\n\t\t\t}\n\t\t\treturn e.time ? e : webix.env.touch.context(e);\n\t\t}\n\t\treturn { x: e.clientX, y: e.clientY };\n\t},\n\tgetContext: function() {\n\t\treturn webix.DragControl.getContext();\n\t},\n\tsetDragOffset: function(node, target, e) {\n\t\tconst ctx = this.getContext();\n\t\tconst pos = webix.html.pos(e);\n\t\tconst offset = webix.html.offset(node);\n\n\t\tctx.width = offset.width;\n\t\tctx.height = offset.height;\n\t\tctx.x_offset = offset.x - pos.x;\n\t\tctx.y_offset = offset.y - pos.y;\n\t},\n};\n\nconst links = {\n\tdragScroll: {\n\t\tdirection: \"xy\",\n\t},\n\t$dragCreate: function(t, e, id) {\n\t\tconst ctx = this.getContext();\n\t\tconst link = e.target;\n\t\tconst node = this.view.getItemNode(id);\n\t\tconst scroll = this.view.getScrollState();\n\t\tconst offset = webix.html.offset(link);\n\t\tconst css = link.classList;\n\n\t\twebix.extend(\n\t\t\tctx,\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\tfrom: this.view,\n\t\t\t\tnode,\n\t\t\t\tlink,\n\t\t\t\tfromStart: css.contains(\"webix_gantt_link_left\"),\n\t\t\t\tstart: {\n\t\t\t\t\tx: offset.x + offset.width / 2 + scroll.x,\n\t\t\t\t\ty: offset.y + offset.height / 2 + scroll.y,\n\t\t\t\t},\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\n\t\tif (\n\t\t\t!this.master.app.callEvent(\"bars:beforedrag\", [\n\t\t\t\tthis.view.getItem(id),\n\t\t\t\tctx,\n\t\t\t])\n\t\t)\n\t\t\treturn false;\n\n\t\tif (Modes[ctx.mode].dragScroll)\n\t\t\twebix.extend(\n\t\t\t\tctx,\n\t\t\t\tupdateDragScrollConfig.call(this, Modes[ctx.mode].dragScroll)\n\t\t\t);\n\n\t\tlink.style.opacity = 1;\n\t\twebix.html.addCss(node, \"webix_gantt_task_in_action\", true);\n\n\t\tconst html = webix.html.create(\"div\", { visibility: \"hidden\" });\n\t\tdocument.body.appendChild(html);\n\t\treturn html;\n\t},\n\t$dragDestroy: function(t, node) {\n\t\tconst ctx = this.getContext();\n\n\t\tthis.master.Action({ action: \"temp-link\" });\n\n\t\tif (ctx.target) {\n\t\t\tconst node = this.view.getItemNode(ctx.target);\n\t\t\twebix.html.removeCss(node, \"webix_gantt_link_visible\");\n\t\t}\n\n\t\tctx.link.style.opacity = \"\";\n\t\twebix.html.removeCss(ctx.node, \"webix_gantt_task_in_action\");\n\t\twebix.html.remove(node);\n\n\t\treturn false;\n\t},\n\t$dragIn: function(s, t, e) {\n\t\tconst ctx = this.getContext();\n\t\tconst evContext = this.getEventContext(e, ctx);\n\t\tconst id = this.locateEvent(e, ctx.$touch ? evContext : null);\n\n\t\tif (!id) return false;\n\n\t\tconst node = this.view.getItemNode(id);\n\t\tif (id != ctx.target) {\n\t\t\twebix.html.addCss(node, \"webix_gantt_link_visible\", true);\n\t\t\tctx.target = id;\n\t\t}\n\t\treturn node;\n\t},\n\t$dragPos: function(pos) {\n\t\tconst ctx = this.getContext();\n\t\tconst nscroll = this.view.getScrollState();\n\n\t\tctx.end = {\n\t\t\tx: pos.x + nscroll.x,\n\t\t\ty: pos.y + nscroll.y,\n\t\t};\n\n\t\tthis.master.Action({ action: \"temp-link\", start: ctx.start, end: ctx.end });\n\t},\n\t$dragOut: function(s, t, n, e) {\n\t\tconst ctx = this.getContext();\n\t\tconst evContext = this.getEventContext(e, ctx);\n\t\tconst id = this.locateEvent(e, ctx.$touch ? evContext : null);\n\n\t\tif (ctx.target && id != ctx.target) {\n\t\t\tconst node = this.view.getItemNode(ctx.target);\n\t\t\twebix.html.removeCss(node, \"webix_gantt_link_visible\");\n\t\t\tctx.target = null;\n\t\t}\n\t\treturn null;\n\t},\n\t$drop: function(s, t, e) {\n\t\tconst ctx = this.getContext();\n\t\tconst source = ctx.id;\n\t\tconst evContext = this.getEventContext(e, ctx);\n\t\tconst target = this.locateEvent(e, ctx.$touch ? evContext : null);\n\n\t\tif (!target || source == target) return false;\n\n\t\tconst node = this.view.getItemNode(target);\n\t\tconst rect = node.getBoundingClientRect();\n\t\tconst toStart = evContext.x - rect.left < rect.width / 2;\n\n\t\tconst type = (ctx.linkType = (ctx.fromStart ? 1 : 0) + (toStart ? 0 : 2));\n\t\tctx.targetId = target;\n\t\tif (\n\t\t\tthis.master.app.callEvent(\"bars:beforedrop\", [\n\t\t\t\tthis.view.getItem(source),\n\t\t\t\tctx,\n\t\t\t])\n\t\t)\n\t\t\tthis.master.Action({ action: \"add-link\", source, target, type });\n\t},\n};\n\nconst resize = {\n\t$dragPos: function(pos) {\n\t\tconst ctx = this.getContext();\n\t\tconst nscroll = this.view.getScrollState();\n\t\tconst node = webix.DragControl.getNode();\n\t\tconst { mode, l, t, w, x, id, scroll, step } = ctx;\n\t\tconst dx = (ctx.dx = pos.x - x - scroll.x + nscroll.x);\n\n\t\tif (mode === \"start\") {\n\t\t\tpos.x = Math.min(l + dx, l + w - step);\n\t\t\tnode.style.width = `${Math.max(w - dx, step)}px`;\n\t\t} else if (mode === \"end\") {\n\t\t\tpos.x = l;\n\t\t\tnode.style.width = `${Math.max(w + dx, step)}px`;\n\t\t}\n\t\tpos.y = t;\n\n\t\tthis.master.Action({\n\t\t\taction: \"drag-task\",\n\t\t\tid,\n\t\t\tleft: pos.x,\n\t\t\twidth: parseInt(node.style.width),\n\t\t});\n\n\t\tif (this.master.app.config.split)\n\t\t\tthis.master.Action({\n\t\t\t\taction: \"split-resize\",\n\t\t\t\tid,\n\t\t\t});\n\t},\n};\n\nconst move = {\n\tdragScroll: {\n\t\tdirection: \"x\",\n\t},\n\t$dragPos: function(pos) {\n\t\tconst ctx = this.getContext();\n\t\tconst { node, l, t, x, id, scroll } = ctx;\n\t\tconst nscroll = this.view.getScrollState();\n\t\tconst dx = (ctx.dx = pos.x - x - scroll.x + nscroll.x);\n\n\t\tpos.x = l + dx;\n\t\tpos.y = t;\n\n\t\tthis.master.Action({\n\t\t\taction: \"drag-task\",\n\t\t\tid,\n\t\t\tleft: pos.x,\n\t\t\twidth: parseInt(node.style.width),\n\t\t});\n\n\t\tif (this.master.app.config.split)\n\t\t\tthis.master.Action({\n\t\t\t\taction: \"split-resize\",\n\t\t\t\tid,\n\t\t\t});\n\t},\n};\n\nconst progress = {\n\t$dragCreate: function(t, e, id) {\n\t\tconst ctx = this.getContext();\n\t\tconst node = this.view.getItemNode(id);\n\t\tconst prevProgress = this.view.getItem(id).progress;\n\t\tconst progressNode = node.querySelector(\".webix_gantt_progress\");\n\t\tconst evContext = this.getEventContext(e, ctx);\n\t\tconst scroll = this.view.getScrollState();\n\n\t\twebix.extend(\n\t\t\tctx,\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\tnode,\n\t\t\t\tprevProgress,\n\t\t\t\tprogressNode,\n\t\t\t\tfrom: this.view,\n\t\t\t\tx: evContext.x,\n\t\t\t\tw: parseInt(node.style.width),\n\t\t\t\tscroll,\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\n\t\tif (\n\t\t\t!this.master.app.callEvent(\"bars:beforedrag\", [\n\t\t\t\tthis.view.getItem(id),\n\t\t\t\tctx,\n\t\t\t])\n\t\t)\n\t\t\treturn false;\n\n\t\tt.style.cursor = \"ew-resize\";\n\t\twebix.html.addCss(t, \"webix_gantt_in_action\", true);\n\t\twebix.html.addCss(node, \"webix_gantt_mode_progress\", true);\n\n\t\tconst html = webix.html.create(\"div\", { visibility: \"hidden\" });\n\t\tdocument.body.appendChild(html);\n\t\treturn html;\n\t},\n\t$dragPos: function(pos) {\n\t\tconst ctx = this.getContext();\n\t\tconst { x, scroll, w, node } = ctx;\n\t\tconst nscroll = this.view.getScrollState();\n\n\t\tconst dx = pos.x - x - scroll.x + nscroll.x;\n\t\tconst progress = Math.min(\n\t\t\tMath.max(ctx.prevProgress + Math.round((dx * 100) / w), 0),\n\t\t\t100\n\t\t);\n\n\t\tif (ctx.progress != progress) {\n\t\t\tctx.progress = progress;\n\t\t\tModes[ctx.mode].updateTaskTemplate.call(this, ctx, progress);\n\t\t}\n\n\t\tconst colors = { contrast: \"#393939\", dark: \"#20262B\" };\n\t\tnode.style.zIndex = \"3\";\n\t\tnode.style.boxShadow = `${\n\t\t\tcolors[webix.skin.$name || \"#ffffff\"]\n\t\t} -1px 0px 0px`;\n\t},\n\t$drop: function() {\n\t\tconst ctx = this.getContext();\n\t\tconst { id, progress, prevProgress } = ctx;\n\n\t\tif (\n\t\t\t!webix.isUndefined(progress) &&\n\t\t\tprogress != prevProgress &&\n\t\t\tthis.master.app.callEvent(\"bars:beforedrop\", [this.view.getItem(id), ctx])\n\t\t)\n\t\t\tctx[\"$waitUpdate\"] = this.master.Action({\n\t\t\t\taction: \"update-task-progress\",\n\t\t\t\tprogress,\n\t\t\t\tid,\n\t\t\t});\n\t},\n\t$dragDestroy: function(t, node) {\n\t\tconst ctx = this.getContext();\n\n\t\tif (ctx.$waitUpdate) {\n\t\t\tctx.$waitUpdate.catch(() => {\n\t\t\t\tthis.master.Action({ action: \"update-task-progress\", id: ctx.id });\n\t\t\t});\n\t\t} else\n\t\t\tctx.$waitUpdate = this.master.Action({\n\t\t\t\taction: \"update-task-progress\",\n\t\t\t\tid: ctx.id,\n\t\t\t});\n\n\t\tt.style.cursor = \"\";\n\t\twebix.html.removeCss(t, \"webix_gantt_in_action\");\n\t\twebix.html.removeCss(ctx.node, \"webix_gantt_mode_progress\");\n\n\t\twebix.html.remove(node);\n\t\treturn false;\n\t},\n\tupdateTaskTemplate(ctx, progress) {\n\t\tconst node = ctx.progressNode;\n\t\tnode.style.width = progress + \"%\";\n\t\tnode.innerHTML = this.master.DragProgressTemplate(progress);\n\t},\n};\n\nconst split = {\n\t$dragCreate: function(t, e) {\n\t\tconst selection = webix.html.create(\"DIV\", {\n\t\t\tclass: \"webix_gantt_split_selection\",\n\t\t});\n\n\t\tconst scales = this.Local.getScales();\n\t\tconst scroll = this.view.getScrollState();\n\n\t\tconst tb = e.target.getBoundingClientRect();\n\t\tconst index = Math.floor((e.y - tb.y + scroll.y) / scales.cellHeight);\n\t\tconst offsetX = e.x - tb.x;\n\n\t\tselection.style.top = index * scales.cellHeight + 6 + \"px\";\n\t\tselection.style.left = offsetX + scroll.x + \"px\";\n\t\tselection.style.height = scales.cellHeight - 14 + \"px\";\n\t\tselection.style.width = \"0px\";\n\n\t\tlet step = scales.cellWidth;\n\t\tif (scales.precise) {\n\t\t\tconst nsc = this.master.app\n\t\t\t\t.getService(\"helpers\")\n\t\t\t\t.getSmallerCount(scales.minUnit);\n\t\t\tstep = Math.round(step / (typeof nsc === \"number\" ? nsc : nsc()));\n\t\t}\n\n\t\tconst ctx = this.getContext();\n\t\twebix.extend(\n\t\t\tctx,\n\t\t\t{\n\t\t\t\tfrom: this.view,\n\t\t\t\tnode: selection,\n\t\t\t\tstart: { offsetX, clientX: e.clientX },\n\t\t\t\tindex,\n\t\t\t\tstep,\n\t\t\t\tscroll,\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\n\t\tt.appendChild(selection);\n\n\t\tconst html = webix.html.create(\"div\", { visibility: \"hidden\" });\n\t\tdocument.body.appendChild(html);\n\t\treturn html;\n\t},\n\t$dragPos(pos) {\n\t\tconst ctx = this.getContext();\n\t\tconst width = (ctx.dx = pos.x - ctx.start.clientX);\n\t\tif (pos.x < ctx.start.clientX) {\n\t\t\tctx.node.style.left = ctx.start.offsetX + ctx.scroll.x + width + \"px\";\n\t\t\tctx.node.style.width = -width + \"px\";\n\t\t} else {\n\t\t\tctx.node.style.left = ctx.start.offsetX + ctx.scroll.x + \"px\";\n\t\t\tctx.node.style.width = pos.x - ctx.start.clientX + \"px\";\n\t\t}\n\t},\n\t$drop() {\n\t\tconst ctx = this.getContext();\n\t\tconst id = this.view.getIdByIndex(ctx.index);\n\n\t\tlet start = Math.round((ctx.start.offsetX + ctx.scroll.x) / ctx.step);\n\t\tlet end = Math.round(ctx.dx / ctx.step);\n\t\tif (end < 0) {\n\t\t\tstart = start + end;\n\t\t\tend *= -1;\n\t\t}\n\n\t\tthis.master.Action({ action: \"add-task\", id, dates: { start, end } });\n\t},\n\t$dragDestroy(t, node) {\n\t\tconst ctx = this.getContext();\n\n\t\twebix.html.remove(node);\n\t\twebix.html.remove(ctx.node);\n\n\t\treturn false;\n\t},\n};\n\nconst Modes = {\n\tlinks,\n\tmove,\n\tprogress,\n\tstart: resize,\n\tend: resize,\n\tsplit,\n};\n","import { JetView } from \"webix-jet\";\nimport { initDnD, switchCursor } from \"../../helpers/dnd\";\n\nexport default class BarsView extends JetView {\n\tconfig() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\treturn {\n\t\t\tview: \"abslayout\",\n\t\t\tcss:\n\t\t\t\tthis.State.readonly || !this.app.config.links\n\t\t\t\t\t? \"webix_gantt_readonly\"\n\t\t\t\t\t: \"\",\n\t\t\tborderless: true,\n\t\t\tcells: [\n\t\t\t\t{\n\t\t\t\t\tview: \"template\",\n\t\t\t\t\tcss: \"webix_gantt_holidays\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\trelative: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"template\",\n\t\t\t\t\tcss: \"webix_gantt_links\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\trelative: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"list\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\ttype: this.BarsType(_),\n\t\t\t\t\tcss: `webix_gantt${webix.env.touch ? \"_touch\" : \"\"}_bars`,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonItemClick: id => this.ItemClickHandler(id),\n\t\t\t\t\t},\n\t\t\t\t\ttooltip: obj => this.GetTooltip(obj, _),\n\t\t\t\t\tscroll: \"xy\",\n\t\t\t\t\trelative: true,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit(view) {\n\t\tconst [holidays, links, bars] = view.getChildViews();\n\t\tthis.Holidays = holidays;\n\t\tthis.Links = links;\n\t\tthis.Bars = bars;\n\t\tthis.Ops = this.app.getService(\"operations\");\n\t\tthis.Helpers = this.app.getService(\"helpers\");\n\n\t\tconst local = (this.Local = this.app.getService(\"local\"));\n\t\tconst scales = local.getScales();\n\t\tconst linkCollection = local.links();\n\t\tconst ldata = (this.LinksData = linkCollection.data);\n\t\tthis.Calendars = this.app.config.resourceCalendars;\n\n\t\tthis.HandleScroll();\n\t\tthis.HandleDrag(scales);\n\t\tthis.HandleSelection(scales);\n\t\tthis.InitMarkers();\n\t\tthis.HandleHolidays(scales);\n\n\t\tthis.on(this.State.$changes, \"display\", (v, old) => {\n\t\t\t// if the selected task type was changed, the form not closed and the display mode changed, we need to close the form and remove selection layer\n\t\t\tthis.SyncData(true);\n\t\t\tif (old) {\n\t\t\t\tthis.Local.refreshLinks();\n\t\t\t\tthis.RefreshLinks();\n\t\t\t\tif (this.Calendars) this.RenderResourceHolidays();\n\t\t\t}\n\t\t});\n\n\t\t// leave here for app.refresh() calls (inc. from Locale plugin)\n\t\tthis.DrawGrid(view, scales);\n\t\tif (this.Calendars) this.RenderResourceHolidays(scales);\n\n\t\tthis.on(this.app, \"onScalesUpdate\", scales => {\n\t\t\tthis.DrawGrid(view, scales);\n\t\t\tthis.Bars.refresh();\n\t\t\tthis.RefreshLinks();\n\t\t});\n\n\t\tthis.on(this.VisibleTasks.data, \"onStoreUpdated\", (id, data, action) => {\n\t\t\tthis.RefreshLinks();\n\t\t\tif (action !== \"update\") this.ApplySelection();\n\t\t\tif (!action && this.Calendars) this.RenderResourceHolidays();\n\t\t});\n\t\tthis.on(ldata, \"onStoreUpdated\", () => {\n\t\t\tthis.RefreshLinks();\n\t\t});\n\t\tthis.on(this.State.$changes, \"criticalPath\", (v, o) => {\n\t\t\tif (!webix.isUndefined(o)) {\n\t\t\t\tthis.Local.showCriticalPath(!v);\n\t\t\t\tthis.RefreshLinks();\n\t\t\t}\n\t\t});\n\t\tthis.on(this.State.$changes, \"compact\", () => {\n\t\t\tthis.RefreshLinks();\n\t\t});\n\t\tif (this.Calendars)\n\t\t\tthis.on(\n\t\t\t\tthis.Local.assignments().data,\n\t\t\t\t\"onStoreUpdated\",\n\t\t\t\t(id, data, action) => {\n\t\t\t\t\tthis.RenderResourceHolidays();\n\t\t\t\t\tif (this.app.config.excludeHolidays && action) {\n\t\t\t\t\t\tconst task = this.Local.tasks().getItem(data.task);\n\t\t\t\t\t\tif (task) this.Ops.updateAssignedTaskDates(task);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\tthis.on(this.State.$changes, \"baseline\", (v, o) => {\n\t\t\tif (!webix.isUndefined(o))\n\t\t\t\tthis.Local.updateScaleMinMax(this.VisibleTasks);\n\t\t});\n\t}\n\n\t/**\n\t * Sets action ot bar item click\n\t * @param {(string|number)} id  - ID of the clicked item\n\t */\n\tItemClickHandler(id) {\n\t\tif (!this.Bars.getItem(id).$group)\n\t\t\tthis.State.$batch({\n\t\t\t\tparent: null,\n\t\t\t\tselected: id,\n\t\t\t});\n\t}\n\n\t/**\n\t * Paints a grid\n\t * @param {view} Object - Webix view of bars chart\n\t * @param {scales} Object - scales object as returned by this.Local.getScales()\n\t */\n\tDrawGrid(view, scales) {\n\t\tconst colors = { contrast: \"#808080\", dark: \"#384047\" };\n\t\tview.$view.style.backgroundImage = `url(${this.app\n\t\t\t.getService(\"helpers\")\n\t\t\t.drawGridInner(\n\t\t\t\tscales.cellWidth,\n\t\t\t\tscales.cellHeight,\n\t\t\t\tcolors[webix.skin.$name] || \"#ccc\"\n\t\t\t)})`;\n\t\tview.$view.style.marginTop = \"0px\";\n\n\t\t// sync grid to scroll position\n\t\tconst state = this.app.getState();\n\t\tview.$view.style.backgroundPosition = `-${state.left}px -${state.top}px`;\n\n\t\tthis.Resize(scales.width);\n\t}\n\n\t/**\n\t * Loads data to the chart\n\t * @param {Boolean} unselect - passed on 'display' change; if the selected task is not found on chart and this param is true, State.selected will be nulled in ApplySelection\n\t */\n\tSyncData(unselect) {\n\t\tthis.Bars.clearAll();\n\t\tthis.VisibleTasks = this.Local.getVisibleTasksCollection();\n\t\tif (this.Calendars) {\n\t\t\tthis.Local.taskCalendarMap().then(() => {\n\t\t\t\tthis.Bars.sync(this.VisibleTasks);\n\t\t\t});\n\t\t} else this.Bars.sync(this.VisibleTasks);\n\t\tthis.ApplySelection(unselect);\n\t}\n\n\t/**\n\t * Returns a string with HTML of a task node content\n\t * @param {Object} obj - task data\n\t * @param {function} _ - the translator function of jet locale plugin, see https://webix.gitbook.io/webix-jet/part-ii-webix-jet-in-details/plugins#applying-the-locale\n\t * @returns {string}\n\t */\n\tBarsTemplate(obj, _) {\n\t\tconst text = obj.text || (obj.$group ? _(\"Unassigned\") : _(\"(no title)\"));\n\t\treturn obj.type == \"milestone\" ? `<span>${text}</span>` : text;\n\t}\n\n\t/**\n\t * Returns all templates for bars\n\t * @param {function} _ - the translator function of jet locale plugin, see https://webix.gitbook.io/webix-jet/part-ii-webix-jet-in-details/plugins#applying-the-locale\n\t * @returns {Object} all templates for bars\n\t */\n\tBarsType(_) {\n\t\treturn {\n\t\t\ttemplate: obj => {\n\t\t\t\tif (\n\t\t\t\t\tthis.State.display === \"tasks\" &&\n\t\t\t\t\tobj.type === \"split\" &&\n\t\t\t\t\tobj.$data &&\n\t\t\t\t\tobj.$data.length\n\t\t\t\t) {\n\t\t\t\t\tconst { height, width, left, top } = this.GetSplitBox(obj);\n\t\t\t\t\tlet html = `<div class=\"webix_gantt_split_container\" webix_s_id=\"${obj.id}\" style=\"top:${top}px;left:${left}px;height:${height}px;width:${width}px;\"></div>`;\n\n\t\t\t\t\t// split kids are not in the order\n\t\t\t\t\tconst order = this.VisibleTasks.data.order;\n\t\t\t\t\tconst isLast = order.length > 1 && obj.id == order[order.length - 1];\n\t\t\t\t\tobj.$data.forEach(kid => {\n\t\t\t\t\t\thtml +=\n\t\t\t\t\t\t\tthis.TemplateStart(kid, isLast, true) +\n\t\t\t\t\t\t\tthis.BarsTemplate(kid, _) +\n\t\t\t\t\t\t\tthis.TemplateEnd(kid);\n\t\t\t\t\t});\n\t\t\t\t\treturn html;\n\t\t\t\t} else return this.BarsTemplate(obj, _);\n\t\t\t},\n\t\t\ttemplateStart: task => {\n\t\t\t\tif (\n\t\t\t\t\tthis.State.display === \"tasks\" &&\n\t\t\t\t\ttask.type === \"split\" &&\n\t\t\t\t\ttask.$data &&\n\t\t\t\t\ttask.$data.length\n\t\t\t\t)\n\t\t\t\t\treturn \"\";\n\t\t\t\tconst order = this.VisibleTasks.data.order;\n\t\t\t\tconst isLast = order.length > 1 && task.id == order[order.length - 1];\n\t\t\t\treturn this.TemplateStart(task, isLast);\n\t\t\t},\n\t\t\ttemplateEnd: task => {\n\t\t\t\tif (\n\t\t\t\t\tthis.State.display === \"tasks\" &&\n\t\t\t\t\ttask.type === \"split\" &&\n\t\t\t\t\ttask.$data &&\n\t\t\t\t\ttask.$data.length\n\t\t\t\t)\n\t\t\t\t\treturn \"\";\n\t\t\t\treturn this.TemplateEnd();\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * Gets the size and position parameters for a decorative div-element behind a split task\n\t * @param {Object} obj - data of a split task\n\t * @returns {Object} an object with top, left, height, and width of an element\n\t */\n\tGetSplitBox(obj) {\n\t\tconst last = obj.$data[0];\n\t\tconst first = obj.$data[obj.$data.length - 1];\n\t\tconst left =\n\t\t\tfirst.$x + (first.type == \"milestone\" ? Math.floor(first.$w / 2) : 0);\n\t\tconst rwidth = last.type == \"milestone\" ? Math.floor(last.$w / 2) : last.$w;\n\n\t\treturn {\n\t\t\ttop: last.$y,\n\t\t\tleft,\n\t\t\theight: last.$h,\n\t\t\twidth: last.$x - left + rwidth,\n\t\t};\n\t}\n\n\t/**\n\t * Returns the html for the first part of a task\n\t * @param {Object} task - a task data object\n\t * @param {Boolean} last - a flag that indicates that this task is in the last line of gantt\n\t * @param {Boolean} split - a flag that indicates that this task is a child of a parent with \"split\" type\n\t * @returns {string} HTML that defines how a task is displayed\n\t */\n\tTemplateStart(task, last, split) {\n\t\tlet w = task.$w,\n\t\t\th = task.$h,\n\t\t\tdiff = 0,\n\t\t\tprogress = \"\";\n\t\tconst css = this.BarCSS(task, last);\n\t\tconst contentCss = this.ContentCss(task);\n\t\tif (task.type == \"milestone\") {\n\t\t\tw = h = Math.ceil(Math.sqrt(Math.pow(task.$w, 2) / 2));\n\t\t\tdiff = Math.ceil((task.$w - w) / 2);\n\t\t} else {\n\t\t\tconst drag =\n\t\t\t\ttask.type == \"task\" ? this.DragProgressTemplate(task.progress) : \"\";\n\t\t\tprogress = `<div class=\"webix_gantt_progress\" style=\"width:${task.progress}%;\">${drag}</div>`;\n\t\t}\n\n\t\tlet baseline = \"\";\n\t\tif (\n\t\t\tthis.State.baseline &&\n\t\t\ttask.type !== \"milestone\" &&\n\t\t\ttask.planned_start &&\n\t\t\t!split\n\t\t)\n\t\t\tbaseline = this.TemplateBaseline(task);\n\n\t\treturn (\n\t\t\tbaseline +\n\t\t\t`<div webix_l_id=\"${task.id}\" class=\"${css}\" \n\t\t\tstyle=\"left:${task.$x + diff}px;top:${task.$y +\n\t\t\t\tdiff -\n\t\t\t\t(baseline ? 1 : 0)}px;width:${w}px;height:${h}px;\" \n\t\t\tdata-id=\"${task.id}\">\n\t\t\t\t<div class=\"webix_gantt_link webix_gantt_link_left\"></div>\n\t\t\t\t${progress}\n\t\t\t\t<div class=\"webix_gantt_content ${contentCss}\">`\n\t\t);\n\t}\n\n\tTemplateBaseline(t) {\n\t\treturn `<div  \n\t\t\tclass=\"webix_gantt_baseline_${t.type}\" \n\t\t\tstyle=\"left:${t.$x0}px;top:${t.$y + t.$h - 2}px;width:${t.$w0}px; \" \n\t\t\tdata-baseid=\"${t.id}\"></div>`;\n\t}\n\n\t/**\n\t * Get task classname\n\t * @param {Object} task - a task data object\n\t * @param {Boolean} last - a flag that indicates that this task is in the last line of gantt\n\t * @returns {string} a classname\n\t */\n\tBarCSS(task, last) {\n\t\tlet css = `webix_gantt_task_base webix_gantt_${\n\t\t\ttask.type === \"split\" ? \"task\" : task.type\n\t\t}`;\n\t\tif (task.$critical) css += \" webix_gantt_critical\";\n\t\tif (task.$group) css += \" webix_gantt_group\";\n\t\tif (last) css += \" webix_gantt_last\";\n\t\tif (task.css && task.type != \"milestone\") css += \" \" + task.css;\n\t\treturn css;\n\t}\n\tContentCss(task) {\n\t\treturn task.css && task.type == \"milestone\" ? \" \" + task.css : \"\";\n\t}\n\t/**\n\t * Returns the html for the last part of a task\n\t * @returns {string} HTML that defines how a task is displayed\n\t */\n\tTemplateEnd() {\n\t\treturn `</div><div class=\"webix_gantt_link webix_gantt_link_right\"></div></div>`;\n\t}\n\n\t/**\n\t * Returns a string with HTML of the progress drag marker\n\t * @param {number} progress - the progress of a task (number from 0 to 100)\n\t * @returns {string}\n\t */\n\tDragProgressTemplate(progress) {\n\t\treturn `<div class=\"webix_gantt_progress_drag\" style=\"left:${progress}%\">\n\t\t\t<span class=\"webix_gantt_progress_percent\">${progress}</span>\n\t\t</div>`;\n\t}\n\n\t/**\n\t * Extends the class with methods for DnD and handles cursor change for bars\n\t */\n\tHandleDrag() {\n\t\tinitDnD.call(this, this.Bars);\n\n\t\tthis._mousemove_handler = webix.event(this.Bars.$view, \"pointermove\", e => {\n\t\t\tif (e.pointerType == \"mouse\") switchCursor(e, this.Bars);\n\t\t});\n\t}\n\n\tdestroy() {\n\t\tthis._mousemove_handler = webix.eventRemove(this._mousemove_handler);\n\t\tthis._scroll_handler = webix.eventRemove(this._scroll_handler);\n\n\t\tconst markers = this.app.config.markers;\n\t\tif (markers)\n\t\t\tfor (let i = 0; i < markers.length; i++) {\n\t\t\t\tconst m = markers[i];\n\t\t\t\tif (m.$interval) m.$interval = clearInterval(m.$interval);\n\t\t\t}\n\t}\n\n\t/**\n\t * Finds and returns the SVG element with all links or the temp link that is rendered while the user is linking two tasks\n\t * @param {Boolean} temp - if true, the method looks for the temp link\n\t * @returns {SVGElement}\n\t */\n\tGetLinks(temp) {\n\t\treturn this.Links.$view.querySelector(\n\t\t\t`.webix_gantt_${temp ? \"temp_line\" : \"lines\"}`\n\t\t);\n\t}\n\n\t/**\n\t * Handles scrolling\n\t */\n\tHandleScroll() {\n\t\tthis._scroll_handler = webix.event(this.Bars.$view, \"scroll\", ev => {\n\t\t\tconst bars = ev.target;\n\t\t\tconst top = Math.round(bars.scrollTop);\n\t\t\tconst left = Math.round(bars.scrollLeft);\n\n\t\t\tthis.holidaysContainer.style.height = 0 + \"px\";\n\t\t\tthis.containerForMarkers.style.height = 0 + \"px\";\n\n\t\t\tif (this.app.config.links) {\n\t\t\t\tconst lines = this.GetLinks();\n\t\t\t\tconst temp = this.GetLinks(true);\n\t\t\t\tconst attrs = {\n\t\t\t\t\tviewBox: `${left} ${top} ${bars.scrollWidth} ${bars.scrollHeight}`,\n\t\t\t\t\twidth: bars.scrollWidth,\n\t\t\t\t\theight: bars.scrollHeight,\n\t\t\t\t};\n\n\t\t\t\tfor (let key in attrs) {\n\t\t\t\t\tlines.setAttribute(key, attrs[key]);\n\t\t\t\t\ttemp.setAttribute(key, attrs[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.SetHolidaysScroll(bars.scrollHeight, left, top);\n\n\t\t\tthis.containerForMarkers.style.height = bars.scrollHeight + \"px\";\n\n\t\t\tthis.getRoot().$view.style.backgroundPosition = `-${left}px -${top}px`;\n\t\t\tthis.State.$batch({ top, left });\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"top\", y => {\n\t\t\tthis.Bars.scrollTo(this.State.left, y);\n\t\t});\n\n\t\tif (this.app.config.resources) {\n\t\t\tthis.on(this.State.$changes, \"left\", v => {\n\t\t\t\tif (this.State.resourcesDiagram) this.Bars.scrollTo(v, this.State.top);\n\t\t\t});\n\n\t\t\tthis.on(this.app, \"rdiagram:resize\", () => {\n\t\t\t\tthis.holidaysContainer.style.height =\n\t\t\t\t\tthis.Bars.$view.scrollHeight + \"px\";\n\t\t\t\tthis.containerForMarkers.style.height =\n\t\t\t\t\tthis.Bars.$view.scrollHeight + \"px\";\n\t\t\t});\n\t\t}\n\t}\n\n\tSetHolidaysScroll(height, x, y) {\n\t\tthis.holidaysContainer.style.height = height + \"px\";\n\t\tthis.holidaysContainer.style.left = -x + \"px\";\n\t\tthis.holidaysContainer.style.top = -y + \"px\";\n\t\tif (this.Calendars) {\n\t\t\tthis.resHolidaysContainer.style.height = height + \"px\";\n\t\t\tthis.resHolidaysContainer.style.left = -x + \"px\";\n\t\t\tthis.resHolidaysContainer.style.top = -y + \"px\";\n\t\t}\n\t}\n\n\t/**\n\t * Handles selection\n\t * @param {Object} scales - the current scales\n\t */\n\tHandleSelection(scales) {\n\t\tthis.selLine = webix.html.create(\"DIV\", {\n\t\t\tclass: \"webix_gantt_bar_selection\",\n\t\t\tstyle: `height:${scales.cellHeight}px;width:${scales.width}px`,\n\t\t});\n\t\tthis.Bars.$view.insertBefore(this.selLine, this.Bars.$view.firstChild);\n\n\t\tthis.on(this.State.$changes, \"selected\", () => this.ApplySelection());\n\t}\n\n\t/**\n\t * Highlights the selected task\n\t * @param {Boolean} unselect - passed by SyncData call on 'display' change; if the selected task is not found in current collection and this param is true, State.selected will be nulled\n\t */\n\tApplySelection(unselect) {\n\t\tconst id = this.State.selected;\n\t\tlet top = -100;\n\t\tif (id && this.Bars.data.order.length) {\n\t\t\tlet ind = (top = this.Bars.getIndexById(id));\n\t\t\tconst task = this.Bars.getItem(id);\n\t\t\tif (ind < 0) {\n\t\t\t\t// split subtasks will not be found in datastore order\n\t\t\t\tif (\n\t\t\t\t\tthis.State.display == \"tasks\" &&\n\t\t\t\t\ttask &&\n\t\t\t\t\ttask.parent != 0 &&\n\t\t\t\t\tthis.Bars.getItem(task.parent).type === \"split\"\n\t\t\t\t) {\n\t\t\t\t\tind = this.Bars.getIndexById(task.parent);\n\t\t\t\t} else if (unselect && !this.Bars.exists(id)) {\n\t\t\t\t\tthis.State.selected = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttop = ind * this.Local.getScales().cellHeight;\n\n\t\t\tthis.ScrollToTask(task);\n\t\t}\n\t\tthis.selLine.style.top = top + \"px\";\n\t}\n\n\t/**\n\t * Scrolls the chart to make the task visible\n\t * @param {Object} task - the data object of a task\n\t */\n\tScrollToTask(task) {\n\t\tif (task) {\n\t\t\tconst bars = this.Bars;\n\t\t\tif (\n\t\t\t\ttask.$x > bars.$width - this.Local.getScales().cellWidth ||\n\t\t\t\ttask.$x < bars.$view.scrollLeft\n\t\t\t) {\n\t\t\t\t// to make it visible, -30px for better looks - not sticking to the tree\n\t\t\t\tthis.State.left = task.$x - 30;\n\t\t\t}\n\t\t}\n\t\tthis.Bars.scrollTo(this.State.left, this.State.top);\n\t}\n\n\t/**\n\t * Creates and renders markers (today and custom ones if they are provided)\n\t */\n\tInitMarkers() {\n\t\tthis.containerForMarkers = webix.html.create(\"DIV\", {\n\t\t\tclass: \"webix_gantt_markers\",\n\t\t\tstyle: `height:${this.Bars.$view.scrollHeight}px`,\n\t\t});\n\t\tthis.Bars.$view.insertBefore(\n\t\t\tthis.containerForMarkers,\n\t\t\tthis.Bars.$view.firstChild\n\t\t);\n\n\t\tthis.RenderMarkers(this.app.config.markers);\n\t\tthis.on(this.app, \"onScalesUpdate\", () =>\n\t\t\tthis.RenderMarkers(this.app.config.markers)\n\t\t);\n\t}\n\n\t/**\n\t * Renders markers (today and custom ones if they are provided)\n\t * @param {Array} markers - all markers\n\t */\n\tRenderMarkers(markers) {\n\t\tif (!markers) return;\n\n\t\tconst html = [];\n\t\tfor (let i = 0; i < markers.length; i++) {\n\t\t\tconst m = markers[i];\n\t\t\tif (m.now) {\n\t\t\t\tm.start_date = new Date();\n\t\t\t\tif (!m.$interval)\n\t\t\t\t\tm.$interval = setInterval(\n\t\t\t\t\t\titem => {\n\t\t\t\t\t\t\tconst node = this.containerForMarkers.querySelector(\n\t\t\t\t\t\t\t\t`[gantt_now=\"${item.$interval}\"]`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tnode.style.left = this.GetMarkerPosition(new Date()) + \"px\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\t5 * 60 * 1000,\n\t\t\t\t\t\tm\n\t\t\t\t\t);\n\t\t\t}\n\t\t\thtml.push(this.MarkerTemplate(markers[i]));\n\t\t}\n\t\tthis.containerForMarkers.innerHTML = html.join(\"\");\n\t}\n\n\t/**\n\t * Returns a string with HTML content of a marker\n\t * @param {Object} obj - marker settings\n\t * @returns {string}\n\t */\n\tMarkerTemplate(obj) {\n\t\tconst text = obj.text\n\t\t\t? `<span class=\"webix_gantt_marker_text\">${obj.text}</span>`\n\t\t\t: \"\";\n\n\t\treturn `<div\n\t\t\tgantt_now=\"${obj.$interval}\"\n\t\t\tclass=\"webix_gantt_marker ${obj.css || \"\"}\"\n\t\t\tstyle=\"left:${this.GetMarkerPosition(obj.start_date)}px\">${text}</div>`;\n\t}\n\n\t/**\n\t * Calculates new X position of a marker based on its date\n\t * @param {Date} date - the date from marker settings\n\t * @returns {number}\n\t */\n\tGetMarkerPosition(date) {\n\t\tconst { start, end, cellWidth, diff, minUnit } = this.Local.getScales();\n\t\tconst astart = this.Helpers.getUnitStart(minUnit, start);\n\n\t\treturn date < start || date > end\n\t\t\t? -100\n\t\t\t: Math.round(\n\t\t\t\t\tdiff(date, astart, webix.Date.startOnMonday, true) * cellWidth\n\t\t\t  );\n\t}\n\n\t/**\n\t * Returns a string with SVG with all links or a temp link\n\t * @param {string} lines - all lines as SVG polylines\n\t * @param {string} css - the name of CSS class for SVG (by default 'webix_gantt_lines' or 'webix_gantt_temp_line')\n\t * @returns {string}\n\t */\n\tLinksTemplate(lines, css) {\n\t\tconst bars = this.Bars.$view;\n\n\t\treturn `<svg\n\t\t\tclass=\"${css}\"\n\t\t\tviewBox=\"${this.State.left} ${this.State.top} ${bars.scrollWidth} ${bars.scrollHeight}\"\n\t\t\twidth=\"${bars.scrollWidth}\"\n\t\t\theight=\"${bars.scrollHeight}\"\n\t\t>${lines}</svg>`;\n\t}\n\n\t/**\n\t * Re-renders links\n\t */\n\tRefreshLinks() {\n\t\tconst lines = [];\n\t\t// check to skip multiple re-rendering initially\n\t\tif (this.LinksData.count() && this.VisibleTasks.count()) {\n\t\t\tconst links = this.LinksData;\n\t\t\tlinks.order.each(id => {\n\t\t\t\tconst link = links.getItem(id);\n\t\t\t\tif (link.$p) {\n\t\t\t\t\tlet critical =\n\t\t\t\t\t\tthis.State.criticalPath && this.Local.isLinkCritical(link);\n\t\t\t\t\tlines.push(\n\t\t\t\t\t\t`<polyline data-id=\"${id}\" ${\n\t\t\t\t\t\t\tcritical ? \"class='webix_gantt_line_critical'\" : \"\"\n\t\t\t\t\t\t} points=\"${link.$p}\" />`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst html =\n\t\t\tthis.LinksTemplate(lines.join(\"\"), \"webix_gantt_lines\") +\n\t\t\tthis.LinksTemplate('<polyline points=\"\" />', \"webix_gantt_temp_line\");\n\t\tthis.Links.setHTML(html);\n\t}\n\n\t/**\n\t * Refreshes links of a task\n\t * @param {string, number} tid - the ID of a task\n\t */\n\tRefreshTaskLinks(tid) {\n\t\tthis.LinksData.find(a => a.source == tid || a.target == tid).forEach(\n\t\t\tobj => {\n\t\t\t\tconst l = this.Links.$view.querySelector(`[data-id=\"${obj.id}\"]`);\n\t\t\t\tif (l) {\n\t\t\t\t\tconst s = this.VisibleTasks.getItem(obj.source);\n\t\t\t\t\tconst e = this.VisibleTasks.getItem(obj.target);\n\t\t\t\t\tthis.Helpers.updateLink(obj, s, e);\n\t\t\t\t\tl.setAttribute(\"points\", obj.$p);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * Changes the width of the root component (list with bars)\n\t * @param {number} width\n\t */\n\tResize(width) {\n\t\tconst area = this.Bars.$view.querySelector(\".webix_scroll_cont\");\n\t\tarea.style.width = width + \"px\";\n\t\tarea.style.minHeight = \"1px\";\n\n\t\tif (this.selLine) this.selLine.style.width = width + \"px\";\n\t}\n\n\t/**\n\t * Handles actions with tasks\n\t * @param {Object} obj - settings of an action\n\t * @returns {Promise} - the result of asynchronous operations or an empty promise\n\t */\n\tAction(obj) {\n\t\tconst ops = this.app.getService(\"operations\");\n\t\t/**\n\t\t * Some actions invoke server-side request\n\t\t * therefore we need show progress bar for them\n\t\t */\n\t\tlet inProgress = null;\n\n\t\tif (obj.action === \"update-task-time\") {\n\t\t\tif (obj.time) {\n\t\t\t\tinProgress = ops.updateTaskTime(obj.id, obj.mode, obj.time);\n\t\t\t} else {\n\t\t\t\tthis.Local.refreshTasks(obj.id);\n\t\t\t\tif (this.State.display === \"resources\") {\n\t\t\t\t\tthis.VisibleTasks.refresh(obj.id);\n\t\t\t\t}\n\t\t\t\tthis.RefreshTaskLinks(obj.id);\n\t\t\t}\n\t\t} else if (obj.action === \"update-task-progress\") {\n\t\t\tif (!webix.isUndefined(obj.progress)) {\n\t\t\t\tinProgress = ops.updateTask(obj.id, { progress: obj.progress });\n\t\t\t} else {\n\t\t\t\tconst task = this.VisibleTasks.getItem(obj.id);\n\t\t\t\tthis.Bars.render(obj.id, task, \"paint\");\n\t\t\t}\n\t\t} else if (obj.action === \"drag-task\") {\n\t\t\tconst task = this.VisibleTasks.getItem(obj.id);\n\t\t\ttask.$x = parseInt(obj.left);\n\t\t\ttask.$w = parseInt(obj.width);\n\n\t\t\tthis.RefreshTaskLinks(obj.id);\n\t\t} else if (obj.action === \"add-link\") {\n\t\t\tconst { source, target, type } = obj;\n\t\t\tinProgress = ops.addLink({ source, target, type });\n\t\t} else if (obj.action === \"temp-link\") {\n\t\t\tconst { start, end } = obj;\n\t\t\tconst link = this.GetLinks(true).firstChild;\n\n\t\t\tif (!start) {\n\t\t\t\tlink.setAttribute(\"points\", \"\");\n\t\t\t} else {\n\t\t\t\tconst { left, top, p } = this.app\n\t\t\t\t\t.getService(\"helpers\")\n\t\t\t\t\t.newLink(this.Links.$view.getBoundingClientRect(), start, end);\n\t\t\t\tconst shift = [left, top];\n\t\t\t\tconst points = p\n\t\t\t\t\t.split(\",\")\n\t\t\t\t\t.map((a, i) => a * 1 + shift[i % 2])\n\t\t\t\t\t.join(\",\");\n\n\t\t\t\tlink.setAttribute(\"points\", points);\n\t\t\t}\n\t\t} else if (obj.action === \"add-task\") {\n\t\t\tconst scales = this.Local.getScales();\n\t\t\tconst unit = scales.precise\n\t\t\t\t? this.Helpers.getSmallerUnit(scales.minUnit)\n\t\t\t\t: scales.minUnit;\n\t\t\tconst start = this.Helpers.addUnit(unit, scales.start, obj.dates.start);\n\t\t\tconst end = this.Helpers.addUnit(unit, start, obj.dates.end);\n\t\t\tthis.app.callEvent(\"task:add\", [obj.id, { start, end }]);\n\t\t} else if (\n\t\t\tobj.action === \"split-resize\" &&\n\t\t\tthis.State.display !== \"resources\"\n\t\t) {\n\t\t\tconst task = this.VisibleTasks.getItem(obj.id);\n\t\t\tif (task.parent != 0) {\n\t\t\t\tconst parent = this.VisibleTasks.getItem(task.parent);\n\t\t\t\tif (parent.type === \"split\") {\n\t\t\t\t\tconst splitCont = this.Bars.$view.querySelector(\n\t\t\t\t\t\t`[webix_s_id=\"${task.parent}\"]`\n\t\t\t\t\t);\n\t\t\t\t\tparent.$data.sort((a, b) => b.$x - a.$x);\n\t\t\t\t\tconst { width, left } = this.GetSplitBox(parent);\n\t\t\t\t\tsplitCont.style.width = `${width}px`;\n\t\t\t\t\tsplitCont.style.left = `${left}px`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn inProgress || webix.promise.resolve();\n\t}\n\n\t/**\n\t * Adds the layer for holiday highlighting and renders it\n\t * @param {Object} scales - current scales\n\t */\n\tHandleHolidays(scales) {\n\t\tlet html =\n\t\t\t\"<div class='webix_gantt_bar_holidays' style='height:\" +\n\t\t\tthis.Bars.$view.scrollHeight +\n\t\t\t\"px'></div>\";\n\t\tif (this.Calendars)\n\t\t\thtml +=\n\t\t\t\t\"<div class='webix_gantt_bar_resource_holidays' style='height:\" +\n\t\t\t\tthis.Bars.$view.scrollHeight +\n\t\t\t\t\"px'></div>\";\n\t\tthis.Holidays.setHTML(html);\n\t\tthis.holidaysContainer = this.Holidays.$view.querySelector(\n\t\t\t\".webix_gantt_bar_holidays\"\n\t\t);\n\t\tthis.resHolidaysContainer = this.Holidays.$view.querySelector(\n\t\t\t\".webix_gantt_bar_resource_holidays\"\n\t\t);\n\t\tthis.RenderHolidays(scales);\n\n\t\tthis.on(this.app, \"onScalesUpdate\", scales => this.RenderHolidays(scales));\n\t\tthis.on(this.app.getRoot(), \"onViewShow\", () => {\n\t\t\tthis.refresh();\n\t\t});\n\t}\n\n\tEachScaleDate(scales, func) {\n\t\tif (scales.minUnit === \"day\" || scales.minUnit === \"hour\") {\n\t\t\tlet date = webix.Date.copy(scales.start);\n\n\t\t\tlet end = webix.Date.dayStart(scales.end);\n\t\t\tif (!(scales.end - end)) {\n\t\t\t\tend = webix.Date.add(end, -1, \"day\", true);\n\t\t\t}\n\n\t\t\tlet hourOffset = scales.start.getHours();\n\n\t\t\twhile (date <= end) {\n\t\t\t\tfunc.call(this, date, hourOffset);\n\t\t\t\tdate = webix.Date.add(webix.Date.dayStart(date), 1, \"day\", true);\n\t\t\t\thourOffset = webix.Date.equal(date, end)\n\t\t\t\t\t? 24 - Math.ceil(webix.Date.timePart(scales.end) / 60 / 60)\n\t\t\t\t\t: 0;\n\t\t\t}\n\t\t}\n\t}\n\t/**\n\t * Renders holiday highlighting\n\t * @param {Object} scales - current scales\n\t */\n\tRenderHolidays(scales) {\n\t\tif (this.holidaysContainer) {\n\t\t\tlet html = \"\";\n\t\t\tthis.EachScaleDate(scales, (date, hourOffset) => {\n\t\t\t\tif (scales.isHoliday(date)) {\n\t\t\t\t\thtml += this.HolidayTemplate(scales, date, hourOffset);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.holidaysContainer.innerHTML = html;\n\n\t\t\tif (this.Calendars) this.RenderResourceHolidays(scales);\n\t\t}\n\t}\n\tMarkResourceHolidays(scales, id, calendar) {\n\t\tlet index = this.Bars.getIndexById(id);\n\t\tif (index < 0) return \"\";\n\t\tlet html = \"\",\n\t\t\tn = 0,\n\t\t\tdateStart = null;\n\n\t\tthis.EachScaleDate(scales, (date, hourOffset) => {\n\t\t\tconst isHoliday = scales.isHoliday(date);\n\t\t\tif (this.Helpers.isResourceHoliday(date, calendar)) {\n\t\t\t\tif (!isHoliday) {\n\t\t\t\t\tif (!n) dateStart = date;\n\t\t\t\t\tn++;\n\t\t\t\t} else if (n) {\n\t\t\t\t\thtml += this.ResourceHolidayTemplate(\n\t\t\t\t\t\tscales,\n\t\t\t\t\t\tdateStart,\n\t\t\t\t\t\thourOffset,\n\t\t\t\t\t\tindex,\n\t\t\t\t\t\tn\n\t\t\t\t\t);\n\t\t\t\t\tn = 0;\n\t\t\t\t}\n\t\t\t} else if (isHoliday) {\n\t\t\t\tif (n) {\n\t\t\t\t\thtml += this.ResourceHolidayTemplate(\n\t\t\t\t\t\tscales,\n\t\t\t\t\t\tdateStart,\n\t\t\t\t\t\thourOffset,\n\t\t\t\t\t\tindex,\n\t\t\t\t\t\tn\n\t\t\t\t\t);\n\t\t\t\t\tn = 0;\n\t\t\t\t}\n\t\t\t\thtml += this.ResourceWorkDayTemplate(scales, date, hourOffset, index);\n\t\t\t}\n\t\t});\n\t\treturn html;\n\t}\n\tRenderResourceHolidays(scales) {\n\t\tif (this.resHolidaysContainer) {\n\t\t\tscales = scales || this.Local.getScales();\n\t\t\tthis.Local.taskCalendarMap().then(data => {\n\t\t\t\tlet html = \"\";\n\t\t\t\tif (data)\n\t\t\t\t\tfor (let taskId in data)\n\t\t\t\t\t\thtml += this.MarkResourceHolidays(scales, taskId, data[taskId]);\n\t\t\t\tthis.resHolidaysContainer.innerHTML = html;\n\t\t\t});\n\t\t}\n\t}\n\t/**\n\t * Returns a size and position of a date column / cell\n\t * @param {Object} scales - the current scales\n\t * @param {Date} date - the date\n\t * @param {number} hourOffset - the hours of the scale start date\n\t * @param {number} i - a task / row index ( optional )\n\t * @returns {object}\n\t */\n\tGetDateBox(scales, date, hourOffset, i) {\n\t\tconst astart = this.Helpers.getUnitStart(scales.minUnit, scales.start);\n\t\tconst x = Math.round(scales.diff(date, astart) * scales.cellWidth);\n\t\tconst w =\n\t\t\t(scales.minUnit === \"hour\" ? 24 - hourOffset : 1) * scales.cellWidth;\n\t\tlet box = { x, w };\n\t\tif (i || i === 0) {\n\t\t\tbox.y = scales.cellHeight * i;\n\t\t\tbox.h = scales.cellHeight;\n\t\t}\n\t\treturn box;\n\t}\n\t/**\n\t * Returns a string with HTML of 1 holiday highlight element\n\t * @param {Object} scales - the current scales\n\t * @param {Date} date - the date of this element\n\t * @param {number} hourOffset - the hours of the scale start date\n\t * @returns {string}\n\t */\n\tHolidayTemplate(scales, date, hourOffset) {\n\t\tconst { x, w } = this.GetDateBox(scales, date, hourOffset);\n\t\tconst style = `left:${x}px;width:${w}px;`;\n\t\treturn \"<div class='webix_gantt_holiday' style='\" + style + \"'></div>\";\n\t}\n\t/**\n\t * Returns a string with HTML of holiday unit\n\t * @param {Object} scales - the current scales\n\t * @param {Date} date - the start date of this element\n\t * @param {number} hourOffset - the hours of the scale start date\n\t * @param {number} i - a task index\n\t * @param {number} n - a number of holiday dates to include\n\t * @returns {string}\n\t */\n\tResourceHolidayTemplate(scales, date, hourOffset, i, n) {\n\t\tconst { x, y, w, h } = this.GetDateBox(scales, date, hourOffset, i);\n\t\tconst style = `left:${x}px;width:${w * n}px;top:${y}px;height:${h}px;`;\n\t\treturn \"<div class='webix_gantt_holiday' style='\" + style + \"'></div>\";\n\t}\n\t/**\n\t * Returns a string with HTML of work day unit\n\t * @param {Object} scales - the current scales\n\t * @param {Date} date - the date of this element\n\t * @param {number} hourOffset - the hours of the scale start date\n\t * @param {number} i - a task index\n\t * @returns {string}\n\t */\n\tResourceWorkDayTemplate(scales, date, hourOffset, i) {\n\t\tconst { x, y, w, h } = this.GetDateBox(scales, date, hourOffset, i);\n\t\tconst style = `left:${x + 0.2}px;width:${w - 1.2}px;top:${y}px;height:${h -\n\t\t\t1}px;`;\n\t\treturn \"<div class='webix_gantt_work_day' style='\" + style + \"'></div>\";\n\t}\n\t/**\n\t * Returns a string with HTML content of a tooltip for tasks\n\t * @param {Object} obj - task data\n\t * @param {function} _ - the translator function of jet locale plugin, see https://webix.gitbook.io/webix-jet/part-ii-webix-jet-in-details/plugins#applying-the-locale\n\t * @returns {string}\n\t */\n\tGetTooltip(obj, _) {\n\t\tconst parser = webix.i18n.longDateFormatStr;\n\t\tlet tip = `${obj.text || _(\"(no title)\")}<br>\n\t\t\t<br>${_(\"Start date\")}: ${parser(obj.start_date)}`;\n\n\t\tif (obj.type != \"milestone\") {\n\t\t\ttip += `<br>${_(\"End date\")}: ${parser(obj.end_date)}\n\t\t\t<br>${_(\"Lasts\")} ${obj.duration} ${obj.duration > 1 ? _(\"days\") : _(\"day\")}`;\n\t\t}\n\t\treturn tip;\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class ScalesView extends JetView {\n\tconfig() {\n\t\treturn { view: \"template\", height: 20, css: \"webix_gantt_scale\" };\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tconst scales = this.Local.getScales();\n\t\tthis.RenderScales(scales);\n\n\t\tthis.on(this.app, \"onScalesUpdate\", scales => this.RenderScales(scales));\n\t}\n\n\tready() {\n\t\tconst view = this.getRoot();\n\t\tthis.on(this.State.$changes, \"left\", x => view.scrollTo(x, null));\n\t}\n\n\t/**\n\t * Renders gantt scales\n\t * @param {Object} s - the object that stores the data of current scales\n\t */\n\tRenderScales(s) {\n\t\tconst view = this.getRoot();\n\t\tconst html = s.rows\n\t\t\t.map(line => {\n\t\t\t\tconst canMarkHolidays =\n\t\t\t\t\t(line.type === \"hour\" || line.type === \"day\") && line.step === 1;\n\t\t\t\treturn (\n\t\t\t\t\t`<div class=\"webix_gantt_scale_row\" style='height:${line.height}px;width:${s.width}px'>` +\n\t\t\t\t\tline.cells\n\t\t\t\t\t\t.map(cell => this.CellTemplate(cell, canMarkHolidays))\n\t\t\t\t\t\t.join(\"\") +\n\t\t\t\t\t\"</div>\"\n\t\t\t\t);\n\t\t\t})\n\t\t\t.join(\"\");\n\n\t\tview.config.height = s.height;\n\t\tview.setHTML(html);\n\t\tview.resize();\n\t}\n\n\t/**\n\t * Returns the template string for a scale unit\n\t * @param {Object} cell - a scale unit\n\t * @param {boolean} canMarkHolidays - signals whether to add styling for holidays\n\t * @returns {string} - the template string of the scale cell\n\t */\n\tCellTemplate(cell, canMarkHolidays) {\n\t\treturn `<div class=\"webix_gantt_scale_cell ${cell.css +\n\t\t\t(canMarkHolidays && this.app.config.isHoliday(cell.date)\n\t\t\t\t? \"webix_gantt_holiday_scale\"\n\t\t\t\t: \"\")}\" style=\"width:${cell.width}px;\">${this.FormatDate(\n\t\t\tcell.date,\n\t\t\tcell.format\n\t\t)}</div>`;\n\t}\n\n\tFormatDate(date, format) {\n\t\tif (typeof format === \"string\") format = webix.Date.dateToStr(format);\n\t\treturn format(date);\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nimport ScaleView from \"./scale\";\nimport BarsView from \"./bars\";\n\nexport default class ChartView extends JetView {\n\tconfig() {\n\t\treturn { rows: [ScaleView, BarsView] };\n\t}\n\tinit() {\n\t\tthis.on(this.app, \"bars:toggle\", v => {\n\t\t\tif (v) this.getRoot().show();\n\t\t\telse this.getRoot().hide();\n\t\t});\n\t}\n}\n","import BarsView from \"../chart/bars\";\n\nexport default class DiagramView extends BarsView {\n\tconfig() {\n\t\tthis.State = this.getParam(\"state\", true);\n\n\t\treturn {\n\t\t\tview: \"abslayout\",\n\t\t\tcss: \" webix_gantt_readonly\",\n\t\t\tcells: [\n\t\t\t\t{\n\t\t\t\t\tview: \"template\",\n\t\t\t\t\tcss: \"webix_gantt_holidays\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\trelative: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"tree\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\ttype: this.WorkloadMarkersType(),\n\t\t\t\t\tcss: `webix_gantt${\n\t\t\t\t\t\twebix.env.touch ? \"_touch\" : \"\"\n\t\t\t\t\t}_bars webix_gantt_resdiagram_chart`,\n\t\t\t\t\tscroll: \"xy\",\n\t\t\t\t\trelative: true,\n\t\t\t\t\tfilterMode: {\n\t\t\t\t\t\tshowSubItems: false,\n\t\t\t\t\t\tlevel: 0,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit(view) {\n\t\tconst [holidays, bars] = view.getChildViews();\n\t\tthis.Holidays = holidays;\n\t\tthis.Bars = bars;\n\t\tthis.LocalState = this.getParam(\"localState\");\n\t\tthis.Unit = \"hours\";\n\n\t\tconst local = (this.Local = this.app.getService(\"local\"));\n\t\tconst scales = (this.Scales = local.getScales());\n\t\tthis.RDCollection = this.app.getService(\"grouping\").getRDCollection();\n\t\tthis.Helpers = this.app.getService(\"helpers\");\n\n\t\tthis.on(this.Bars.data, \"onSyncApply\", () => {\n\t\t\tthis.Scales = this.Local.getScales();\n\t\t\tthis.RestoreTreeState();\n\t\t\tif (this.Calendars) this.RenderResourceHolidays();\n\t\t});\n\n\t\tthis.Bars.sync(this.RDCollection, function() {\n\t\t\tthis.filter(t => t.$group);\n\t\t});\n\n\t\tthis.Calendars = this.app.config.resourceCalendars;\n\n\t\t// leave here for app.refresh() calls (inc. from Locale plugin)\n\t\tthis.DrawGrid(view, scales);\n\n\t\t// the order of DrawGrid-HandleScroll and HandleHolidays is important for the case when\n\t\t// main gantt chart is scrolled x and the diagram is empty or has something only in the\n\t\t// beginning of x-axis\n\t\tthis.HandleScroll();\n\t\tthis.HandleHolidays(scales);\n\n\t\tthis.on(this.app, \"onScalesUpdate\", scales => {\n\t\t\tthis.DrawGrid(view, scales);\n\t\t});\n\n\t\tthis.on(this.app, \"rdiagram:branch:toggle\", (id, v) => {\n\t\t\tthis.ToggleBranch(id, v);\n\t\t});\n\n\t\tthis.on(this.app, \"rdiagram:resize\", () => {\n\t\t\tthis.holidaysContainer.style.height = this.Bars.$view.scrollHeight + \"px\";\n\t\t});\n\n\t\tthis.on(this.app, \"rdiagram:sort\", (by, dir, as) => {\n\t\t\tif (by) this.Bars.sort(by, dir, as);\n\t\t\telse this.Bars.sort(as, dir);\n\t\t});\n\n\t\tif (this.Calendars)\n\t\t\tthis.on(this.Local.assignments().data, \"onStoreUpdated\", () => {\n\t\t\t\tthis.RenderResourceHolidays();\n\t\t\t});\n\t}\n\n\t/**\n\t * Opens or closes a branch of the diagram\n\t * @param {number} id - the id of a branch\n\t * @param {Boolean} v - if true, the branch will be opened; false - closed\n\t */\n\tToggleBranch(id, v) {\n\t\tif (v) this.Bars.open(id);\n\t\telse this.Bars.close(id);\n\n\t\tconst root = this.Bars.data.getBranch(\"0\");\n\t\tconst opened = this.Bars.getState().open.filter(i => {\n\t\t\treturn root.find(o => o.id == i);\n\t\t});\n\n\t\tthis._treeOpened = opened.map(id => this.Bars.getIndexById(id));\n\n\t\tthis.holidaysContainer.style.height = this.Bars.$view.clientHeight + \"px\";\n\t\tif (this.Calendars) {\n\t\t\tthis.resHolidaysContainer.style.height =\n\t\t\t\tthis.Bars.$view.clientHeight + \"px\";\n\t\t\tthis.RenderResourceHolidays();\n\t\t}\n\t}\n\n\t/**\n\t * Restores opened/closed branches after diagram update and regroup\n\t */\n\tRestoreTreeState() {\n\t\tif (this._treeOpened && this._treeOpened.length) {\n\t\t\tconst t = this._treeOpened;\n\t\t\tconst root = this.Bars.data.getBranch(\"0\");\n\t\t\troot.forEach(b => {\n\t\t\t\tconst ind = root.indexOf(b);\n\t\t\t\tb.open = !t.indexOf(ind);\n\t\t\t\tthis.Bars.data.callEvent(\"onStoreUpdated\", [b.id, 0, \"branch\"]);\n\t\t\t});\n\t\t} else this.Bars.openAll();\n\t}\n\n\t/**\n\t * Handles scrolling\n\t */\n\tHandleScroll() {\n\t\tthis._scroll_handler = webix.event(this.Bars.$view, \"scroll\", ev => {\n\t\t\tconst bars = ev.target;\n\t\t\tconst top = Math.round(bars.scrollTop);\n\t\t\tconst left = Math.round(bars.scrollLeft);\n\t\t\tthis.getRoot().$view.style.backgroundPosition = `-${left}px -${top}px`;\n\t\t\tthis.State.left = left;\n\t\t\tthis.LocalState.top = top;\n\t\t\tthis.SetHolidaysScroll(bars.scrollHeight, left, top);\n\t\t});\n\n\t\tthis.on(this.LocalState.$changes, \"top\", y => {\n\t\t\tthis.Bars.scrollTo(this.State.left, y);\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"left\", v => {\n\t\t\tthis.Bars.scrollTo(v, this.LocalState.top);\n\t\t});\n\n\t\tthis.on(this.app, \"rdiagram:unit:change\", u => {\n\t\t\tthis.Unit = u;\n\t\t\tthis.Bars.render();\n\t\t});\n\t}\n\n\t/**\n\t * Returns all templates for bars\n\t * @param {function} _ - the translator function of jet locale plugin, see https://webix.gitbook.io/webix-jet/part-ii-webix-jet-in-details/plugins#applying-the-locale\n\t * @returns {Object} - all templates for bars\n\t */\n\tWorkloadMarkersType() {\n\t\treturn {\n\t\t\ttemplate: task => this.MarkerTemplate(task),\n\t\t\ttemplateStart: (task, common) => this.MarkerStartTemplate(task, common),\n\t\t\ttemplateEnd: () => \"</div>\",\n\t\t};\n\t}\n\n\t/**\n\t * Defines the html of the data item of the diagram tree\n\t * @param {Object} task - data object\n\t * @returns {string} with HTML\n\t */\n\tMarkerStartTemplate(task, common) {\n\t\treturn `<div webix_tm_id=\"${task.id}\" style=\"height:${this.Scales\n\t\t\t.cellHeight - 8}px; padding: 4px;\" class=\"${common.classname(\n\t\t\ttask,\n\t\t\tcommon\n\t\t)} webix_gantt_diagram_line\" ${common.aria(task)}>`;\n\t}\n\n\t/**\n\t * Defines the looks and contents of a diagram workload marker\n\t * @param {Object} task - data object\n\t * @returns {string} with HTML\n\t */\n\tMarkerTemplate(task) {\n\t\tif (task.$level === 2) {\n\t\t\tconst markers = this.GetMarkerData(task);\n\n\t\t\tconst html = [];\n\t\t\tfor (const x in markers) {\n\t\t\t\thtml.push(this.MarkerToHTML(markers[x]));\n\t\t\t}\n\n\t\t\treturn html.join(\"\");\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tCheckResourceHoliday(date, id) {\n\t\tif (this.Calendars) {\n\t\t\tconst resId = this.Bars.getItem(id).resource_id;\n\t\t\tif (resId) {\n\t\t\t\tconst calendarId = this.Local.resources().getItem(resId).calendar_id;\n\t\t\t\tif (calendarId) {\n\t\t\t\t\tconst calendar = this.Local.calendars().getItem(calendarId);\n\t\t\t\t\treturn this.Helpers.isResourceHoliday(date, calendar);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.app.config.isHoliday(date);\n\t}\n\t/**\n\t * Calculates work load per unit and prepares the result for display on the diagram\n\t * @param {Object} task - the data object of the data collection\n\t * @returns {Object} an object with x coordinates as keys and marker data objects and values (hours, count of tasks)\n\t */\n\tGetMarkerData(task) {\n\t\tconst markers = {};\n\t\tfor (let a = 0; a < task.duration.length; ++a) {\n\t\t\tlet d = task.duration[a];\n\t\t\tconst hourParts = task.units[a];\n\t\t\tconst delta = task.$x[a] - Math.min(...task.$x);\n\n\t\t\tconst markerWidth = this.Scales.cellHeight > 40 ? 28 : 20;\n\t\t\tconst step = this.Scales.cellWidth - markerWidth;\n\t\t\tconst halfStep = Math.round(step / 2);\n\t\t\tlet x = delta ? -2 : halfStep;\n\t\t\tlet date = webix.Date.copy(task.start_date[a]);\n\t\t\tfor (let i = 0; i < d; ++i, x += step) {\n\t\t\t\tif (\n\t\t\t\t\tthis.app.config.excludeHolidays &&\n\t\t\t\t\tthis.CheckResourceHoliday(date, task.id)\n\t\t\t\t) {\n\t\t\t\t\t++d;\n\t\t\t\t} else {\n\t\t\t\t\tlet hours = 0;\n\t\t\t\t\tif (this.Scales.minUnit !== \"hour\")\n\t\t\t\t\t\thours =\n\t\t\t\t\t\t\t(i === d - 1 ? hourParts[1] : i ? hourParts[2] : hourParts[0]) ||\n\t\t\t\t\t\t\thourParts[2];\n\t\t\t\t\telse {\n\t\t\t\t\t\thours = hourParts[2];\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cell = task.$x[a] + i * this.Scales.cellWidth - 2;\n\t\t\t\t\tif (!markers[cell]) {\n\t\t\t\t\t\tmarkers[cell] = { hours, x: cell + halfStep, count: 1 };\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmarkers[cell].hours += hours;\n\t\t\t\t\t\tmarkers[cell].count += 1;\n\t\t\t\t\t}\n\t\t\t\t\tmarkers[cell].overloaded = this.CheckOverload(markers[cell], task);\n\t\t\t\t}\n\t\t\t\twebix.Date.add(date, 1, this.Scales.minUnit);\n\t\t\t}\n\t\t}\n\n\t\treturn markers;\n\t}\n\n\t/**\n\t * Checks if a resource is overloaded during this unit of time\n\t * @param {Object} marker - the data of a diagram marker for one unit\n\t * @returns {boolean} true if during this unit resource is overloaded with work\n\t */\n\tCheckOverload(marker) {\n\t\tif (this.Scales.minUnit === \"hour\") {\n\t\t\t// temp until full support for hourly duration is done\n\t\t\treturn Math.round(marker.hours * 24) > this.Helpers.unitLoadNorm.day;\n\t\t}\n\t\treturn marker.hours > this.Helpers.unitLoadNorm[this.Scales.minUnit];\n\t}\n\n\t/**\n\t * Returns the html of a marker\n\t * @param {Object} marker - an object with data for a marker (hours, count of tasks)\n\t */\n\tMarkerToHTML(marker) {\n\t\tconst over = marker.overloaded ? \"webix_gantt_overload\" : \"\";\n\t\tconst number =\n\t\t\tthis.Unit === \"hours\"\n\t\t\t\t? marker.hours >= 1\n\t\t\t\t\t? marker.hours\n\t\t\t\t\t: \" \"\n\t\t\t\t: marker.count;\n\t\treturn `<div class=\"webix_gantt_diagram_marker ${over}\" style=\"left:${marker.x}px;\">${number}</div>`;\n\t}\n\n\tRenderResourceHolidays(scales) {\n\t\tscales = scales || this.Local.getScales();\n\t\tlet html = \"\";\n\t\tthis.Bars.data.each(data => {\n\t\t\tif (data.resource_id) {\n\t\t\t\tconst calendarId = this.Local.resources().getItem(data.resource_id)\n\t\t\t\t\t.calendar_id;\n\t\t\t\tif (calendarId)\n\t\t\t\t\thtml += this.MarkResourceHolidays(\n\t\t\t\t\t\tscales,\n\t\t\t\t\t\tdata.id,\n\t\t\t\t\t\tthis.Local.calendars().getItem(calendarId)\n\t\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tthis.resHolidaysContainer.innerHTML = html;\n\t}\n}\n","/**\n * Prepares a sorting function with locale-based comparison\n * @param {string} by - column ID\n * @returns {function} sorting function\n */\nexport function sort(by) {\n\treturn (a, b) =>\n\t\ta[by].localeCompare(b[by], undefined, {\n\t\t\tignorePunctuation: true,\n\t\t\tnumeric: true,\n\t\t});\n}\n\n/**\n * Check if two arrays contain same elements\n * @param {array} a - an array\n * @param {array} b - an array\n * @returns {boolean} true if two arrays contain same elements\n */\nexport function arrayEquals(a, b) {\n\treturn a && a.length == b.length && a.every(item => b.includes(item));\n}\n","import { JetView } from \"webix-jet\";\nimport { sort } from \"../../helpers/common\";\n\nexport default class TreeView extends JetView {\n\tconfig() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tconst scales = this.app.getService(\"local\").getScales();\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\t\tconst compact = (this.Compact = this.getParam(\"compact\", true));\n\n\t\tconst columns = [\n\t\t\t{\n\t\t\t\tid: \"name\",\n\t\t\t\tcss: \"webix_gantt_title\",\n\t\t\t\theader: compact ? \"<span class='webix_icon gti-menu'>\" : _(\"Name\"),\n\t\t\t\ttemplate: (obj, common) => this.TreeTemplate(obj, common),\n\t\t\t\tfillspace: true,\n\t\t\t\tsort: compact ? \"\" : sort(\"name\"),\n\t\t\t\tminWidth: compact ? 44 : 150,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"load\",\n\t\t\t\theader: _(\"Hours\"),\n\t\t\t\thidden: compact,\n\t\t\t\tbatch: \"hours\",\n\t\t\t\tsort: \"int\",\n\t\t\t\tminWidth: 50,\n\t\t\t\tresize: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"count\",\n\t\t\t\theader: _(\"Tasks\"),\n\t\t\t\tbatch: \"tasks\",\n\t\t\t\tsort: \"int\",\n\t\t\t\tminWidth: 50,\n\t\t\t\thidden: true,\n\t\t\t\tresize: false,\n\t\t\t},\n\t\t];\n\n\t\tconst skin = webix.skin.$name;\n\t\tconst headerCss =\n\t\t\tskin == \"material\" || skin == \"mini\" ? \"webix_header_border\" : \"\";\n\t\tconst tree = {\n\t\t\tview: \"treetable\",\n\t\t\tcss: \"webix_gantt_resdiagram_tree \" + headerCss,\n\t\t\tprerender: true,\n\t\t\tborderless: skin === \"contrast\",\n\t\t\twidth: compact ? 44 : this.State.treeWidth,\n\t\t\trowHeight: scales.cellHeight,\n\t\t\theaderRowHeight: scales.height,\n\t\t\tscroll: \"xy\",\n\t\t\tscrollAlignY: false,\n\t\t\tsort: true,\n\t\t\tresizeColumn: {\n\t\t\t\theaderOnly: true,\n\t\t\t\tsize: 10,\n\t\t\t},\n\t\t\tcolumns,\n\t\t\ttooltip: () => \"\",\n\t\t\ton: {\n\t\t\t\tonViewResize: () => {\n\t\t\t\t\tthis.State.treeWidth = this.Tree.$width;\n\t\t\t\t},\n\t\t\t\tonAfterOpen: id => this.ToggleBranch(id, 1),\n\t\t\t\tonAfterClose: id => this.ToggleBranch(id, 0),\n\t\t\t\tonAfterSort: (by, dir, as) => this.SortTasks(by, dir, as),\n\t\t\t\tonColumnResize: (id, v, o, user) => this.NormalizeColumns(id, user),\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\t\"gti-menu\": () => this.ToggleColumns(),\n\t\t\t},\n\t\t\tfilterMode: {\n\t\t\t\tshowSubItems: false,\n\t\t\t\tlevel: 0,\n\t\t\t},\n\t\t};\n\n\t\tconst ls = (this.LocalState = this.getParam(\"localState\"));\n\t\ttree.on[\"onScrollY\"] = tree.on[\"onSyncScroll\"] = tree.on[\n\t\t\t\"onAfterScroll\"\n\t\t] = function() {\n\t\t\tls.top = this.getScrollState().y;\n\t\t};\n\t\treturn tree;\n\t}\n\n\tinit(view) {\n\t\tthis.Tree = view;\n\t\tthis.Helpers = this.app.getService(\"helpers\");\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tthis.RDCollection = this.app.getService(\"grouping\").getRDCollection();\n\t\tthis._unit = \"hours\";\n\t\tthis._collapsed = true;\n\n\t\tthis.on(this.LocalState.$changes, \"top\", y => {\n\t\t\tthis.Tree.scrollTo(null, y);\n\t\t});\n\n\t\tthis.on(this.Tree.data, \"onSyncApply\", () => this.RestoreTreeState());\n\n\t\tview.sync(this.RDCollection, function() {\n\t\t\tthis.filter(t => t.$group);\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"treeWidth\", v => {\n\t\t\tif (!this.Compact && view.$width !== v) {\n\t\t\t\tview.define({ width: v });\n\t\t\t\tview.resize();\n\t\t\t}\n\t\t});\n\n\t\tthis.on(this.app, \"rdiagram:unit:change\", u => this.ShowInUnits(u));\n\n\t\t// resetting headerRowHeight\n\t\tthis.on(this.app, \"onScalesUpdate\", scales => {\n\t\t\tconst col = this.Tree.columnId(0);\n\t\t\tthis.Tree.getColumnConfig(col).header[0].height = scales.height;\n\t\t\tthis.Tree.refreshColumns();\n\t\t});\n\t}\n\n\t/**\n\t * Opens/closes same branches as were opened/closed before updates\n\t */\n\tRestoreTreeState() {\n\t\tif (this._treeOpened && this._treeOpened.length) {\n\t\t\tconst t = this._treeOpened;\n\t\t\tconst root = this.Tree.data.getBranch(\"0\");\n\t\t\troot.forEach(b => {\n\t\t\t\tconst ind = root.indexOf(b);\n\t\t\t\tb.open = !t.indexOf(ind);\n\t\t\t\tthis.Tree.data.callEvent(\"onStoreUpdated\", [b.id, 0, \"branch\"]);\n\t\t\t});\n\t\t} else this.Tree.openAll();\n\t}\n\n\t/**\n\t * Defines the look of a tree item\n\t * @param {Object} obj - data object of a tree item\n\t * @param {Object} common - type object of tree\n\t */\n\tTreeTemplate(obj, common) {\n\t\tconst compact = this.Compact && this._collapsed;\n\t\tif (obj.$level == 1)\n\t\t\treturn compact\n\t\t\t\t? common.icon(obj)\n\t\t\t\t: common.treetable(obj, common) + obj.category;\n\n\t\tif (compact) return this.Helpers.resourceAvatar(obj);\n\t\treturn common.space(obj) + this.Helpers.resourceAvatar(obj) + obj.name;\n\t}\n\n\t/**\n\t * Shows total workload in tasks or hours\n\t * @param {string} u - \"tasks\" or \"hours\"\n\t */\n\tShowInUnits(u) {\n\t\tthis._unit = u;\n\t\tconst tree = this.Tree;\n\t\tconst cols = tree.config.columns;\n\t\tconst lastFillspace = cols[cols.length - 1].fillspace;\n\t\tif (!this.Compact || !this._collapsed) tree.showColumnBatch(u);\n\t\t// columns normalizing\n\t\tthis.SetColumns(0, lastFillspace);\n\t}\n\n\t/**\n\t * Adjusts columns after resizing\n\t * @param {string} id - ID of the column being resized\n\t * @param {boolean} user - defines whether resizing was triggered by user or API\n\t */\n\tNormalizeColumns(id, user) {\n\t\tif (!user) return;\n\t\tthis.SetColumns(this.Tree.getColumnIndex(id), true);\n\t}\n\n\tSetColumns(index, fillspace) {\n\t\tconst columns = this.Tree.config.columns;\n\t\tconst last = columns.length - 1;\n\t\tif (index === 0) {\n\t\t\tcolumns[last].fillspace = fillspace;\n\t\t\tcolumns[last].width = 0;\n\t\t\tcolumns[last].resize = false;\n\t\t} else if (index === last) {\n\t\t\tcolumns[0].fillspace = true;\n\t\t\tcolumns[0].width = 0;\n\t\t}\n\t\tthis.Tree.refreshColumns();\n\t}\n\n\t/** Shows and hides columns in a compact mode */\n\tToggleColumns() {\n\t\t// [todo] toggle tree in compact code\n\t\tconst tree = this.Tree;\n\t\tconst lv = tree.isColumnVisible(\"load\");\n\t\tconst cv = tree.isColumnVisible(\"count\");\n\t\tconst vis = (this._collapsed = lv || cv);\n\n\t\tif (vis) {\n\t\t\tif (lv) tree.hideColumn(\"load\");\n\t\t\tif (cv) tree.hideColumn(\"count\");\n\t\t} else {\n\t\t\tif (this._unit === \"hours\") tree.showColumn(\"load\");\n\t\t\telse tree.showColumn(\"count\");\n\t\t}\n\n\t\ttree.config.width = vis ? 44 : 0;\n\t\tconst nameCol = tree.config.columns[0];\n\t\tnameCol.minWidth = vis ? 44 : 150;\n\t\ttree.resize();\n\t\ttree.refreshColumns();\n\n\t\tthis.app.callEvent(\"rdiagram:tree:toggle\", [vis]);\n\t}\n\n\t/**\n\t * Hides/Shows the lines of the diagram for the closed/opened tree branch\n\t * @param {number} id - the ID of a branch\n\t * @param {Number} v - the state of a branch (1 - opened, 0 - closed)\n\t */\n\tToggleBranch(id, v) {\n\t\tconst root = this.Tree.data.getBranch(\"0\");\n\t\tconst opened = this.Tree.getState().open.filter(i => {\n\t\t\treturn root.find(o => o.id == i);\n\t\t});\n\t\tthis._treeOpened = opened.map(id => this.Tree.getIndexById(id));\n\n\t\tthis.app.callEvent(\"rdiagram:branch:toggle\", [id, v]);\n\t}\n\n\tSortTasks(by, dir, as) {\n\t\tthis.app.callEvent(\"rdiagram:sort\", [by, dir, as]);\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport TreeView from \"./tree\";\nimport ScalesView from \"../chart/scale\";\nimport DiagramView from \"./diagram\";\n\nimport { createState } from \"jet-restate\";\n\nexport default class RDiagramView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst compact = this.getParam(\"compact\", true);\n\n\t\tconst contrast = webix.skin.$name === \"contrast\";\n\t\tconst unit = this.app.getService(\"local\").getScales().minUnit;\n\t\treturn {\n\t\t\ttype: contrast ? \"clean\" : \"line\",\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\tborderless: contrast,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"radio\",\n\t\t\t\t\t\t\twidth: 330,\n\t\t\t\t\t\t\tvalue: \"hours\",\n\t\t\t\t\t\t\tlocalId: \"radio\",\n\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t{ id: \"hours\", value: `${_(\"Hours per\")} ${_(unit)}` },\n\t\t\t\t\t\t\t\t{ id: \"tasks\", value: `${_(\"Tasks per\")} ${_(unit)}` },\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\tonChange: v => {\n\t\t\t\t\t\t\t\t\tthis.app.callEvent(\"rdiagram:unit:change\", [v]);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\tcols: [\n\t\t\t\t\t\tTreeView,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: compact ? \"spacer\" : \"resizer\",\n\t\t\t\t\t\t\tcss: \"webix_gantt_resizer\",\n\t\t\t\t\t\t\twidth: compact ? 1 : 4,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlocalId: \"diagram\",\n\t\t\t\t\t\t\trows: [ScalesView, DiagramView],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit() {\n\t\tconst localState = createState({\n\t\t\ttop: 0,\n\t\t});\n\t\tthis.setParam(\"localState\", localState);\n\n\t\tthis.on(this.app, \"rdiagram:tree:toggle\", v => {\n\t\t\tif (v) this.$$(\"diagram\").show();\n\t\t\telse this.$$(\"diagram\").hide();\n\t\t});\n\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst radio = this.$$(\"radio\");\n\t\tthis.on(this.app, \"onScalesUpdate\", (scales, old) => {\n\t\t\tif (scales.minUnit !== old.minUnit) {\n\t\t\t\tradio.config.options.map(o => {\n\t\t\t\t\tconst words = o.value.split(\" \");\n\t\t\t\t\twords[words.length - 1] = _(scales.minUnit);\n\t\t\t\t\to.value = words.join(\" \");\n\t\t\t\t});\n\t\t\t\tradio.refresh();\n\t\t\t}\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class BaselineView extends JetView {\n\tconfig() {\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\t\tconst calendar = {\n\t\t\tcss: \"webix_gantt_datepicker\",\n\t\t\ttype: \"calendar\",\n\t\t\tbody: {\n\t\t\t\theight: 270,\n\t\t\t\twidth: 250,\n\t\t\t\ticons: true,\n\t\t\t\tevents: date => this.app.config.isHoliday(date) && \"webix_cal_event\",\n\t\t\t},\n\t\t};\n\n\t\tconst form = {\n\t\t\tview: \"form\",\n\t\t\tlocalId: \"form\",\n\t\t\tborderless: true,\n\t\t\tautoheight: true,\n\t\t\telementsConfig: {\n\t\t\t\tlabelPosition: \"top\",\n\t\t\t},\n\t\t\tpadding: {\n\t\t\t\tleft: 3,\n\t\t\t\tright: 3,\n\t\t\t},\n\t\t\tvisibleBatch: \"added\",\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\tbatch: \"added\",\n\t\t\t\t\trows: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"datepicker\",\n\t\t\t\t\t\t\tname: \"planned_start\",\n\t\t\t\t\t\t\tlabel: _(\"Start date\"),\n\t\t\t\t\t\t\tsuggest: webix.copy(calendar),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"datepicker\",\n\t\t\t\t\t\t\tname: \"planned_end\",\n\t\t\t\t\t\t\tlabel: _(\"End date\"),\n\t\t\t\t\t\t\tsuggest: webix.copy(calendar),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"counter\",\n\t\t\t\t\t\t\tname: \"planned_duration\",\n\t\t\t\t\t\t\tcss: \"webix_gantt_form_counter\",\n\t\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\t\tmax: 1000,\n\t\t\t\t\t\t\tlabel: _(\"Duration\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tbatch: \"none\",\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\ticon: \"wxi-plus\",\n\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\tlabel: _(\"Add dates\"),\n\t\t\t\t\t\t\tclick: () => this.AddBtnClickHandler(),\n\t\t\t\t\t\t\tcss: \"webix_transparent\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tbatch: \"added\",\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\t\ticon: \"wxi-trash\",\n\t\t\t\t\t\t\tautowidth: true,\n\t\t\t\t\t\t\tlabel: _(\"Remove dates\"),\n\t\t\t\t\t\t\tclick: () => this.RemoveBtnClickHandler(),\n\t\t\t\t\t\t\tcss: \"webix_transparent\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t\ton: {\n\t\t\t\tonChange: (n, o, config) => {\n\t\t\t\t\tif (this.Compact) this.UpdateTaskTime();\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (config == \"user\") this.UpdateTask();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\treturn form;\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.Ops = this.app.getService(\"operations\");\n\t\tthis.Form = this.$$(\"form\");\n\n\t\t// changing links via bars and dnd\n\t\tthis.Tasks = this.app.getService(\"local\").tasks();\n\t\tthis.on(this.State.$changes, \"selected\", id => {\n\t\t\tif (id) this.FillData(id);\n\t\t});\n\t\tthis.on(this.Tasks.data, \"onStoreUpdated\", (id, obj, mode) => {\n\t\t\tif (mode == \"update\" && id == this.State.selected) this.FillData(id);\n\t\t});\n\t}\n\n\tFillData(id) {\n\t\tconst task = this.Tasks.getItem(id);\n\t\tif (task.planned_start) this.$$(\"form\").showBatch(\"added\");\n\t\telse this.$$(\"form\").showBatch(\"none\");\n\t\tthis.Form.setValues(this.Tasks.getItem(id));\n\t}\n\n\t/**\n\t * Prepares task  object for processing with respect to date-related changes\n\t * @param {Object} vals - object with form values\n\t * @returns {boolean} flag that indicates whether dates were updated or not\n\t */\n\tPrepareDates(vals) {\n\t\tconst f = (this._eventSource = this.Form.$eventSource.config.name);\n\n\t\tlet updateDates = true;\n\t\tif (\n\t\t\tf == \"planned_duration\" ||\n\t\t\t(f == \"planned_start\" && vals.type == \"project\")\n\t\t)\n\t\t\tvals.planned_end = null;\n\t\telse if (f == \"planned_end\" || f == \"planned_start\")\n\t\t\tvals.planned_duration = null;\n\t\telse updateDates = false;\n\n\t\treturn updateDates;\n\t}\n\t/**\n\t * Update task time and duration on data change in compact form\n\t */\n\tUpdateTaskTime() {\n\t\tconst vals = this.Form.getValues();\n\t\tconst updateDates = this.PrepareDates(vals);\n\t\tif (updateDates) {\n\t\t\tlet mode = this._eventSource ? this._eventSource.split(\"_\")[1] : null;\n\t\t\tif (mode == \"duration\") mode = null;\n\n\t\t\tthis.Ops.updatePlannedTaskDuration(vals, mode);\n\n\t\t\tthis.Form.blockEvent();\n\t\t\tthis.Form.setValues(vals, true);\n\t\t\tthis.Form.unblockEvent();\n\t\t}\n\t}\n\t/**\n\t * Saves changes\n\t * @returns {Promise} the result of a data operation (adding new event or updating)\n\t */\n\tUpdateTask() {\n\t\tconst id = this.State.selected;\n\t\tconst vals = this.Form.getValues();\n\t\tif (!this.Compact) this.PrepareDates(vals);\n\n\t\tlet mode = this._eventSource ? this._eventSource.split(\"_\")[1] : null;\n\t\tif (mode == \"duration\") mode = null;\n\t\tthis.Ops.updateTask(id, vals, mode, false, true);\n\t}\n\tAddBtnClickHandler() {\n\t\tconst id = this.State.selected;\n\t\tconst vals = this.Form.getValues();\n\t\tconst obj = {\n\t\t\tplanned_start: vals.start_date,\n\t\t\tplanned_end: vals.end_date,\n\t\t\tplanned_duration: vals.duration,\n\t\t};\n\t\tthis.Ops.updateTask(id, obj, null, false, true);\n\t}\n\tRemoveBtnClickHandler() {\n\t\tconst id = this.State.selected;\n\t\twebix\n\t\t\t.confirm(this._(\"Planned dates will be removed, are you sure?\"))\n\t\t\t.then(() => {\n\t\t\t\tthis.Ops.updateTask(\n\t\t\t\t\tid,\n\t\t\t\t\t{ planned_start: null, planned_end: null, planned_duration: null },\n\t\t\t\t\tnull,\n\t\t\t\t\tfalse,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class TableView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tconst table = {\n\t\t\tview: \"treetable\",\n\t\t\tcss: \"webix_gantt_tree webix_gantt_form_tree\",\n\t\t\theader: false,\n\t\t\tborderless: true,\n\t\t\tlocalId: \"links\",\n\t\t\tautoheight: true,\n\t\t\teditable: true,\n\t\t\tscroll: false,\n\t\t\thover: \"webix_gantt_link_table_hover\",\n\t\t\tscheme: {\n\t\t\t\t$group: {\n\t\t\t\t\tby: \"ttype\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tid: \"task\",\n\t\t\t\t\tcss: \"webix_gantt_title\",\n\t\t\t\t\theader: _(\"Task\"),\n\t\t\t\t\tfillspace: true,\n\t\t\t\t\ttemplate: function(obj) {\n\t\t\t\t\t\tif (obj.$group)\n\t\t\t\t\t\t\treturn `<span class=\"webix_strong\">${_(\n\t\t\t\t\t\t\t\tobj.ttype == \"source\" ? _(\"Successors\") : _(\"Predecessors\")\n\t\t\t\t\t\t\t)}</span>`;\n\t\t\t\t\t\telse return obj.text || _(\"(no title)\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"type\",\n\t\t\t\t\tcss: \"webix_gantt_type\",\n\t\t\t\t\theader: _(\"Link\"),\n\t\t\t\t\twidth: 140,\n\t\t\t\t\ttemplate: function(obj, c, v, conf) {\n\t\t\t\t\t\tif (obj.$group) return \"\";\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst type = conf.collection.getItem(v).value;\n\t\t\t\t\t\t\treturn `${type}<span class=\"webix_icon wxi-menu-down\"></span>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\teditor: \"richselect\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{ id: \"0\", value: _(\"End to start\") },\n\t\t\t\t\t\t{ id: \"1\", value: _(\"Start to start\") },\n\t\t\t\t\t\t{ id: \"2\", value: _(\"End to end\") },\n\t\t\t\t\t\t{ id: \"3\", value: _(\"Start to end\") },\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\twidth: 30,\n\t\t\t\t\tcss: \"webix_gantt_action\",\n\t\t\t\t\ttemplate: function(obj) {\n\t\t\t\t\t\treturn obj.$group\n\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t: \"<span class='webix_icon wxi-trash'></span>\";\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\ton: {\n\t\t\t\tonBeforeEditStart: function(id) {\n\t\t\t\t\treturn !this.getItem(id).$group;\n\t\t\t\t},\n\t\t\t\tonBeforeEditStop: (v, editor) => {\n\t\t\t\t\tif (v.value != v.old) {\n\t\t\t\t\t\tthis.UpdateLink(editor.row, { type: v.value * 1 });\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonAfterLoad: function() {\n\t\t\t\t\tthis.openAll();\n\t\t\t\t},\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\t\"wxi-trash\": (e, id) => {\n\t\t\t\t\twebix\n\t\t\t\t\t\t.confirm({\n\t\t\t\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t\t\t\t\ttitle: _(\"Delete link\"),\n\t\t\t\t\t\t\ttext: _(\"The link will be deleted permanently, are you sure?\"),\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => this.DeleteLink(id));\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn {\n\t\t\tpadding: { top: webix.skin.$active.layoutMargin.form, bottom: 5 },\n\t\t\trows: [table],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.Ops = this.app.getService(\"operations\");\n\t\tthis.Links = this.$$(\"links\");\n\n\t\tthis.on(this.State.$changes, \"selected\", id => {\n\t\t\tif (id) this.FillData(id);\n\t\t});\n\n\t\t// changing links via bars and dnd\n\t\tconst links = this.app.getService(\"local\").links();\n\t\tthis.on(links.data, \"onStoreUpdated\", (_id, obj) => {\n\t\t\tif (obj) {\n\t\t\t\tconst tid = this.State.selected;\n\t\t\t\tif (obj.target === tid || obj.source === tid) {\n\t\t\t\t\tthis.FillData(tid);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tFillData(id) {\n\t\tconst local = this.app.getService(\"local\");\n\t\tconst related = local\n\t\t\t.getLinks(id, \"target\")\n\t\t\t.concat(local.getLinks(id, \"source\"));\n\n\t\tthis.Links.clearAll();\n\t\tif (related.length) {\n\t\t\tthis.Links.parse(related);\n\t\t\tthis.getRoot().show();\n\t\t} else {\n\t\t\tthis.getRoot().hide();\n\t\t}\n\t}\n\n\tUpdateLink(id, obj) {\n\t\tthis.Ops.updateLink(id, obj).then(() => {\n\t\t\tthis.Links.blockEvent();\n\t\t\tthis.Links.editCancel();\n\t\t\tthis.Links.unblockEvent();\n\n\t\t\t// must not give 0 ID to dropdown list of column editor\n\t\t\tobj.type += \"\";\n\t\t\tthis.Links.updateItem(id, obj);\n\t\t});\n\t}\n\n\tDeleteLink(id) {\n\t\tthis.Ops.removeLink(id).then(() => {\n\t\t\tthis.FillData(this.State.selected);\n\t\t});\n\t}\n}\n","webix.editors.gantt_numeditor = webix.extend(\n\t{\n\t\trender: function() {\n\t\t\tconst node = webix.editors.text.render.call(this);\n\t\t\tconst inp = node.querySelector(\"input\");\n\t\t\tinp.type = \"number\";\n\t\t\tinp.min = 0;\n\t\t\treturn node;\n\t\t},\n\t},\n\twebix.editors.text\n);\n","import { JetView } from \"webix-jet\";\nimport \"../../helpers/numeditor\";\n\nexport default class ResourcesView extends JetView {\n\tconfig() {\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tthis.Helpers = this.app.getService(\"helpers\");\n\t\tconst conf = this.app.config;\n\t\tconst single = (this.IsSingle =\n\t\t\tconf.resources == \"single\" || conf.resourceCalendars);\n\n\t\tconst button = {\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\ticon: \"wxi-plus\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tlocalId: \"addBtn\",\n\t\t\t\t\tlabel: _(\"Add assignment\"),\n\t\t\t\t\tclick: () => this.AddBtnClickHandler(),\n\t\t\t\t\tcss: \"webix_transparent\",\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t],\n\t\t};\n\t\tconst table = {\n\t\t\tview: \"treetable\",\n\t\t\tcss: \"webix_gantt_resource_table webix_gantt_tree webix_gantt_form_tree\",\n\t\t\theader: false,\n\t\t\tborderless: true,\n\t\t\tlocalId: \"resources\",\n\t\t\tautoheight: true,\n\t\t\teditable: true,\n\t\t\teditaction: \"custom\",\n\t\t\tscroll: false,\n\t\t\thover: \"webix_gantt_table_hover\",\n\t\t\trowHeight: Math.max(webix.skin.$active.rowHeight, 32),\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tid: \"resource\",\n\t\t\t\t\tcss: \"webix_gantt_title\",\n\t\t\t\t\tfillspace: true,\n\t\t\t\t\ttemplate: obj => this.ResourceTemplate(obj),\n\t\t\t\t\teditor: \"richselect\",\n\t\t\t\t\tsuggest: {\n\t\t\t\t\t\twidth: 250,\n\t\t\t\t\t\tcss: \"webix_gantt_select_editor_popup\",\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tpoint: 0,\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\twidth: 250,\n\t\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\t\theight: Math.max(webix.skin.$active.listItemHeight, 32),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttemplate: r =>\n\t\t\t\t\t\t\t\tsingle ? this.OptionTemplate(r) : this.EditorOptionTemplate(r),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tid: \"value\",\n\t\t\t\t\twidth: 85,\n\t\t\t\t\tcss: \"webix_gantt_value\",\n\t\t\t\t\ttemplate: obj => this.ValueTemplate(obj),\n\t\t\t\t\teditFormat: function(v) {\n\t\t\t\t\t\treturn parseFloat(v);\n\t\t\t\t\t},\n\t\t\t\t\teditParse: function(v) {\n\t\t\t\t\t\tv = parseFloat(v);\n\t\t\t\t\t\treturn isNaN(v) ? 0 : v;\n\t\t\t\t\t},\n\t\t\t\t\teditor: \"gantt_numeditor\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"remove\",\n\t\t\t\t\twidth: 30,\n\t\t\t\t\tcss: \"webix_gantt_action\",\n\t\t\t\t\ttemplate: obj => this.DeleteIconTemplate(obj),\n\t\t\t\t},\n\t\t\t],\n\t\t\ton: {\n\t\t\t\tonItemClick: id => {\n\t\t\t\t\tif (!this.Table.getItem(id).$group && id.column != \"remove\") {\n\t\t\t\t\t\tthis.Table.editRow(id);\n\t\t\t\t\t\tif (id.column == \"value\")\n\t\t\t\t\t\t\tthis.Table.getEditor(id.row, \"resource\")\n\t\t\t\t\t\t\t\t.getPopup()\n\t\t\t\t\t\t\t\t.hide();\n\t\t\t\t\t\tthis.Table.getEditor(id.row, id.column).focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonBeforeEditStart: id => {\n\t\t\t\t\tconst item = this.Table.getItem(id.row);\n\t\t\t\t\tif (item.$group) return false;\n\t\t\t\t\tif (id.column == \"resource\") {\n\t\t\t\t\t\tthis.Table.addCellCss(\n\t\t\t\t\t\t\tid.row,\n\t\t\t\t\t\t\tid.column,\n\t\t\t\t\t\t\t\"webix_gantt_select_editor\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst r = id && !single ? item.resource : null;\n\t\t\t\t\t\tthis.FilterOptions(r);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tonAfterEditStart: id => {\n\t\t\t\t\tif (id.column == \"value\") {\n\t\t\t\t\t\tconst item = this.Table.getItem(id.row);\n\t\t\t\t\t\tconst node = this.Table.getEditor(id.row, \"value\").getInputNode();\n\t\t\t\t\t\tconst range = this.GetRange(item);\n\t\t\t\t\t\tif (range) this.ApplyEditorLimits(node, range);\n\t\t\t\t\t\tconst step = this.GetValueStep(item);\n\t\t\t\t\t\tif (step) this.ApplyEditorStep(node, step);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonBeforeEditStop: (state, editor) => {\n\t\t\t\t\tthis.Table.removeCellCss(\n\t\t\t\t\t\teditor.row,\n\t\t\t\t\t\t\"resource\",\n\t\t\t\t\t\t\"webix_gantt_select_editor\"\n\t\t\t\t\t);\n\t\t\t\t\tif (state.value != state.old) {\n\t\t\t\t\t\tlet obj = {};\n\t\t\t\t\t\tobj[editor.column] = state.value;\n\t\t\t\t\t\tif (editor.column == \"value\") {\n\t\t\t\t\t\t\tconst item = this.Table.getItem(editor.row);\n\t\t\t\t\t\t\tconst range = this.GetRange(item);\n\t\t\t\t\t\t\tif (range) this.ApplyValueRange(obj, range);\n\t\t\t\t\t\t\telse if (obj.value < 0) obj.value = 0;\n\t\t\t\t\t\t\teditor.getInputNode().value = obj.value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.UpdateAssignment(editor.row, obj);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tonAfterLoad: function() {\n\t\t\t\t\tthis.openAll();\n\t\t\t\t},\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_gantt_remove_icon: (e, id) => {\n\t\t\t\t\twebix\n\t\t\t\t\t\t.confirm({\n\t\t\t\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t\t\t\t\ttitle: _(\"Delete assignment\"),\n\t\t\t\t\t\t\ttext: _(\"Are you sure to delete this assignment?\"),\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => this.RemoveAssignment(id.row));\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tif (!single)\n\t\t\ttable.scheme = {\n\t\t\t\t$group: {\n\t\t\t\t\tby: \"category\",\n\t\t\t\t},\n\t\t\t};\n\n\t\treturn {\n\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\tpadding: { top: webix.skin.$active.layoutMargin.form, bottom: 5 },\n\t\t\trows: [table, button],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.Ops = this.app.getService(\"operations\");\n\t\tthis.Helpers = this.app.getService(\"helpers\");\n\t\tthis.Table = this.$$(\"resources\");\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tthis.Resources = this.Local.resources();\n\t\tif (!this.app.config.resources) return false;\n\t\tthis.on(this.State.$changes, \"selected\", id => {\n\t\t\tif (id) this.FillData(id);\n\t\t});\n\t}\n\n\t/**\n\t * Display assignments table\n\t * @param {string} id - a task id\n\t */\n\tFillData(id) {\n\t\tconst item = this.Local.tasks().getItem(id);\n\t\tif (item.type != \"task\") return false;\n\n\t\tconst loader = this.Local.getAssignments(id);\n\t\tloader.then(assignees => {\n\t\t\tif (!this.getRoot()) return false;\n\t\t\tthis.Table.clearAll();\n\t\t\tthis.Table.getColumnConfig(\"resource\").collection = this.Resources;\n\n\t\t\tif (assignees.length) {\n\t\t\t\tthis.Table.show();\n\t\t\t\tthis.Table.parse(this.GetData(assignees));\n\t\t\t\tif (this.IsSingle) this.$$(\"addBtn\").disable();\n\t\t\t} else {\n\t\t\t\tif (this.IsSingle) this.$$(\"addBtn\").enable();\n\t\t\t\tthis.Table.hide();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Get treetable data\n\t * @param {array} assignments - an array of assignments data\n\t * @returns {array} data array\n\t */\n\n\tGetData(assignments) {\n\t\tassignments.sort(this.app.getService(\"operations\").sortResources);\n\t\treturn assignments;\n\t}\n\n\t/**\n\t * Filters an option collection\n\t * @param {string} id - the selected resource id\n\t */\n\tFilterOptions(id) {\n\t\tlet tableIds = [];\n\t\tconst category = id ? this.Resources.getItem(id)[\"category_id\"] : null;\n\t\tthis.Table.data.each(item => {\n\t\t\ttableIds.push(item.resource);\n\t\t});\n\n\t\tthis.Resources.filter(item => {\n\t\t\treturn (\n\t\t\t\t(!category || item[\"category_id\"] == category) &&\n\t\t\t\t(tableIds.indexOf(item.id) < 0 || (id && item.id == id))\n\t\t\t);\n\t\t});\n\t}\n\n\t/**\n\t * Updates an assignment\n\t * @param {string} id - an assignment id\n\t * @param {object} obj - a hash of new assignment properties\n\t */\n\tUpdateAssignment(id, obj) {\n\t\t// remove \"focus\" style for a richselect cell editor when\n\t\t// the editor is closed without event calls\n\t\tconst node = this.Table.$view.querySelector(\".webix_gantt_select_editor\");\n\t\tif (node) {\n\t\t\tconst rInd = node.getAttribute(\"aria-rowindex\") * 1;\n\t\t\tthis.Table.removeCellCss(\n\t\t\t\tthis.Table.data.getIdByIndex(rInd - 1),\n\t\t\t\t\"resource\",\n\t\t\t\t\"webix_gantt_select_editor\"\n\t\t\t);\n\t\t}\n\n\t\tthis.Ops.updateAssignment(id, obj).then(() => {\n\t\t\tthis.CloseEditor(id, obj);\n\t\t});\n\t}\n\n\t/**\n\t * Get range for unit values\n\t * @param {object} item - an assignment item object\n\t * @returns {array} an array with two numeric values [min,max]\n\t */\n\tGetRange(item) {\n\t\tconst resourceItem = this.Resources.getItem(item.resource);\n\t\treturn this.Helpers.getResourceValueRange(resourceItem);\n\t}\n\n\t/**\n\t * Apply limits to \"value\" property of a data object\n\t * @param {object} obj - an object with a value property to change\n\t * @param {array} range - a value range [min,max]\n\t */\n\tApplyValueRange(obj, range) {\n\t\tif (obj.value < range[0]) obj.value = range[0];\n\t\telse if (obj.value > range[1]) obj.value = range[1];\n\t}\n\t/**\n\t * Apply limits to editor value\n\t * @param {HTMLInputElement} node - an editor input\n\t * @param {array} range - a value range [min,max]\n\t */\n\tApplyEditorLimits(node, range) {\n\t\tnode.min = range[0];\n\t\tnode.max = range[1];\n\t}\n\t/**\n\t * Get set for unit values\n\t * @param {object} item - an assignment item object\n\t * @returns {number} a step value\n\t */\n\tGetValueStep(item) {\n\t\tconst resourceItem = this.Resources.getItem(item.resource);\n\t\treturn this.Helpers.getResourceValueStep(resourceItem);\n\t}\n\n\t/**\n\t * Apply changing step to editor value\n\t * @param {HTMLInputElement} node - an editor input\n\t * @param {number} step - changing step\n\t */\n\tApplyEditorStep(node, step) {\n\t\tnode.step = step;\n\t}\n\n\t/**\n\t * Closes editor and updated table row\n\t * @param {string} id - an assignment id\n\t * @param {object} obj - assignment properties\n\t */\n\tCloseEditor(id, obj) {\n\t\tthis.Table.blockEvent();\n\t\tthis.Table.editCancel();\n\t\tthis.Table.unblockEvent();\n\n\t\tthis.Table.updateItem(id, obj);\n\t}\n\n\t/**\n\t * Removes assignment\n\t * @param {string} id - assignment id\n\t */\n\tRemoveAssignment(id) {\n\t\tthis.Ops.removeAssignment(id).then(() => {\n\t\t\tthis.FillData(this.State.selected);\n\t\t});\n\t}\n\n\t/**\n\t *  \"Add\" button click handler\n\t */\n\tAddBtnClickHandler() {\n\t\tthis.FilterOptions();\n\t\twebix.delay(() => {\n\t\t\tthis.ShowPopup();\n\t\t});\n\t}\n\n\t/**\n\t * Adds an assignment and a new row to \"assignees\" table\n\t * @param {object} obj - assignment properties\n\t */\n\tAddAssignment(obj) {\n\t\tif (this.IsSingle) this.$$(\"addBtn\").disable();\n\t\tthis.Ops.addAssignment({\n\t\t\tresource: obj.id,\n\t\t\tvalue: this.Helpers.getDefaultResourceValue(obj),\n\t\t\ttask: this.State.selected,\n\t\t}).then(() => {\n\t\t\tthis.FillData(this.State.selected);\n\t\t});\n\t}\n\t/**\n\t * A template for a resource column\n\t * @param {object} obj - a data item\n\t * @returns {string} an html string of a column cell\n\t */\n\tResourceTemplate(obj) {\n\t\tif (obj.$group) return `<span class=\"webix_strong\">${obj.category}</span>`;\n\t\telse if (obj.resource) {\n\t\t\tconst item = this.Resources.getItem(obj.resource);\n\t\t\treturn this.EditorTemplate(item);\n\t\t}\n\t\treturn \"\";\n\t}\n\t/**\n\t * The template for value column\n\t * @param {object} obj - an assignment data object\n\t * @returns {string} html string\n\t */\n\tValueTemplate(obj) {\n\t\tif (obj.$group) return \"\";\n\t\tconst v = obj.value;\n\t\treturn (\n\t\t\t(isNaN(v) ? this.Helpers.getDefaultResourceValue(obj) : v) +\n\t\t\tthis.GetUnitName(obj)\n\t\t);\n\t}\n\n\t/**\n\t * Get a unit name for a resource\n\t * @param {object} obj - resource object\n\t * @returns {string} a unit name\n\t */\n\tGetUnitName(obj) {\n\t\treturn this._(this.Helpers.getResourceUnit(obj));\n\t}\n\n\t/**\n\t * The template for \"delete\" column\n\t * @param {object} obj - assignment data object\n\t * @returns {string} html string\n\t */\n\tDeleteIconTemplate(obj) {\n\t\tif (obj.$group) return \"\";\n\t\treturn \"<span class='webix_icon wxi-trash webix_gantt_remove_icon'></span>\";\n\t}\n\n\t/**\n\t * Get popup configuration\n\t * @returns {object} popup config\n\t */\n\tGetPopupConfig() {\n\t\treturn {\n\t\t\tview: \"suggest\",\n\t\t\tlocalId: \"popup\",\n\t\t\twidth: 320,\n\t\t\tpadding: 0,\n\t\t\tpoint: 0,\n\t\t\tfitMaster: false,\n\t\t\tborderless: true,\n\t\t\tcss: \"webix_gantt_select_editor_popup\",\n\t\t\tbody: {\n\t\t\t\tview: \"list\",\n\t\t\t\tminHeight: 28,\n\t\t\t\ttype: {\n\t\t\t\t\theight: Math.max(webix.skin.$active.listItemHeight, 32),\n\t\t\t\t},\n\t\t\t\tdata: this.Resources,\n\t\t\t\ttemplate: obj => this.OptionTemplate(obj),\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: id => {\n\t\t\t\t\t\tthis.AddAssignment(this.Resources.getItem(id));\n\t\t\t\t\t\tthis.Popup.hide();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * Show resources popup\n\t */\n\tShowPopup() {\n\t\tif (!this.Popup || !this.Popup.$view) {\n\t\t\tthis.Popup = this.ui(this.GetPopupConfig());\n\t\t\tthis.SetPopupPlaceholder();\n\t\t}\n\n\t\tthis.Popup.show(this.$$(\"addBtn\").$view, { x: 1 });\n\t}\n\n\t/**\n\t * Set a placeholder for the \"Add\" popup placeholder\n\t * @param {string} placeholder - a popup placeholder (optional)\n\t */\n\tSetPopupPlaceholder(placeholder) {\n\t\tconst list = this.Popup.getBody();\n\t\tlist.$view.firstChild.setAttribute(\n\t\t\t\"placeholder\",\n\t\t\tplaceholder || this._(\"No resources to add\")\n\t\t);\n\t}\n\n\t/**\n\t * A template for \"Add assignment\" popup options\n\t * @param {object} obj - a data item\n\t * @returns {string} an html string of an editor option\n\t */\n\tOptionTemplate(obj) {\n\t\tconst avatar = this.Helpers.resourceAvatar(obj);\n\t\tconst name =\n\t\t\t\"<div class='webix_gantt_editor_avatar_name'>\" + obj.name + \"</div>\";\n\t\tconst avatarStr = `<div class=\"webix_gantt_avatar_box_inline\">${avatar +\n\t\t\tname}</div>`;\n\t\tconst dpt = `<span class='webix_gantt_resource_section'>${obj.category}</span>`;\n\t\treturn (\n\t\t\t\"<div class='webix_gantt_avatar_option_box'>\" + avatarStr + dpt + \"</div>\"\n\t\t);\n\t}\n\n\t/**\n\t * Cell template\n\t * @param {object} obj - resource object\n\t * @returns {string} html string for resource editable cell\n\t */\n\tEditorTemplate(obj) {\n\t\tconst avatar = this.Helpers.resourceAvatar(obj);\n\t\tconst name =\n\t\t\t\"<div class='webix_gantt_editor_avatar_name'>\" + obj.name + \"</div>\";\n\t\tconst icon = \"<span class='webix_icon wxi-menu-down'></span>\";\n\t\treturn `<div class=\"webix_gantt_avatar_box\">${avatar} ${name}${icon}</div>`;\n\t}\n\n\t/**\n\t * Popup option template for resource editor\n\t * @param {object} obj - resource object\n\t * @returns {string} html string for an option\n\t */\n\tEditorOptionTemplate(obj) {\n\t\tconst avatar = this.Helpers.resourceAvatar(obj);\n\t\tconst name =\n\t\t\t\"<div class='webix_gantt_editor_avatar_name'>\" + obj.name + \"</div>\";\n\t\treturn `<div class=\"webix_gantt_avatar_box\">${avatar} ${name}</div>`;\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport TableView from \"./links\";\nimport ResourcesView from \"./resources\";\nimport BaselineView from \"./baseline\";\n\nexport default class FormView extends JetView {\n\tconfig() {\n\t\tthis.Compact = this.getParam(\"compact\", true);\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tthis.isResources = this.app.config.resources;\n\t\tthis.State = this.getParam(\"state\", true);\n\n\t\tconst aSkin = webix.skin.$active;\n\t\tconst bar = {\n\t\t\tview: \"toolbar\",\n\t\t\tcss: \"webix_subbar\",\n\t\t\tborderless: true,\n\t\t\tpadding: {\n\t\t\t\tleft: aSkin.layoutPadding.form - (aSkin.inputHeight - 20) / 2,\n\t\t\t\tright: aSkin.layoutPadding.form,\n\t\t\t},\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\ticon: \"wxi-close\",\n\t\t\t\t\tclick: () => this.Close(),\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\twidth: 130,\n\t\t\t\t\tcss: \"webix_primary\",\n\t\t\t\t\tvalue: _(\"Done\"),\n\t\t\t\t\tclick: () => this.Done(),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst calendar = {\n\t\t\tcss: \"webix_gantt_datepicker\",\n\t\t\ttype: \"calendar\",\n\t\t\t//localId: \"calendar\",\n\t\t\tbody: {\n\t\t\t\theight: 270,\n\t\t\t\twidth: 250,\n\t\t\t\ticons: true,\n\t\t\t\tevents: date => this.app.config.isHoliday(date) && \"webix_cal_event\",\n\t\t\t},\n\t\t};\n\n\t\tconst types = [\n\t\t\t{ id: \"task\", value: _(\"Task\") },\n\t\t\t{ id: \"milestone\", value: _(\"Milestone\") },\n\t\t];\n\t\tif (!this.app.config.projects) {\n\t\t\ttypes.splice(1, 0, { id: \"project\", value: _(\"Project\") });\n\t\t}\n\n\t\tlet accItems = [];\n\t\tif (this.app.config.links)\n\t\t\taccItems.push({\n\t\t\t\theader: _(\"Related tasks\"),\n\t\t\t\tbody: TableView,\n\t\t\t\tcollapsed: true,\n\t\t\t});\n\t\tif (this.isResources)\n\t\t\taccItems.push({\n\t\t\t\tlocalId: \"resourcesItem\",\n\t\t\t\theader:\n\t\t\t\t\tthis.isResources == \"single\" || this.app.config.resourceCalendars\n\t\t\t\t\t\t? _(\"Assignment\")\n\t\t\t\t\t\t: _(\"Assignments\"),\n\t\t\t\tbody: { $subview: ResourcesView, name: \"resources\" },\n\t\t\t\tcollapsed: true,\n\t\t\t\thidden: true,\n\t\t\t});\n\t\tif (this.State.baseline)\n\t\t\taccItems.push({\n\t\t\t\tlocalId: \"baselineItem\",\n\t\t\t\theader: _(\"Planned dates\"),\n\t\t\t\tbody: { $subview: BaselineView, name: \"baseline\" },\n\t\t\t\tcollapsed: true,\n\t\t\t\thidden: true,\n\t\t\t});\n\n\t\tconst accordion = {\n\t\t\tmulti: true,\n\t\t\tview: \"accordion\",\n\t\t\tborderless: true,\n\t\t\ttype: \"clean\",\n\t\t\tmargin: 10,\n\t\t\tcss: \"webix_gantt_accordion\",\n\t\t\trows: accItems,\n\t\t};\n\n\t\tconst form = {\n\t\t\tview: \"form\",\n\t\t\tlocalId: \"form\",\n\t\t\tborderless: true,\n\t\t\tautoheight: false,\n\t\t\tscroll: true,\n\t\t\telementsConfig: {\n\t\t\t\tlabelPosition: \"top\",\n\t\t\t},\n\t\t\telements: [\n\t\t\t\t{ view: \"text\", name: \"text\", label: _(\"Title\") },\n\t\t\t\t{\n\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\tlocalId: \"types\",\n\t\t\t\t\tname: \"type\",\n\t\t\t\t\tlabel: _(\"Type\"),\n\t\t\t\t\toptions: types,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: v => this.ToggleControls(v),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"datepicker\",\n\t\t\t\t\tname: \"start_date\",\n\t\t\t\t\tlabel: _(\"Start date\"),\n\t\t\t\t\tsuggest: webix.copy(calendar),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"datepicker\",\n\t\t\t\t\tname: \"end_date\",\n\t\t\t\t\tlabel: _(\"End date\"),\n\t\t\t\t\tsuggest: webix.copy(calendar),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"counter\",\n\t\t\t\t\tname: \"duration\",\n\t\t\t\t\tcss: \"webix_gantt_form_counter\",\n\t\t\t\t\tmin: 1,\n\t\t\t\t\tmax: 1000,\n\t\t\t\t\tlabel: _(\"Duration\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"slider\",\n\t\t\t\t\tname: \"progress\",\n\t\t\t\t\ttitle: webix.template(\"#value#%\"),\n\t\t\t\t\tlabel: _(\"Progress\"),\n\t\t\t\t},\n\t\t\t\taccordion,\n\t\t\t\t{\n\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\tname: \"details\",\n\t\t\t\t\tlabel: _(\"Notes\"),\n\t\t\t\t\theight: 150,\n\t\t\t\t},\n\t\t\t],\n\t\t\ton: {\n\t\t\t\tonChange: (n, o, config) => {\n\t\t\t\t\tif (this.Compact) this.UpdateTaskTime();\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (config == \"user\")\n\t\t\t\t\t\t\tthis.UpdateTask().then(() => {\n\t\t\t\t\t\t\t\t// redraw all bars because a branch may be closed or opened in tree\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tthis._eventSource === \"type\" &&\n\t\t\t\t\t\t\t\t\tconfig === \"user\" &&\n\t\t\t\t\t\t\t\t\t(n === \"split\" || o === \"split\")\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\tthis.Tasks.data.callEvent(\"onStoreUpdated\", []);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"proxy\", // for borders\n\t\t\tbody: {\n\t\t\t\tmargin: 0,\n\t\t\t\tpadding: { bottom: 14 },\n\t\t\t\trows: [bar, form],\n\t\t\t},\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.Ops = this.app.getService(\"operations\");\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tthis.Tasks = this.Local.tasks();\n\t\tthis.Form = this.$$(\"form\");\n\n\t\t// fills form with data of selected and newly created task\n\t\tthis.on(this.State.$changes, \"selected\", id => {\n\t\t\tif (id) {\n\t\t\t\tthis.FillData(id);\n\t\t\t}\n\t\t});\n\n\t\t// updates for start and end dates of task while dnd happens and form is open\n\t\tthis.on(this.Tasks.data, \"onStoreUpdated\", (id, obj, mode) => {\n\t\t\tif (mode == \"update\" && id == this.State.selected)\n\t\t\t\tthis.FillData(this.State.selected);\n\t\t});\n\n\t\t// \"resources\" view shows only \"task\" items (disable \"type\" select for it)\n\t\tthis.on(this.State.$changes, \"display\", v => {\n\t\t\tconst typeSelect = this.$$(\"form\").elements[\"type\"];\n\t\t\tif (v == \"tasks\") typeSelect.enable();\n\t\t\telse if (v == \"resources\") typeSelect.disable();\n\t\t});\n\t\tif (this.app.config.resourceCalendars)\n\t\t\tthis.on(this.Local.assignments().data, \"onStoreUpdated\", () =>\n\t\t\t\tthis.SetResourceHolidays()\n\t\t\t);\n\t\tthis.on(this.State.$changes, \"baseline\", (v, old) => {\n\t\t\tif (!webix.isUndefined(old))\n\t\t\t\tthis.SetBaselineVisibility(this.Tasks.getItem(this.State.selected));\n\t\t});\n\t}\n\n\t/**\n\t * Applies task selection\n\t * @param {(string|number)} id - the ID of a task\n\t */\n\tFillData(id) {\n\t\tconst item = this.Tasks.getItem(id);\n\n\t\tconst typeList = this.$$(\"types\").getList();\n\t\tif (this.app.config.split && item.$count) {\n\t\t\tif (!typeList.exists(\"split\"))\n\t\t\t\ttypeList.add({\n\t\t\t\t\tid: \"split\",\n\t\t\t\t\tvalue: this.app.getService(\"locale\")._(\"Split task\"),\n\t\t\t\t});\n\t\t} else {\n\t\t\tif (typeList.exists(\"split\")) typeList.remove(\"split\");\n\t\t}\n\n\t\tif (this.app.config.projects) {\n\t\t\tthis.LimitTypeOptions(item);\n\t\t}\n\t\tif (this.app.config.resourceCalendars) this.SetResourceHolidays();\n\n\t\tif (this.isResources) this.SetResourcesVisibility(item);\n\t\tif (this.State.baseline) this.SetBaselineVisibility(item);\n\t\tthis.Form.setValues(item);\n\t\tthis.Form.focus();\n\t}\n\n\t/**\n\t * Hide/show the \"Assignments\" accordion item depending on a task type\n\t * @param {object} item - a task data object\n\t */\n\tSetResourcesVisibility(item) {\n\t\tconst layout = this.$$(\"resourcesItem\");\n\t\tif (item.type == \"task\") {\n\t\t\tif (!layout.isVisible()) {\n\t\t\t\tconst sub = this.getSubView(\"resources\");\n\t\t\t\tif (sub) sub.FillData(item.id);\n\t\t\t\tlayout.show();\n\t\t\t}\n\t\t} else if (layout.isVisible()) layout.hide();\n\t}\n\t/**\n\t * Hide/show the \"Assignments\" accordion item depending on a task type\n\t * @param {object} item - a task data object\n\t */\n\tSetBaselineVisibility(item) {\n\t\tconst layout = this.$$(\"baselineItem\");\n\t\tif (\n\t\t\tthis.State.baseline &&\n\t\t\t(item.type == \"task\" || item.type == \"project\")\n\t\t) {\n\t\t\tif (!layout.isVisible()) {\n\t\t\t\tconst sub = this.getSubView(\"baseline\");\n\t\t\t\tif (sub) sub.FillData(item.id);\n\t\t\t\tlayout.show();\n\t\t\t}\n\t\t} else if (layout.isVisible()) layout.hide();\n\t}\n\n\t/**\n\t * Prohibits the user from selecting the type incompatible with other data and relations of a task\n\t * @param {Object} item - the data object of a task\n\t */\n\tLimitTypeOptions(item) {\n\t\tconst typeSelect = this.Form.elements.type;\n\t\tif (item.type === \"project\") typeSelect.hide();\n\t\telse typeSelect.show();\n\t}\n\n\t/**\n\t * Prepares task  object for processing with respect to date-related changes\n\t * @param {Object} vals - object with form values\n\t * @returns {boolean} flag that indicates whether dates were updated or not\n\t */\n\tPrepareDates(vals) {\n\t\tconst f = (this._eventSource = this.Form.$eventSource.config.name);\n\n\t\tlet updateDates = true;\n\t\tif (f == \"duration\" || (f == \"start_date\" && vals.type == \"project\"))\n\t\t\tvals.end_date = null;\n\t\telse if (f == \"end_date\" || f == \"start_date\") vals.duration = null;\n\t\telse updateDates = false;\n\n\t\treturn updateDates;\n\t}\n\t/**\n\t * Update task time and duration on data change in compact form\n\t */\n\tUpdateTaskTime() {\n\t\tconst vals = this.Form.getValues();\n\t\tconst updateDates = this.PrepareDates(vals);\n\n\t\t// expand branches with subtasks that are not split anymore\n\t\tif (this._eventSource === \"type\" && vals.type !== \"split\")\n\t\t\tvals.open = vals.opened = 1;\n\n\t\tconst textUpdated = this.RemoveTagsFromText(vals);\n\t\tif (textUpdated) {\n\t\t\tthis.Form.blockEvent();\n\t\t\tthis.Form.setValues(vals, true);\n\t\t\tthis.Form.unblockEvent();\n\t\t}\n\n\t\tif (updateDates) {\n\t\t\tconst mode = this._eventSource ? this._eventSource.split(\"_\")[0] : null;\n\t\t\tthis.Ops.updateTaskDuration(vals, mode);\n\n\t\t\tthis.Form.blockEvent();\n\t\t\tthis.Form.setValues(vals, true);\n\t\t\tthis.Form.unblockEvent();\n\t\t}\n\t}\n\n\t/**\n\t * Removes HTML tags from text fields\n\t * @param {Object} vals - the changed values from the form\n\t * @returns {boolean} - true if there is a text field in the changed values, false otherwise\n\t */\n\tRemoveTagsFromText(vals) {\n\t\tif (this._eventSource === \"text\" || this._eventSource === \"details\") {\n\t\t\tvals[this._eventSource] = (vals[this._eventSource] || \"\").replace(\n\t\t\t\t/(<[^>]+>|^\\s+|\\s+$)/gi,\n\t\t\t\t\"\"\n\t\t\t);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Saves changes\n\t * @returns {Promise} the result of a data operation (adding new event or updating)\n\t */\n\tUpdateTask() {\n\t\tconst id = this.State.selected;\n\t\tconst vals = this.Form.getValues();\n\t\tif (!this.Compact) {\n\t\t\tthis.PrepareDates(vals);\n\t\t\tthis.RemoveTagsFromText(vals);\n\t\t}\n\n\t\tconst mode = this._eventSource ? this._eventSource.split(\"_\")[0] : null;\n\n\t\t// expand branches with subtasks that are not split anymore\n\t\tif (this._eventSource === \"type\" && vals.type !== \"split\")\n\t\t\tvals.open = vals.opened = 1;\n\n\t\tthis._inProgress = this.Ops.updateTask(id, vals, mode);\n\n\t\tthis._inProgress.finally(() => (this._inProgress = null));\n\t\treturn this._inProgress;\n\t}\n\n\t/**\n\t * Switches end date, duration and progress controls and enables or disables them depending on the type of the task\n\t * @param {string} v - the option chosen in the type selector: \"project\", \"task\", \"milestone\"\n\t */\n\tToggleControls(v) {\n\t\tthis.Form.elements.end_date.show();\n\t\tthis.Form.elements.duration.show();\n\t\tthis.Form.elements.progress.show();\n\t\tthis.Form.elements.end_date.enable();\n\t\tthis.Form.elements.duration.enable();\n\t\tthis.Form.elements.progress.enable();\n\n\t\tif (v == \"project\" || v == \"milestone\") {\n\t\t\tconst action = v == \"project\" ? \"disable\" : \"hide\";\n\t\t\tthis.Form.elements.end_date[action]();\n\t\t\tthis.Form.elements.duration[action]();\n\t\t\tthis.Form.elements.progress[action]();\n\t\t}\n\t}\n\n\t/**\n\t * Handles clicks on the 'cross' icon and closes the form\n\t * if there are unsaved changes, initiates saving after confirmation from the user\n\t */\n\tClose() {\n\t\tif (this.Compact && this.Form.isDirty()) {\n\t\t\tconst _ = this.app.getService(\"locale\")._;\n\t\t\twebix\n\t\t\t\t.confirm({\n\t\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t\t\ttext: _(\"Save changes?\"),\n\t\t\t\t})\n\t\t\t\t.then(() => this.Done(true), () => this.Back(true));\n\t\t} else {\n\t\t\tthis.Back(true);\n\t\t}\n\t}\n\n\t/**\n\t * Closes the form and either closes the whole right panel or shows \"info\"\n\t * @param {Boolean} exit - if true, the right panel will be closed; otherwise, right panel stays, form closes, \"info\" shows up\n\t */\n\tBack(exit) {\n\t\tif (exit)\n\t\t\tthis.State.$batch({\n\t\t\t\tedit: null,\n\t\t\t\tselected: null,\n\t\t\t});\n\t\telse this.State.edit = null;\n\t}\n\n\t/**\n\t * Finishes task editing and closes the form\n\t * @param {Boolean} exit - if true, the right panel will be closed; otherwise, right panel stays, form closes, info shows up\n\t */\n\tDone(exit) {\n\t\tif (this.Compact && this.Form.isDirty()) {\n\t\t\tif (this._inProgress)\n\t\t\t\tthis._inProgress.then(() => {\n\t\t\t\t\tthis.Back(exit);\n\t\t\t\t});\n\t\t\telse this.UpdateTask().then(() => this.Back(exit));\n\t\t} else this.Back(exit);\n\t}\n\n\tSetResourceHolidays() {\n\t\tlet arr = [];\n\t\tconst els = this.Form.elements;\n\t\tconst h = this.app.getService(\"helpers\");\n\t\tarr.push(els[\"start_date\"], els[\"end_date\"]);\n\t\tconst calendar = this.Local.getTaskCalendar(this.State.selected);\n\t\tarr.forEach(el => {\n\t\t\tconst c = el.getPopup().getBody();\n\t\t\tc.config.events = date =>\n\t\t\t\t(calendar\n\t\t\t\t\t? h.isResourceHoliday(date, calendar)\n\t\t\t\t\t: this.app.config.isHoliday(date)) && \"webix_cal_event\";\n\t\t\tc.refresh();\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class TaskView extends JetView {\n\tconfig() {\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\t\tconst state = (this.State = this.getParam(\"state\", true));\n\n\t\tconst editButton = {\n\t\t\tview: \"button\",\n\t\t\twidth: 130,\n\t\t\tlabel: _(\"Edit\"),\n\t\t\tcss: \"webix_primary\",\n\t\t\tclick: () => this.EditTask(),\n\t\t};\n\n\t\tconst aSkin = webix.skin.$active;\n\t\tconst bar = {\n\t\t\tview: \"toolbar\",\n\t\t\tcss: \"webix_subbar\",\n\t\t\tborderless: true,\n\t\t\tpadding: {\n\t\t\t\tleft: aSkin.layoutPadding.form - (aSkin.inputHeight - 20) / 2,\n\t\t\t\tright: aSkin.layoutPadding.form,\n\t\t\t},\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\ticon: \"wxi-close\",\n\t\t\t\t\tclick: () => this.Close(),\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t\t!state.readonly ? editButton : {},\n\t\t\t],\n\t\t};\n\n\t\tconst info = {\n\t\t\tlocalId: \"text\",\n\t\t\tview: \"template\",\n\t\t\tcss: \"webix_gantt_task_info\",\n\t\t\ttemplate: obj => this.InfoTemplate(obj),\n\t\t\tborderless: true,\n\t\t};\n\n\t\tconst deleteButton = {\n\t\t\tview: \"button\",\n\t\t\tlabel: _(\"Delete task\"),\n\t\t\tcss: \"webix_danger webix_gantt_danger\",\n\t\t\talign: \"center\",\n\t\t\tinputWidth: 330,\n\t\t\tclick: () => {\n\t\t\t\twebix\n\t\t\t\t\t.confirm({\n\t\t\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t\t\t\ttitle: _(\"Delete task\"),\n\t\t\t\t\t\ttext: _(\"The task will be deleted permanently, are you sure?\"),\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => this.DeleteTask());\n\t\t\t},\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"proxy\", // for borders\n\t\t\tbody: {\n\t\t\t\tmargin: 0,\n\t\t\t\trows: [\n\t\t\t\t\tbar,\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\trows: [info, !state.readonly ? deleteButton : {}],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tthis.Tasks = this.Local.tasks();\n\t\tthis.Text = this.$$(\"text\");\n\t\tthis.isResources = this.app.config.resources;\n\n\t\tthis.on(this.State.$changes, \"selected\", id => {\n\t\t\tif (id) this.FillTemplate(id);\n\t\t});\n\n\t\tthis.on(this.Tasks.data, \"onStoreUpdated\", (id, obj, mode) => {\n\t\t\tif (mode == \"update\" && id == this.State.selected) {\n\t\t\t\tthis.FillTemplate(this.State.selected);\n\t\t\t}\n\t\t});\n\n\t\t// changing links via bars and dnd\n\t\tconst links = this.Local.links();\n\t\tthis.on(links.data, \"onStoreUpdated\", (_id, obj) => {\n\t\t\tif (obj) {\n\t\t\t\tconst tid = this.State.selected;\n\t\t\t\tif (obj.target === tid || obj.source === tid) {\n\t\t\t\t\tthis.FillTemplate(tid);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (this.isResources) {\n\t\t\tthis.on(this.Local.assignments().data, \"onStoreUpdated\", (id, obj) => {\n\t\t\t\tif (obj && obj.task == this.State.selected) this.FillTemplate(obj.task);\n\t\t\t});\n\t\t}\n\t\tthis.on(this.State.$changes, \"baseline\", (v, old) => {\n\t\t\tif (!webix.isUndefined(old)) this.FillTemplate(this.State.selected);\n\t\t});\n\t}\n\n\tFillTemplate(id) {\n\t\tconst item = webix.copy(this.Tasks.getItem(id));\n\t\titem.sources = this.Local.getLinks(id, \"source\");\n\t\titem.targets = this.Local.getLinks(id, \"target\");\n\t\tif (this.isResources && item.type == \"task\") {\n\t\t\tthis.Local.getAssignments(id).then(d => {\n\t\t\t\tif (!this.getRoot()) return false;\n\t\t\t\titem.resources = d.sort(\n\t\t\t\t\tthis.app.getService(\"operations\").sortResources\n\t\t\t\t);\n\t\t\t\tthis.Text.setValues(item);\n\t\t\t});\n\t\t} else this.Text.setValues(item);\n\t}\n\n\tEditTask() {\n\t\tthis.State.edit = true;\n\t}\n\n\tDeleteTask() {\n\t\tthis.app.getService(\"operations\").removeTask(this.State.selected);\n\t\tthis.Close();\n\t}\n\n\tClose() {\n\t\tthis.State.$batch({\n\t\t\tedit: null,\n\t\t\tselected: null,\n\t\t});\n\t}\n\n\tInfoTemplate(obj) {\n\t\tif (!obj.start_date) return \"\";\n\t\tconst _ = this._;\n\t\tlet html = `<span class=\"webix_gantt_task_title\">${obj.text ||\n\t\t\t_(\"(no title)\")}</span><br><br>`;\n\t\thtml += this.BaseTemplate(obj);\n\t\thtml += this.LinkTemplate(obj);\n\n\t\tif (this.State.baseline && obj.planned_start) {\n\t\t\thtml += this.BaselineTemplateChunk(obj, _(\"Planned dates\"));\n\t\t}\n\n\t\tif (obj.details) {\n\t\t\thtml += `<br><br><div class=\"webix_gantt_task_title\">${_(\"Notes\")}</div>\n\t\t\t\t<br><div class=\"webix_gantt_task_text\">${obj.details.replace(\n\t\t\t\t\t/(?:\\r\\n|\\r|\\n)/g,\n\t\t\t\t\t\"<br>\"\n\t\t\t\t)}</div>`;\n\t\t}\n\n\t\treturn html;\n\t}\n\n\tBaseTemplate(obj) {\n\t\tconst _ = this._;\n\t\tlet html = `<span class=\"webix_strong\">${_(\n\t\t\t\"Start date\"\n\t\t)}</span>: ${this.DateFormat(obj.start_date)}<br>`;\n\n\t\tif (obj.type !== \"milestone\")\n\t\t\thtml += `<span class=\"webix_strong\">${_(\n\t\t\t\t\"End date\"\n\t\t\t)}</span>: ${this.DateFormat(obj.end_date)}<br>\n\t\t\t<span class=\"webix_strong\">${_(\"Duration\")}</span>: ${obj.duration}<br>\n\t\t\t<span class=\"webix_strong\">${_(\"Progress\")}</span>: ${obj.progress}%\n\t\t<br>`;\n\t\treturn html;\n\t}\n\n\tLinkTemplate(obj) {\n\t\tlet html = \"\";\n\t\tconst _ = this._;\n\t\tif (obj.targets.length)\n\t\t\thtml += this.InfoTemplateChunk(obj.targets, _(\"Predecessors\"));\n\t\tif (obj.sources.length)\n\t\t\thtml += this.InfoTemplateChunk(obj.sources, _(\"Successors\"));\n\t\tif (obj.resources) {\n\t\t\tconst single =\n\t\t\t\tthis.isResources == \"single\" || this.app.config.resourceCalendars;\n\t\t\thtml += this.ResourcesTemplateChunk(\n\t\t\t\tobj.resources,\n\t\t\t\tsingle ? _(\"Assignment\") : _(\"Assignments\")\n\t\t\t);\n\t\t}\n\t\treturn html;\n\t}\n\n\tResourcesTemplateChunk(arr, label) {\n\t\tif (!arr || !arr.length) return \"\";\n\t\tlet maxWidth = 130;\n\t\tarr.forEach(r => {\n\t\t\tconst s0 = webix.html.getTextSize(r.name, \"webix_gantt_info_list_text\");\n\t\t\tconst s1 = webix.html.getTextSize(\n\t\t\t\tr.category,\n\t\t\t\t\"webix_gantt_info_list_text webix_gantt_resource_section\"\n\t\t\t);\n\t\t\tmaxWidth = Math.max(maxWidth, s0.width, s1.width);\n\t\t});\n\t\tmaxWidth = Math.min(200, maxWidth);\n\t\tlet list = arr\n\t\t\t.map(r => {\n\t\t\t\tconst h = this.app.getService(\"helpers\");\n\t\t\t\tconst avatar =\n\t\t\t\t\t\"<div>\" +\n\t\t\t\t\th.resourceAvatar(r, \"webix_gantt_person_avatar_big\") +\n\t\t\t\t\t\"</div>\";\n\t\t\t\tconst dpt =\n\t\t\t\t\t\"<div class=' webix_gantt_info_list_text webix_gantt_resource_section' style='min-width:\" +\n\t\t\t\t\tmaxWidth +\n\t\t\t\t\t\"px'>\" +\n\t\t\t\t\tr.category +\n\t\t\t\t\t\"</div>\";\n\t\t\t\tconst value =\n\t\t\t\t\t\"<div class='webix_gantt_resource_section'>\" +\n\t\t\t\t\tr.value +\n\t\t\t\t\tthis._(h.getResourceUnit(r)) +\n\t\t\t\t\t\"</div>\";\n\t\t\t\tconst top =\n\t\t\t\t\t\"<div class='webix_gantt_info_list_text_row'><div class='webix_gantt_info_list_text' style='min-width:\" +\n\t\t\t\t\tmaxWidth +\n\t\t\t\t\t\"px'>\" +\n\t\t\t\t\tr.name +\n\t\t\t\t\t\"</div>\" +\n\t\t\t\t\tvalue +\n\t\t\t\t\t\"</div>\";\n\t\t\t\tconst text = \"<div  >\" + top + dpt + \"</div>\";\n\n\t\t\t\treturn (\n\t\t\t\t\t\"<div class='webix_gantt_info_resource'>\" + avatar + text + \"</div>\"\n\t\t\t\t);\n\t\t\t})\n\t\t\t.join(\"\");\n\t\treturn `<br><span class=\"webix_strong\">${label}</span>:<br><ul class=\"webix_gantt_info_list_resources\">${list}</ul>`;\n\t}\n\n\tInfoTemplateChunk(arr, label) {\n\t\tlet res = arr\n\t\t\t.map(s => `<li>${s.text || this._(\"(no title)\")}</li>`)\n\t\t\t.join(\"\");\n\t\treturn `<br><span class=\"webix_strong\">${label}</span>:<br><ul>${res}</ul>`;\n\t}\n\n\tDateFormat(date) {\n\t\treturn webix.i18n.longDateFormatStr(date);\n\t}\n\tBaselineTemplateChunk(obj, label) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tlet html =\n\t\t\t`${_(\"Start date\")}: ${this.DateFormat(obj.planned_start)}<br>` +\n\t\t\t`${_(\"End date\")}: ${this.DateFormat(obj.planned_end)}<br>` +\n\t\t\t`${_(\"Duration\")}: ${obj.planned_duration}<br>`;\n\t\treturn `<br><span class=\"webix_strong\">${label}</span><br><div class=\"webix_gantt_info_list_planned\">${html}</div>`;\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class TaskPopup extends JetView {\n\tconfig() {\n\t\treturn this.app.getService(\"jet-win\").updateConfig({\n\t\t\tview: \"window\",\n\t\t\tborderless: true,\n\t\t\tfullscreen: true,\n\t\t\thead: false,\n\t\t\tbody: { $subview: true },\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { sort } from \"../helpers/common\";\n\nexport default class TreeView extends JetView {\n\tconfig() {\n\t\tconst state = (this.State = this.getParam(\"state\", true));\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tthis.Helpers = this.app.getService(\"helpers\");\n\t\tconst scales = this.Local.getScales();\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\t\tconst compact = (this.Compact = this.getParam(\"compact\", true));\n\t\tthis.isResources = this.app.config.resources;\n\t\tthis.maxAvatarNumber = 3;\n\n\t\tconst action = {\n\t\t\tid: \"action\",\n\t\t\tcss: \"webix_gantt_action\",\n\t\t\theader: {\n\t\t\t\ttext: `<span webix_tooltip=\"${_(\n\t\t\t\t\t\"Add task\"\n\t\t\t\t)}\" class=\"webix_icon wxi-plus-circle\"></span>`,\n\t\t\t\tcss: \"webix_gantt_action\",\n\t\t\t},\n\t\t\ttemplate: () => {\n\t\t\t\treturn `<span webix_tooltip=\"${_(\n\t\t\t\t\t\"Add task\"\n\t\t\t\t)}\" class=\"webix_icon wxi-plus\"></span>`;\n\t\t\t},\n\t\t\twidth: 44,\n\t\t\tminWidth: 44,\n\t\t};\n\n\t\tlet columns = [\n\t\t\t{\n\t\t\t\tid: \"text\",\n\t\t\t\tcss: \"webix_gantt_title\",\n\t\t\t\theader: _(\"Title\"),\n\t\t\t\ttemplate: (obj, common) =>\n\t\t\t\t\tcommon.treetable(obj, common) + this.TitleTemplate(obj),\n\t\t\t\tfillspace: true,\n\t\t\t\thidden: compact,\n\t\t\t\tbatch: \"full\",\n\t\t\t\tsort: sort(\"text\"),\n\t\t\t\tminWidth: 150,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"start_date\",\n\t\t\t\theader: _(\"Start date\"),\n\t\t\t\tformat: webix.i18n.dateFormatStr,\n\t\t\t\thidden: compact,\n\t\t\t\tbatch: \"full\",\n\t\t\t\tsort: \"date\",\n\t\t\t\tminWidth: 100,\n\t\t\t},\n\t\t];\n\n\t\tif (this.isResources) {\n\t\t\tcolumns.push({\n\t\t\t\tid: \"resources\",\n\t\t\t\tcss: \"webix_gantt_tree_column_resources\",\n\t\t\t\theader: _(\"Assigned\"),\n\t\t\t\ttemplate: obj => this.ResourcesTemplate(obj),\n\t\t\t\tminWidth: 100,\n\t\t\t});\n\t\t}\n\n\t\tif (compact) {\n\t\t\taction.header.text = \"<span class='webix_icon gti-menu'>\";\n\t\t\tif (state.readonly) action.template = \"\";\n\t\t\tcolumns.unshift(action);\n\t\t} else if (!state.readonly) columns.push(action);\n\n\t\tcolumns[columns.length - 1].resize = false;\n\n\t\tconst skin = webix.skin.$name;\n\t\tconst headerCss =\n\t\t\tskin == \"material\" || skin == \"mini\" ? \"webix_header_border\" : \"\";\n\t\tconst tree = {\n\t\t\tview: \"treetable\",\n\t\t\tcss: \"webix_gantt_tree \" + headerCss,\n\t\t\tprerender: true,\n\t\t\twidth: compact ? 44 : state.treeWidth,\n\t\t\trowHeight: scales.cellHeight,\n\t\t\theaderRowHeight: scales.height,\n\t\t\tscroll: \"xy\",\n\t\t\tscrollAlignY: false,\n\t\t\tselect: \"row\",\n\t\t\tsort: \"multi\",\n\t\t\tresizeColumn: {\n\t\t\t\theaderOnly: true,\n\t\t\t\tsize: 10,\n\t\t\t},\n\t\t\tdrag: state.readonly ? false : \"order\",\n\t\t\tcolumns,\n\t\t\ttooltip: () => \"\",\n\t\t\tonClick: {\n\t\t\t\t\"wxi-plus\": (ev, id) => this.AddTask(id.row),\n\t\t\t\t\"wxi-plus-circle\": () => this.AddTask(\"0\"),\n\t\t\t\t\"gti-menu\": () => this.ToggleColumns(),\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonBeforeOpen: id => this.HandleToggle(id),\n\t\t\t\tonAfterOpen: id => {\n\t\t\t\t\tthis.ToggleBranch(id, 1);\n\t\t\t\t\tthis.ApplySelection();\n\t\t\t\t},\n\t\t\t\tonAfterClose: id => this.ToggleBranch(id, 0),\n\t\t\t\tonBeforeSelect: id => this.BeforeSelectHandler(id),\n\t\t\t\tonItemClick: id => this.ItemClickHandler(id),\n\t\t\t\tonAfterSort: (by, dir, as) => this.SortTasks(by, dir, as),\n\t\t\t\tonColumnResize: (id, v, o, user) => this.NormalizeColumns(id, user),\n\t\t\t\tonBeforeDrag: (ctx, e) => this.BeforeDragHandler(ctx, e),\n\t\t\t\tonBeforeDrop: ctx => this.BeforeDropHandler(ctx),\n\t\t\t\tonViewResize: () => {\n\t\t\t\t\tthis.State.treeWidth = this.Tree.$width;\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\ttree.on[\"onScrollY\"] = tree.on[\"onSyncScroll\"] = tree.on[\n\t\t\t\"onAfterScroll\"\n\t\t] = function() {\n\t\t\tstate.top = this.getScrollState().y;\n\t\t};\n\t\treturn tree;\n\t}\n\n\tinit(view) {\n\t\tthis.Tree = view;\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.Ops = this.app.getService(\"operations\");\n\t\tthis.Helpers = this.app.getService(\"helpers\");\n\t\tthis.Tasks = this.Local.tasks();\n\n\t\tthis.on(this.State.$changes, \"display\", v => {\n\t\t\tthis.Mode = v;\n\t\t\tthis.State.top = 0;\n\t\t\tthis.SyncData();\n\t\t});\n\t\tif (this.isResources) {\n\t\t\tthis.on(this.Assignments.data, \"onStoreUpdated\", () => {\n\t\t\t\tthis.Tree.refresh();\n\t\t\t});\n\t\t\tthis.on(this.Tree.data, \"onStoreUpdated\", id => {\n\t\t\t\tif (this.Mode == \"resources\" && !id) {\n\t\t\t\t\tthis.ApplySelection();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.on(this.State.$changes, \"top\", y => this.Tree.scrollTo(null, y));\n\t\tthis.on(this.State.$changes, \"selected\", id => {\n\t\t\tif (id) this.ApplySelection();\n\t\t\telse this.Tree.unselect();\n\t\t});\n\n\t\t// resetting headerRowHeight\n\t\tthis.on(this.app, \"onScalesUpdate\", scales => {\n\t\t\tconst col = this.Tree.columnId(0);\n\t\t\tthis.Tree.getColumnConfig(col).header[0].height = scales.height;\n\t\t\tthis.Tree.refreshColumns();\n\t\t});\n\n\t\t// compact button and dnd module\n\t\tthis.on(this.app, \"task:add\", (pid, dates) =>\n\t\t\tthis.AddTask(pid || \"0\", dates)\n\t\t);\n\n\t\tthis.on(this.State.$changes, \"treeWidth\", v => {\n\t\t\tif (!this.Compact && view.$width !== v) {\n\t\t\t\tview.define({ width: v });\n\t\t\t\tview.resize();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Prevents split task branches from being opened\n\t * @param {(string|number)} id - the ID of a task branch\n\t * @returns {Boolean} return false to prevent branches from opening\n\t */\n\tHandleToggle(id) {\n\t\tconst obj = this.Tree.getItem(id);\n\t\tif (obj.type === \"split\" && obj.$data.length) return false;\n\t}\n\n\t/**\n\t * Selects a task\n\t * @param {(string|number)} id - the ID of a task\n\t */\n\tItemClickHandler(id) {\n\t\tif (!this.Tree.getItem(id).$group) {\n\t\t\tthis.State.$batch({\n\t\t\t\tparent: null,\n\t\t\t\tselected: id.row,\n\t\t\t});\n\t\t} else this.app.callEvent(\"edit:stop\");\n\t}\n\t/**\n\t * Checks whether selection is allowed\n\t * @param {string, number} id - task ID\n\t * @returns {boolean} returning false prevents selection\n\t */\n\tBeforeSelectHandler(id) {\n\t\treturn !this.Tree.getItem(id).$group;\n\t}\n\t/**\n\t * Checks whether drag-n-drop is allowed and defines the looks of the drag marker\n\t * @param {Object} ctx - the context object of DnD\n\t * @param {MouseEvent} e - native browser event\n\t * @returns {Boolean} returning false prevents Webix drag-n-drop logic\n\t */\n\tBeforeDragHandler(ctx, e) {\n\t\tif (this.Mode == \"tasks\") {\n\t\t\tconst obj = this.Tree.getItem(ctx.start);\n\t\t\tif (obj.type === \"split\" && obj.$data.length) {\n\t\t\t\tconst html = this.Tree.$dragHTML(this.Tree.getItem(ctx.start), e, ctx);\n\t\t\t\tctx.html = html.replace(\n\t\t\t\t\t\"webix_dd_drag\",\n\t\t\t\t\t\"webix_dd_drag webix_gantt_tree_no_icon\"\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t/**\n\t * Saves task position\n\t * @param {Object} ctx - drag-n-drop context\n\t * @returns {boolean} returning false prevents Webix drop logic\n\t */\n\tBeforeDropHandler(ctx) {\n\t\tthis.Ops.moveTask(ctx.start, ctx.parent, ctx.index);\n\t\treturn false;\n\t}\n\t/** Fills tree width data */\n\tSyncData() {\n\t\tthis.Tree.clearAll();\n\t\tthis.VisibleTasks = this.Local.getVisibleTasksCollection();\n\t\tthis.resDisplayed = this.State.display === \"resources\";\n\n\t\t// for Resource view: always handle existing waitData of VisibleTasks\n\t\tif (this.resDisplayed && !this.clearEvID) {\n\t\t\tthis.clearEvID = this.on(this.VisibleTasks.data, \"onClearAll\", () => {\n\t\t\t\tif (this.resDisplayed) {\n\t\t\t\t\tthis.RefreshData();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.RefreshData();\n\t}\n\n\t/**\n\t * Returns waitData of all involved Collections\n\t * @returns {Array} of Promises\n\t */\n\tGetLoaders() {\n\t\tconst loaders = [this.VisibleTasks.waitData];\n\t\tif (this.isResources) {\n\t\t\tthis.Resources = this.Local.resources();\n\t\t\tthis.Assignments = this.Local.assignments();\n\t\t\tloaders.push(this.Resources.waitData, this.Assignments.waitData);\n\t\t}\n\t\treturn loaders;\n\t}\n\n\t/**\n\t * Waits for data before syncing with main collection and restoring state\n\t * @param {Array} loaders -\n\t */\n\tRefreshData() {\n\t\tconst loaders = this.GetLoaders();\n\t\twebix.promise.all(loaders).then(() => {\n\t\t\tthis.Tree.sync(this.VisibleTasks);\n\t\t\tthis.ApplySelection();\n\t\t\tthis.ApplySorting();\n\t\t});\n\t}\n\n\t/** Applies selection from state */\n\tApplySelection() {\n\t\tconst id = this.State.selected;\n\n\t\tif (id && this.Tree.exists(id) && this.Tree.getSelectedId() != id) {\n\t\t\tlet selected;\n\t\t\tconst task = this.Tree.getItem(id);\n\n\t\t\t// split subtasks are in the tree but they are never visible\n\t\t\tif (this.State.display === \"tasks\") {\n\t\t\t\tconst parent = task.parent;\n\t\t\t\tconst pdata = parent != 0 ? this.Tree.getItem(parent) : null;\n\t\t\t\tif (pdata && pdata.type === \"split\") {\n\t\t\t\t\tselected = parent;\n\t\t\t\t} else if (this.Local._isTaskVisible(task)) {\n\t\t\t\t\tselected = id;\n\t\t\t\t}\n\t\t\t} else if (this.Local._isTaskVisible(task)) {\n\t\t\t\tselected = id;\n\t\t\t}\n\n\t\t\tif (selected) {\n\t\t\t\tthis.Tree.select(selected);\n\t\t\t\tthis.Tree.showItem(selected);\n\t\t\t}\n\t\t}\n\t}\n\t/** Applies sorting from state */\n\tApplySorting() {\n\t\tif (this.State.sort) {\n\t\t\t// UI-only: no need to re-apply sorting on collection\n\t\t\tthis.Tree.data.blockEvent();\n\t\t\tthis.Tree.setState({ sort: this.State.sort });\n\t\t\tthis.Tree.data.unblockEvent();\n\t\t}\n\t}\n\n\t/**\n\t * Adds a new task\n\t * @param {string, number} pid - ID of parent task, can be \"0\" for root\n\t * @param {Object} dates - start and end of the new task in units (numbers)\n\t * @returns {boolean} returning false prevents selection of the parent task, if called from tree\n\t */\n\tAddTask(pid, dates) {\n\t\tthis.State.selected = null;\n\n\t\tconst row = this.Tree.getItem(pid);\n\t\tconst index = row ? 0 : -1;\n\t\tlet inProgress;\n\t\tconst newTask = this.GetNewTask(row, dates);\n\n\t\tif (this.Mode == \"resources\" && row) {\n\t\t\tinProgress = this.AddTaskWithAssignment(newTask, pid);\n\t\t} else {\n\t\t\t// row and dates come from drag-n-drop module\n\t\t\tif (row && dates) {\n\t\t\t\tlet assigned;\n\t\t\t\tif (this.app.config.resources) {\n\t\t\t\t\tassigned = this.Assignments.find(a => a.task == row.id);\n\t\t\t\t}\n\t\t\t\tif (assigned && assigned.length)\n\t\t\t\t\tinProgress = this.SplitTaskWithAssignment(\n\t\t\t\t\t\tnewTask,\n\t\t\t\t\t\tindex,\n\t\t\t\t\t\tpid,\n\t\t\t\t\t\trow,\n\t\t\t\t\t\tassigned\n\t\t\t\t\t);\n\t\t\t\telse inProgress = this.Ops.splitTaskWithDnd(newTask, index, pid, row);\n\t\t\t} else inProgress = this.Ops.addTask(newTask, index, row ? pid : 0);\n\t\t}\n\t\tthis.app.callEvent(\"backend:operation\", [inProgress]);\n\n\t\tinProgress.then(res => {\n\t\t\tif (row && this.Mode == \"tasks\" && row.type !== \"split\") {\n\t\t\t\tthis.Tree.open(pid);\n\t\t\t}\n\t\t\tthis.State.$batch({\n\t\t\t\tedit: true,\n\t\t\t\tselected: res.id,\n\t\t\t});\n\n\t\t\tthis.Tree.showItem(res.id);\n\t\t});\n\n\t\treturn false;\n\t}\n\t/**\n\t * Returns and object with new task data\n\t * @param {Object} row - the data object of parent task\n\t * @param {Object} dates - (optional) start and length of the new task in units (numbers)\n\t * @returns {Object} an object with default task fields\n\t */\n\tGetNewTask(row, dates) {\n\t\tconst { start, end } = this.GetDates(row, dates);\n\n\t\treturn {\n\t\t\tstart_date: new Date(start),\n\t\t\tend_date: end || webix.Date.add(start, 1, \"day\", true),\n\t\t\tprogress: 0,\n\t\t\ttext: \"\",\n\t\t};\n\t}\n\n\t/**\n\t * Gets start and end dates for a new task\n\t * @param {Object} row - (optional) the data object of a parent task\n\t * @param {Object} dates - (optional) start and length of the new task in units (numbers)\n\t * @returns {Object} with start and end dates\n\t */\n\tGetDates(row, dates) {\n\t\tif (dates) {\n\t\t\treturn dates;\n\t\t}\n\n\t\tlet start, end;\n\t\tif (row && row.type === \"split\") {\n\t\t\tconst date =\n\t\t\t\trow.$data && row.$data.length ? row.$data[0].end_date : row.end_date;\n\t\t\tstart = this.Helpers.addUnit(\"day\", date, 1);\n\t\t} else {\n\t\t\tif (row) {\n\t\t\t\tstart = row.start_date;\n\t\t\t} else {\n\t\t\t\tconst scales = this.Local.getScales();\n\t\t\t\tstart = webix.Date.add(scales.start, 1, scales.minUnit); //keep scale start\n\t\t\t}\n\t\t}\n\t\treturn { start, end };\n\t}\n\n\t/**\n\t * Adds a new task with assignment, if any is applicable\n\t * @param {Object} newTask - the data object of a new task\n\t * @param {(string|number)} pid - the ID of the parent task\n\t * @returns {Promise} server response with ID of the new task\n\t */\n\tAddTaskWithAssignment(newTask, pid) {\n\t\tthis.Tasks.data.blockEvent();\n\t\tthis.Assignments.data.blockEvent();\n\t\t// add task\n\t\tlet targetId = \"0\";\n\t\tif (pid) targetId = this.Tree.getItem(pid).$group ? \"0\" : pid;\n\t\tlet index = 0;\n\t\tif (this.Tasks.data.branch[targetId])\n\t\t\tindex = this.Tasks.data.branch[targetId].length;\n\n\t\treturn this.Ops.addTask(newTask, index, targetId)\n\t\t\t.then(obj => {\n\t\t\t\tnewTask.id = obj.id;\n\t\t\t\t// add assignments\n\t\t\t\tlet waitArr = [];\n\t\t\t\tlet resources = null;\n\t\t\t\twhile (pid != \"0\" && !resources) {\n\t\t\t\t\tresources = this.Tree.getItem(pid).resources;\n\t\t\t\t\tif (!resources) pid = this.Tree.getParentId(pid);\n\t\t\t\t}\n\t\t\t\tif (resources && resources.length) {\n\t\t\t\t\tresources.forEach(rId => {\n\t\t\t\t\t\tconst resource = this.Local.resources().getItem(rId);\n\t\t\t\t\t\twaitArr.push(\n\t\t\t\t\t\t\tthis.Ops.addAssignment({\n\t\t\t\t\t\t\t\tresource: rId,\n\t\t\t\t\t\t\t\tvalue: this.Helpers.getDefaultResourceValue(resource),\n\t\t\t\t\t\t\t\ttask: newTask.id,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (!waitArr.length) return webix.promise.resolve(obj);\n\t\t\t\treturn webix.promise.all(waitArr).then(() => obj);\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tthis.Tasks.data.unblockEvent();\n\t\t\t\tthis.Assignments.data.unblockEvent();\n\t\t\t\t//now we can refresh\n\t\t\t\tthis.Tasks.data.callEvent(\"onStoreUpdated\", [\n\t\t\t\t\tnewTask.id,\n\t\t\t\t\tnewTask,\n\t\t\t\t\t\"add\",\n\t\t\t\t]);\n\t\t\t});\n\t}\n\n\t/**\n\t * Splits a task and reassigns resources from original task to new kid if the original task was not split\n\t * @param {Object} newTask - data for a new split kid\n\t * @param {number} index - the index of the new kid\n\t * @param {(number|string)} pid - the ID of the original task\n\t * @param {Object} row - data of the original task\n\t * @param {Object} assignment - data of the assignment of the original task\n\t * @returns {Promise<Object>} server response with ID of the new task, it's 'sibling' ID\n\t */\n\tSplitTaskWithAssignment(newTask, index, pid, row, assignments) {\n\t\treturn this.Ops.splitTaskWithDnd(newTask, index, pid, row).then(res => {\n\t\t\tif (res.sibling) {\n\t\t\t\tconst aops = [];\n\t\t\t\tfor (let i = 0; i < assignments.length; ++i)\n\t\t\t\t\taops.push(\n\t\t\t\t\t\tthis.Ops.updateAssignment(assignments[i].id, {\n\t\t\t\t\t\t\ttask: res.sibling,\n\t\t\t\t\t\t}).then(() => res)\n\t\t\t\t\t);\n\t\t\t\treturn webix.promise.all(aops).then(() => res);\n\t\t\t}\n\t\t\treturn res;\n\t\t});\n\t}\n\n\t/** Invokes tasks painting in the chart */\n\tRefreshTasks() {\n\t\tthis.Tasks.data.callEvent(\"onStoreUpdated\", []);\n\t}\n\t/**\n\t * Sorts tasks according to current sorting config\n\t * @param {string, array} by - data field, can store an array of sorting configs in case of multiple sorting\n\t * @param {string, number} dir - sorting direction, \"asc\" or \"desc\"\n\t * @param {string, number} as - data type, \"string\" by default\n\t */\n\tSortTasks(by, dir, as) {\n\t\tconst dataSorter = webix.isArray(by) ? by : { by, dir, as };\n\t\tconst sortState = this.Tree.getState().sort;\n\n\t\t// sort the collection to affect task bars\n\t\tthis.VisibleTasks.sort(dataSorter);\n\t\t// save sorting state to restore it after app.refresh (switching from/to compact mode)\n\t\tthis.State.sort = sortState;\n\t}\n\t/** Shows and hides columns in a compact mode */\n\tToggleColumns() {\n\t\tconst vis = this.Tree.isColumnVisible(\"text\");\n\t\tthis.Tree.showColumnBatch(\"full\", !vis);\n\t\tthis.Tree.config.width = vis ? 44 : 0;\n\t\tthis.Tree.resize();\n\n\t\tthis.app.callEvent(\"bars:toggle\", [vis]);\n\t}\n\t/**\n\t * Adjusts columns after resizing\n\t * @param {string} id - ID of the column being resized\n\t * @param {boolean} user - defines whether resizing was triggered by user or API\n\t */\n\tNormalizeColumns(id, user) {\n\t\tif (!user) return;\n\t\tconst tree = this.Tree;\n\t\tconst columns = tree.config.columns;\n\t\tconst i = tree.getColumnIndex(id);\n\n\t\tlet last = columns.length - 1;\n\t\tif (columns[last].id === \"action\") last -= 1;\n\n\t\tif (i === 0) {\n\t\t\tcolumns[last].fillspace = true;\n\t\t\tcolumns[last].width = 0;\n\t\t} else if (i === last) {\n\t\t\tcolumns[0].fillspace = true;\n\t\t\tcolumns[0].width = 0;\n\t\t}\n\t\ttree.refreshColumns();\n\t}\n\t/**\n\t * Saves a task tree branch state (open or closed)\n\t * @param {number, string} id - the ID of the task (branch node)\n\t * @param {number} open - 1 if open, 0 if closed\n\t */\n\tToggleBranch(id, open) {\n\t\tif (this.State.display != \"resources\") {\n\t\t\tthis.RefreshTasks();\n\t\t\tif (!this.State.readonly) this.Ops.updateTask(id, { opened: open });\n\t\t} else {\n\t\t\tconst tree = this.VisibleTasks;\n\t\t\tconst item = tree.getItem(id);\n\t\t\titem.open = !!open;\n\t\t\t// need to update treestore order\n\t\t\ttree.data.callEvent(\"onStoreUpdated\", [id, 0, \"branch\"]);\n\t\t}\n\t}\n\n\t/**\n\t * Returns a string with the text label for item title\n\t * @param {Object} obj - the data object of a task\n\t * @returns {string} a string with the text label\n\t */\n\tTitleTemplate(obj) {\n\t\treturn (\n\t\t\tobj.text || (obj.$group ? this._(\"Unassigned\") : this._(\"(no title)\"))\n\t\t);\n\t}\n\n\t/**\n\t * Resources cell template\n\t * @param {object} obj - task data item\n\t * @returns {string} html string\n\t */\n\tResourcesTemplate(obj) {\n\t\tif (this.Assignments.count() && this.Resources.count()) {\n\t\t\tlet assigned = [];\n\t\t\tthis.Assignments.data.each(a => {\n\t\t\t\tif (a.task == obj.id) assigned.push(this.Resources.getItem(a.resource));\n\t\t\t});\n\t\t\tassigned.sort(this.Ops.sortResources);\n\t\t\treturn this.GetAssignmentsHTML(assigned);\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Gets html content for assignments cell\n\t * @param {Array} assignedArr - an array of assignments\n\t * @returns {string} html string\n\t */\n\tGetAssignmentsHTML(assignedArr) {\n\t\tlet str = \"\";\n\t\tif (assignedArr.length > this.maxAvatarNumber) {\n\t\t\tconst num = assignedArr.length - this.maxAvatarNumber + 1;\n\t\t\tassignedArr = assignedArr.splice(0, this.maxAvatarNumber);\n\t\t\t// show remaining assignments as \"+[NUM]\" over the last avatar\n\t\t\tconst last = assignedArr.pop();\n\t\t\tconst lastStr = this.Helpers.resourceAvatar(last);\n\t\t\tconst numStr =\n\t\t\t\t\"<div class='webix_gantt_cell_remain_num'>+\" + num + \"</div>\";\n\t\t\tstr = assignedArr\n\t\t\t\t.map(r => `${this.Helpers.resourceAvatar(r, null, true)}`)\n\t\t\t\t.join(\"\");\n\t\t\tstr +=\n\t\t\t\t\"<div class='webix_gantt_cell_assigned_last'>\" +\n\t\t\t\tlastStr +\n\t\t\t\tnumStr +\n\t\t\t\t\"</div>\";\n\t\t} else {\n\t\t\tstr = assignedArr\n\t\t\t\t.map(r => `${this.Helpers.resourceAvatar(r, null, true)}`)\n\t\t\t\t.join(\"\");\n\t\t\t// show a name for single assignment\n\t\t\tif (assignedArr.length == 1) {\n\t\t\t\tlet arr = assignedArr[0].name.split(\" \");\n\t\t\t\tstr +=\n\t\t\t\t\t\"<span class='webix_gantt_cell_assigned_text'>\" + arr[0] + \"</span>\";\n\t\t\t}\n\t\t}\n\t\treturn \"<div class='webix_gantt_avatar_box'>\" + str + \"</div>\";\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport TreeView from \"./tree\";\nimport ChartView from \"./chart\";\nimport { initRLayout } from \"@xbs/jet-helpers\";\n\nexport default class TopView extends JetView {\n\tconfig() {\n\t\tinitRLayout();\n\t\tthis.fCompact = this.getParam(\"forceCompact\");\n\t\tif (!webix.isUndefined(this.fCompact))\n\t\t\tthis.setParam(\"compact\", this.fCompact);\n\t\tthis.Compact = this.getParam(\"compact\");\n\t\tthis.State = this.getParam(\"state\", true);\n\n\t\tconst edit = this.Compact\n\t\t\t? { $subview: true, name: \"edit\", popup: true }\n\t\t\t: {\n\t\t\t\t\tview: \"proxy\",\n\t\t\t\t\tcss: \"webix_shadow_medium\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\twidth: 400,\n\t\t\t\t\thidden: true,\n\t\t\t\t\tlocalId: \"edit\",\n\t\t\t\t\tbody: { $subview: true, name: \"edit\" },\n\t\t\t  };\n\n\t\tlet cols = [\n\t\t\tTreeView,\n\t\t\t{\n\t\t\t\tview: this.Compact ? \"spacer\" : \"resizer\",\n\t\t\t\tcss: \"webix_gantt_resizer\",\n\t\t\t\twidth: this.Compact ? 1 : 4,\n\t\t\t},\n\t\t\tChartView,\n\t\t];\n\n\t\tif (this.app.config.resources) {\n\t\t\tcols = [\n\t\t\t\t{\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\trows: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\t\t\tcols,\n\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\tonViewResize: () => {\n\t\t\t\t\t\t\t\t\tthis.app.callEvent(\"rdiagram:resize\", []);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"resizer\",\n\t\t\t\t\t\t\tcss: \"webix_gantt_resizer\",\n\t\t\t\t\t\t\tlocalId: \"rdResizer\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"proxy\",\n\t\t\t\t\t\t\tlocalId: \"rdiagram\",\n\t\t\t\t\t\t\theight: this.Compact ? 0 : 400,\n\t\t\t\t\t\t\tbody: { $subview: true, name: \"rdiagram\" },\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tedit,\n\t\t\t];\n\t\t} else {\n\t\t\tcols.push(edit);\n\t\t}\n\n\t\tconst main = {\n\t\t\tview: \"abslayout\",\n\t\t\tcss: \"webix_gantt\",\n\t\t\tcells: [\n\t\t\t\t{\n\t\t\t\t\tview: \"r-layout\",\n\t\t\t\t\tlocalId: \"main\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\trelative: true,\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\tcols: cols,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tcss: \"webix_gantt_absbutton\",\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\ticon: \"wxi-plus\",\n\t\t\t\t\tlocalId: \"add\",\n\t\t\t\t\thidden: !this.Compact || this.State.readonly,\n\t\t\t\t\twidth: 50,\n\t\t\t\t\theight: 50,\n\t\t\t\t\tright: 20,\n\t\t\t\t\tbottom: 20,\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tthis.app.callEvent(\"task:add\", []);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\treturn main;\n\t}\n\n\tinit(view) {\n\t\tthis.$$(\"main\").sizeTrigger(\n\t\t\tthis.app,\n\t\t\tmode => this.SetCompactMode(mode),\n\t\t\t!!this.Compact\n\t\t);\n\n\t\tthis.on(this.State.$changes, \"selected\", (id, oid) => {\n\t\t\tif (id) this.ShowTask(this.State.edit ? \"form\" : \"info\");\n\t\t\telse if (oid) this.HideTask();\n\t\t});\n\t\tthis.on(this.State.$changes, \"edit\", v => {\n\t\t\tif (this.State.selected) this.ShowTask(v ? \"form\" : \"info\");\n\t\t});\n\n\t\twebix.extend(view, webix.ProgressBar);\n\t\tthis.on(this.app, \"backend:operation\", res => {\n\t\t\tview.showProgress({ type: \"top\", delay: 2000 });\n\t\t\tres.finally(() => {\n\t\t\t\tview.hideProgress();\n\t\t\t});\n\t\t});\n\n\t\tif (this.app.config.resources) {\n\t\t\tthis.on(this.State.$changes, \"resourcesDiagram\", v => {\n\t\t\t\tif (v) {\n\t\t\t\t\tthis.$$(\"rdiagram\").show();\n\t\t\t\t\tthis.$$(\"rdResizer\").show();\n\t\t\t\t\tthis.show(\"rdiagram\", { target: \"rdiagram\" });\n\t\t\t\t} else {\n\t\t\t\t\tthis.$$(\"rdiagram\").hide();\n\t\t\t\t\tthis.$$(\"rdResizer\").hide();\n\t\t\t\t\tthis.show(\"_blank\", { target: \"rdiagram\" }).then(() => {\n\t\t\t\t\t\tthis.app.callEvent(\"rdiagram:resize\", []);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tShowTask(path) {\n\t\tpath = `task.${path}`;\n\t\tif (this.Compact) {\n\t\t\tthis.show(`task.popup/${path}`, {\n\t\t\t\ttarget: \"edit\",\n\t\t\t});\n\t\t} else {\n\t\t\tthis.$$(\"edit\").show();\n\t\t\tthis.show(path, {\n\t\t\t\ttarget: \"edit\",\n\t\t\t});\n\t\t}\n\t}\n\n\tHideTask() {\n\t\t// we need to destroy the view inside first\n\t\tthis.show(\"_blank\", { target: \"edit\" });\n\t\tif (!this.Compact) this.$$(\"edit\").hide();\n\t}\n\n\tSetCompactMode(mode) {\n\t\t//let it render, then recreate\n\t\twebix.delay(() => {\n\t\t\tthis.State.$batch({ top: 0, left: 0 });\n\t\t\tthis.setParam(\"compact\", mode);\n\t\t\tthis.refresh();\n\t\t});\n\t}\n}\n","import m0 from \"./views/chart/bars\";\nimport m1 from \"./views/chart/index.js\";\nimport m2 from \"./views/chart/scale\";\nimport m3 from \"./views/rdiagram/diagram\";\nimport m4 from \"./views/rdiagram/index.js\";\nimport m5 from \"./views/rdiagram/tree\";\nimport m6 from \"./views/task/baseline\";\nimport m7 from \"./views/task/form\";\nimport m8 from \"./views/task/info\";\nimport m9 from \"./views/task/links\";\nimport m10 from \"./views/task/popup\";\nimport m11 from \"./views/task/resources\";\nimport m12 from \"./views/top\";\nimport m13 from \"./views/tree\";\nimport { JetView } from \"webix-jet\";\n\nconst views = { JetView };\nviews[\"chart/bars\"] = m0;\nviews[\"chart\"] = m1;\nviews[\"chart/scale\"] = m2;\nviews[\"rdiagram/diagram\"] = m3;\nviews[\"rdiagram\"] = m4;\nviews[\"rdiagram/tree\"] = m5;\nviews[\"task/baseline\"] = m6;\nviews[\"task/form\"] = m7;\nviews[\"task/info\"] = m8;\nviews[\"task/links\"] = m9;\nviews[\"task/popup\"] = m10;\nviews[\"task/resources\"] = m11;\nviews[\"top\"] = m12;\nviews[\"tree\"] = m13;\n\nexport default views;\n","export default class Local {\n\t/**\n\t * @constructor\n\t * @param {App} app - Jet App instance\n\t * @param {object} config - object with app settings\n\t */\n\tconstructor(app, config) {\n\t\tthis.app = app;\n\t\tthis.state = app.getState();\n\n\t\tthis.Helpers = this.app.getService(\"helpers\");\n\n\t\t// initial config of scales\n\t\tthis.resetScales(config);\n\n\t\tthis.dateToLocalStr = webix.Date.dateToStr(webix.i18n.parseFormat);\n\t}\n\n\t/**\n\t * Creates and paints scales\n\t * @param {Date} scaleStart - start date\n\t * @param {Date} scaleEnd - end date\n\t * @param {boolean} precise - flag that defines whether to round task position and width to a smaller unit\n\t * @param {number} width - width of smallest cell unit\n\t * @param {number} height - height of scale cell\n\t * @param {Array} scales - a set of scales (objects)\n\t */\n\tsetScales(scaleStart, scaleEnd, precise, width, height, scales) {\n\t\tconst oldScale = this._scales;\n\t\tif (width) {\n\t\t\tthis._scaleBase = { width, height, scales };\n\t\t\tscaleEnd = webix.Date.add(scaleEnd, 1, \"day\"); //inclusive\n\t\t} else {\n\t\t\twidth = this._scaleBase.width;\n\t\t\theight = this._scaleBase.height;\n\t\t\tscales = this._scaleBase.scales;\n\t\t}\n\n\t\tthis._scales = this.app\n\t\t\t.getService(\"helpers\")\n\t\t\t.setScales(scaleStart, scaleEnd, precise, width, height, scales);\n\t\tthis._taskHeight = this._scales.cellHeight - 12;\n\n\t\tconst tasks = this.getVisibleTasksCollection();\n\t\tif (tasks && tasks.data.order.length) {\n\t\t\tif (this.state.display === \"resources\") {\n\t\t\t\tthis.app.getService(\"grouping\").refreshResourceTasks();\n\t\t\t} else {\n\t\t\t\tthis.refreshTasks();\n\t\t\t}\n\t\t\tthis.refreshLinks();\n\t\t}\n\n\t\tthis.app.callEvent(\"onScalesUpdate\", [this._scales, oldScale]);\n\t}\n\t/**\n\t * returns scales\n\t * @returns {object} current scales object\n\t */\n\tgetScales() {\n\t\treturn this._scales;\n\t}\n\t/**\n\t * sets initial state of Gantt scales\n\t * @param {Object} config - scales configuration, by default from app config\n\t */\n\tresetScales(config) {\n\t\tconfig = config || this.app.config;\n\n\t\tconst active = webix.skin.$active;\n\t\tconst scaleStart = config.scaleStart || webix.Date.dayStart(new Date());\n\t\tconst scaleEnd =\n\t\t\tconfig.scaleEnd || webix.Date.add(scaleStart, 1, \"month\", true);\n\n\t\tthis.setScales(\n\t\t\tscaleStart,\n\t\t\tscaleEnd,\n\t\t\tconfig.preciseTimeUnit,\n\t\t\tconfig.scaleCellWidth || 80,\n\t\t\tactive.barHeight - active.borderWidth * 2,\n\t\t\tconfig.scales || [{ unit: \"day\", step: 1, format: \"%d\" }]\n\t\t);\n\t}\n\t/**\n\t * Get tasks height\n\t * @returns {number} tasks height\n\t */\n\tgetTaskHeight() {\n\t\treturn this._taskHeight;\n\t}\n\t/**\n\t * Adjusts scale to edited task\n\t * @param {object} task - task object\n\t */\n\tadjustScale(obj) {\n\t\tlet start = obj.start_date;\n\t\tlet end = obj.end_date;\n\t\tif (this.state.baseline && obj.planned_start && obj.planned_end) {\n\t\t\tif (start > obj.planned_start) start = obj.planned_start;\n\t\t\tif (end < obj.planned_end) end = obj.planned_end;\n\t\t}\n\t\tconst s = this.getScales();\n\n\t\t// add 1 unit space around\n\t\tstart = this.Helpers.addUnit(s.minUnit, start, -1);\n\t\tend = this.Helpers.addUnit(s.minUnit, end, 1);\n\n\t\tif ((s && s.start > start) || s.end < end) {\n\t\t\tthis.setScales(\n\t\t\t\ts.start > start ? start : s.start,\n\t\t\t\ts.end < end ? end : s.end,\n\t\t\t\ts.precise\n\t\t\t);\n\t\t}\n\t}\n\t/**\n\t * Fills and returns tasks collection\n\t * @returns {object} tasks Tree Collection\n\t */\n\ttasks(force) {\n\t\tif (this._tasks && !force) return this._tasks;\n\n\t\tif (!this._tasks) {\n\t\t\tthis._tasks = this.createTasks();\n\t\t} else {\n\t\t\tthis._tasks.clearAll();\n\t\t}\n\n\t\tconst waitArr = [this.app.getService(\"backend\").tasks()];\n\t\tif (this.app.config.resourceCalendars)\n\t\t\twaitArr.push(this.taskCalendarMap(false, force));\n\n\t\tthis._tasks.parse(\n\t\t\twebix.promise.all(waitArr).then(data => {\n\t\t\t\treturn this.app.getService(\"grouping\").getTreeData(data[0], 0);\n\t\t\t})\n\t\t);\n\t\treturn this._tasks;\n\t}\n\t/**\n\t * Creates tasks collection\n\t * @returns {object} empty tasks Tree Collection\n\t */\n\tcreateTasks() {\n\t\tconst ops = this.app.getService(\"operations\");\n\t\tconst tasks = new webix.TreeCollection({\n\t\t\ton: {\n\t\t\t\t\"data->onStoreLoad\": () => {\n\t\t\t\t\tif (!this.app.config.scaleStart) this.updateScaleMinMax(tasks);\n\t\t\t\t\ttasks.data.each(d => {\n\t\t\t\t\t\tif (this.app.config.projects && d.$count) d.type = \"project\";\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t\"data->onStoreUpdated\": (id, obj, mode) => {\n\t\t\t\t\tid = mode == \"update\" ? id : null;\n\t\t\t\t\tthis.refreshTasks(id);\n\t\t\t\t\tthis.refreshLinks();\n\n\t\t\t\t\tif (!mode && this.state.criticalPath) {\n\t\t\t\t\t\tif (this.app.config.links)\n\t\t\t\t\t\t\tthis._links.waitData.then(() => this.showCriticalPath());\n\t\t\t\t\t\telse this.showCriticalPath();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tscheme: {\n\t\t\t\t$change: obj => {\n\t\t\t\t\tobj.start_date = webix.i18n.parseFormatDate(obj.start_date);\n\t\t\t\t\tobj.end_date = webix.i18n.parseFormatDate(obj.end_date);\n\t\t\t\t\tobj.type = obj.type || \"task\";\n\t\t\t\t\tif (!this.app.config.split && obj.type === \"split\") obj.type = \"task\";\n\n\t\t\t\t\tops.updateTaskDuration(obj);\n\n\t\t\t\t\tif (obj.planned_start) {\n\t\t\t\t\t\tobj.planned_start = webix.i18n.parseFormatDate(obj.planned_start);\n\t\t\t\t\t\tobj.planned_end = webix.i18n.parseFormatDate(obj.planned_end);\n\t\t\t\t\t\tops.updatePlannedTaskDuration(obj);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (obj.type === \"split\") {\n\t\t\t\t\t\tobj.open = obj.opened = 0;\n\t\t\t\t\t\tobj.$css = \"webix_gantt_split_task\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete obj.$css;\n\t\t\t\t\t\tobj.open = (obj.open || obj.opened) * 1 || 0;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t$sort: {\n\t\t\t\t\tby: \"position\",\n\t\t\t\t\tdir: \"asc\",\n\t\t\t\t\tas: \"int\",\n\t\t\t\t},\n\t\t\t\t$serialize: data => this.taskOut(data),\n\t\t\t\t$export: data => this.taskOut(data),\n\t\t\t},\n\t\t});\n\n\t\treturn tasks;\n\t}\n\t/**\n\t * Re-paints all tasks in chart or, if theID is provided, a specific task\n\t * @param {string|number} updID - (optional) the ID of the task\n\t * @param {number} i - the index of the task\n\t */\n\trefreshTasks(updID, i) {\n\t\t// console.log(\"[x] render tasks\");\n\t\tif (!updID) {\n\t\t\tthis._tasks.data.order.forEach((id, i) => {\n\t\t\t\tthis.refreshTasks(id, i);\n\t\t\t});\n\t\t} else {\n\t\t\tconst t = this._tasks.getItem(updID);\n\t\t\ti = !webix.isUndefined(i) ? i : this._tasks.getIndexById(updID);\n\t\t\t// type:\"split\" results in split kids missing in datastore.order\n\t\t\tif (i < 0) i = this._tasks.getIndexById(t.parent);\n\n\t\t\tif (t.type === \"split\") {\n\t\t\t\tt.$data = this._tasks\n\t\t\t\t\t.find(k => k.parent == t.id)\n\t\t\t\t\t.sort(\n\t\t\t\t\t\t(a, b) => b.start_date - a.start_date || b.end_date - a.end_date\n\t\t\t\t\t);\n\t\t\t}\n\t\t\tthis.Helpers.updateTask(t, i);\n\n\t\t\tif (this.state.baseline && t.planned_start) this.refreshBaseline(t, i);\n\t\t}\n\t}\n\n\t/**\n\t * Arranges task baseline\n\t * @param task {object} task object\n\t * @param i {number} task index\n\n\t */\n\trefreshBaseline(task, i) {\n\t\tconst t = { ...task };\n\t\tt.start_date = task.planned_start;\n\t\tt.duration = task.planned_duration;\n\t\tt.end_date = task.planned_end;\n\t\tthis.Helpers.updateTask(t, i, this._scales, this._taskHeight);\n\t\ttask.$x0 = t.$x;\n\t\ttask.$w0 = t.$w;\n\t}\n\n\t/**\n\t * Fills and returns links collection\n\t * @returns {object} links Data Collection\n\t */\n\tlinks(force) {\n\t\tif (this._links && !force) return this._links;\n\n\t\tif (!this._links) {\n\t\t\tthis._links = this.createLinks();\n\t\t} else {\n\t\t\tthis._links.clearAll();\n\t\t}\n\n\t\tif (this.app.config.links)\n\t\t\tthis._links.parse(this.app.getService(\"backend\").links());\n\t\treturn this._links;\n\t}\n\t/**\n\t * Creates and returns links collection\n\t * @returns {object} empty links Data Collection\n\t */\n\tcreateLinks() {\n\t\treturn new webix.DataCollection({\n\t\t\ton: {\n\t\t\t\t\"data->onStoreUpdated\": (id, v, mode) => {\n\t\t\t\t\t// do not refresh for initial data parsing\n\t\t\t\t\tif (mode) this.refreshLinks(id);\n\t\t\t\t},\n\t\t\t},\n\t\t\tscheme: {\n\t\t\t\t$init: obj => {\n\t\t\t\t\tobj.type = obj.type * 1;\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\t/**\n\t * Re-paints all links in chart\n\t * @param {(string|number)} id - (optional) the ID of a link\n\t */\n\trefreshLinks(id) {\n\t\tconst tasks = this.getVisibleTasksCollection();\n\t\tif (this._links && tasks) {\n\t\t\tthis._links.data.each(l => {\n\t\t\t\tconst s = tasks.getItem(l.source);\n\t\t\t\tconst e = tasks.getItem(l.target);\n\t\t\t\tif (!s || !e || !this._isTaskVisible(s) || !this._isTaskVisible(e))\n\t\t\t\t\tl.$p = \"\";\n\t\t\t\telse this.Helpers.updateLink(l, s, e);\n\t\t\t});\n\n\t\t\t// refresh the critical path if a link was added, updated or removed\n\t\t\tif (this.state.criticalPath && id) {\n\t\t\t\tthis.showCriticalPath();\n\t\t\t}\n\t\t}\n\t}\n\t/**\n\t * Returns all links of a particular type for the specified task\n\t * @param {string, number} id - task id\n\t * @param {type} type - link type, \"source\" or \"target\"\n\t * @returns {array} links array\n\t */\n\tgetLinks(id, type) {\n\t\tconst found = this._links.find(a => a[type] == id);\n\t\tconst res = [];\n\n\t\tfor (let i = 0; i < found.length; i++) {\n\t\t\tconst a = found[i];\n\t\t\tconst t = this._tasks.getItem(a[type == \"source\" ? \"target\" : \"source\"]);\n\t\t\tif (t)\n\t\t\t\tres.push({\n\t\t\t\t\tid: a.id,\n\t\t\t\t\ttype: a.type.toString(),\n\t\t\t\t\ttext: t.text,\n\t\t\t\t\tttype: type,\n\t\t\t\t});\n\t\t}\n\t\treturn res;\n\t}\n\n\t/**\n\t * Prepares task data object for serializing and export\n\t * @param {Object} data - incoming task data object\n\t * @returns {Object} - processed task data object\n\t */\n\ttaskOut(data) {\n\t\tdata = webix.copy(data);\n\n\t\tconst format = this.dateToLocalStr;\n\t\tif (data.start_date) data.start_date = format(data.start_date);\n\t\tif (data.end_date) data.end_date = format(data.end_date);\n\n\t\t// clean $-fields\n\t\tfor (let k in data) {\n\t\t\tif (k.indexOf(\"$\") === 0) delete data[k];\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * Checks whether the specified task is visible (all parents open)\n\t * @param {object} x - task object\n\t * @param {boolean} tcollection - if true, the method will return the main collection regardless of the current display mode\n\t * @returns {boolean} task visibility\n\t */\n\t_isTaskVisible(x, tcollection) {\n\t\t// display: \"resources\" case to hide projects\n\t\tconst tasks = this.getVisibleTasksCollection(tcollection);\n\n\t\tconst taskParent = x.$parent;\n\t\tconst taskSplit = x.type === \"split\" && !x.open;\n\n\t\tif (taskSplit && !taskParent) return false;\n\t\twhile (x.$parent) {\n\t\t\tx = tasks.getItem(x.$parent);\n\t\t\tif (\n\t\t\t\t!((taskParent == x.id && x.type == \"split\") || x.open) ||\n\t\t\t\t(x.open && taskSplit)\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Creates, fills and returns resource categories collection\n\t * @returns {object} categories Data Collection\n\t */\n\tcategories(force) {\n\t\tif (this._categories && !force) return this._categories;\n\t\tif (!this._categories) {\n\t\t\tthis._categories = new webix.DataCollection({});\n\t\t} else {\n\t\t\tthis._categories.clearAll();\n\t\t}\n\n\t\tthis._categories.parse(this.app.getService(\"backend\").categories());\n\t\treturn this._categories;\n\t}\n\n\t/**\n\t * Creates, fills and returns resource collection\n\t * @returns {object} resources Data Collection\n\t */\n\tresources(force) {\n\t\tif (this._resources && !force) return this._resources;\n\n\t\tif (!this._resources) {\n\t\t\tthis._resources = new webix.DataCollection({});\n\t\t} else {\n\t\t\tthis._resources.clearAll();\n\t\t}\n\n\t\tlet waitArr = [\n\t\t\tthis.app.getService(\"backend\").resources(),\n\t\t\tthis.categories(force).waitData,\n\t\t];\n\t\tif (this.app.config.resourceCalendars)\n\t\t\twaitArr.push(this.calendars(force).waitData);\n\n\t\tthis._resources.parse(\n\t\t\twebix.promise.all(waitArr).then(arr => {\n\t\t\t\tlet rData = arr[0];\n\t\t\t\trData.forEach(resource => {\n\t\t\t\t\tif (resource[\"category_id\"]) {\n\t\t\t\t\t\tconst ctg = this.categories().getItem(resource[\"category_id\"]);\n\t\t\t\t\t\tresource.category = ctg.name;\n\t\t\t\t\t\tif (!resource.unit && ctg.unit) resource.unit = ctg.unit;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\trData.sort(this.app.getService(\"operations\").sortResources);\n\t\t\t\treturn rData;\n\t\t\t})\n\t\t);\n\t\treturn this._resources;\n\t}\n\n\t/**\n\t * Creates, fills and returns resource-task relation collection\n\t * @returns {object} assignments Data Collection\n\t */\n\tassignments(force) {\n\t\tif (this._assignments && !force) return this._assignments;\n\n\t\tif (!this._assignments) {\n\t\t\tthis._assignments = new webix.DataCollection({});\n\t\t} else {\n\t\t\tthis._assignments.clearAll();\n\t\t}\n\n\t\tthis._assignments.parse(this.app.getService(\"backend\").assignments());\n\t\treturn this._assignments;\n\t}\n\n\t/**\n\t * Returns all resource assignments for the specified task\n\t * @param {string, number} id - a task id\n\t * @returns {array} an array of assignments extended with resource properties\n\t */\n\tgetAssignments(id) {\n\t\treturn webix.promise\n\t\t\t.all([this.resources().waitData, this.assignments().waitData])\n\t\t\t.then(() => {\n\t\t\t\tconst resources = this.resources();\n\t\t\t\tconst assigned = this.assignments().data.find(a => a.task == id);\n\t\t\t\treturn assigned.map(a => {\n\t\t\t\t\tlet aCopy = Object.assign({}, a);\n\t\t\t\t\tlet resource = Object.assign({}, resources.getItem(a.resource));\n\t\t\t\t\tdelete resource.id;\n\t\t\t\t\treturn Object.assign(aCopy, resource);\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\t/**\n\t * Fills and returns calendars collection for resources\n\t * @returns {object} calendars Data Collection\n\t */\n\tcalendars(force) {\n\t\tif (this._calendars && !force) return this._calendars;\n\n\t\tif (!this._calendars) {\n\t\t\tthis._calendars = this.createCalendars();\n\t\t} else {\n\t\t\tthis._calendars.clearAll();\n\t\t}\n\n\t\tthis._calendars.parse(this.app.getService(\"backend\").calendars());\n\t\treturn this._calendars;\n\t}\n\t/**\n\t * Creates calendars collection for resources\n\t * @returns {object} calendars Data Collection\n\t */\n\tcreateCalendars() {\n\t\treturn new webix.DataCollection({\n\t\t\tscheme: {\n\t\t\t\t$change: obj => {\n\t\t\t\t\tif (typeof obj.weekDays == \"string\")\n\t\t\t\t\t\tobj.weekDays = obj.weekDays.split(\",\").map(a => 1 * a);\n\t\t\t\t\tif (obj.holidays) {\n\t\t\t\t\t\tif (typeof obj.holidays == \"string\")\n\t\t\t\t\t\t\tobj.holidays = obj.holidays.split(\",\");\n\t\t\t\t\t\tobj.holidays = obj.holidays.map(d =>\n\t\t\t\t\t\t\twebix.Date.datePart(new Date(d))\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Marks all tasks as critical or not\n\t * @param {Boolean} clean - pass true if you want to remove existing critical path markers\n\t */\n\tshowCriticalPath(clean) {\n\t\tif (clean) {\n\t\t\tthis._tasks.data.order.forEach(id => {\n\t\t\t\tconst task = this._tasks.getItem(id);\n\t\t\t\tdelete task.$critical;\n\t\t\t});\n\t\t} else {\n\t\t\tconst all = this._tasks.data.getRange().sort((a, b) => {\n\t\t\t\treturn (\n\t\t\t\t\tb.end_date - a.end_date ||\n\t\t\t\t\t(a.parent == b.id ? 1 : b.parent == a.id ? -1 : 0) ||\n\t\t\t\t\tb.start_date - a.start_date\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tlet latestDate = webix.Date.copy(all[0].end_date);\n\t\t\tall.forEach(task => {\n\t\t\t\ttask.$critical = this.isTaskCritical(task, latestDate);\n\t\t\t});\n\t\t}\n\t\tthis._tasks.data.callEvent(\"onStoreUpdated\", [null, null, \"paint\"]);\n\t}\n\t/**\n\t * Decides if a task is a part of the critical path\n\t * @param {Object} task - task data\n\t * @param {Date} latestDate - the date by which all tasks end\n\t * @returns {Boolean}\n\t */\n\tisTaskCritical(task, latestDate) {\n\t\tif (latestDate && webix.Date.equal(latestDate, task.end_date)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tconst links = this._links.find(l => l.source == task.id && l.type == 0);\n\t\t\tfor (let i = 0; i < links.length; ++i) {\n\t\t\t\t// a task is critical if its end is linked to the start of a critical task\n\t\t\t\t// and there is no slack time between them\n\t\t\t\tconst dependent = this._tasks.getItem(links[i].target);\n\t\t\t\tif (\n\t\t\t\t\tdependent.$critical &&\n\t\t\t\t\tthis.isNoSlack(dependent.start_date, task.end_date, task.id)\n\t\t\t\t)\n\t\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (task.parent != 0) {\n\t\t\t\tconst parent = this._tasks.getItem(task.parent);\n\t\t\t\treturn parent.$critical && task.end_date >= parent.end_date;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Checks if there is slack between 2 linked tasks\n\t * @param {Date} nextStart - the start date of the next linked task\n\t * @param {Date} currentEnd - the end date of the currently checked task\n\t * @param {String} taskId - the id of the currently checked task (optional, resourceCalendar related)\n\t * @returns {Boolean} the result of the check; true if there is no slack\n\t */\n\tisNoSlack(nextStart, currentEnd, taskId) {\n\t\tif (this.app.config.excludeHolidays) {\n\t\t\tif (currentEnd >= nextStart) return true;\n\n\t\t\tfor (let date = webix.Date.copy(currentEnd); date < nextStart; ) {\n\t\t\t\tif (!this.isHoliday(date, taskId)) return false;\n\t\t\t\twebix.Date.add(date, 1, \"day\");\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn currentEnd >= nextStart;\n\t}\n\n\t/**\n\t * Decides if a link is a part of the critical path\n\t * @param {Object} link - the data object of a link\n\t * @returns {Boolean} the result of the check; true if the link connects critical tasks\n\t */\n\tisLinkCritical(link) {\n\t\tlet critical = false;\n\t\tif (link.type == 0) {\n\t\t\tconst tasks = this.tasks();\n\t\t\tconst s = tasks.getItem(link.source);\n\t\t\tconst t = tasks.getItem(link.target);\n\t\t\tcritical = s && t && s.$critical && t.$critical;\n\t\t}\n\t\treturn critical;\n\t}\n\n\t/**\n\t * Gets visible tasks collection\n\t * @param {boolean} tasks - if true, the method will return the main collection regardless of the current display mode\n\t * @returns {object} webix.TreeCollection\n\t */\n\tgetVisibleTasksCollection(tasks) {\n\t\tif (!tasks && this.state.display == \"resources\") {\n\t\t\tconst g = this.app.getService(\"grouping\");\n\t\t\treturn g ? g.getResourceTree() : null;\n\t\t}\n\t\treturn this._tasks;\n\t}\n\n\ttaskCalendarMap(now, force) {\n\t\tif (now) return this._calendarMap || null;\n\n\t\tif (!this._calendarMap) {\n\t\t\tthis.assignments().data.attachEvent(\"onStoreUpdated\", () => {\n\t\t\t\tthis.refreshCalendarMap();\n\t\t\t});\n\t\t\tthis.resources().data.attachEvent(\"onStoreUpdated\", () => {\n\t\t\t\tthis.refreshCalendarMap();\n\t\t\t});\n\t\t\tthis.calendars().data.attachEvent(\"onStoreUpdated\", () => {\n\t\t\t\tthis.refreshCalendarMap();\n\t\t\t});\n\t\t}\n\n\t\tconst waitArr = [\n\t\t\tthis.assignments(force).waitData,\n\t\t\tthis.resources(force).waitData,\n\t\t];\n\n\t\t// forced from resources\n\t\tif (!force) {\n\t\t\twaitArr.push(this.calendars().waitData);\n\t\t}\n\n\t\treturn webix.promise.all(waitArr).then(() => {\n\t\t\tif (!this._calendarMap) this.refreshCalendarMap();\n\t\t\treturn this._calendarMap;\n\t\t});\n\t}\n\trefreshCalendarMap() {\n\t\tconst resources = this.resources();\n\t\tconst calendars = this.calendars();\n\t\tlet data = {};\n\t\tthis.assignments().data.each(obj => {\n\t\t\tconst resource = resources.getItem(obj.resource);\n\t\t\tif (resource) {\n\t\t\t\tconst id = resource.calendar_id;\n\t\t\t\tconst cal = id ? calendars.getItem(id) : null;\n\t\t\t\tif (cal && !data[obj.task]) data[obj.task] = cal;\n\t\t\t}\n\t\t});\n\t\treturn (this._calendarMap = data);\n\t}\n\n\tgetTaskCalendar(taskId) {\n\t\tconst map = this.taskCalendarMap(true);\n\t\treturn map ? map[taskId] : null;\n\t}\n\tisHoliday(date, taskId) {\n\t\tif (taskId && this._calendarMap) {\n\t\t\tconst calendar = this._calendarMap[taskId];\n\t\t\tif (calendar) return this.Helpers.isResourceHoliday(date, calendar);\n\t\t}\n\t\treturn this.app.config.isHoliday(date);\n\t}\n\n\t/**\n\t * Clears all existing data collections; resets aggregated data, state, and scales\n\t */\n\tclearAll() {\n\t\tconst grouping = this.app.getService(\"grouping\");\n\t\tconst collections = [\n\t\t\t\"tasks\",\n\t\t\t\"links\",\n\t\t\t\"resources\",\n\t\t\t\"categories\",\n\t\t\t\"assignments\",\n\t\t\t\"calendars\",\n\t\t];\n\n\t\tthis.state.$batch({\n\t\t\tedit: null,\n\t\t\tselected: null,\n\t\t\tsort: null,\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t});\n\n\t\tif (this.app.config.resourcesDiagram) {\n\t\t\tconst rdCollection = grouping.getRDCollection();\n\t\t\trdCollection.clearAll();\n\t\t}\n\n\t\tif (this.app.config.resources) {\n\t\t\tconst rCollection = grouping.getResourceTree();\n\t\t\trCollection.clearAll();\n\t\t}\n\n\t\tcollections.forEach(name => {\n\t\t\tconst key = \"_\" + name;\n\t\t\tif (this[key]) this[key].clearAll();\n\t\t});\n\n\t\tthis.resetScales();\n\t}\n\n\t/**\n\t * Completely reloads data in the component; repaints application with new data\n\t */\n\treload() {\n\t\tthis.clearAll();\n\n\t\tconst grouping = this.app.getService(\"grouping\");\n\t\tconst collections = [\"tasks\", \"links\"];\n\t\tconst waitArr = [];\n\n\t\tif (this.app.config.resources && !this.app.config.resourceCalendars) {\n\t\t\tcollections.push(\"resources\", \"assignments\");\n\t\t}\n\n\t\tcollections.forEach(name => {\n\t\t\tconst collection = this[name](true);\n\t\t\twaitArr.push(collection.waitData);\n\t\t});\n\n\t\tif (this.app.config.resourcesDiagram) {\n\t\t\tgrouping.getRDCollection(true);\n\t\t}\n\n\t\twebix.promise.all(waitArr).then(() => {\n\t\t\tthis.app.refresh();\n\t\t});\n\t}\n\tupdateScaleMinMax(tasks) {\n\t\tlet min = Infinity;\n\t\tlet max = -Infinity;\n\t\ttasks.data.each(d => {\n\t\t\tif (d.start_date < min) min = d.start_date;\n\t\t\tif (d.end_date > max) max = d.end_date;\n\t\t\tif (this.state.baseline && d.planned_start && d.planned_end) {\n\t\t\t\tif (d.planned_start < min) min = d.planned_start;\n\t\t\t\tif (d.planned_end > max) max = d.planned_end;\n\t\t\t}\n\t\t});\n\t\tif (typeof min === \"object\") {\n\t\t\tconst s = this.getScales();\n\t\t\tthis.setScales(\n\t\t\t\tthis.Helpers.addUnit(s.minUnit, min, -1),\n\t\t\t\tthis.Helpers.addUnit(s.minUnit, max, 1),\n\t\t\t\ts.precise\n\t\t\t);\n\t\t}\n\t}\n}\n","export default class Backend {\n\t/**\n\t * @constructor\n\t * @param {App} app - Jet App instance\n\t * @param {string} url - server url\n\t */\n\tconstructor(app, url) {\n\t\tthis.app = app;\n\t\tthis._url = url;\n\t}\n\t/**\n\t * Returns absolute url based on relative one\n\t * @param {string} path - relative url\n\t * @returns {string} absolute url\n\t */\n\turl(path) {\n\t\treturn this._url + path;\n\t}\n\t/**\n\t * Loads tasks\n\t * @returns {promise} promise that resolves with tasks array\n\t */\n\ttasks() {\n\t\treturn webix.ajax(this.url(\"tasks\")).then(res => res.json());\n\t}\n\t/**\n\t * Loads links\n\t * @returns {promise} promise that resolves with links array\n\t */\n\tlinks() {\n\t\treturn webix.ajax(this.url(\"links\")).then(res => res.json());\n\t}\n\t/**\n\t * Loads resources\n\t * @returns {promise} promise that resolves with resources array\n\t */\n\tresources() {\n\t\treturn webix.ajax(this.url(\"resources\")).then(res => res.json());\n\t}\n\t/**\n\t * Loads resource categories\n\t * @returns {promise} promise that resolves with categories data\n\t */\n\tcategories() {\n\t\treturn webix.ajax(this.url(\"categories\")).then(res => res.json());\n\t}\n\t/**\n\t * Loads task-resource data\n\t * @returns {promise} promise that resolves with array of task-resource assignments\n\t */\n\tassignments() {\n\t\treturn webix.ajax(this.url(\"assignments\")).then(res => res.json());\n\t}\n\t/**\n\t * Returns calendars collection for resources\n\t * @returns {object} calendars Data Collection\n\t */\n\tcalendars() {\n\t\treturn webix.ajax(this.url(\"calendars\")).then(res => res.json());\n\t}\n\t/**\n\t * Adds task\n\t * @param {object} obj - object with task fields\n\t * @param {string} mode - the relative position of the new task in a branch: \"first\", \"last\", \"after\"\n\t * @param {(string|number)} parent - parent task id, can be \"0\" for root\n\t * @returns {promise} promise that resolves with server response\n\t */\n\taddTask(obj, mode, parent) {\n\t\tconst inProgress = webix\n\t\t\t.ajax()\n\t\t\t.post(this.url(\"tasks\"), { ...obj, mode, parent })\n\t\t\t.then(res => res.json());\n\t\tthis.app.callEvent(\"backend:operation\", [inProgress]);\n\t\treturn inProgress;\n\t}\n\t/**\n\t * Removes task\n\t * @param {string, number} id - task id\n\t * @returns {promise} promise that resolves with server response\n\t */\n\tremoveTask(id) {\n\t\tconst inProgress = webix\n\t\t\t.ajax()\n\t\t\t.del(this.url(\"tasks/\" + id))\n\t\t\t.then(res => res.json());\n\t\tthis.app.callEvent(\"backend:operation\", [inProgress]);\n\t\treturn inProgress;\n\t}\n\t/**\n\t * Updates task\n\t * @param {(string|number)} id - task id\n\t * @param {Object} obj - object with task fields\n\t * @param {Boolean} split - flag that indicates that this is a splitting of a task\n\t * @returns {Promise} promise that resolves with with server response\n\t */\n\tupdateTask(id, obj, split) {\n\t\tconst inProgress = webix\n\t\t\t.ajax()\n\t\t\t.put(this.url(\"tasks/\" + id + (split ? \"/split\" : \"\")), obj)\n\t\t\t.then(res => res.json());\n\t\tthis.app.callEvent(\"backend:operation\", [inProgress]);\n\t\treturn inProgress;\n\t}\n\n\t/**\n\t * Changes order of tasks\n\t * @param {(string|number)} id - task id\n\t * @param {Object} obj - task position\n\t * @returns {Promise} promise that resolves with with server response\n\t */\n\treorderTask(id, obj) {\n\t\tconst inProgress = webix\n\t\t\t.ajax()\n\t\t\t.put(this.url(\"tasks/\" + id + \"/position\"), obj)\n\t\t\t.then(res => res.json());\n\t\tthis.app.callEvent(\"backend:operation\", [inProgress]);\n\t\treturn inProgress;\n\t}\n\t/**\n\t * Adds link\n\t * @param {object} obj - object with link fields\n\t * @returns {promise} promise that resolves with server response\n\t */\n\taddLink(obj) {\n\t\tconst inProgress = webix\n\t\t\t.ajax()\n\t\t\t.post(this.url(\"links\"), obj)\n\t\t\t.then(res => res.json());\n\t\tthis.app.callEvent(\"backend:operation\", [inProgress]);\n\t\treturn inProgress;\n\t}\n\t/**\n\t * Updates link\n\t * @param {string, number} id - link id\n\t * @param {object} obj - object with link fields\n\t * @returns {promise} promise that resolves with with server response\n\t */\n\tupdateLink(id, obj) {\n\t\tconst inProgress = webix\n\t\t\t.ajax()\n\t\t\t.put(this.url(\"links/\" + id), obj)\n\t\t\t.then(res => res.json());\n\t\tthis.app.callEvent(\"backend:operation\", [inProgress]);\n\t\treturn inProgress;\n\t}\n\t/**\n\t * Removes link\n\t * @param {string, number} id - task id\n\t * @returns {promise} promise that resolves with server response\n\t */\n\tremoveLink(id) {\n\t\tconst inProgress = webix\n\t\t\t.ajax()\n\t\t\t.del(this.url(\"links/\" + id))\n\t\t\t.then(res => res.json());\n\t\tthis.app.callEvent(\"backend:operation\", [inProgress]);\n\t\treturn inProgress;\n\t}\n\t/**\n\t * Adds a new resource assignment to a task\n\t * @param {object} obj - an object with \"task\", \"resource\" and \"value\" fields\n\t * @returns {promise} a promise that is resolved with an object of a resource task\n\t */\n\taddAssignment(obj) {\n\t\tconst inProgress = webix\n\t\t\t.ajax()\n\t\t\t.post(this.url(\"assignments\"), obj)\n\t\t\t.then(res => res.json());\n\t\tthis.app.callEvent(\"backend:operation\", [inProgress]);\n\t\treturn inProgress;\n\t}\n\t/**\n\t * Updates resource assignment\n\t * @param {string, number} id -  an id of a task resource record\n\t * @param {object} obj - an object with record fields\n\t * @returns {promise} a promise that is resolved with server response\n\t */\n\tupdateAssignment(id, obj) {\n\t\tconst inProgress = webix\n\t\t\t.ajax()\n\t\t\t.put(this.url(\"assignments/\" + id), obj)\n\t\t\t.then(res => res.json());\n\t\tthis.app.callEvent(\"backend:operation\", [inProgress]);\n\t\treturn inProgress;\n\t}\n\t/**\n\t * Removes resource assignment\n\t * @param {string, number} id - an id of an assignment record\n\t * @returns {promise} a promise that is resolved with server response\n\t */\n\tremoveAssignment(id) {\n\t\tconst inProgress = webix\n\t\t\t.ajax()\n\t\t\t.del(this.url(\"assignments/\" + id))\n\t\t\t.then(res => res.json());\n\t\tthis.app.callEvent(\"backend:operation\", [inProgress]);\n\t\treturn inProgress;\n\t}\n}\n","export default class Operations {\n\t/**\n\t * @constructor\n\t * @param {App} app - Jet App instance\n\t */\n\tconstructor(app) {\n\t\tthis.app = app;\n\t\tthis._local = this.app.getService(\"local\");\n\t\tthis._helpers = this.app.getService(\"helpers\");\n\t\tthis._back = this.app.getService(\"backend\");\n\t\tthis._state = this.app.getState();\n\t}\n\t/**\n\t * Adds task\n\t * @param {object} obj - object with task fields\n\t * @param {number} index - index within a parent branch, 0 or -1\n\t * @param {string, number} parent - parent task id, can be \"0\" for root\n\t * @param {string} mode - (optional) name of the change, \"move\", \"start\", \"end\" or \"duration\"\n\t * @returns {promise} promise that resolves with task object\n\t */\n\taddTask(obj, index, parent, mode) {\n\t\tthis.updateTaskDuration(obj, mode);\n\t\tif (obj.planned_start) this.updatePlannedTaskDuration(obj, mode);\n\n\t\tconst addMode = index == 0 ? \"first\" : \"last\";\n\t\treturn this._back\n\t\t\t.addTask(this.cleanData(obj), addMode, parent)\n\t\t\t.then(added => {\n\t\t\t\tthis._local.adjustScale(obj);\n\n\t\t\t\tconst tasks = this._local.tasks();\n\t\t\t\ttasks.add({ ...obj, id: added.id, parent }, index, parent);\n\n\t\t\t\treturn this.completeAdd(parent, added);\n\t\t\t});\n\t}\n\n\t/**\n\t * Splits a task via dnd (adds a subtask that will be rendered in the same line)\n\t * @param {Object} obj - data of a new subtask\n\t * @param {number} index - the index of a new subtask\n\t * @param {(string|number)} parent - the ID of the parent task\n\t * @param {Object} row - data of the parent task\n\t * @returns {Promise<Object>} a promise that resolves with server response (object like {id:\"some\", sibling:\"some\"} with task ids)\n\t */\n\tsplitTaskWithDnd(obj, index, parent, row) {\n\t\tthis.updateTaskDuration(obj);\n\t\treturn this._back\n\t\t\t.updateTask(parent, { ...obj, position: index, parent }, true)\n\t\t\t.then(res => {\n\t\t\t\tthis._local.adjustScale(obj);\n\n\t\t\t\tconst tasks = this._local.tasks();\n\t\t\t\ttasks.updateItem(parent, {\n\t\t\t\t\ttype: \"split\",\n\t\t\t\t\tduration: row.duration || 1,\n\t\t\t\t\tprogress: row.progress || 0,\n\t\t\t\t});\n\t\t\t\tif (\n\t\t\t\t\t(res.sibling && res.sibling != 0) ||\n\t\t\t\t\t!tasks.find(t => t.parent == parent, true)\n\t\t\t\t) {\n\t\t\t\t\ttasks.add(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...row,\n\t\t\t\t\t\t\ttype: \"task\",\n\t\t\t\t\t\t\tparent,\n\t\t\t\t\t\t\tid: res.sibling,\n\t\t\t\t\t\t\tduration: row.duration || 1,\n\t\t\t\t\t\t\tprogress: row.progress || 0,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tparent\n\t\t\t\t\t);\n\t\t\t\t\t++index;\n\t\t\t\t}\n\n\t\t\t\ttasks.add(\n\t\t\t\t\t{ ...obj, id: res.id, parent, position: index },\n\t\t\t\t\tindex,\n\t\t\t\t\tparent\n\t\t\t\t);\n\n\t\t\t\treturn this.completeAdd(parent, res, res.sibling);\n\t\t\t});\n\t}\n\n\t/**\n\t * Runs some common logic for add and split operations (see comments inside the method)\n\t * @param {(string|number)} parent - the ID of a parent task\n\t * @param {Object} added - server response (object like {id:\"some\", sibling:\"some\"} with task ids, sib;ing is optional)\n\t * @param {id} sibling - (optional) the ID of a first sibling added to split task that was ordinary before splitting\n\t * @returns {Promise<Object>} a promise that resolves with server response (object like {id:\"some\", sibling:\"some\"} with task ids)\n\t */\n\tcompleteAdd(parent, added, sibling) {\n\t\tif (parent) {\n\t\t\treturn this.syncProject(parent).then(() => {\n\t\t\t\t// critical path update\n\t\t\t\tif (this._state.criticalPath) this._local.showCriticalPath();\n\n\t\t\t\tif (sibling) added.sibling = sibling;\n\t\t\t\treturn added;\n\t\t\t});\n\t\t} else return webix.promise.resolve(added);\n\t}\n\n\t/**\n\t * Updates task\n\t * @param {string, number} id - task id\n\t * @param {object} obj - object with task fields\n\t * @param {string} mode - (optional) name of the change, \"move\", \"start\", \"end\" or \"duration\"\n\t * @param {boolean} inner - (optional) flag to mark inner logic call\n\t * @returns {promise} promise that resolves with task fields\n\t */\n\tupdateTask(id, obj, mode, inner) {\n\t\tconst tasks = this._local.tasks();\n\t\tconst item = webix.copy(tasks.getItem(id));\n\t\tconst next = { ...item, ...obj };\n\n\t\tlet updateDates = !(\n\t\t\twebix.Date.equal(item.start_date, next.start_date) &&\n\t\t\twebix.Date.equal(item.end_date, next.end_date)\n\t\t);\n\t\tif (updateDates) {\n\t\t\tthis.updateTaskDuration(next, mode);\n\t\t}\n\t\tconst updatePlanned =\n\t\t\tnext.planned_start &&\n\t\t\t!(\n\t\t\t\twebix.Date.equal(item.planned_start, next.planned_start) &&\n\t\t\t\twebix.Date.equal(item.planned_end, next.planned_end)\n\t\t\t);\n\t\tif (updatePlanned) this.updatePlannedTaskDuration(next, mode);\n\n\t\tif (!inner && next.type == \"project\" && item.type != \"project\")\n\t\t\treturn this.syncProject(id, next);\n\n\t\treturn this._back.updateTask(id, this.cleanData(next)).then(() => {\n\t\t\t// scale must be updated before the task\n\t\t\tconst { start, end } = this._local.getScales();\n\t\t\tif (\n\t\t\t\tstart > next.start_date ||\n\t\t\t\tend < next.end_date ||\n\t\t\t\t(updatePlanned &&\n\t\t\t\t\t(start > next.planned_start || end < next.planned_end))\n\t\t\t)\n\t\t\t\tthis._local.adjustScale(next);\n\n\t\t\ttasks.updateItem(id, next);\n\n\t\t\tif (next.type != \"task\" && item.type == \"task\")\n\t\t\t\tthis.removeAssignments(next);\n\n\t\t\t//update dependent project or tasks\n\t\t\tif (\n\t\t\t\t!inner &&\n\t\t\t\t(updateDates ||\n\t\t\t\t\titem.progress != next.progress ||\n\t\t\t\t\titem.parent != next.parent)\n\t\t\t) {\n\t\t\t\tlet res;\n\t\t\t\tif (item.$count && item.type == \"project\")\n\t\t\t\t\tres = this.syncTasks(id, item.start_date, next.start_date).then(\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\treturn this.syncProject(item.parent);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\telse {\n\t\t\t\t\tif (item.parent != next.parent) {\n\t\t\t\t\t\tres = webix.promise.all([\n\t\t\t\t\t\t\tthis.syncProject(next.parent),\n\t\t\t\t\t\t\tthis.syncProject(item.parent),\n\t\t\t\t\t\t]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tres = this.syncProject(next.parent);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// critical path update\n\t\t\t\tres.then(() => {\n\t\t\t\t\tif (this._state.criticalPath) {\n\t\t\t\t\t\ttasks.updateItem(id, { $critical: false });\n\t\t\t\t\t\tthis._local.showCriticalPath();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn next;\n\t\t});\n\t}\n\n\t/**\n\t * Normalizes task end_date and duration correspondence\n\t * @param {Object} task - a task\n\t * @param {string} mode - type of date data operation: \"move\", \"start\", \"end\", \"duration\", undefined\n\t */\n\tupdateTaskDuration(task, mode) {\n\t\tif (this.app.config.excludeHolidays) {\n\t\t\tlet dir;\n\t\t\tif (mode) {\n\t\t\t\tmode = mode == \"move\" ? \"start\" : mode;\n\t\t\t\tconst old = this._local.tasks().getItem(task.id);\n\t\t\t\tconst field =\n\t\t\t\t\tmode + (mode === \"start\" || mode === \"end\" ? \"_date\" : \"\");\n\t\t\t\tdir = old[field] > task[field] ? -1 : 1;\n\t\t\t\tif (mode != \"start\") mode = \"end\";\n\t\t\t}\n\t\t\tlet scales = webix.copy(this._local.getScales());\n\t\t\tscales.isHoliday = date => {\n\t\t\t\treturn this._local.isHoliday(date, task.id);\n\t\t\t};\n\t\t\tthis._helpers.updateTaskDuration(task, scales, mode, dir);\n\t\t} else this._helpers.updateTaskDuration(task);\n\t}\n\n\tupdatePlannedTaskDuration(task, mode) {\n\t\tif (this.app.config.excludeHolidays) {\n\t\t\tlet dir;\n\t\t\tif (mode) {\n\t\t\t\tconst old = this._local.tasks().getItem(task.id);\n\t\t\t\tconst field = \"planned_\" + mode;\n\t\t\t\tdir = old[field] > task[field] ? -1 : 1;\n\t\t\t}\n\t\t\tlet scales = webix.copy(this._local.getScales());\n\t\t\tscales.isHoliday = date => {\n\t\t\t\treturn this._local.isHoliday(date, task.id);\n\t\t\t};\n\t\t\tthis._updatePlannedTaskDuration(task, scales, mode, dir);\n\t\t} else this._updatePlannedTaskDuration(task);\n\t}\n\t_updatePlannedTaskDuration(task, scales, mode, dir) {\n\t\tconst t = { ...task };\n\t\tt.start_date = task.planned_start;\n\t\tt.duration = task.planned_duration;\n\t\tt.end_date = task.planned_end;\n\t\tthis._helpers.updateTaskDuration(t, scales, mode, dir);\n\t\ttask.planned_start = t.start_date;\n\t\ttask.planned_end = t.end_date;\n\t\ttask.planned_duration = t.duration;\n\t}\n\n\t/**\n\t * Updates related tasks when project start changes\n\t * @param {string, number} id - project id\n\t * @param {Date} old - old start date\n\t * @param {Date} change - current start date\n\t */\n\tsyncTasks(id, old, change) {\n\t\tlet diff = change - old;\n\n\t\tif (this.app.config.excludeHolidays)\n\t\t\tdiff = this.getWorkDateDiff(diff, old, id);\n\n\t\tif (diff) {\n\t\t\tconst p = [];\n\t\t\tthis._local.tasks().data.eachSubItem(id, kid => {\n\t\t\t\tlet newDate = kid.start_date.valueOf() + diff;\n\t\t\t\tif (this.app.config.excludeHolidays) {\n\t\t\t\t\tconst delta =\n\t\t\t\t\t\tdiff - this.getWorkDateDiff(diff, kid.start_date, kid.id);\n\t\t\t\t\tif (delta) newDate = newDate + delta;\n\t\t\t\t}\n\n\t\t\t\tconst changedKid = {\n\t\t\t\t\t...kid,\n\t\t\t\t\tstart_date: new Date(newDate),\n\t\t\t\t\tend_date: null,\n\t\t\t\t};\n\n\t\t\t\tp.push(this.updateTask(kid.id, changedKid, \"move\", true));\n\t\t\t});\n\t\t\treturn webix.promise.all(p);\n\t\t}\n\n\t\treturn webix.promise.resolve();\n\t}\n\t/**\n\t * Extracts working days from date difference\n\t * @param {number} diff - difference in days, milliseconds\n\t * @param {Date} old - the original date\n\t * @param {string} taskId - a task id (optional, resourceCalendars related)\n\t * @returns {number} difference in working days in milliseconds\n\t */\n\tgetWorkDateDiff(diff, old, taskId) {\n\t\tconst dir = Math.sign(diff);\n\t\tconst dayLen = 86400000;\n\t\tconst ad = dir * Math.floor(diff / dayLen);\n\t\tfor (let i = 0, date = old; i < ad; ++i) {\n\t\t\twebix.Date.add(date, dir, \"day\");\n\t\t\tif (this._local.isHoliday(date, taskId)) diff = diff - dir * dayLen;\n\t\t}\n\t\treturn diff;\n\t}\n\n\t/**\n\t * Updates related project when task start or end date changes\n\t * @param {string, number} id - task id\n\t * @param {object} item - task object, if it is converted to project\n\t * @returns {Promise}\n\t */\n\tsyncProject(id, item) {\n\t\tconst tasks = this._local.tasks();\n\n\t\tif (!item) {\n\t\t\titem = tasks.getItem(id);\n\t\t\tif (this.app.config.projects && item && item.type != \"split\") {\n\t\t\t\titem.type = item.$count ? \"project\" : \"task\";\n\t\t\t\tthis.removeAssignments(item);\n\t\t\t} else {\n\t\t\t\twhile (item && item.type != \"project\") {\n\t\t\t\t\tid = tasks.getParentId(id);\n\t\t\t\t\titem = tasks.getItem(id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (item && item.$count) {\n\t\t\titem = this.setProjectData(item);\n\t\t}\n\t\tif (item) {\n\t\t\treturn this.updateTask(id, item, \"start\", true).then(() => {\n\t\t\t\tthis.syncProject(item.parent);\n\t\t\t\treturn item;\n\t\t\t});\n\t\t} else return webix.promise.resolve();\n\t}\n\t/**\n\t * Updates project with task-dependent data taken from tasks collection or an array of child items\n\t * @param {object} item - a project object\n\t * @param {Object} tasks collection (optional, local.tasks() by default)\n\t * @param {array} branch - an array of child items of a project (optional)\n\t */\n\tsetProjectData(item, tasks, branch) {\n\t\tif (!branch) item = webix.copy(item);\n\t\tlet min = Infinity,\n\t\t\tmax = 0,\n\t\t\tprogress = 0,\n\t\t\tduration = 0;\n\n\t\tconst handler = kid => {\n\t\t\tmin = kid.start_date < min ? kid.start_date : min;\n\t\t\tmax = kid.end_date > max ? kid.end_date : max;\n\t\t\tif (kid.duration && !(kid.type == \"project\" && kid.$count)) {\n\t\t\t\tprogress += kid.duration * kid.progress;\n\t\t\t\tduration += kid.duration * 1;\n\t\t\t}\n\t\t};\n\n\t\tif (branch) branch.forEach(handler);\n\t\telse {\n\t\t\tconst collection = tasks || this._local.tasks();\n\t\t\tcollection.data.eachSubItem(item.id, handler);\n\t\t}\n\n\t\tif (!webix.Date.equal(item.start_date, min)) {\n\t\t\titem.start_date = min;\n\t\t\titem.duration = null;\n\t\t}\n\t\tif (!webix.Date.equal(item.end_date, max)) {\n\t\t\titem.end_date = max;\n\t\t\titem.duration = null;\n\t\t}\n\t\titem.progress = progress ? Math.round(progress / duration) : progress;\n\t\treturn item;\n\t}\n\t/**\n\t * Updates task time after drag-n-drop\n\t * @param {string, number} id - task id\n\t * @param {string} mode - type of change: \"start\", \"end\" or \"move\"\n\t * @param {number} time - number of units by which task was shifted, can be negative\n\t * @returns {promise} promise that resolves with change object\n\t */\n\tupdateTaskTime(id, mode, time) {\n\t\tconst tasks = this._local.tasks();\n\t\tconst task = tasks.getItem(id);\n\n\t\tconst obj = {};\n\t\tconst s = this._local.getScales();\n\n\t\tconst unit = s.precise\n\t\t\t? this._helpers.getSmallerUnit(s.minUnit)\n\t\t\t: s.minUnit;\n\t\tif (mode === \"start\" || mode === \"move\") {\n\t\t\tconst offsetDate = s.precise\n\t\t\t\t? task.start_date\n\t\t\t\t: this._helpers.getUnitStart(unit, task.start_date);\n\t\t\tobj.start_date = this._helpers.addUnit(unit, offsetDate, time);\n\t\t\tif (mode === \"start\" && obj.start_date > task.end_date)\n\t\t\t\tobj.start_date = this._helpers.addUnit(unit, task.end_date, -1);\n\t\t} else if (mode === \"end\") {\n\t\t\tconst us = this._helpers.getUnitStart(unit, task.end_date);\n\t\t\tconst offsetDate =\n\t\t\t\ts.precise || webix.Date.equal(us, task.end_date)\n\t\t\t\t\t? task.end_date\n\t\t\t\t\t: this._helpers.addUnit(unit, us, 1);\n\t\t\tobj.end_date = this._helpers.addUnit(unit, offsetDate, time);\n\n\t\t\tif (obj.end_date < task.start_date)\n\t\t\t\tobj.end_date = this._helpers.addUnit(unit, task.start_date, 1);\n\t\t}\n\n\t\tif (mode === \"move\") obj.end_date = null;\n\t\telse obj.duration = 0;\n\n\t\treturn this.updateTask(id, obj, mode);\n\t}\n\t/**\n\t * Removes task\n\t * @param {string, number} id - task id\n\t * @returns {promise} promise that resolves with server response\n\t */\n\tremoveTask(id) {\n\t\tconst tasks = this._local.tasks();\n\t\tconst links = this._local.links();\n\n\t\t// [FIXME] - multiple redraw calls\n\t\tconst toRemove = links.find(a => a.source == id || a.target == id);\n\t\ttoRemove.forEach(a => links.remove(a.id));\n\n\t\treturn this._back.removeTask(id).then(res => {\n\t\t\tconst parent = tasks.getItem(id).parent;\n\t\t\ttasks.remove(id);\n\n\t\t\tif (\n\t\t\t\tthis.app.config.split &&\n\t\t\t\tparent != 0 &&\n\t\t\t\ttasks.getItem(parent).type === \"split\" &&\n\t\t\t\t!tasks.find(k => k.parent == parent, true)\n\t\t\t) {\n\t\t\t\treturn this.updateTask(parent, { type: \"task\" }).then(() => {\n\t\t\t\t\treturn this.completeRemoval(res, parent);\n\t\t\t\t});\n\t\t\t} else return this.completeRemoval(res, parent);\n\t\t});\n\t}\n\t/**\n\t * Synchronizes project and updates critical path after a task is removed\n\t * @param {Object} res - server response\n\t * @param {(string|number)} parent - the ID of a parent task\n\t * @returns {promise} promise that resolves with server response\n\t */\n\tcompleteRemoval(res, parent) {\n\t\treturn this.syncProject(parent).then(() => {\n\t\t\tif (this._state.criticalPath) this._local.showCriticalPath();\n\t\t\treturn res;\n\t\t});\n\t}\n\t/**\n\t * Adds a link\n\t * @param {object} obj - object with link fields\n\t * @returns {promise} promise that resolves with link object\n\t */\n\taddLink(obj) {\n\t\tif (!this.linkExists(obj)) {\n\t\t\treturn this._back.addLink(obj).then(added => {\n\t\t\t\tobj.id = added.id;\n\t\t\t\tthis._local.links().add(obj);\n\t\t\t\treturn obj;\n\t\t\t});\n\t\t}\n\t\treturn webix.promise.reject();\n\t}\n\n\t/**\n\t * Checks if two tasks are already connected by a link of the same type\n\t * @param {Object} obj - the data object of a link\n\t * @returns {Object, null} - the data object of the link that was found; null if nothing was found\n\t */\n\tlinkExists(obj) {\n\t\treturn this._local.links().find(l => {\n\t\t\treturn (\n\t\t\t\tl.target == obj.target && l.source == obj.source && l.type == obj.type\n\t\t\t);\n\t\t}, true);\n\t}\n\n\t/**\n\t * Updates a link\n\t * @param {string, number} id - link id\n\t * @param {object} obj - object with link fields\n\t * @returns {promise} promise that resolves with server response\n\t */\n\tupdateLink(id, obj) {\n\t\treturn this._back.updateLink(id, obj).then(res => {\n\t\t\tconst links = this._local.links();\n\t\t\tconst duplicate = this.linkExists({ ...links.getItem(id), ...obj });\n\t\t\tlinks.updateItem(id, obj);\n\t\t\tif (duplicate) {\n\t\t\t\treturn this.removeLink(duplicate.id).then(() => res);\n\t\t\t} else return res;\n\t\t});\n\t}\n\t/**\n\t * Removes link\n\t * @param {string, number} id - link id\n\t * @returns {promise} promise that resolves with server response\n\t */\n\tremoveLink(id) {\n\t\treturn this._back.removeLink(id).then(res => {\n\t\t\tthis._local.links().remove(id);\n\t\t\treturn res;\n\t\t});\n\t}\n\t/**\n\t * Moves the task to a new position within the task tree\n\t * @param {string, number} id - the ID of the task\n\t * @param {string, number} parent - the ID of the parent/branch (0 for root)\n\t * @param {number} index - the position within the target branch or root (starting from 0)\n\t * @returns {Promise} - the promise of data operation\n\t */\n\tmoveTask(id, parent, index) {\n\t\tparent = parent || 0;\n\n\t\tconst tasks = this._local.tasks();\n\t\tconst branch = tasks.data.branch[parent];\n\t\tconst oldParent = tasks.getItem(id).parent;\n\t\tconst oldIndex = tasks.data.getBranchIndex(id);\n\t\tif (\n\t\t\tparent == oldParent &&\n\t\t\t(index === oldIndex || (index === -1 && id === branch[branch.length - 1]))\n\t\t)\n\t\t\treturn webix.promise.reject();\n\n\t\ttasks.move(id, index, null, { parent });\n\n\t\treturn this._back\n\t\t\t.reorderTask(id, {\n\t\t\t\tparent,\n\t\t\t\tmode: index === 0 ? \"first\" : index === -1 ? \"last\" : \"after\",\n\t\t\t\ttarget: tasks.data.branch[parent][index - 1],\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (parent !== oldParent) {\n\t\t\t\t\ttasks.updateItem(id, { parent });\n\n\t\t\t\t\treturn webix.promise\n\t\t\t\t\t\t.all([this.syncProject(parent), this.syncProject(oldParent)])\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tif (this._state.criticalPath) this._local.showCriticalPath();\n\t\t\t\t\t\t\treturn res;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t});\n\t}\n\t/**\n\t * Updates a resource assignment\n\t * @param {string, number} id -  an id of a resource assignment\n\t * @param {object} obj - an object with updated fields\n\t * @returns {promise} a promise that is resolved with server response\n\t */\n\tupdateAssignment(id, obj) {\n\t\treturn this._back.updateAssignment(id, obj).then(res => {\n\t\t\tthis._local.assignments().updateItem(id, obj);\n\t\t\treturn res;\n\t\t});\n\t}\n\t/**\n\t * Assigns a resource assignment to a task\n\t * @param {object} obj - an object with \"task\", \"resource\" and \"value\" fields\n\t * @returns {promise} a promise that is resolved with an object of a resource assignment\n\t */\n\taddAssignment(obj) {\n\t\treturn this._back.addAssignment(obj).then(added => {\n\t\t\tobj.id = added.id;\n\t\t\tthis._local.assignments().add(obj);\n\t\t\treturn obj;\n\t\t});\n\t}\n\t/**\n\t * Removes a resource assignment\n\t * @param {string, number} id - an id of a resource assignment\n\t * @returns {promise} promise that resolves with server response\n\t */\n\tremoveAssignment(id) {\n\t\treturn this._back.removeAssignment(id).then(res => {\n\t\t\tthis._local.assignments().remove(id);\n\t\t\treturn res;\n\t\t});\n\t}\n\n\t/**\n\t * Sorts resources\n\t * @param {object} a - a resource to compare\n\t * @param {object} b - a resource to compare\n\t * @returns {number}\n\t */\n\tsortResources(a, b) {\n\t\tif (a.category == b.category) return a.name > b.name ? 1 : -1;\n\t\treturn a.category > b.category ? 1 : -1;\n\t}\n\n\t/**\n\t * Removes all assignments (if any) from a task\n\t * @param {object} task - task object\n\t * @returns {Promise}\n\t */\n\tremoveAssignments(task) {\n\t\tif (this.app.config.resources) {\n\t\t\tconst collection = this._local.assignments();\n\t\t\tlet waitArr = [];\n\t\t\treturn collection.waitData.then(() => {\n\t\t\t\tcollection.data.each(item => {\n\t\t\t\t\tif (item.task == task.id)\n\t\t\t\t\t\twaitArr.push(this.removeAssignment(item.id));\n\t\t\t\t});\n\t\t\t\tif (waitArr.length) return webix.promise.all(waitArr);\n\t\t\t\treturn webix.promise.resolve(false);\n\t\t\t});\n\t\t}\n\t\treturn webix.promise.resolve(false);\n\t}\n\n\t/**\n\t * Cleans task data from all $-fields, they are functional and locally used and should not be sent to backend\n\t * */\n\tcleanData(obj) {\n\t\tconst res = {};\n\t\tfor (let key in obj) {\n\t\t\tif (key.indexOf(\"$\") !== 0) res[key] = obj[key];\n\t\t}\n\t\treturn res;\n\t}\n\n\tupdateAssignedTaskDates(task) {\n\t\tconst obj = webix.copy(task);\n\t\tthis.updateTaskDuration(obj);\n\t\tconst updateDates = !(\n\t\t\twebix.Date.equal(task.start_date, obj.start_date) &&\n\t\t\twebix.Date.equal(task.end_date, obj.end_date)\n\t\t);\n\t\tif (updateDates) this.updateTask(task.id, obj, null, true);\n\t}\n}\n","function toInteger(dirtyNumber) {\n  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n    return NaN;\n  }\n\n  var number = Number(dirtyNumber);\n\n  if (isNaN(number)) {\n    return number;\n  }\n\n  return number < 0 ? Math.ceil(number) : Math.floor(number);\n}\n\nfunction requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');\n  }\n}\n\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @param {Date|Number} argument - the value to convert\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\n\nfunction toDate(argument) {\n  requiredArgs(1, arguments);\n  var argStr = Object.prototype.toString.call(argument); // Clone the date\n\n  if (argument instanceof Date || typeof argument === 'object' && argStr === '[object Date]') {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime());\n  } else if (typeof argument === 'number' || argStr === '[object Number]') {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule\"); // eslint-disable-next-line no-console\n\n      console.warn(new Error().stack);\n    }\n\n    return new Date(NaN);\n  }\n}\n\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of days to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} - the new date with the days added\n * @throws {TypeError} - 2 arguments required\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\n\nfunction addDays(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var amount = toInteger(dirtyAmount);\n\n  if (isNaN(amount)) {\n    return new Date(NaN);\n  }\n\n  if (!amount) {\n    // If 0 days, no-op to avoid changing times in the hour before end of DST\n    return date;\n  }\n\n  date.setDate(date.getDate() + amount);\n  return date;\n}\n\n/**\n * @name addMonths\n * @category Month Helpers\n * @summary Add the specified number of months to the given date.\n *\n * @description\n * Add the specified number of months to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of months to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the months added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 5 months to 1 September 2014:\n * const result = addMonths(new Date(2014, 8, 1), 5)\n * //=> Sun Feb 01 2015 00:00:00\n */\n\nfunction addMonths(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var amount = toInteger(dirtyAmount);\n\n  if (isNaN(amount)) {\n    return new Date(NaN);\n  }\n\n  if (!amount) {\n    // If 0 months, no-op to avoid changing times in the hour before end of DST\n    return date;\n  }\n\n  var dayOfMonth = date.getDate(); // The JS Date object supports date math by accepting out-of-bounds values for\n  // month, day, etc. For example, new Date(2020, 0, 0) returns 31 Dec 2019 and\n  // new Date(2020, 13, 1) returns 1 Feb 2021.  This is *almost* the behavior we\n  // want except that dates will wrap around the end of a month, meaning that\n  // new Date(2020, 13, 31) will return 3 Mar 2021 not 28 Feb 2021 as desired. So\n  // we'll default to the end of the desired month by adding 1 to the desired\n  // month and using a date of 0 to back up one day to the end of the desired\n  // month.\n\n  var endOfDesiredMonth = new Date(date.getTime());\n  endOfDesiredMonth.setMonth(date.getMonth() + amount + 1, 0);\n  var daysInMonth = endOfDesiredMonth.getDate();\n\n  if (dayOfMonth >= daysInMonth) {\n    // If we're already at the end of the month, then this is the correct date\n    // and we're done.\n    return endOfDesiredMonth;\n  } else {\n    // Otherwise, we now know that setting the original day-of-month value won't\n    // cause an overflow, so set the desired day-of-month. Note that we can't\n    // just set the date of `endOfDesiredMonth` because that object may have had\n    // its time changed in the unusual case where where a DST transition was on\n    // the last day of the month and its local time was in the hour skipped or\n    // repeated next to a DST transition.  So we use `date` instead which is\n    // guaranteed to still have the original time.\n    date.setFullYear(endOfDesiredMonth.getFullYear(), endOfDesiredMonth.getMonth(), dayOfMonth);\n    return date;\n  }\n}\n\n/**\n * @name addMilliseconds\n * @category Millisecond Helpers\n * @summary Add the specified number of milliseconds to the given date.\n *\n * @description\n * Add the specified number of milliseconds to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of milliseconds to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the milliseconds added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 750 milliseconds to 10 July 2014 12:45:30.000:\n * const result = addMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)\n * //=> Thu Jul 10 2014 12:45:30.750\n */\n\nfunction addMilliseconds(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var timestamp = toDate(dirtyDate).getTime();\n  var amount = toInteger(dirtyAmount);\n  return new Date(timestamp + amount);\n}\n\nvar MILLISECONDS_IN_HOUR = 3600000;\n/**\n * @name addHours\n * @category Hour Helpers\n * @summary Add the specified number of hours to the given date.\n *\n * @description\n * Add the specified number of hours to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of hours to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the hours added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 2 hours to 10 July 2014 23:00:00:\n * const result = addHours(new Date(2014, 6, 10, 23, 0), 2)\n * //=> Fri Jul 11 2014 01:00:00\n */\n\nfunction addHours(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMilliseconds(dirtyDate, amount * MILLISECONDS_IN_HOUR);\n}\n\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @param {Object} [options] - an object with options.\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)\n * @returns {Date} the start of a week\n * @throws {TypeError} 1 argument required\n * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\n\nfunction startOfWeek(dirtyDate, dirtyOptions) {\n  requiredArgs(1, arguments);\n  var options = dirtyOptions || {};\n  var locale = options.locale;\n  var localeWeekStartsOn = locale && locale.options && locale.options.weekStartsOn;\n  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);\n  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');\n  }\n\n  var date = toDate(dirtyDate);\n  var day = date.getDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  date.setDate(date.getDate() - diff);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}\n\n/**\n * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.\n * They usually appear for dates that denote time before the timezones were introduced\n * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891\n * and GMT+01:00:00 after that date)\n *\n * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,\n * which would lead to incorrect calculations.\n *\n * This function returns the timezone offset in milliseconds that takes seconds in account.\n */\nfunction getTimezoneOffsetInMilliseconds(date) {\n  var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));\n  utcDate.setUTCFullYear(date.getFullYear());\n  return date.getTime() - utcDate.getTime();\n}\n\n/**\n * @name startOfDay\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @returns {Date} the start of a day\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\n\nfunction startOfDay(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}\n\nvar MILLISECONDS_IN_DAY = 86400000;\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of calendar days\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\n\nfunction differenceInCalendarDays(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var startOfDayLeft = startOfDay(dirtyDateLeft);\n  var startOfDayRight = startOfDay(dirtyDateRight);\n  var timestampLeft = startOfDayLeft.getTime() - getTimezoneOffsetInMilliseconds(startOfDayLeft);\n  var timestampRight = startOfDayRight.getTime() - getTimezoneOffsetInMilliseconds(startOfDayRight); // Round the number of days to the nearest integer\n  // because the number of milliseconds in a day is not constant\n  // (e.g. it's different in the day of the daylight saving time clock shift)\n\n  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_DAY);\n}\n\nvar MILLISECONDS_IN_MINUTE = 60000;\n/**\n * @name addMinutes\n * @category Minute Helpers\n * @summary Add the specified number of minutes to the given date.\n *\n * @description\n * Add the specified number of minutes to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of minutes to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the minutes added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 30 minutes to 10 July 2014 12:00:00:\n * const result = addMinutes(new Date(2014, 6, 10, 12, 0), 30)\n * //=> Thu Jul 10 2014 12:30:00\n */\n\nfunction addMinutes(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMilliseconds(dirtyDate, amount * MILLISECONDS_IN_MINUTE);\n}\n\n/**\n * @name addQuarters\n * @category Quarter Helpers\n * @summary Add the specified number of year quarters to the given date.\n *\n * @description\n * Add the specified number of year quarters to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of quarters to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the quarters added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 1 quarter to 1 September 2014:\n * const result = addQuarters(new Date(2014, 8, 1), 1)\n * //=> Mon Dec 01 2014 00:00:00\n */\n\nfunction addQuarters(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  var months = amount * 3;\n  return addMonths(dirtyDate, months);\n}\n\n/**\n * @name addWeeks\n * @category Week Helpers\n * @summary Add the specified number of weeks to the given date.\n *\n * @description\n * Add the specified number of week to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of weeks to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the weeks added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 4 weeks to 1 September 2014:\n * const result = addWeeks(new Date(2014, 8, 1), 4)\n * //=> Mon Sep 29 2014 00:00:00\n */\n\nfunction addWeeks(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  var days = amount * 7;\n  return addDays(dirtyDate, days);\n}\n\n/**\n * @name addYears\n * @category Year Helpers\n * @summary Add the specified number of years to the given date.\n *\n * @description\n * Add the specified number of years to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of years to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the years added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 5 years to 1 September 2014:\n * const result = addYears(new Date(2014, 8, 1), 5)\n * //=> Sun Sep 01 2019 00:00:00\n */\n\nfunction addYears(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMonths(dirtyDate, amount * 12);\n}\n\n/**\n * @name compareAsc\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the first date to compare\n * @param {Date|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * const result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * const result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\n\nfunction compareAsc(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  var diff = dateLeft.getTime() - dateRight.getTime();\n\n  if (diff < 0) {\n    return -1;\n  } else if (diff > 0) {\n    return 1; // Return 0 if diff is 0; return NaN if diff is NaN\n  } else {\n    return diff;\n  }\n}\n\n/**\n * Days in 1 week.\n *\n * @name daysInWeek\n * @constant\n * @type {number}\n * @default\n */\n/**\n * Milliseconds in 1 minute\n *\n * @name millisecondsInMinute\n * @constant\n * @type {number}\n * @default\n */\n\nvar millisecondsInMinute = 60000;\n/**\n * Milliseconds in 1 hour\n *\n * @name millisecondsInHour\n * @constant\n * @type {number}\n * @default\n */\n\nvar millisecondsInHour = 3600000;\n\n/**\n * @name differenceInCalendarMonths\n * @category Month Helpers\n * @summary Get the number of calendar months between the given dates.\n *\n * @description\n * Get the number of calendar months between the given dates.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of calendar months\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many calendar months are between 31 January 2014 and 1 September 2014?\n * var result = differenceInCalendarMonths(\n *   new Date(2014, 8, 1),\n *   new Date(2014, 0, 31)\n * )\n * //=> 8\n */\n\nfunction differenceInCalendarMonths(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  var yearDiff = dateLeft.getFullYear() - dateRight.getFullYear();\n  var monthDiff = dateLeft.getMonth() - dateRight.getMonth();\n  return yearDiff * 12 + monthDiff;\n}\n\nvar MILLISECONDS_IN_WEEK = 604800000;\n/**\n * @name differenceInCalendarWeeks\n * @category Week Helpers\n * @summary Get the number of calendar weeks between the given dates.\n *\n * @description\n * Get the number of calendar weeks between the given dates.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @param {Object} [options] - an object with options.\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)\n * @returns {Number} the number of calendar weeks\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6\n *\n * @example\n * // How many calendar weeks are between 5 July 2014 and 20 July 2014?\n * const result = differenceInCalendarWeeks(\n *   new Date(2014, 6, 20),\n *   new Date(2014, 6, 5)\n * )\n * //=> 3\n *\n * @example\n * // If the week starts on Monday,\n * // how many calendar weeks are between 5 July 2014 and 20 July 2014?\n * const result = differenceInCalendarWeeks(\n *   new Date(2014, 6, 20),\n *   new Date(2014, 6, 5),\n *   { weekStartsOn: 1 }\n * )\n * //=> 2\n */\n\nfunction differenceInCalendarWeeks(dirtyDateLeft, dirtyDateRight, dirtyOptions) {\n  requiredArgs(2, arguments);\n  var startOfWeekLeft = startOfWeek(dirtyDateLeft, dirtyOptions);\n  var startOfWeekRight = startOfWeek(dirtyDateRight, dirtyOptions);\n  var timestampLeft = startOfWeekLeft.getTime() - getTimezoneOffsetInMilliseconds(startOfWeekLeft);\n  var timestampRight = startOfWeekRight.getTime() - getTimezoneOffsetInMilliseconds(startOfWeekRight); // Round the number of days to the nearest integer\n  // because the number of milliseconds in a week is not constant\n  // (e.g. it's different in the week of the daylight saving time clock shift)\n\n  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_WEEK);\n}\n\n/**\n * @name differenceInCalendarYears\n * @category Year Helpers\n * @summary Get the number of calendar years between the given dates.\n *\n * @description\n * Get the number of calendar years between the given dates.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of calendar years\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many calendar years are between 31 December 2013 and 11 February 2015?\n * const result = differenceInCalendarYears(\n *   new Date(2015, 1, 11),\n *   new Date(2013, 11, 31)\n * )\n * //=> 2\n */\n\nfunction differenceInCalendarYears(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  return dateLeft.getFullYear() - dateRight.getFullYear();\n}\n\n/**\n * @name differenceInMilliseconds\n * @category Millisecond Helpers\n * @summary Get the number of milliseconds between the given dates.\n *\n * @description\n * Get the number of milliseconds between the given dates.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of milliseconds\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many milliseconds are between\n * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?\n * const result = differenceInMilliseconds(\n *   new Date(2014, 6, 2, 12, 30, 21, 700),\n *   new Date(2014, 6, 2, 12, 30, 20, 600)\n * )\n * //=> 1100\n */\n\nfunction differenceInMilliseconds(dateLeft, dateRight) {\n  requiredArgs(2, arguments);\n  return toDate(dateLeft).getTime() - toDate(dateRight).getTime();\n}\n\nvar roundingMap = {\n  ceil: Math.ceil,\n  round: Math.round,\n  floor: Math.floor,\n  trunc: function (value) {\n    return value < 0 ? Math.ceil(value) : Math.floor(value);\n  } // Math.trunc is not supported by IE\n\n};\nvar defaultRoundingMethod = 'trunc';\nfunction getRoundingMethod(method) {\n  return method ? roundingMap[method] : roundingMap[defaultRoundingMethod];\n}\n\n/**\n * @name differenceInHours\n * @category Hour Helpers\n * @summary Get the number of hours between the given dates.\n *\n * @description\n * Get the number of hours between the given dates.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @param {Object} [options] - an object with options.\n * @param {String} [options.roundingMethod='trunc'] - a rounding method (`ceil`, `floor`, `round` or `trunc`)\n * @returns {Number} the number of hours\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many hours are between 2 July 2014 06:50:00 and 2 July 2014 19:00:00?\n * const result = differenceInHours(\n *   new Date(2014, 6, 2, 19, 0),\n *   new Date(2014, 6, 2, 6, 50)\n * )\n * //=> 12\n */\n\nfunction differenceInHours(dateLeft, dateRight, options) {\n  requiredArgs(2, arguments);\n  var diff = differenceInMilliseconds(dateLeft, dateRight) / millisecondsInHour;\n  return getRoundingMethod(options === null || options === void 0 ? void 0 : options.roundingMethod)(diff);\n}\n\n/**\n * @name differenceInMinutes\n * @category Minute Helpers\n * @summary Get the number of minutes between the given dates.\n *\n * @description\n * Get the signed number of full (rounded towards 0) minutes between the given dates.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @param {Object} [options] - an object with options.\n * @param {String} [options.roundingMethod='trunc'] - a rounding method (`ceil`, `floor`, `round` or `trunc`)\n * @returns {Number} the number of minutes\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many minutes are between 2 July 2014 12:07:59 and 2 July 2014 12:20:00?\n * const result = differenceInMinutes(\n *   new Date(2014, 6, 2, 12, 20, 0),\n *   new Date(2014, 6, 2, 12, 7, 59)\n * )\n * //=> 12\n *\n * @example\n * // How many minutes are between 10:01:59 and 10:00:00\n * const result = differenceInMinutes(\n *   new Date(2000, 0, 1, 10, 0, 0),\n *   new Date(2000, 0, 1, 10, 1, 59)\n * )\n * //=> -1\n */\n\nfunction differenceInMinutes(dateLeft, dateRight, options) {\n  requiredArgs(2, arguments);\n  var diff = differenceInMilliseconds(dateLeft, dateRight) / millisecondsInMinute;\n  return getRoundingMethod(options === null || options === void 0 ? void 0 : options.roundingMethod)(diff);\n}\n\n/**\n * @name endOfDay\n * @category Day Helpers\n * @summary Return the end of a day for the given date.\n *\n * @description\n * Return the end of a day for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @returns {Date} the end of a day\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // The end of a day for 2 September 2014 11:55:00:\n * const result = endOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 23:59:59.999\n */\n\nfunction endOfDay(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  date.setHours(23, 59, 59, 999);\n  return date;\n}\n\n/**\n * @name endOfMonth\n * @category Month Helpers\n * @summary Return the end of a month for the given date.\n *\n * @description\n * Return the end of a month for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @returns {Date} the end of a month\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // The end of a month for 2 September 2014 11:55:00:\n * const result = endOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 30 2014 23:59:59.999\n */\n\nfunction endOfMonth(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var month = date.getMonth();\n  date.setFullYear(date.getFullYear(), month + 1, 0);\n  date.setHours(23, 59, 59, 999);\n  return date;\n}\n\n/**\n * @name isLastDayOfMonth\n * @category Month Helpers\n * @summary Is the given date the last day of a month?\n *\n * @description\n * Is the given date the last day of a month?\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to check\n * @returns {Boolean} the date is the last day of a month\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Is 28 February 2014 the last day of a month?\n * var result = isLastDayOfMonth(new Date(2014, 1, 28))\n * //=> true\n */\n\nfunction isLastDayOfMonth(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  return endOfDay(date).getTime() === endOfMonth(date).getTime();\n}\n\n/**\n * @name differenceInMonths\n * @category Month Helpers\n * @summary Get the number of full months between the given dates.\n *\n * @description\n * Get the number of full months between the given dates using trunc as a default rounding method.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of full months\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many full months are between 31 January 2014 and 1 September 2014?\n * const result = differenceInMonths(new Date(2014, 8, 1), new Date(2014, 0, 31))\n * //=> 7\n */\n\nfunction differenceInMonths(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  var sign = compareAsc(dateLeft, dateRight);\n  var difference = Math.abs(differenceInCalendarMonths(dateLeft, dateRight));\n  var result; // Check for the difference of less than month\n\n  if (difference < 1) {\n    result = 0;\n  } else {\n    if (dateLeft.getMonth() === 1 && dateLeft.getDate() > 27) {\n      // This will check if the date is end of Feb and assign a higher end of month date\n      // to compare it with Jan\n      dateLeft.setDate(30);\n    }\n\n    dateLeft.setMonth(dateLeft.getMonth() - sign * difference); // Math.abs(diff in full months - diff in calendar months) === 1 if last calendar month is not full\n    // If so, result must be decreased by 1 in absolute value\n\n    var isLastMonthNotFull = compareAsc(dateLeft, dateRight) === -sign; // Check for cases of one full calendar month\n\n    if (isLastDayOfMonth(toDate(dirtyDateLeft)) && difference === 1 && compareAsc(dirtyDateLeft, dateRight) === 1) {\n      isLastMonthNotFull = false;\n    }\n\n    result = sign * (difference - Number(isLastMonthNotFull));\n  } // Prevent negative zero\n\n\n  return result === 0 ? 0 : result;\n}\n\n/**\n * @name differenceInQuarters\n * @category Quarter Helpers\n * @summary Get the number of quarters between the given dates.\n *\n * @description\n * Get the number of quarters between the given dates.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @param {Object} [options] - an object with options.\n * @param {String} [options.roundingMethod='trunc'] - a rounding method (`ceil`, `floor`, `round` or `trunc`)\n * @returns {Number} the number of full quarters\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many full quarters are between 31 December 2013 and 2 July 2014?\n * const result = differenceInQuarters(new Date(2014, 6, 2), new Date(2013, 11, 31))\n * //=> 2\n */\n\nfunction differenceInQuarters(dateLeft, dateRight, options) {\n  requiredArgs(2, arguments);\n  var diff = differenceInMonths(dateLeft, dateRight) / 3;\n  return getRoundingMethod(options === null || options === void 0 ? void 0 : options.roundingMethod)(diff);\n}\n\n/**\n * @name differenceInYears\n * @category Year Helpers\n * @summary Get the number of full years between the given dates.\n *\n * @description\n * Get the number of full years between the given dates.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of full years\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many full years are between 31 December 2013 and 11 February 2015?\n * const result = differenceInYears(new Date(2015, 1, 11), new Date(2013, 11, 31))\n * //=> 1\n */\n\nfunction differenceInYears(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  var sign = compareAsc(dateLeft, dateRight);\n  var difference = Math.abs(differenceInCalendarYears(dateLeft, dateRight)); // Set both dates to a valid leap year for accurate comparison when dealing\n  // with leap days\n\n  dateLeft.setFullYear(1584);\n  dateRight.setFullYear(1584); // Math.abs(diff in full years - diff in calendar years) === 1 if last calendar year is not full\n  // If so, result must be decreased by 1 in absolute value\n\n  var isLastYearNotFull = compareAsc(dateLeft, dateRight) === -sign;\n  var result = sign * (difference - Number(isLastYearNotFull)); // Prevent negative zero\n\n  return result === 0 ? 0 : result;\n}\n\nfunction getDatePart(date, copy) {\n    if (copy)\n        date = new Date(date.valueOf());\n    // workaround for non-existent hours\n    const d = new Date(date.valueOf());\n    d.setHours(0);\n    if (d.getDate() != date.getDate()) {\n        date.setHours(1);\n    }\n    else {\n        date.setHours(0);\n    }\n    date.setMinutes(0);\n    date.setSeconds(0);\n    date.setMilliseconds(0);\n    return date;\n}\nfunction getTimePart(date, copy) {\n    if (copy)\n        date = new Date(date.valueOf());\n    return (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\n}\nfunction differenceInWeeks(a, b, startOnMonday) {\n    const weekStartsOn = startOnMonday ? 1 : 0;\n    return differenceInCalendarWeeks(a, b, { weekStartsOn });\n}\nfunction getDay(date, startOnMonday) {\n    let shift = date.getDay();\n    if (startOnMonday) {\n        if (shift === 0)\n            shift = 6;\n        else\n            shift--;\n    }\n    return shift;\n}\n\nconst diff = {\n    year: differenceInYears,\n    quarter: differenceInQuarters,\n    month: differenceInMonths,\n    week: differenceInWeeks,\n    day: differenceInCalendarDays,\n    hour: differenceInHours,\n    minute: differenceInMinutes,\n};\nfunction countDaysInMonth(date) {\n    if (!date)\n        return 30;\n    const m = date.getMonth();\n    if (m === 1) {\n        const y = date.getFullYear();\n        if (y % 4)\n            return 28;\n        if (y % 100)\n            return 29;\n        if (y % 400)\n            return 28;\n        return 29;\n    }\n    if ((m % 2 && m < 7) || (!(m % 2) && m > 7)) {\n        return 30;\n    }\n    return 31;\n}\nconst smallerCount = {\n    year: [\"quarter\", 4],\n    quarter: [\"month\", 3],\n    month: [\"day\", countDaysInMonth],\n    week: [\"day\", 7],\n    day: [\"hour\", 24],\n    hour: [\"minute\", 60],\n    minute: [\"minute\", 1],\n};\nconst add = {\n    year: addYears,\n    quarter: addQuarters,\n    month: addMonths,\n    week: addWeeks,\n    day: addDays,\n    hour: addHours,\n    minute: addMinutes,\n};\n/**\n * Calculates the difference between two dates in units\n * @param {string} unit - the minimal unit of the current scale (\"hour\"-\"year\")\n * @param {Date} next - a later date\n * @param {Date} prev - an earlier date\n * @param {boolean} startOnMonday - true if week starts on Monday, false otherwise\n * @param {boolean} precise - current precision setting of the scales (if true, diff will be counted for smallerCount)\n * @param {boolean} wt - shows that diff will be counted for the width of a task\n * @returns {number} - an int (if precise is false) or a float number\n */\nfunction innerDiff(unit, next, prev, startOnMonday, precise, wt) {\n    let minUnit = unit;\n    if (precise) {\n        const u = smallerCount[unit][0];\n        if (typeof u !== \"number\" && typeof u !== \"function\")\n            minUnit = u;\n    }\n    let start = prev;\n    let end = next;\n    if (wt) {\n        start = getUnitStart(minUnit, start, startOnMonday);\n        end = getUnitStart(minUnit, end, startOnMonday);\n        if (end < next)\n            end = addUnit(minUnit)(end, 1);\n    }\n    if (precise) {\n        const filled = diff[minUnit](end, start);\n        const count = smallerCount[unit][1];\n        let all = 0;\n        if (typeof count === \"function\")\n            all = count(prev);\n        else if (typeof count === \"number\")\n            all = count;\n        return filled / all;\n    }\n    else {\n        return diff[minUnit](end, start, startOnMonday);\n    }\n}\n/**\n * Returns a function for calculating the difference between two dates in units\n * @param {string} unit - the minimal unit of the current scale (\"hour\"-\"year\")\n * @returns {function} - details below\n */\nfunction getDiff(unit) {\n    /**\n     * the returned function calculates the difference between two dates based on passed parameters\n     * @param {Date} next - first date\n     * @param {Date} prev - second date\n     * @param {boolean} startOnMonday - true if week starts on Monday, false otherwise\n     * @param {boolean} precise false by default, true when used to count x-position\n     * and width of tasks with 'step-1' precision\n     * @param {boolean} wt - marker that diff is used to count width of a task;\n     * if diff returns 0, you have to add 1; otherwise tasks that are within 1 unit will have 0 width\n     * and will be displayed incorrectly\n     * @returns {number} - the difference between two dates in 'units'; if 'precise' is true, the number is float, otherwise int\n     */\n    return (next, prev, startOnMonday, precise, wt) => {\n        if (unit === \"month\" && precise) {\n            return getMonthDayDiff(next, prev, wt);\n        }\n        else {\n            return innerDiff(unit, next, prev, startOnMonday, precise, wt);\n        }\n    };\n}\n/**\n * Calculates the difference in months between two days for a scale with precision setting\n * This is a specific case of diff counting, because a month can have 28-31 days\n * @param {Date} end - a later date\n * @param {Date} start - an earlier date\n * @param {Boolean} wt - shows that diff will be counted for the width of a task\n * @returns {number} - a float number\n */\nfunction getMonthDayDiff(end, start, wt) {\n    if (sameMonth(start, end)) {\n        return innerDiff(\"month\", end, start, null, true, wt);\n    }\n    // if starts not on 1st day\n    let daysOfFirstMonth = 0;\n    if (start.getDate() > 1) {\n        const me = new Date(start.getFullYear(), start.getMonth() + 1, 1);\n        daysOfFirstMonth = innerDiff(\"month\", me, start, null, true);\n        start = me;\n    }\n    // if lasts 1+ whole months\n    let months = 0;\n    if (!sameMonth(start, end)) {\n        months = innerDiff(\"month\", getUnitStart(\"month\", end), start); // int part\n        start = addUnit(\"month\")(start, months);\n    }\n    // all above plus days of last month if any\n    return daysOfFirstMonth + months + innerDiff(\"month\", end, start, null, true);\n}\nfunction sameMonth(a, b) {\n    return (getUnitStart(\"month\", a).valueOf() === getUnitStart(\"month\", b).valueOf());\n}\nfunction addUnit(unit) {\n    return add[unit];\n}\nfunction getUnitStart(unit, start, startOnMonday) {\n    let t;\n    switch (unit) {\n        case \"year\":\n            return new Date(start.getFullYear(), 0, 1);\n        case \"quarter\":\n            return new Date(start.getFullYear(), Math.floor(start.getMonth() / 3) * 3, 1);\n        case \"month\":\n            return new Date(start.getFullYear(), start.getMonth(), 1);\n        case \"week\":\n            t = new Date(start.getFullYear(), start.getMonth(), start.getDate());\n            t.setDate(start.getDate() - getDay(start, startOnMonday));\n            return t;\n        case \"day\":\n            t = new Date(start.getFullYear(), start.getMonth(), start.getDate());\n            t.setHours(0, 0, 0, 0);\n            return t;\n        case \"hour\":\n            t = new Date(start.getFullYear(), start.getMonth(), start.getDate());\n            t.setHours(start.getHours(), 0, 0, 0);\n            return t;\n        default:\n            return new Date(start);\n    }\n}\n\nfunction getMinUnit(scales) {\n    const start = new Date();\n    return scales\n        .map(item => ({ item, len: addUnit(item.unit)(start, 1) }))\n        .sort((a, b) => (a.len < b.len ? -1 : 1))[0].item.unit;\n}\n/**\n * Resets scales to new parameters and returns the object that stores related constants and functions\n * @param {Date} start - start date\n * @param {Date} end - end date\n * @param {boolean} precise - flag that defines whether to round task position and width to a smaller unit\n * @param {number} width - width of smallest cell unit\n * @param {number} height - height of scale cell\n * @param {Array} scales - a set of scales (objects)\n * @param {function} isHoliday - the function that checks if a day is a holiday\n * @param {boolean} startOnMonday - flag that defines whether the week starts on Monday\n * @returns {Object} scales\n */\nfunction resetScales(start, end, precise, width, height, scales, isHoliday, startOnMonday) {\n    // console.log(\"[x] reset scales\");\n    const minUnit = getMinUnit(scales);\n    const diff = getDiff(minUnit);\n    const tempEnd = getUnitStart(minUnit, end, startOnMonday);\n    start = getUnitStart(minUnit, start, startOnMonday);\n    end = tempEnd < end ? addUnit(minUnit)(tempEnd, 1) : tempEnd;\n    const fullWidth = diff(end, start, startOnMonday) * width;\n    const fullHeight = height * scales.length;\n    const rows = scales.map(line => {\n        const cells = [];\n        const add = addUnit(line.unit);\n        const step = line.step || 1;\n        const countInWeeks = minUnit === \"week\" && line.unit !== \"week\";\n        let date = getUnitStart(line.unit, start, startOnMonday);\n        while (date < end) {\n            let next = add(date, step);\n            if (date < start)\n                date = start;\n            if (next > end)\n                next = end;\n            /**\n             * Special handling for counting width of greater units in weeks\n             * this code decides whether a week belongs to the current greater unit based on weekdays of this unit boundaries\n             * if start day is Thursday+, then this greater unit should not count this week as its own\n             * if end day is Thursday+, then this greater unit should count this week as its own\n             */\n            let cdate = date;\n            let cnext = next;\n            if (countInWeeks) {\n                if (getDay(date, startOnMonday) > 3) {\n                    cdate = addUnit(\"week\")(date, 1);\n                }\n                if (getDay(next, startOnMonday) > 3) {\n                    cnext = addUnit(\"week\")(next, 1);\n                }\n            }\n            const cellWidth = (diff(cnext, cdate, startOnMonday) || 1) * width;\n            let css = \"\";\n            if (line.css)\n                css += typeof line.css === \"function\" ? line.css(date) : line.css;\n            cells.push({\n                width: cellWidth,\n                css,\n                date,\n                format: line.format,\n            });\n            date = next;\n        }\n        return { cells, add, height, type: line.unit, step: line.step || 1 };\n    });\n    precise = !!(minUnit === \"day\" ? precise : precise != false);\n    return {\n        rows,\n        width: fullWidth,\n        height: fullHeight,\n        cellWidth: width,\n        cellHeight: height,\n        diff,\n        start,\n        end,\n        minUnit,\n        precise,\n        isHoliday,\n        startOnMonday,\n    };\n}\nfunction grid(width, height, color) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"width\", width + \"\");\n    canvas.setAttribute(\"height\", height + \"\");\n    const ctx = canvas.getContext(\"2d\");\n    ctx.strokeStyle = color;\n    ctx.moveTo(0, height);\n    ctx.lineTo(width, height);\n    ctx.lineTo(width, 0);\n    ctx.stroke();\n    return canvas.toDataURL();\n}\n\n/**\n * Prepares dimensional coordinates for a task\n * @param {Object} task - task data object\n * @param {number} i - the index of the task\n * @param {Object} scales - the data for current scales; the return value of resetScales()\n * @param {number} taskHeight - the height of a task bar\n * @param {number} y - the top position of a task after which the current task will be placed (timeline mode)\n * @returns {Object} task data object\n */\nfunction updateTask(task, i, scales, taskHeight, y) {\n    if (task.type === \"split\" && task.$data && task.$data.length) {\n        task.$data.forEach(k => setSizes(k, i, scales, taskHeight));\n    }\n    else {\n        setSizes(task, i, scales, taskHeight, y);\n    }\n    return task;\n}\nfunction setSizes(task, i, scales, taskHeight, y) {\n    const { start, end, cellWidth, cellHeight, diff, minUnit, precise } = scales;\n    const startDate = task.start_date < start ? start : task.start_date;\n    const endDate = task.end_date > end ? end : task.end_date;\n    const astart = getUnitStart(minUnit, start, scales.startOnMonday);\n    const ms = task.type == \"milestone\";\n    task.$h = taskHeight;\n    task.$x =\n        Math.round(diff(startDate, astart, scales.startOnMonday, precise) * cellWidth) - (ms ? task.$h / 2 : 0);\n    task.$w = ms\n        ? task.$h\n        : Math.round(diff(endDate, startDate, scales.startOnMonday, precise, true) *\n            cellWidth);\n    task.$y =\n        typeof y === \"undefined\"\n            ? cellHeight * i + (cellHeight - taskHeight) / 2\n            : y;\n}\n/**\n * Updates start, end and duration fields of tasks during initial loading and updating\n * @param {Object} task - task data object\n * @param {Object} scales - (optional) the data for current scales; the return value of resetScales()\n * @param {string} mode - (optional) update mode, \"start\" or \"end\"\n * @param {number} dir - (optional) direction of change (-1 is the past, 1 is the future)\n */\nfunction updateTaskDuration(task, scales, mode, dir) {\n    if (task.start_date &&\n        task.end_date &&\n        task.start_date.valueOf() >= task.end_date.valueOf()) {\n        task.end_date = null;\n        task.duration = 1;\n        if (mode)\n            mode = \"move\";\n    }\n    if (scales) {\n        excludeHolidays(task, scales, mode, dir);\n    }\n    else {\n        if (task.type == \"milestone\") {\n            getMilestone(task);\n        }\n        else {\n            if (!task.duration) {\n                task.duration = getDuration(task);\n            }\n            if (!task.end_date) {\n                task.end_date = getEnd(task);\n            }\n        }\n    }\n}\n/**\n * Excludes holidays from start, end and duration of tasks (can't start or end on a holiday)\n * @param {Object} task - task data object\n * @param {Object} scales - the data for current scales; the return value of resetScales()\n * @param {string} mode - (optional) update mode, \"start\" or \"end\"\n * @param {number} dir - (optional) direction of change (-1 is the past, 1 is the future)\n */\nfunction excludeHolidays(task, scales, mode, dir) {\n    if (task.type == \"milestone\") {\n        task.start_date = mode\n            ? toWorkday(task.start_date, false, scales, dir)\n            : toClosestWorkday(task.start_date, scales); //on load\n        return getMilestone(task);\n    }\n    if (!mode) {\n        //on load\n        task.start_date = toClosestWorkday(task.start_date, scales);\n        task.end_date = getEndWorkday(task, scales);\n        task.duration = getDuration(task, scales);\n    }\n    else {\n        if (mode == \"start\" || mode == \"move\") {\n            task.start_date = toWorkday(task.start_date, false, scales, dir);\n            if (!task.duration)\n                task.duration = getDuration(task, scales);\n            if (!task.end_date)\n                task.end_date = getEndWorkday(task, scales);\n        }\n        else {\n            //end, duration\n            if (!task.end_date)\n                task.end_date = getEndWorkday(task, scales);\n            if (!task.duration) {\n                task.end_date = toWorkday(task.end_date, true, scales, dir);\n                task.duration = getDuration(task, scales);\n            }\n        }\n    }\n}\nfunction getMilestone(task) {\n    task.duration = 0;\n    task.end_date = task.start_date;\n}\n/**\n * Returns the end date of a task\n * @param {Object} task - task data object\n */\nfunction getEnd(task) {\n    if (task.duration < 1)\n        return addUnit(\"hour\")(task.start_date, Math.floor(24 * task.duration));\n    else\n        return addUnit(\"day\")(task.start_date, task.duration);\n}\n/**\n * Returns end date excluding holidays from duration\n * @param {Object} task - task data object\n * @param {Object} scales - the data for current scales; the return value of resetScales()\n * @returns {Date} end date\n */\nfunction getEndWorkday(task, scales) {\n    if (task.duration < 1)\n        return getEnd(task);\n    let date = getDatePart(task.start_date);\n    for (let w = 0, d = 0; w < task.duration;) {\n        if (!scales.isHoliday(date)) {\n            ++w;\n            d = 0;\n        }\n        else {\n            if (++d === 30)\n                holidayGuard();\n        }\n        date = addUnit(\"day\")(date, 1);\n    }\n    return date;\n}\n/**\n * Calculates the duration of a task\n * @param {Object} task - task data object\n * @param {Object} scales - the data for current scales; the return value of resetScales()\n * @returns {number} task duration\n */\nfunction getDuration(task, scales) {\n    const d = getDiff(\"day\")(task.end_date, task.start_date, true);\n    // allow float duration for tasks smaller than day\n    if (d < 1)\n        return parseFloat(d.toFixed(2));\n    if (!scales)\n        return Math.floor(d);\n    let date = task.start_date;\n    let duration = 0;\n    while (date < task.end_date) {\n        if (!scales.isHoliday(date))\n            ++duration;\n        date = addUnit(\"day\")(date, 1);\n    }\n    return duration;\n}\n/**\n * Moves a date from a holiday to the closest working day (priority to the future)\n * @param {Date} date - original date\n * @param {Object} scales - the data for current scales; the return value of resetScales()\n * @returns {Date} the date of a closest work day\n */\nfunction toClosestWorkday(date, scales) {\n    let left = date;\n    let right = date;\n    let notRight;\n    let d = 0;\n    while (d < 30 &&\n        (notRight = scales.isHoliday(right)) &&\n        scales.isHoliday(left)) {\n        left = addUnit(\"day\")(left, -1);\n        right = addUnit(\"day\")(right, 1);\n        d++;\n    }\n    if (d === 30)\n        holidayGuard();\n    return !notRight ? right : left;\n}\nfunction holidayGuard() {\n    alert(\"No work days found within 30 days, check your isHoliday function!\");\n    throw \"Wrong isHoliday function\";\n}\n/**\n * Moves a date from a holiday to a working day in the given direction\n * @param {Date} date - the current date\n * @param {Boolean} end - indicates if this is the end of a task\n * @param {Object} scales - the data for current scales; the return value of resetScales()\n * @param {number} dir - the direction in which nearest workday will be located; -1 is the past, 1 is the future\n * @returns {Date} the date of a working day\n */\nfunction toWorkday(date, end, scales, dir) {\n    let d = 0;\n    while (d < 30 && scales.isHoliday(getCheckDate(date, end))) {\n        date = addUnit(\"day\")(date, dir);\n        d++;\n    }\n    if (d === 30)\n        holidayGuard();\n    return date;\n}\n/**\n * Returns the date for a holiday check\n * @param {Date} date - the date\n * @param {Boolean} end - if true, means it's the end date (end dates are exclusive)\n * @returns {Date} the date that will be used for a check\n */\nfunction getCheckDate(date, end) {\n    return end && !getTimePart(date) ? addUnit(\"day\")(date, -1) : date;\n}\n\nconst delta = 20;\nfunction updateLink(link, startTask, endTask, height) {\n    const dy = Math.round(height / 2);\n    if (!startTask || !endTask) {\n        link.$p = \"\";\n        return link;\n    }\n    let s_start = false;\n    let e_start = false;\n    switch (link.type) {\n        case 0:\n            e_start = true;\n            break;\n        case 1:\n            s_start = true;\n            e_start = true;\n            break;\n        case 3:\n            s_start = true;\n            break;\n    }\n    const sx = s_start ? startTask.$x : startTask.$x + startTask.$w;\n    const sy = startTask.$y;\n    const ex = e_start ? endTask.$x : endTask.$x + endTask.$w;\n    const ey = endTask.$y;\n    if (differentX(startTask, endTask, sx, ex, height) || sy !== ey) {\n        const lineCoords = getLineCoords(sx, sy + dy, ex, ey + dy, s_start, e_start, 38 / 2);\n        const arrowCoords = getArrowCoords(ex, ey + dy, e_start);\n        link.$p = `${lineCoords},${arrowCoords}`;\n    }\n    else {\n        link.$p = \"\";\n    }\n    return link;\n}\nfunction differentX(startTask, endTask, sx, ex, height) {\n    if (startTask.type === \"milestone\" || endTask.type === \"milestone\")\n        return Math.abs(sx - ex) > height / 2;\n    return sx !== ex;\n}\nfunction getLineCoords(sx, sy, ex, ey, s_start, e_start, gapp) {\n    const shift = delta * (s_start ? -1 : 1);\n    const backshift = delta * (e_start ? -1 : 1);\n    const sx1 = sx + shift;\n    const ex1 = ex + backshift;\n    const line = [sx, sy, sx1, sy, 0, 0, 0, 0, ex1, ey, ex, ey];\n    const dx = ex1 - sx1;\n    let dy = ey - sy;\n    const same = e_start === s_start;\n    if (!same && ((ex1 <= sx + delta - 2 && e_start) || (ex1 > sx && !e_start))) {\n        dy -= gapp;\n    }\n    if ((same && e_start && sx1 > ex1) || (same && !e_start && sx1 < ex1)) {\n        line[4] = line[2] + dx;\n        line[5] = line[3];\n        line[6] = line[4];\n        line[7] = line[5] + dy;\n    }\n    else {\n        line[4] = line[2];\n        line[5] = line[3] + dy;\n        line[6] = line[4] + dx;\n        line[7] = line[5];\n    }\n    return line.join(\",\");\n}\nfunction getArrowCoords(x, y, start) {\n    if (start) {\n        return `${x - 5},${y - 3},${x - 5},${y + 3},${x},${y}`;\n    }\n    else {\n        return `${x + 5},${y + 3},${x + 5},${y - 3},${x},${y}`;\n    }\n}\nfunction newLink(box, start, end) {\n    if (start && end) {\n        const width = end.x - start.x;\n        const height = end.y - start.y;\n        const left = (width > 0 ? start.x : end.x) - box.left;\n        const top = (height > 0 ? start.y : end.y) - box.top;\n        const p = `${width > 0 ? 0 : -width},${height > 0 ? 0 : -height},${width > 0 ? width : 0},${height > 0 ? height : 0}`;\n        return { width: Math.abs(width), height: Math.abs(height), left, top, p };\n    }\n    else {\n        return null;\n    }\n}\n\nexport { addUnit, getDiff, getUnitStart, grid, newLink, resetScales, smallerCount, updateLink, updateTask, updateTaskDuration };\n//# sourceMappingURL=wgantt.es6.js.map\n","import {\n\taddUnit,\n\tgetDiff,\n\tgetUnitStart,\n\tgrid,\n\tnewLink,\n\tresetScales,\n\tsmallerCount,\n\tupdateLink,\n\tupdateTask,\n\tupdateTaskDuration,\n} from \"@xbs/webix-gantt-lib\";\n\nexport default class Helpers {\n\tconstructor(app) {\n\t\tthis.app = app;\n\t\tthis.defaultResourceUnit = \"hour\";\n\t\tthis.defaultResourceValues = {\n\t\t\thour: 8,\n\t\t};\n\t\tthis.resourceValueRanges = {\n\t\t\thour: [0.5, 24],\n\t\t};\n\t\tthis.resourceValueSteps = {\n\t\t\thour: 0.5,\n\t\t};\n\t\tthis.unitLoadNorm = {\n\t\t\tday: 8,\n\t\t\tweek: 40,\n\t\t\tmonth: 170,\n\t\t\tquarter: 510,\n\t\t\tyear: 2040,\n\t\t};\n\t}\n\n\t/**\n\t * Get name initials\n\t * @param {string} name - resource name\n\t * @returns {string} name initials\n\t */\n\tinitials(name) {\n\t\tlet initials = name.match(/\\b\\w/g) || [];\n\t\tif (initials.length == 1)\n\t\t\treturn name.charAt(0).toUpperCase() + name.charAt(1);\n\t\treturn ((initials.shift() || \"\") + (initials.pop() || \"\")).toUpperCase();\n\t}\n\n\t/**\n\t * Get an additional css class for resource avatar\n\t * @param {string} name - a resource name\n\t * @returns {string} a css class\n\t */\n\tavatarCss(name) {\n\t\treturn (\n\t\t\t\" webix_gantt_person_avatar_\" +\n\t\t\t((name.charCodeAt(1) + (name.length % 10)) % 10)\n\t\t);\n\t}\n\n\t/**\n\t * A template for an assignment avatar\n\t * @param {object} resource - a resource object\n\t * @param {string} cssClass - an addition css class for the avatar\n\t * @param {boolean} withTooltip - specifies whether  an avatar should get tooltip\n\t * @returns {string} html string for assignment avatar\n\t */\n\tresourceAvatar(resource, cssClass, withTooltip) {\n\t\tlet css = \"webix_gantt_person_avatar\";\n\t\tif (typeof cssClass == \"string\") css += \" \" + cssClass;\n\t\tif (resource.avatar)\n\t\t\treturn `<img class=\"${css}\" src=\"${resource.avatar}\" webix_tooltip=\"${\n\t\t\t\twithTooltip ? resource.name : \"\"\n\t\t\t}\"/>`;\n\t\tconst txt = resource.name;\n\t\treturn `<div class='${css} ${\n\t\t\ttxt ? this.avatarCss(txt) : \"\"\n\t\t}' webix_tooltip=\"${withTooltip ? resource.name : \"\"}\">${\n\t\t\ttxt ? this.initials(txt) : \"\"\n\t\t}</div>`;\n\t}\n\n\t/**\n\t * Get the default value for the resource unit\n\t * @param {object} obj - a resource object\n\t * @returns {any} the default resource\n\t */\n\tgetDefaultResourceValue(obj) {\n\t\tconst unit = this.getResourceUnit(obj);\n\t\treturn this.defaultResourceValues[unit];\n\t}\n\n\t/**\n\t * Get a resource unit\n\t * @param {object} obj - a resource object\n\t * @returns {string} a resource unit\n\t */\n\tgetResourceUnit(obj) {\n\t\treturn obj.unit || this.defaultResourceUnit;\n\t}\n\t/**\n\t * Get a resource value range\n\t * @param {object} obj - a resource object\n\t * @returns {array} a resource value range\n\t */\n\tgetResourceValueRange(obj) {\n\t\tconst unit = this.getResourceUnit(obj);\n\t\treturn this.resourceValueRanges[unit] || [1, 100];\n\t}\n\t/**\n\t * Get a resource value step\n\t * @param {object} obj - a resource object\n\t * @returns {array} a resource value step\n\t */\n\tgetResourceValueStep(obj) {\n\t\tconst unit = this.getResourceUnit(obj);\n\t\treturn this.resourceValueSteps[unit] || null;\n\t}\n\t/**\n\t * Check if a date is a holiday for an assigned resource\n\t * @param {date} date - Date object\n\t * @param {object} cal - a calendar object of a resource\n\t * @returns {boolean} true if date is a holiday\n\t */\n\tisResourceHoliday(date, cal) {\n\t\tlet result = false;\n\t\tif (cal.holidays)\n\t\t\tresult = cal.holidays.find(d => d.getTime() == date.getTime());\n\t\tif (cal.weekDays)\n\t\t\tresult = result || cal.weekDays.indexOf(date.getDay()) == -1;\n\t\treturn result;\n\t}\n\n\t/* wrappers for gantt-lib functions */\n\n\taddUnit(unit, date, inc) {\n\t\treturn addUnit(unit)(date, inc);\n\t}\n\n\tgetDifference(unit, next, prev) {\n\t\treturn getDiff(unit)(next, prev, webix.Date.startOnMonday);\n\t}\n\n\tgetUnitStart(unit, date) {\n\t\treturn getUnitStart(unit, date, webix.Date.startOnMonday);\n\t}\n\n\tupdateTask(task, index) {\n\t\tconst local = this.app.getService(\"local\");\n\t\treturn updateTask(task, index, local.getScales(), local.getTaskHeight());\n\t}\n\n\tsetScales(start, end, precise, width, height, scales) {\n\t\treturn resetScales(\n\t\t\tstart,\n\t\t\tend,\n\t\t\tprecise,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tscales,\n\t\t\tthis.app.config.isHoliday,\n\t\t\twebix.Date.startOnMonday\n\t\t);\n\t}\n\n\tupdateLink(link, start, end) {\n\t\tconst local = this.app.getService(\"local\");\n\t\treturn updateLink(link, start, end, local.getTaskHeight());\n\t}\n\n\tupdateTaskDuration(task, scales, mode, dir) {\n\t\treturn updateTaskDuration(task, scales, mode, dir);\n\t}\n\n\tgetSmallerUnit(unit) {\n\t\treturn smallerCount[unit][0];\n\t}\n\n\tgetSmallerCount(unit) {\n\t\treturn smallerCount[unit][1];\n\t}\n\n\tnewLink(box, start, end) {\n\t\treturn newLink(box, start, end);\n\t}\n\n\tdrawGridInner(width, height, color) {\n\t\treturn grid(width, height, color);\n\t}\n}\n","import { arrayEquals } from \"helpers/common\";\n\nexport default class Grouping {\n\t/**\n\t * @constructor\n\t * @param {App} app - Jet App instance\n\t */\n\tconstructor(app) {\n\t\tthis.app = app;\n\t\tthis.local = app.getService(\"local\");\n\t\tthis.helpers = app.getService(\"helpers\");\n\t\tthis.closedResources = null;\n\t}\n\n\t/* Grouping for Tasks View*/\n\n\t/***\n\t * Get tasks tree data (grouped by parent)\n\t * @param {array} data - a data array\n\t * @param {string} id - a branch id\n\t * @returns {array} a data array for webix.TreeCollection\n\t */\n\tgetTreeData(data, id) {\n\t\tconst tree = data.filter(a => a.parent == id);\n\t\ttree.forEach(a => {\n\t\t\tconst temp = this.getTreeData(data, a.id);\n\t\t\tif (temp) a.data = temp;\n\t\t});\n\n\t\treturn tree;\n\t}\n\n\t/* Grouping for Resource Diagram */\n\n\t/**\n\t * Webix TreeCollection\n\t * @typedef {Object} TreeCollection\n\t */\n\n\t/**\n\t * Collects data for resource diagram (hierarchical structure)\n\t * @returns {TreeCollection}\n\t */\n\tgetRDCollection(force) {\n\t\tif (this._rdCollection && !force) return this._rdCollection;\n\n\t\tconst tasks = this.local.tasks();\n\t\tconst assignments = this.local.assignments();\n\t\tconst resources = this.local.resources();\n\t\tif (!this._rdCollection) {\n\t\t\tthis._rdCollection = new webix.TreeCollection({});\n\t\t\twebix.extend(this._rdCollection, webix.Group);\n\n\t\t\tthis.syncRDWithData();\n\t\t} else {\n\t\t\tthis._rdCollection.clearAll();\n\t\t}\n\n\t\twebix.promise\n\t\t\t.all([tasks.waitData, assignments.waitData, resources.waitData])\n\t\t\t.then(() => {\n\t\t\t\tconst data = [];\n\t\t\t\tconst scales = this.local.getScales();\n\t\t\t\tassignments.data.each(obj => {\n\t\t\t\t\tconst res = this.getDiagramItemData(obj, scales);\n\t\t\t\t\tif (res) data.push(res);\n\t\t\t\t});\n\t\t\t\tthis._rdCollection.parse(data);\n\t\t\t\tthis.groupResourceDiagram();\n\t\t\t});\n\n\t\treturn this._rdCollection;\n\t}\n\n\t/**\n\t * Synchs RD collection with main collections and scale changes\n\t */\n\tsyncRDWithData() {\n\t\tthis.app.on(\"onScalesUpdate\", (v, o) => {\n\t\t\tif (this._rdCollection && this._rdCollection.data.order.length) {\n\t\t\t\tthis.refreshTaskDiagram();\n\n\t\t\t\tif (v.minUnit !== o.minUnit) {\n\t\t\t\t\tthis.updateUnitDurations();\n\t\t\t\t\tthis.groupResourceDiagram();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst tasks = this.local.tasks();\n\t\ttasks.data.attachEvent(\"onStoreUpdated\", (id, obj, mode) => {\n\t\t\tif (\n\t\t\t\tmode &&\n\t\t\t\tobj &&\n\t\t\t\t(mode == \"update\" ||\n\t\t\t\t\tmode == \"delete\" ||\n\t\t\t\t\tthis.local.assignments().find(a => a.task === obj.id, true))\n\t\t\t) {\n\t\t\t\tthis.updateTaskDiagram(obj, mode);\n\t\t\t\tthis.groupResourceDiagram();\n\t\t\t}\n\t\t});\n\t\tconst assignments = this.local.assignments();\n\t\tassignments.data.attachEvent(\"onStoreUpdated\", (id, obj, mode) => {\n\t\t\tif (id) {\n\t\t\t\tthis.refreshResourceDiagram(id, obj, mode);\n\t\t\t\tthis.groupResourceDiagram();\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateUnitDurations() {\n\t\tconst tasks = this.local.tasks();\n\t\tconst assignments = this.local.assignments();\n\t\tconst scales = this.local.getScales();\n\t\tthis._rdCollection.data.each(obj => {\n\t\t\tif (obj.task) {\n\t\t\t\tconst task = tasks.getItem(obj.task);\n\t\t\t\tconst assignment = assignments.getItem(obj.id);\n\t\t\t\tif (task && assignment) {\n\t\t\t\t\tobj.duration = this.calculateUnitDuration(task, scales);\n\t\t\t\t\tobj.value = this.calculateLoad(\n\t\t\t\t\t\t{ ...task, ...assignment },\n\t\t\t\t\t\tscales.minUnit\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t *\n\t * @param {Object} task\n\t */\n\tcalculateUnitDuration(task, scales) {\n\t\treturn scales.minUnit === \"day\"\n\t\t\t? task.duration\n\t\t\t: scales.diff(\n\t\t\t\t\ttask.end_date,\n\t\t\t\t\ttask.start_date,\n\t\t\t\t\twebix.Date.startOnMonday,\n\t\t\t\t\tfalse,\n\t\t\t\t\ttrue\n\t\t\t  );\n\t}\n\n\t/**\n\t * Collects data on assignment from all related tables (tasks and resources) for resources diagram\n\t * @param {Object} obj - assignment data object\n\t * @returns {Object} all data about assignment\n\t */\n\tgetDiagramItemData(obj, scales) {\n\t\tconst task = this.local.tasks().getItem(obj.task);\n\n\t\tif (task) {\n\t\t\tif (!this.local._isTaskVisible(task, true)) {\n\t\t\t\tthis.helpers.updateTask(task, 0);\n\t\t\t}\n\n\t\t\tconst resource = this.local.resources().getItem(obj.resource);\n\t\t\tconst res = { ...task, ...resource, ...obj };\n\t\t\tres.duration = this.calculateUnitDuration(task, scales);\n\t\t\tres.value = this.calculateLoad(res, scales.minUnit);\n\n\t\t\t// diagram renders 1 workload markers per min unit\n\t\t\tres.$x = this.truncateX(res.$x, scales);\n\n\t\t\treturn res;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Calculates workload per current min scale unit\n\t * @param {Object} data - data object for resource diagram (at least must have values from tasks and resources)\n\t * @param {string} unit - the min scale unit of the current scale (\"day\", \"week\", etc)\n\t * @returns {Array} load per 1st and last units if they are not fully occupied, and a fully occupied unit load. e.g. [1,0,8]\n\t */\n\tcalculateLoad(data, unit) {\n\t\tconst num = this.getUnitLoad(data);\n\n\t\tif (unit === \"hour\") return [0, 0, num / 24];\n\n\t\tif (unit === \"day\") return [0, 0, num];\n\n\t\tconst load = [];\n\n\t\tlet start = webix.Date.copy(data.start_date);\n\t\tconst startUnitStart = this.helpers.getUnitStart(unit, start);\n\t\tlet end = webix.Date.copy(data.end_date);\n\t\tconst endUnitStart = this.helpers.getUnitStart(unit, end);\n\t\tlet startUnitEnd;\n\n\t\tif (webix.Date.datePart(start, true) > startUnitStart) {\n\t\t\tstartUnitEnd = this.helpers.addUnit(unit, startUnitStart, 1);\n\t\t\tif (end > startUnitEnd) {\n\t\t\t\t// find duration in days for the first not-fully occupied unit\n\t\t\t\tconst days = this.findUnitDuration(start, startUnitEnd, data);\n\t\t\t\tload.push(days);\n\t\t\t\tstart = startUnitEnd;\n\t\t\t} else load.push(0);\n\t\t} else load.push(0);\n\n\t\tif (\n\t\t\t!webix.Date.equal(startUnitStart, endUnitStart) &&\n\t\t\twebix.Date.datePart(end, true) >= endUnitStart\n\t\t) {\n\t\t\t// find duration in days for the last not fully-occupied unit\n\t\t\tconst days = this.findUnitDuration(endUnitStart, end, data);\n\t\t\tload.push(days);\n\t\t\tend = endUnitStart;\n\t\t} else load.push(0);\n\n\t\t// find duration in days for a fully-occupied unit\n\t\tconst plusUnit = this.helpers.addUnit(unit, start, 1);\n\t\tconst days = this.findUnitDuration(\n\t\t\tstart,\n\t\t\tnew Date(Math.min(plusUnit, end)),\n\t\t\tdata\n\t\t);\n\t\tload.push(days);\n\n\t\treturn load.map(l => l * num);\n\t}\n\n\t/**\n\t * Finds unit duration in days ( to calculate work load per init )\n\t * @param start {Date} start date\n\t * @param end {Date} end date\n\t * @param data {object} data object\n\t * @returns {number} days number\n\t */\n\tfindUnitDuration(start, end, data) {\n\t\tlet days = this.helpers.getDifference(\"day\", end, start);\n\t\tif (this.app.config.excludeHolidays) {\n\t\t\tlet i,\n\t\t\t\td = webix.Date.copy(start),\n\t\t\t\tn = days;\n\t\t\tfor (i = 0; i < n; i++) {\n\t\t\t\tif (this.checkHoliday(d, data)) days--;\n\t\t\t\twebix.Date.add(d, 1, \"day\");\n\t\t\t}\n\t\t}\n\t\treturn days;\n\t}\n\n\t/**\n\t * Check if date is a holiday\n\t * @param d {Date} date to check\n\t * @param data {object} data object (resource calendar check)\n\t * @returns {boolean} true if date is a holiday\n\t */\n\tcheckHoliday(d, data) {\n\t\tif (this.app.config.resourceCalendars) {\n\t\t\tconst calendarId = this.local.resources().getItem(data.resource)\n\t\t\t\t.calendar_id;\n\t\t\tif (calendarId) {\n\t\t\t\tconst calendar = this.local.calendars().getItem(calendarId);\n\t\t\t\treturn this.helpers.isResourceHoliday(d, calendar);\n\t\t\t}\n\t\t}\n\t\treturn this.app.config.isHoliday(d);\n\t}\n\n\t/**\n\t * Returns resource load per unit\n\t * @param {Object} data - data object from Resource Diagram collection\n\t * @returns {number} load per unit (by default hours, but can be anything)\n\t */\n\tgetUnitLoad(data) {\n\t\treturn data.value;\n\t}\n\n\t/**\n\t * Cuts X coordinate down to unit start if precision setting was set for the scale,\n\t * because diagram renders 1 workload marker per min unit in the middle\n\t * @param {number} x - the X coordinate of a task bar on a date scale\n\t * @param {Object} scales - the data object of current scales\n\t * @returns {number} altered X\n\t */\n\ttruncateX(x, scales) {\n\t\tif (scales.precise !== false) {\n\t\t\treturn Math.floor(x / scales.cellWidth) * scales.cellWidth;\n\t\t}\n\t\treturn x;\n\t}\n\n\t/**\n\t * Refreshes data in diagram collection if a resource was (un)assigned or load per day changed\n\t * @param {(string|number)} id - the ID of an assignment record\n\t * @param {Object} obj - data object of an assignment\n\t * @param {string} mode - operation mode (\"add\", \"update\", \"delete\")\n\t */\n\trefreshResourceDiagram(id, obj, mode) {\n\t\tconst data = this._rdCollection;\n\t\tconst scales = this.local.getScales();\n\t\tswitch (mode) {\n\t\t\tcase \"update\":\n\t\t\t\tif (data.exists(id)) {\n\t\t\t\t\tconst task = this.local.tasks().getItem(obj.task);\n\t\t\t\t\tconst resource = { ...this.local.resources().getItem(obj.resource) };\n\t\t\t\t\tdelete resource.id;\n\t\t\t\t\tconst value = this.calculateLoad({ ...task, ...obj }, scales.minUnit);\n\t\t\t\t\tdata.updateItem(id, { ...obj, ...resource, value });\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"add\":\n\t\t\t\tdata.add(this.getDiagramItemData(obj, scales));\n\t\t\t\tbreak;\n\t\t\tcase \"delete\":\n\t\t\t\tif (data.exists(id)) data.remove(id);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Removed all related data records in diagram collection if an assigned task was removed\n\t * @param {Object} task - the ID of a task\n\t * @param {string} mode - operation type (add, delete, update)\n\t */\n\tupdateTaskDiagram(task, mode) {\n\t\tconst data = this._rdCollection;\n\t\tconst scales = this.local.getScales();\n\n\t\tif (mode === \"delete\") {\n\t\t\tthis.pruneDiagram();\n\t\t} else if (mode === \"add\") {\n\t\t\tconst rec = this.local.assignments().find(a => a.task === task.id, true);\n\t\t\tdata.add(this.getDiagramItemData(rec, scales));\n\t\t} else if (mode === \"update\") {\n\t\t\tconst assignments = data.find(a => a.task === task.id);\n\t\t\tassignments.forEach(a => {\n\t\t\t\tconst oa = this.local.assignments().getItem(a.id);\n\t\t\t\tdata.updateItem(a.id, {\n\t\t\t\t\tstart_date: task.start_date,\n\t\t\t\t\tid: a.id,\n\t\t\t\t\tduration: this.calculateUnitDuration(task, scales),\n\t\t\t\t\t$x: this.truncateX(task.$x, scales),\n\t\t\t\t\tvalue: this.calculateLoad({ ...task, ...oa }, scales.minUnit),\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Cleans removed tasks from resource diagram\n\t * (it's not enough to remove 1 removed task because the removed task can have kids,\n\t * and they go together with their parent and there is no event about each of them)\n\t */\n\tpruneDiagram() {\n\t\tconst tasks = this.local.tasks();\n\t\tconst toRemove = [];\n\t\tthis._rdCollection.data.eachLeaf(0, d => {\n\t\t\tif (!tasks.exists(d.task)) toRemove.push(d.id);\n\t\t});\n\t\tif (toRemove.length) this._rdCollection.remove(toRemove);\n\t}\n\n\t/**\n\t * Updates $x coordinates for tasks after scale changes\n\t */\n\trefreshTaskDiagram() {\n\t\tconst scales = this.local.getScales();\n\t\tthis._rdCollection.data.each(a => {\n\t\t\tconst task = this.local.tasks().getItem(a.task);\n\t\t\tif (task) a.$x = this.truncateX(task.$x, scales);\n\t\t});\n\t}\n\n\t/**\n\t * Groups data for resource diagram\n\t */\n\tgroupResourceDiagram() {\n\t\tconst collection = this._rdCollection;\n\t\tcollection.group({\n\t\t\tby: obj => obj.name + \"-\" + obj.category,\n\t\t\tmap: {\n\t\t\t\tresource_id: [\"resource\"],\n\t\t\t\tvalue: [\"name\"],\n\t\t\t\tname: [\"name\"],\n\t\t\t\tcategory: [\"category\"],\n\t\t\t\tavatar: [\"avatar\"],\n\t\t\t\tload: [\"value\", calculateLoad],\n\t\t\t\tduration: [\"duration\", collect], // num of workload markers\n\t\t\t\tunits: [\"value\", collect], // number on a workload marker\n\t\t\t\t$x: [\"$x\", collect], // start of a task\n\t\t\t\tcount: [\"value\", \"count\"],\n\t\t\t\tstart_date: [\"start_date\", collect],\n\t\t\t},\n\t\t});\n\t\tcollection.group(\n\t\t\t{\n\t\t\t\tby: \"category\",\n\t\t\t\tmap: {\n\t\t\t\t\tvalue: [\"category\"],\n\t\t\t\t\tname: [\"category\"],\n\t\t\t\t\tduration: [\"duration\", \"sum\"],\n\t\t\t\t\tload: [\"load\", \"sum\"],\n\t\t\t\t\tcount: [\"count\", \"sum\"],\n\t\t\t\t},\n\t\t\t},\n\t\t\t0\n\t\t);\n\t}\n\n\t/* Grouping for Resource View*/\n\n\t/**\n\t * Resource-task collection (shown when \"display\" state property equals \"resources\")\n\t * @returns {object} TreeCollection|webix.TreeCollection\n\t */\n\tgetResourceTree() {\n\t\tif (this._resourcesTree) return this._resourcesTree;\n\n\t\tthis._resourcesTree = new webix.TreeCollection({\n\t\t\ton: {\n\t\t\t\t\"data->onStoreUpdated\": (id, obj, mode) => {\n\t\t\t\t\tid = mode == \"update\" || mode == \"paint\" ? id : null;\n\t\t\t\t\tthis.refreshResourceTasks(id);\n\t\t\t\t\tthis.local.refreshLinks();\n\t\t\t\t},\n\t\t\t},\n\t\t\tscheme: {\n\t\t\t\t$sort: {\n\t\t\t\t\tby: \"start_date\",\n\t\t\t\t\tdir: \"asc\",\n\t\t\t\t\tas: \"int\",\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tthis._resourcesTree.parse(\n\t\t\tthis.resourceTaskLoader().finally(() => {\n\t\t\t\tthis.syncResourceTree();\n\t\t\t})\n\t\t);\n\n\t\treturn this._resourcesTree;\n\t}\n\n\t/**\n\t * Load task data and extend each task item with the \"resources\" property -\n\t * an array of task resources or null\n\t * @returns {Promise} promise that is resolved with a data array\n\t */\n\ttasksWithResources() {\n\t\treturn webix.promise\n\t\t\t.all([this.local.tasks().waitData, this.local.assignments().waitData])\n\t\t\t.then(() => {\n\t\t\t\tlet data = [];\n\t\t\t\tthis.local.tasks().data.each(\n\t\t\t\t\tt => {\n\t\t\t\t\t\tif (t.type == \"task\" || !t.type) {\n\t\t\t\t\t\t\tlet task = Object.assign({}, t);\n\t\t\t\t\t\t\tconst result = this.local\n\t\t\t\t\t\t\t\t.assignments()\n\t\t\t\t\t\t\t\t.data.find(a => a.task == task.id);\n\t\t\t\t\t\t\ttask.resources = result.length\n\t\t\t\t\t\t\t\t? result.map(item => item.resource)\n\t\t\t\t\t\t\t\t: null;\n\t\t\t\t\t\t\tdata.push(task);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"\",\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\treturn data;\n\t\t\t});\n\t}\n\n\t/**\n\t * tasks and resources loader\n\t * @returns {Promise<[]>} promise that is resolved with a data array\n\t * @private\n\t */\n\tresourceTaskLoader() {\n\t\tconst Ops = this.app.getService(\"operations\");\n\t\treturn webix.promise\n\t\t\t.all([this.tasksWithResources(), this.local.resources().waitData])\n\t\t\t.then(d => {\n\t\t\t\tlet data = this.getResourceTaskData(d[0]);\n\t\t\t\tdata.forEach(r => {\n\t\t\t\t\tOps.setProjectData(r, null, r.data);\n\t\t\t\t});\n\t\t\t\treturn data;\n\t\t\t});\n\t}\n\n\t/**\n\t * Updates Resource TreeCollection, called on tasks() TreeCollection update\n\t */\n\trefreshResourceTree() {\n\t\tif (this._resourcesTree.count()) {\n\t\t\t// get closed branches\n\t\t\tthis.closedResources = [];\n\t\t\tthis._resourcesTree.data.eachChild(\"0\", item => {\n\t\t\t\tif (!item.open) this.closedResources.push(item.resources);\n\t\t\t});\n\t\t} else this.closedResources = null;\n\t\tthis.resourceTaskLoader().then(data => {\n\t\t\t// reload data\n\t\t\tthis._resourcesTree.clearAll();\n\t\t\tthis._resourcesTree.parse(data);\n\t\t\treturn data;\n\t\t});\n\t}\n\n\tsyncResourceTree() {\n\t\tconst tree = this._resourcesTree;\n\t\tthis.local.tasks().data.attachEvent(\"onStoreUpdated\", (id, obj, mode) => {\n\t\t\tif (mode == \"update\") {\n\t\t\t\tconst inTree = tree.exists(id) && tree.getItem(id).type == \"task\";\n\t\t\t\tconst becomesTask = obj.type == \"task\";\n\n\t\t\t\tif (inTree && becomesTask) {\n\t\t\t\t\ttree.updateItem(id, {\n\t\t\t\t\t\ttext: obj.text,\n\t\t\t\t\t\tdetails: obj.details,\n\t\t\t\t\t\tstart_date: obj.start_date,\n\t\t\t\t\t\tend_date: obj.end_date,\n\t\t\t\t\t\tduration: obj.duration,\n\t\t\t\t\t\tprogress: obj.progress,\n\t\t\t\t\t});\n\t\t\t\t\tconst pId = tree.getParentId(id);\n\t\t\t\t\tlet item = tree.getItem(pId);\n\t\t\t\t\tif (item) {\n\t\t\t\t\t\titem = this.app.getService(\"operations\").setProjectData(item, tree);\n\t\t\t\t\t\ttree.updateItem(pId, item);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (inTree ^ becomesTask) {\n\t\t\t\t\tthis.refreshResourceTree();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.refreshResourceTree();\n\t\t\t}\n\t\t});\n\t\tthis.local.assignments().data.attachEvent(\"onStoreUpdated\", () => {\n\t\t\tthis.refreshResourceTree();\n\t\t});\n\t}\n\n\t/**\n\t * Get data for resource Tree collection ( tasks grouped by resources )\n\t * @param {array} tasks - an tasks array where each item contains\n\t * \"resources\" property (an array of ids or null)\n\t * @returns {array} data array\n\t */\n\tgetResourceTaskData(tasks) {\n\t\tlet data = [];\n\t\tlet unassignedBranch = null;\n\t\tconst Ops = this.app.getService(\"operations\");\n\n\t\ttasks.forEach(t => {\n\t\t\tconst { resources } = t;\n\t\t\tlet item;\n\t\t\tif (!resources) item = unassignedBranch ? unassignedBranch : null;\n\t\t\telse item = data.find(item => arrayEquals(item.resources, resources));\n\t\t\tif (!item) {\n\t\t\t\titem = {\n\t\t\t\t\tid: resources ? webix.uid() : \"unassigned\",\n\t\t\t\t\ttype: \"project\",\n\t\t\t\t\ttext: \"\",\n\t\t\t\t\tdata: [],\n\t\t\t\t\t// $group needed for faster checks\n\t\t\t\t\t$group: true,\n\t\t\t\t\t// restore open/closed state\n\t\t\t\t\topen: this.checkResourceOpen(resources),\n\t\t\t\t};\n\t\t\t\titem.resources = resources;\n\t\t\t\tif (resources)\n\t\t\t\t\titem.text = resources\n\t\t\t\t\t\t.map(id => this.local.resources().getItem(id))\n\t\t\t\t\t\t.sort(Ops.sortResources)\n\t\t\t\t\t\t.map(item => item.name)\n\t\t\t\t\t\t.join(\", \");\n\n\t\t\t\tif (resources) data.push(item);\n\t\t\t\telse {\n\t\t\t\t\titem.id = \"unassigned\";\n\t\t\t\t\tunassignedBranch = item;\n\t\t\t\t}\n\t\t\t}\n\t\t\titem.data.push(webix.copy(t));\n\t\t});\n\t\tif (unassignedBranch) data.push(unassignedBranch);\n\t\treturn data;\n\t}\n\n\t/**\n\t * Set task(s) properties that are needed to define size and position\n\t * @param {string} updID - task id (optional)\n\t * @param {number} i - task index (optional)\n\t */\n\trefreshResourceTasks(updID, i) {\n\t\tconst tree = this._resourcesTree;\n\t\tif (!updID) {\n\t\t\ttree.data.order.forEach((id, i) => {\n\t\t\t\tthis.refreshResourceTasks(id, i);\n\t\t\t});\n\t\t} else {\n\t\t\tconst t = tree.getItem(updID);\n\t\t\ti = !webix.isUndefined(i) ? i : tree.getIndexById(updID);\n\t\t\tthis.helpers.updateTask(t, i);\n\t\t}\n\t}\n\t/**\n\t * Checks whether this resource group needs to be open\n\t * @param {array} resources - array of resources in the group or null for Unassigned\n\t * @returns {boolean} result of the check\n\t */\n\tcheckResourceOpen(resources) {\n\t\tif (!this.closedResources) return true;\n\t\tif (!resources) return this.closedResources.indexOf(null) == -1;\n\t\treturn this.closedResources.find(arr => arrayEquals(arr, resources))\n\t\t\t? false\n\t\t\t: true;\n\t}\n}\n\n/**\n * An aggregation function for data grouping that collects column values (any) into an array\n * @param {string} property - the name of the data field (column)\n * @param {Array} data - the data objects of the items from the data set\n * @returns {Array} the resulting array\n */\nfunction collect(property, data) {\n\tconst ws = [];\n\n\tfor (let i = 0; i < data.length; i++) {\n\t\tws.push(property(data[i]));\n\t}\n\n\treturn ws;\n}\n\n/**\n * @param {string} property - the name of the data field (column)\n * @param {Array} data - the data objects of the items from the data set\n * @returns {number}\n */\nfunction calculateLoad(property, data) {\n\tlet sum = 0;\n\n\tfor (let i = 0; i < data.length; i++) {\n\t\tconst units = property(data[i]);\n\t\tlet duration = parseInt(data[i].duration);\n\t\tconst last = units.length - 1;\n\t\tfor (let j = 0; j < units.length; ++j) {\n\t\t\tconst num = units[j];\n\t\t\tif (num) {\n\t\t\t\tsum += (j === last ? duration : 1) * num;\n\t\t\t\tduration--;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn sum;\n}\n","import { JetApp, plugins, EmptyRouter } from \"webix-jet\";\nimport { initJetWin } from \"@xbs/jet-helpers\";\nimport { createState, link } from \"jet-restate\";\n\nimport views from \"./export_views\";\nimport en from \"locales/en\";\n\n// services\nimport Local from \"./models/Local\";\nimport Backend from \"./models/Backend\";\nimport Operations from \"./models/Operations\";\nimport Helpers from \"./models/Helpers\";\nimport Grouping from \"models/Grouping\";\n\nexport class App extends JetApp {\n\tconstructor(config) {\n\t\t// widget state\n\t\tconst state = createState({\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\tselected: null,\n\t\t\tedit: null,\n\t\t\treadonly: config.readonly || false,\n\t\t\tsort: null,\n\t\t\tdisplay:\n\t\t\t\tconfig.resources && config.display == \"resources\"\n\t\t\t\t\t? \"resources\"\n\t\t\t\t\t: \"tasks\",\n\t\t\tcriticalPath: config.criticalPath || false,\n\t\t\tresourcesDiagram: !!(config.resources && config.resourcesDiagram),\n\t\t\ttreeWidth: config.treeWidth || (config.resources ? 400 : 500),\n\t\t\tbaseline: config.baseline || false,\n\t\t});\n\n\t\tconst isHoliday =\n\t\t\tconfig.isHoliday ||\n\t\t\tfunction(date) {\n\t\t\t\tconst d = date.getDay();\n\t\t\t\treturn d === 0 || d === 6;\n\t\t\t};\n\n\t\tconst defaults = {\n\t\t\trouter: EmptyRouter,\n\t\t\tversion: VERSION,\n\t\t\tdebug: DEBUG,\n\t\t\tstart: \"/top\",\n\t\t\tcompactWidth: 650,\n\t\t\tmarkers: [{ css: \"webix_gantt_today_marker\", now: true }],\n\t\t\tparams: { state, forceCompact: config.compact },\n\t\t\tlinks: true,\n\t\t\tisHoliday,\n\t\t};\n\n\t\tsuper({ ...defaults, ...config });\n\n\t\tconst dynamic = obj =>\n\t\t\tthis.config.override ? this.config.override.get(obj) || obj : obj;\n\n\t\t//order matters\n\t\tthis.setService(\"helpers\", new (dynamic(Helpers))(this, config));\n\t\tthis.setService(\"local\", new (dynamic(Local))(this, config));\n\t\tthis.setService(\"backend\", new (dynamic(Backend))(this, config.url));\n\t\tthis.setService(\"operations\", new (dynamic(Operations))(this));\n\t\tthis.setService(\"grouping\", new (dynamic(Grouping))(this));\n\t\tinitJetWin(this);\n\n\t\tthis.use(\n\t\t\tplugins.Locale,\n\t\t\tthis.config.locale || {\n\t\t\t\tlang: \"en\",\n\t\t\t\twebix: {\n\t\t\t\t\ten: \"en-US\",\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t}\n\n\trequire(type, name) {\n\t\tif (type === \"jet-views\") return views[name];\n\t\telse if (type === \"jet-locales\") return locales[name];\n\n\t\treturn null;\n\t}\n\n\t// for external users\n\tgetState() {\n\t\treturn this.config.params.state;\n\t}\n}\n\nwebix.protoUI(\n\t{\n\t\tname: \"gantt\",\n\t\tapp: App,\n\t\tgetState() {\n\t\t\treturn this.$app.getState();\n\t\t},\n\t\tgetService(name) {\n\t\t\treturn this.$app.getService(name);\n\t\t},\n\t\t$init() {\n\t\t\tconst state = this.$app.getState();\n\t\t\tfor (let key in state) {\n\t\t\t\tlink(state, this.config, key);\n\t\t\t}\n\n\t\t\tthis.$app.attachEvent(\"bars:beforedrag\", (item, ctx) =>\n\t\t\t\tthis.callEvent(\"onBeforeDrag\", [item, ctx])\n\t\t\t);\n\t\t\tthis.$app.attachEvent(\"bars:beforedrop\", (item, ctx) =>\n\t\t\t\tthis.callEvent(\"onBeforeDrop\", [item, ctx])\n\t\t\t);\n\t\t},\n\t\t$exportView: function(options) {\n\t\t\tif (\n\t\t\t\toptions.export_mode === \"png\" ||\n\t\t\t\t(options.export_mode === \"pdf\" && options.display === \"image\")\n\t\t\t)\n\t\t\t\treturn this.$app.getRoot();\n\t\t\treturn this.$app.getService(\"local\").tasks();\n\t\t},\n\t\tclearAll() {\n\t\t\tthis.$app.getService(\"local\").clearAll();\n\t\t},\n\t\treload() {\n\t\t\tthis.$app.getService(\"local\").reload();\n\t\t},\n\t},\n\twebix.ui.jetapp\n);\n\n// re-export for customization\nconst services = { Local, Backend, Operations, Helpers, Grouping };\nconst locales = { en };\nexport { views, locales, services };\n","export default {\n\tEdit: \"Edit\",\n\tDone: \"Done\",\n\t\"Delete task\": \"Delete task\",\n\t\"Delete link\": \"Delete link\",\n\t\"The task will be deleted permanently, are you sure?\":\n\t\t\"The task will be deleted permanently, are you sure?\",\n\t\"The link will be deleted permanently, are you sure?\":\n\t\t\"The link will be deleted permanently, are you sure?\",\n\tPredecessors: \"Predecessors\",\n\tSuccessors: \"Successors\",\n\n\tTitle: \"Title\",\n\t\"Start date\": \"Start date\",\n\t\"End date\": \"End date\",\n\tDuration: \"Duration\",\n\tProgress: \"Progress\",\n\tNotes: \"Notes\",\n\tType: \"Type\",\n\tProject: \"Project\",\n\tMilestone: \"Milestone\",\n\t\"Add task\": \"Add task\",\n\t\"Add project\": \"Add project\",\n\t\"(no title)\": \"(no title)\",\n\t\"Save changes?\": \"Save changes?\",\n\n\t\"Related tasks\": \"Related tasks\",\n\tTask: \"Task\",\n\tLink: \"Link\",\n\t\"End to start\": \"End to start\",\n\t\"Start to start\": \"Start to start\",\n\t\"End to end\": \"End to end\",\n\t\"Start to end\": \"Start to end\",\n\n\tLasts: \"Lasts\",\n\tday: \"day\",\n\tdays: \"days\",\n\n\t\"Add assignment\": \"Add assignment\",\n\tAssignment: \"Assignment\",\n\tAssignments: \"Assignments\",\n\tAssigned: \"Assigned\",\n\t\"Delete assignment\": \"Delete assignment\",\n\t\"Are you sure to delete this assignment?\":\n\t\t\"Are you sure to delete this assignment?\",\n\t\"No resources to add\": \"No resources to add\",\n\tUnassigned: \"Unassigned\",\n\n\thour: \"h\",\n\t\"Hours per\": \"Hours per\",\n\t\"Tasks per\": \"Tasks per\",\n\tName: \"Name\",\n\tHours: \"Hours\",\n\tTasks: \"Tasks\",\n\tmonth: \"month\",\n\tweek: \"week\",\n\tquarter: \"quarter\",\n\tyear: \"year\",\n\n\t\"Split task\": \"Split task\",\n\t\"Planned dates\": \"Planned dates\",\n\t\"Planned dates will be removed, are you sure?\":\n\t\t\"Planned dates will be removed, are you sure?\",\n\t\"Add dates\": \"Add dates\",\n\t\"Remove dates\": \"Remove dates\",\n};\n","webix.protoUI({\n\tname:\"kanbanheader\",\n\t$kanban:true,\n\t$skin:function(){\n\t\tthis.defaults.height = webix.skin.$active.barHeight;\n\t\tthis._template_types.sub.height = webix.skin.$active.barHeight - 12;\n\t},\n\t$init:function(config){\n\t\tlet subtype = this._template_types[config.type];\n\t\tif (subtype)\n\t\t\twebix.extend(config, subtype);\n\t},\n\tdefaults:{\n\t\tcss:\"webix_kanban_header\",\n\t\tborderless:true,\n\t\ttemplate:function(){\n\t\t\tlet icon = this.icon||(this.link?\"webix_kanban_icon kbi-plus-circle\":\"\");\n\t\t\treturn (icon ? \"<span class='webix_icon \"+(this.link?\"webix_kanban_add_icon \":\"\")+icon+\"'></span>\" : \"\") +\n\t\t\t\t\"<span class='webix_strong' style='line-height:\"+this.height+\"px'>\"+(this.label||\"\")+\"</span>\";\n\t\t},\n\t},\n\t_template_types:{\n\t\t\"sub\":{\n\t\t\tcss:\"webix_kanban_sub_header\"\n\t\t}\n\t},\n\ton_click:{\n\t\t\"webix_kanban_add_icon\":function(){\n\t\t\tlet obj = { text:\"\" };\n\t\t\tlet kanban = this.getKanban();\n\t\t\tlet list = kanban.queryView({id:this.config.link});\n\n\t\t\tif (list && this.callEvent(\"onBeforeCardAdd\",[obj, list])){\n\t\t\t\tkanban.setListStatus(obj, list);\n\t\t\t\tkanban.add(obj);\n\t\t\t}\n\t\t}\n\t},\n\tgetKanban(){\n\t\treturn webix.$$(this.config.master);\n\t},\n}, webix.MouseEvents, webix.ui.template);","const images = { jpg:true, jpeg:true, png:true, gif:true };\n\nconst icons = { ppt:\"-powerpoint\", pptx:\"-powerpoint\", pptm:\"-powerpoint\", pps:\"-powerpoint\", ppsx:\"-powerpoint\", ppsm:\"-powerpoint\",\n\tdoc:\"-word\", docx:\"-word\", docm:\"-word\", xls:\"-excel\", xlsx:\"-excel\", xlsm:\"-excel\", xlsb:\"-excel\", pdf:\"-pdf\",\n\twav:\"-audio\", aif:\"-audio\", mp3:\"-audio\", mid:\"-audio\", mpg:\"-video\", mov:\"-video\", wmv:\"-video\", avi:\"-video\", mp4:\"-video\",\n\tzip:\"-archive\", jar:\"-archive\", rar:\"-archive\", gz:\"-archive\", jpg:\"-image\", jpeg:\"-image\", png:\"-image\", gif:\"-image\"\n};\n\nexport function isImage(key){\n\treturn images[key.toString().toLowerCase()];\n}\n\nexport function getIconName(key){\n\treturn icons[key.toString().toLowerCase()] || \"\";\n}","import {isImage} from \"./helpers/image\";\n\nexport var type = {\n\theight:\"auto\",\n\ticons:[\n\t\t{ id:\"attachments\", icon:\"webix_kanban_icon kbi-file\", show:function(obj) { return obj.attachments? obj.attachments.length: false; }, template:\"#attachments.length#\"},\n\t\t{ id:\"comments\", icon:\"webix_kanban_icon kbi-comment\" , show:function(obj,kanban) { return !!kanban.config.comments; },\n\t\t\ttemplate:function(obj) { return obj.comments?(obj.comments.length||\"\"):\"\"; }\n\t\t},\n\t\t{ id:\"editor\", icon:\"webix_kanban_icon kbi-pencil\", show:function(obj,kanban) { return (kanban.config.editor && !kanban.config.cardActions);} },\n\t\t{ id:\"menu\", icon:\"webix_kanban_icon kbi-cogs\", show:function(obj,kanban) { return !!kanban.config.cardActions;} }\n\t],\n\ttemplateTags: function(obj,common,kanban){\n\t\tlet res = [];\n\t\tif(obj.tags){\n\t\t\tlet tags = kanban._tags;\n\t\t\tfor (let i = 0; i < obj.tags.length; i++){\n\t\t\t\tlet tag = obj.tags[i];\n\t\t\t\tif (tags.exists(tag))\n\t\t\t\t\ttag = tags.getItem(tag).value;\n\t\t\t\tres.push(\"<span class='webix_kanban_tag'>\"+tag+\"</span>\");\n\t\t\t}\n\t\t}\n\t\treturn \"<div  class='webix_kanban_tags'>\" +(res.length?res.join(\"\"):\"&nbsp;\")+\"</div>\";\n\t},\n\ttemplateIcons: function(obj,common,kanban){\n\t\tvar icons = [];\n\t\tvar icon = null;\n\t\tvar html = \"\";\n\t\tfor (var i = 0; i < common.icons.length; i++){\n\t\t\ticon = common.icons[i];\n\t\t\tif(!icon.show || icon.show(obj,kanban)){\n\t\t\t\thtml = \"<span webix_icon_id='\"+(icon.id||icon.icon||icon)+\"' class='webix_kanban_footer_icon' title='\"+(icon.tooltip||\"\")+\"'>\";\n\t\t\t\thtml += \"<span class='\"+(icon.icon||icon)+\" webix_icon'></span>\";\n\n\t\t\t\tif(icon.template){\n\t\t\t\t\thtml += \"<span class='webix_kanban_icon_text'>\"+webix.template(icon.template)(obj)+\"</span>\";\n\t\t\t\t}\n\t\t\t\thtml += \"</span>\";\n\t\t\t\ticons.push(html);\n\t\t\t}\n\t\t}\n\t\treturn \"<div  class='webix_kanban_footer_icons'>\" + icons.join(\" \") + \"</div>\";\n\t},\n\ttemplateAvatar: function(obj,common,kanban){\n\t\tlet users = kanban._users;\n\t\tlet user = (obj.user_id && users.exists(obj.user_id)) ? users.getItem(obj.user_id) : {};\n\t\tif (user.image)\n\t\t\treturn \"<img class='webix_kanban_avatar' src='\"+user.image+\"' title='\"+(user.value||\"\")+\"'>\";\n\t\treturn \"<span class='webix_icon webix_kanban_icon kbi-account' title='\"+(user.value||\"\")+\"'></span>\";\n\t},\n\ttemplateBody: function(obj){\n\t\treturn obj.text;\n\t},\n\ttemplateAttachments: function(obj){\n\t\tif(obj.attachments){\n\t\t\tfor (let i in obj.attachments){\n\t\t\t\tlet v = obj.attachments[i];\n\t\t\t\tlet type = v.link.split(\".\").pop();\n\t\t\t\tif (isImage(type))\n\t\t\t\t\treturn \"<img class='webix_kanban_attachment' src='\"+v.link+\"'/>\";\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t},\n\ttemplateFooter: function(obj,common,kanban){\n\t\tvar tags = common.templateTags(obj,common,kanban);\n\t\treturn (tags?tags:\"&nbsp;\") + common.templateIcons(obj,common,kanban);\n\t},\n\ttemplateStart:webix.template(\"<div webix_l_id='#id#' class='{common.classname()} webix_kanban_list_item' style='width:{common.width}px; height:{common.height}px;'>\"),\n\ttemplate:function(obj, common){\n\t\tlet kanban = webix.$$(common.master);\n\n\t\tvar color = kanban._colors.exists(obj.color) ? kanban._colors.getItem(obj.color).color : obj.color;\n\t\tvar avatar = \"<div class='webix_kanban_user_avatar' webix_icon_id='$avatar'>\"+common.templateAvatar(obj,common,kanban)+\"</div>\";\n\t\tvar body = \"<div class='webix_kanban_body'>\"+common.templateBody(obj,common,kanban)+avatar+\"</div>\";\n\t\tvar attachments = kanban.config.attachments ? common.templateAttachments(obj,common,kanban) : \"\";\n\t\tvar footer = \"<div class='webix_kanban_footer'>\"+common.templateFooter(obj,common,kanban)+ \"</div>\";\n\t\treturn \"<div class='webix_kanban_list_content'\"+(color ? \" style='border-left-color:\"+color+\"'\" : \"\")+\">\"+attachments+body+footer+\"</div>\";\n\t}\n};\n\nwebix.KanbanView = {\n\t$kanban:true,\n\ton_context:{},\n\t$skin:function(){\n\t\t// prevent default list's item skin height\n\t},\n\tgetKanban(){\n\t\treturn webix.$$(this.config.master);\n\t},\n\t_kanban_event(s, t, i){\n\t\tthis.attachEvent(s,function(...rest){\n\t\t\trest[i] = this;\n\t\t\treturn  this.getKanban().callEvent(t, rest);\n\t\t});\n\t},\n\t_fixOrder(){\n\t\tthis.data.each((a,i) => a.$index = i+1);\n\t},\n\tmove(sid,tindex,tobj, details){\n\t\ttobj = tobj || this;\n\t\tdetails = details || {};\n\t\t// normally only one item is dragged\n\t\t// still, it possible to enable multi-selection through API\n\t\tif (webix.isArray(sid)){\n\t\t\treturn webix.DataMove.move.call(this, sid,tindex,tobj, details);\n\t\t}\n\n\t\tconst statusChange = (tobj !== this);\n\t\tconst kanban = this.getKanban();\n\t\tconst item = kanban.getItem(sid);\n\t\tconst dp = webix.dp.$$(kanban.config.id);\n\n\t\tif (statusChange){\n\t\t\tif (!kanban.callEvent(\"onBeforeStatusChange\", [sid,tobj.config.status,tobj])) return;\n\n\t\t\tkanban.setListStatus(item, tobj);\n\n\t\t\tif (dp){\n\t\t\t\tdp.ignore(() => kanban.updateItem(sid));\n\t\t\t} else kanban.updateItem(sid);\n\t\t}\n\n\t\twebix.DataMove.move.call(tobj, sid, tindex);\n\n\t\tthis._fixOrder();\n\t\tif (this !== tobj) tobj._fixOrder();\n\n\t\t// trigger data saving\n\t\tif (dp){\n\t\t\tconst update = webix.copy(item);\n\t\t\tupdate.webix_move_index = tindex;\n\t\t\tupdate.webix_move_id = tobj.data.order[tindex+1];\n\t\t\t// we need to identify the target list on server side\n\t\t\t// when we have a complex status ( object or function )\n\t\t\t// use separate property\n\t\t\tupdate.webix_move_parent = tobj.config.serverStatus || tobj.config.status;\n\t\t\tdp.save(sid, \"update\", update);\n\t\t}\n\n\t\tif (statusChange)\n\t\t\tkanban.callEvent(\"onAfterStatusChange\", [sid,tobj.config.status,tobj]);\n\n\t\treturn sid;\n\t},\n\t_setHandlers(){\n\t\tthis.attachEvent(\"onAfterSelect\", function(){\n\t\t\tthis.eachOtherList(function(list){\n\t\t\t\tlist.unselect();\n\t\t\t});\n\t\t});\n\n\t\tthis._kanban_event(\"onBeforeSelect\", \"onListBeforeSelect\", 2);\n\t\tthis._kanban_event(\"onAfterSelect\", \"onListAfterSelect\", 1);\n\t\tthis._kanban_event(\"onBeforeContextMenu\", \"onListBeforeContextMenu\", 3);\n\t\tthis._kanban_event(\"onAfterContextMenu\", \"onListAfterContextMenu\", 3);\n\t\tthis._kanban_event(\"onItemClick\", \"onListItemClick\", 3);\n\t\tthis._kanban_event(\"onItemDblClick\", \"onListItemDblClick\", 3);\n\t\tthis._kanban_event(\"onBeforeDrag\", \"onListBeforeDrag\", 2);\n\t\tthis._kanban_event(\"onBeforeDrop\", \"onListBeforeDrop\", 2);\n\t\tthis._kanban_event(\"onAfterDrop\",\"onListAfterDrop\", 2);\n\t\tthis._kanban_event(\"onBeforeDragIn\", \"onListBeforeDragIn\", 2);\n\t\tthis._kanban_event(\"onDragOut\", \"onListDragOut\", 2);\n\n\t\tthis.on_click.webix_kanban_user_avatar = this._handle_icons;\n\t\tthis.on_click.webix_kanban_footer_icon = this._handle_icons;\n\t},\n\t_handle_icons(e,id,node){\n\t\tvar icon = node.getAttribute(\"webix_icon_id\");\n\t\tvar all = this.type.icons;\n\n\t\t//per-icon click handlers\n\t\tif (all){\n\t\t\tfor (var i=0; i<all.length; i++){\n\t\t\t\tif (typeof all[i] === \"object\" && (all[i].id || all[i].icon) === icon){\n\t\t\t\t\tif (all[i].click){\n\t\t\t\t\t\tall[i].click.call(this,id,e,node,this);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (icon === \"$avatar\")\n\t\t\tthis.getKanban().callEvent(\"onAvatarClick\", [id, e, node, this]);\n\t\telse\n\t\t\tthis.getKanban().callEvent(\"onListIconClick\", [icon, id, e, node, this]);\n\t},\n\t$dragCreate: function(a,e){\n\t\tconst text = webix.DragControl.$drag(a,e);\n\t\tif (!text) return false;\n\n\t\t// hide context menus\n\t\twebix.callEvent(\"onClick\", []);\n\n\t\tconst drag_container = document.createElement(\"DIV\");\n\t\tdrag_container.innerHTML = text;\n\t\tdrag_container.className = \"webix_drag_zone webix_kanban_drag_zone\";\n\t\tdocument.body.appendChild(drag_container);\n\t\treturn drag_container;\n\t},\n\t$dropHTML: function(){\n\t\treturn \"<div class='webix_kanban_drop_inner'></div>\";\n\t},\n\teachOtherList:function(code){\n\t\tvar self = this.config.id;\n\t\tvar master = this.getKanban();\n\n\t\tmaster.eachList(function(view){\n\t\t\tif (view.config.id != self)\n\t\t\t\tcode.call(webix.$$(self), view);\n\t\t});\n\t},\n\tdefaults:{\n\t\tdrag:\"move\",\n\t\tselect:true\n\t}\n};","import {type} from \"./common\";\n\nwebix.protoUI({\n\tname:\"kanbanlist\",\n\t$init(){\n\t\tthis.$view.className += \" webix_kanban_list\";\n\t\tthis.$ready.push(webix.bind(this._setHandlers,this));\n\t},\n\tdefaults:{\n\t\tscroll:\"auto\",\n\t},\n\ttype: type\n}, webix.ui.list, webix.KanbanView);","import {type} from \"./common\";\n\nvar dtype = webix.copy(type);\ndtype.width = 200;\n\nwebix.protoUI({\n\tname:\"kanbandataview\",\n\t$init(){\n\t\tthis.$view.className += \" webix_kanban_list\";\n\t\tthis.$ready.push(webix.bind(this._setHandlers,this));\n\t},\n\tdefaults:{\n\t\tprerender:true,\n\t},\n\ttype:dtype\n}, webix.ui.dataview, webix.KanbanView);","import \"./header\";\nimport \"./list\";\nimport \"./dataview\";\nimport \"./editor\";\nimport \"./userlist\";\nimport \"./menu\";\nimport \"./comments\";\n\nimport \"./locale\";\n\nfunction defaultSetter(a, sub){\n\tvar status = sub.config.status;\n\n\tif (typeof status === \"object\"){\n\t\tfor (var key in status)\n\t\t\ta[key] = status[key];\n\t} else if (typeof status === \"function\"){\n\t\tstatus.call(sub, a, true);\n\t} else {\n\t\ta.status = status;\n\t}\n}\nfunction defaultFilter(sub){\n\tvar status = sub.config.status;\n\n\tif (typeof status === \"object\")\n\t\treturn function(a){\n\t\t\tfor (var key in status){\n\t\t\t\tif (a[key] != status[key])\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\tif (typeof status === \"function\")\n\t\treturn function(a){ return status.call(sub, a); };\n\n\treturn function(a){ return a.status === status; };\n}\n\nwebix.protoUI({\n\tname:\"kanban\",\n\tdefaults:{\n\t\tdelimiter:\",\"\n\t},\n\t$skin:function(){\n\t\tthis.defaults.type = \"space\";\n\t},\n\t$init(config){\n\t\tthis.$view.className += \" webix_kanban\";\n\n\t\tthis.data.provideApi(this, true);\n\t\tthis.data.scheme({\n\t\t\t$change:(obj) =>{\n\t\t\t\tif (typeof obj.tags === \"string\")\n\t\t\t\t\tobj.tags = this._strToArr(obj.tags);\n\t\t\t}\n\t\t});\n\t\tthis._destroy_with_me = [];\n\n\t\tthis._statuses = new webix.DataCollection();\n\t\tthis._destroy_with_me.push(this._statuses);\n\n\t\tthis._tags = this._data_unification(config.tags);\n\t\tthis._users = this._data_unification(config.users);\n\t\tthis._colors = this._data_unification(config.colors);\n\t\tthis.$ready.push(function(){\n\t\t\tthis.reconstruct();\n\t\t\tthis._initEditor();\n\t\t\tthis._initUserList();\n\t\t\tthis._initMenu();\n\t\t\tthis._initComments();\n\t\t\tthis.data.attachEvent(\"onStoreUpdated\",\n\t\t\t\t(id, data, mode) => this._applyOrder(id, data, mode));\n\t\t\tthis.data.attachEvent(\"onIdChange\",\n\t\t\t\t(oldid, newid) => {\n\t\t\t\t\tthis.getOwnerList(oldid).data.changeId(oldid, newid);\n\t\t\t\t});\n\t\t\tthis.attachEvent(\"onDestruct\", () => {\n\t\t\t\tfor (let i = 0; i < this._destroy_with_me.length; i++)\n\t\t\t\t\tthis._destroy_with_me[i].destructor();\n\t\t\t});\n\t\t});\n\n\t\t//override default api of datastore\n\t\tthis.serialize = this._serialize;\n\t},\n\t_strToArr(value){\n\t\tif (value){\n\t\t\treturn value.split(this.config.delimiter);\n\t\t}\n\t\treturn [];\n\t},\n\tgetTags(){\n\t\treturn this._tags;\n\t},\n\tgetUsers(){\n\t\treturn this._users;\n\t},\n\tgetColors(){\n\t\treturn this._colors;\n\t},\n\tgetStatuses(){\n\t\treturn this._statuses.serialize();\n\t},\n\tcardActions_setter(value){\n\t\tif (value === true) value = [\"edit\", \"copy\", \"remove\"];\n\t\tif (webix.isArray(value)){\n\t\t\treturn value.map((v) => {\n\t\t\t\treturn { id:v, value:webix.i18n.kanban.menu[v]||v };\n\t\t\t});\n\t\t}\n\t},\n\tshowEditor(obj){\n\t\tlet editor = this.getEditor();\n\t\tif (this.callEvent(\"onBeforeEditorShow\", [editor, obj]) && editor){\n\t\t\teditor.setValues(obj);\n\t\t\teditor.show();\n\t\t\tthis.callEvent(\"onAfterEditorShow\", [editor, obj]);\n\t\t}\n\t},\n\tcopy(id){\n\t\tif (this.callEvent(\"onBeforeCopy\", [id])){\n\t\t\tlet item = webix.copy(this.getItem(id));\n\t\t\tdelete item.id;\n\t\t\titem.text = webix.i18n.kanban.copy + \" \" + (item.text || \"\");\n\t\t\tlet sid = this.add(item);\n\t\t\tlet list = this.getOwnerList(sid);\n\t\t\tlist.move(sid, list.getIndexById(id)+1, list);\n\n\t\t\tthis.callEvent(\"onAfterCopy\", [id]);\n\t\t}\n\t},\n\t_removeCard(id){\n\t\tvar promise = webix.promise.defer();\n\n\t\tif (webix.i18n.kanban.confirm){\n\t\t\twebix.confirm({\n\t\t\t\ttext:webix.i18n.kanban.confirm,\n\t\t\t\tcallback:(result) => {\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tthis.remove(id);\n\t\t\t\t\t\tpromise.resolve();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.remove(id);\n\t\t\tpromise.resolve();\n\t\t}\n\n\t\treturn promise;\n\t},\n\t_data_unification(value){\n\t\tif (value && value.getItem)\n\t\t\treturn value;\n\t\telse {\n\t\t\tlet data = new webix.DataCollection();\n\t\t\tthis._destroy_with_me.push(data);\n\t\t\tif(value && typeof value === \"string\")\n\t\t\t\tdata.load(value);\n\t\t\telse\n\t\t\t\tdata.parse(value||[]);\n\t\t\treturn data;\n\t\t}\n\t},\n\tgetEditor(){\n\t\treturn webix.$$(this._editor);\n\t},\n\tgetUserList(){\n\t\treturn webix.$$(this._userList);\n\t},\n\tgetMenu(){\n\t\treturn webix.$$(this._menu);\n\t},\n\tgetComments(){\n\t\treturn webix.$$(this._comments);\n\t},\n\t_initEditor(){\n\t\tif (this.config.editor){\n\t\t\tlet editor = webix.ui( {view:\"kanbaneditor\", master:this.config.id} );\n\n\t\t\tthis._editor = editor.config.id;\n\t\t\tthis._destroy_with_me.push(editor);\n\n\t\t\tthis.attachEvent(\"onListIconClick\", (icon, id) => {\n\t\t\t\tif (icon === \"editor\") this.showEditor(webix.copy( this.getItem(id) ));\n\t\t\t});\n\t\t\tthis.attachEvent(\"onListItemDblClick\", (id) => this.showEditor(webix.copy( this.getItem(id) )));\n\t\t}\n\t},\n\t_initUserList(){\n\t\tif (this.config.userList){\n\t\t\tlet userlist = typeof this.config.userList === \"object\"?this.config.userList:{};\n\t\t\twebix.extend(userlist, {view:\"kanbanuserlist\", masterId:this.config.id, data:this._users}, true);\n\t\t\tuserlist = webix.ui(userlist);\n\n\t\t\tthis._userList = userlist.config.id;\n\t\t\tthis._destroy_with_me.push(userlist);\n\t\t\t\n\t\t\tthis.attachEvent(\"onAvatarClick\", (id, e, node) => {\n\t\t\t\tlet userList = this.getUserList();\n\t\t\t\tuserList.setContext({id:id, user_id:this.getItem(id).user_id});\n\t\t\t\tuserList.show(node);\n\t\t\t});\n\t\t}\n\t},\n\t_initMenu(){\n\t\tif (this.config.cardActions){\n\t\t\tlet menu = webix.ui( {view:\"kanbanmenu\", data:this.config.cardActions, masterId:this.config.id} );\n\n\t\t\tthis._menu = menu.config.id;\n\t\t\tthis._destroy_with_me.push(menu);\n\n\t\t\tthis.attachEvent(\"onListIconClick\", (icon, id, e, node) => {\n\t\t\t\tif (icon === \"menu\"){\n\t\t\t\t\tlet menu = this.getMenu();\n\t\t\t\t\tmenu.setContext( {id:id} );\n\t\t\t\t\tmenu.show(node);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t_initComments(){\n\t\tif (this.config.comments){\n\t\t\tlet body = typeof this.config.comments === \"object\"?this.config.comments:{};\n\t\t\tbody = webix.extend({width:400, height:400}, body, true);\n\t\t\twebix.extend(body, { view:\"comments\", users:this._users }, true);\n\t\t\tlet comments = webix.ui( {view:\"kanbanchat\", body:body, masterId:this.config.id} );\n\n\t\t\tthis._comments = comments.config.id;\n\t\t\tthis._destroy_with_me.push(comments);\n\n\t\t\tthis.attachEvent(\"onListIconClick\", (icon, id, e, node) => {\n\t\t\t\tif (icon === \"comments\" && this.callEvent(\"onBeforeCommentsShow\", [id, e, node])){\n\t\t\t\t\tlet chat = this.getComments();\n\t\t\t\t\tlet pos = webix.html.offset(node);\n\t\t\t\t\tpos.y += pos.height;\n\t\t\t\t\t\n\t\t\t\t\tchat.hide();\n\t\t\t\t\tlet comments = chat.getBody();\n\t\t\t\t\tlet data = this.getItem(id).comments || [];\n\n\t\t\t\t\tcomments.parse( webix.copy(data) );\n\t\t\t\t\tchat.setContext( {id:id} );\n\t\t\t\t\tchat.show(pos);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t_serialize(){\n\t\tvar d = [];\n\t\tthis.eachList(function(l){ d = d.concat(l.serialize()); });\n\t\treturn d;\n\t},\n\t_applyOrder(id, data, mode){\n\t\tif (!id) return this._syncData();\n\n\t\tswitch(mode){\n\t\t\tcase \"add\":\n\t\t\t\tif (this._assignList(data) >= 0){\n\t\t\t\t\tthis.getOwnerList(id).add(data);\n\t\t\t\t\tdata.$index = this._sublists[data.$list].count();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"delete\": {\n\t\t\t\tconst subList = this._sublists[data.$list];\n\t\t\t\tif (subList && subList.exists(id))\n\t\t\t\t\tsubList.remove(id);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"paint\":\n\t\t\tcase \"update\": {\n\t\t\t\tif (this.getIndexById(id) === -1) break;\n\n\t\t\t\tconst prevList = data.$list;\n\t\t\t\tconst list = this._assignList(data);\n\n\t\t\t\tif (prevList === list){\n\t\t\t\t\tif (list >= 0)\n\t\t\t\t\t\tthis.getOwnerList(id).updateItem(id, data);\n\t\t\t\t} else {\n\t\t\t\t\tif (this._sublists[prevList])\n\t\t\t\t\t\tthis._sublists[prevList].remove(id);\n\t\t\t\t\tif (list >= 0)\n\t\t\t\t\t\tthis.getOwnerList(id).add(data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tsetListStatus(obj, list){\n\t\tfor (var i=0; i<this._sublists.length; i++){\n\t\t\tif (this._sublists[i] === list){\n\t\t\t\tdefaultSetter(obj, list);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t},\n\treconstruct(){\n\t\tthis._prepareLists();\n\t\tthis._syncData();\n\t},\n\t_prepareLists(){\n\t\tthis._sublists = [];\n\t\tthis._subfilters = [];\n\t\tlet statuses = [];\n\t\tlet views = this.queryView(a => a.$kanban, \"all\");\n\n\t\tfor (let i = 0; i < views.length; i++) {\n\t\t\tlet sub = views[i];\n\t\t\tif ( sub.config.view !== \"kanbanheader\")\n\t\t\t\tthis._sublists.push(sub);\n\t\t\telse sub.config.master = this.config.id;\n\t\t}\n\n\t\tfor (let i = 0; i < this._sublists.length; i++) {\n\t\t\tlet sub = this._sublists[i];\n\t\t\tthis._subfilters[i] = defaultFilter(sub);\n\n\t\t\tif (this.config.icons){\n\t\t\t\tsub.type.icons = sub.type.icons || this.config.icons;\n\t\t\t}\n\n\t\t\tlet value = sub.config.name || (typeof sub.config.status === \"string\" && sub.config.status ?\n\t\t\t\tsub.config.status[0].toUpperCase() + sub.config.status.slice(1) : sub.config.id);\n\t\t\tstatuses.push( {id:i.toString(), value:value} );\n\n\t\t\tsub.config.master = this.config.id;\n\t\t\tsub.type.master = this.config.id;\n\t\t}\n\n\t\tthis._statuses.clearAll();\n\t\tthis._statuses.parse(statuses);\n\t},\n\t_syncData(){\n\t\tconst sets = [];\n\t\tfor (let i=0; i<this._sublists.length; i++) sets[i] = [];\n\n\t\tthis.data.each(function(item){\n\t\t\tlet j = this._assignList(item);\n\t\t\tif (j >= 0)\n\t\t\t\tsets[j].push(item);\n\t\t}, this);\n\n\t\tfor (let i=0; i<this._sublists.length; i++){\n\t\t\tconst data = sets[i];\n\n\t\t\tif (data.length > 1 && data[0].$index)\n\t\t\t\tdata.sort( (a,b) => a.$index > b.$index ? 1 : -1 );\n\n\t\t\tthis._sublists[i].clearAll();\n\t\t\tthis._sublists[i].data.importData(data);\n\t\t\tthis._sublists[i]._fixOrder();\n\t\t}\n\t},\n\t_assignList(data){\n\t\tfor (var i = 0; i < this._sublists.length; i++) {\n\t\t\tif (this._subfilters[i](data)){\n\t\t\t\treturn data.$list = i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\tgetSelectedId(){\n\t\tvar selected = null;\n\t\tthis.eachList(function(list){ selected = list.getSelectedId() || selected; });\n\t\treturn selected;\n\t},\n\tselect(id){\n\t\tthis.getOwnerList(id).select(id);\n\t},\n\tgetOwnerList(id){\n\t\tvar item = this.getItem(id);\n\t\treturn item ? this._sublists[item.$list] : null;\n\t},\n\teachList(code){\n\t\tfor (var i=0; i<this._sublists.length; i++){\n\t\t\tcode.call(this, this._sublists[i], this._sublists[i].config.status);\n\t\t}\n\t}\n}, webix.DataLoader, webix.EventSystem, webix.ui.headerlayout );","import {isImage, getIconName} from \"./helpers/image\";\n\nwebix.protoUI({\n\tname:\"kanbanuploader\",\n\t$init(){\n\t\tthis.files.data.scheme({\n\t\t\t$init:(obj) =>{\n\t\t\t\tif (typeof obj.link === \"string\" && obj.link){\n\t\t\t\t\tobj.name = obj.name || obj.link.split(\"/\").pop();\n\t\t\t\t\tobj.type = obj.type || obj.name.split(\".\").pop();\n\t\t\t\t\tobj.status = obj.status || \"server\";\n\t\t\t\t}\n\t\t\t\tobj.sizetext = obj.sizetext || this._format_size(obj.size);\n\t\t\t}\n\t\t});\n\n\t\tthis.files.data.attachEvent(\"onStoreUpdated\", () => {\n\t\t\tlet view = webix.$$(this.config.link);\n\t\t\tlet html = \"<span class='webix_strong'>\" + (webix.i18n.kanban.dnd||\"\") + \"</span>\";\n\t\t\tif (!this.files.data.count())\n\t\t\t\tview.showOverlay(html);\n\t\t\telse view.hideOverlay();\n\t\t});\n\t},\n\tdefaults:{\n\t\ticon:\"webix_kanban_icon kbi-upload\",\n\t},\n\tgetValue(){\n\t\tlet data = [];\n\t\tthis.files.data.each(function(obj){\n\t\t\tif (obj.status === \"server\")\n\t\t\t\tdata.push( {id:obj.id, link:obj.link, size:obj.size} );\n\t\t});\n\t\treturn data;\n\t},\n\t_format_size(size){\n\t\tlet index = 0;\n\t\twhile (size > 1024){\n\t\t\tindex++;\n\t\t\tsize = size/1024;\n\t\t}\n\t\treturn Math.round(size*100)/100 + \" \" + webix.i18n.fileSize[index];\n\t}\n}, webix.ui.uploader);\n\nwebix.type(webix.ui.dataview, {\n\tname:\"uploader\",\n\theight:91,\n\twidth:161,\n\ttemplate:(obj, common) => {\n\t\treturn `<a${(obj.status === \"server\") ? ` href=\"${obj.link}\" download=\"${obj.name}\"` : \"\"}></a>\n\t\t\t\t${common.body(obj)}\n\t\t\t\t${common.title(obj,common)}\n\t\t\t\t${common.removeIcon(obj)}`;\n\t},\n\tbody:function(obj){\n\t\tif (obj.status === \"server\" && isImage(obj.type))\n\t\t\treturn `<div class=\"webix_kanban_uploader_body\"><img src=\"${obj.link}\"></div>`;\n\n\t\treturn `<div class='webix_kanban_uploader_body'>\n\t\t\t\t\t<span class='webix_icon webix_kanban_icon kbi-file${getIconName(obj.type)}'></span>\n\t\t\t\t</div>`;\n\t},\n\ttitle:function(obj,common){\n\t\treturn `<div class=\"webix_kanban_uploader_title\" title=\"${obj.name}\">\n\t\t\t\t\t${common.progress(obj)}\n\t\t\t\t\t<div class=\"webix_kanban_uploader_label\">${obj.name}</div>\n\t\t\t\t</div>`;\n\t},\n\tprogress:function(obj){\n\t\tswitch(obj.status){\n\t\t\tcase \"client\": return \"<span class='webix_kanban_uploader_progress'>\"+obj.sizetext+\"</span>\";\n\t\t\tcase \"transfer\": return \"<span class='webix_kanban_uploader_progress'>\"+obj.percent+\"%</span>\";\n\t\t\tcase \"server\": return \"<span class='webix_kanban_uploader_progress_server'>\"+obj.sizetext+\"</span>\";\n\t\t\tdefault: return \"<span class='webix_kanban_uploader_progress_error'>ERROR</span>\";\n\t\t}\n\t},\n\tremoveIcon:function(){\n\t\treturn \"<div class='webix_kanban_remove_upload'><span class='webix_icon wxi-close'></span></div>\";\n\t},\n\ton_click:{\n\t\t\"webix_kanban_remove_upload\":function(ev, id){\n\t\t\twebix.$$(this.config.uploader).files.remove(id);\n\t\t\treturn webix.html.preventEvent(ev);\n\t\t}\n\t}\n});","import en from \"./locales/en\";\nwebix.i18n.kanban = en;","import \"./uploader\";\n\nimport \"./locale\";\n\nwebix.protoUI({\n\tname:\"kanbaneditor\",\n\tdefaults:{\n\t\twidth:534,\n\t\tposition:\"center\",\n\t\tcss:\"webix_kanban_editor\",\n\t\tmodal:true,\n\t\tmove:true\n\t},\n\t$init(config){\n\t\tlet kanban = webix.$$(config.master);\n\n\t\tconfig.head = {\n\t\t\tview:\"toolbar\", paddingX:17, paddingY:8,\n\t\t\telements:[\n\t\t\t\t{ view:\"label\", label:webix.i18n.kanban.editor.add, localId:\"$kanban_header\"},\n\t\t\t\t{ view:\"icon\", icon:\"wxi-close\", click:() => this._close()}\n\t\t\t]\n\t\t};\n\n\t\tlet c = kanban.config.editor;\n\t\tlet form = { view:\"form\", borderless:true, padding:0, elementsConfig:{ labelPosition:\"top\" } };\n\t\tlet elements = [\n\t\t\t{ view:\"textarea\", label:webix.i18n.kanban.editor.text, name:\"text\", height:90},\n\t\t\t{ view:\"multicombo\", label:webix.i18n.kanban.editor.tags, name:\"tags\", options:kanban._tags, $hide:true},\n\t\t\t{ margin:8,\n\t\t\t\tcols:[\n\t\t\t\t\t{ view:\"combo\", label:webix.i18n.kanban.editor.assign, name:\"user_id\", $hide:true, options:{\n\t\t\t\t\t\tbody:{ data:kanban._users, yCount:5 }\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"richselect\", label:webix.i18n.kanban.editor.color,  name:\"color\", $hide:true, options:{\n\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\tyCount:5, data:kanban._colors, css:\"webix_kanban_colorpicker\",\n\t\t\t\t\t\t\ttemplate:\"<span class='webix_kanban_color_item' style='background-color: #color#'></span>#value#\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"richselect\", label:webix.i18n.kanban.editor.status, name:\"$list\", options:{\n\t\t\t\t\t\tbody:{ data:kanban._statuses, yCount:5 }\n\t\t\t\t\t}}\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\t\tif (webix.isArray(c))\n\t\t\tform.elements = c;\n\t\telse if (typeof c === \"object\"){\n\t\t\tform = webix.extend(form, c, true);\n\t\t\tform.view = \"form\";\n\t\t\tform.elements = form.elements || form.rows || (form.cols ? [{cols:form.cols}] : elements);\n\t\t\tdelete form.rows; delete form.cols;\n\t\t} else form.elements = elements;\n\n\t\tif (kanban.config.attachments)\n\t\t\tform.elements.push({ margin:0, rows:[\n\t\t\t\t{\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{ view:\"label\", label:webix.i18n.kanban.editor.attachments },\n\t\t\t\t\t\t{ view:\"kanbanuploader\", label:webix.i18n.kanban.editor.upload, upload:kanban.config.attachments,\n\t\t\t\t\t\t\tname:\"attachments\", autowidth:true, css:\"webix_transparent webix_kanban_uploader\", type:\"icon\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{ view:\"dataview\", localId:\"$kanban_dataview_uploader\", yCount:1, borderless:true,\n\t\t\t\t\ttype:\"uploader\", css:\"webix_kanban_dataview_uploader\",\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonItemDblClick:(id, e, node) => {\n\t\t\t\t\t\t\tlet link = node.getElementsByTagName(\"a\")[0];\n\t\t\t\t\t\t\tlink.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]});\n\n\t\tconfig.body = { paddingX:17, paddingY:0, margin:16,\n\t\t\trows:[\n\t\t\t\tform,\n\t\t\t\t{\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{ view:\"button\", label:webix.i18n.kanban.remove, type:\"danger\", autowidth:true,\n\t\t\t\t\t\t\thidden:true, localId:\"$kanban_remove\",\n\t\t\t\t\t\t\tclick:() => {\n\t\t\t\t\t\t\t\tlet values = this.getValues({hidden:false});\n\t\t\t\t\t\t\t\tlet kanban = this.getKanban();\n\t\t\t\t\t\t\t\tif (!kanban.callEvent(\"onBeforeEditorAction\", [\"remove\", this, values])) return;\n\n\t\t\t\t\t\t\t\tkanban._removeCard(values.id).then(() => this._close());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ },\n\t\t\t\t\t\t{ view:\"button\", label:webix.i18n.kanban.save, type:\"form\", autowidth:true,\n\t\t\t\t\t\t\tclick:() => {\n\t\t\t\t\t\t\t\tlet values = this.getValues({hidden:false});\n\t\t\t\t\t\t\t\tlet kanban = this.getKanban();\n\t\t\t\t\t\t\t\tif (!kanban.callEvent(\"onBeforeEditorAction\", [\"save\", this, values])) return;\n\n\t\t\t\t\t\t\t\tthis._fixStatus(values, kanban);\n\t\t\t\t\t\t\t\tif ( kanban.exists(values.id) ){\n\t\t\t\t\t\t\t\t\tvalues.$list = kanban.getItem(values.id).$list;\n\t\t\t\t\t\t\t\t\tkanban.updateItem(values.id, values);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse kanban.add(values);\n\t\t\t\t\t\t\t\tthis._close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{ height:1 }\n\t\t\t]\n\n\t\t};\n\n\t\tthis.$ready.push(this._afterInit);\n\t},\n\t_afterInit:function(){\n\t\tthis._form = this.queryView({view:\"form\"});\n\t\tthis._removeBtn = this.queryView({localId:\"$kanban_remove\"});\n\t\tthis._header = this.queryView({localId:\"$kanban_header\"});\n\n\t\tlet uploader = this.queryView({view:\"kanbanuploader\"});\n\t\tif (uploader){\n\t\t\tlet dataview = this.queryView({localId:\"$kanban_dataview_uploader\"});\n\t\t\tuploader.define( \"link\", dataview.config.id );\n\t\t\tuploader.addDropZone(dataview.$view);\n\t\t\twebix.extend(dataview, webix.OverlayBox);\n\t\t}\n\n\t\tlet views = this.queryView({$hide:true}, \"all\");\n\t\tif (views.length)\n\t\t\tthis.attachEvent(\"onShow\", () => {\n\t\t\t\tfor (let i=0; i<views.length; i++)\n\t\t\t\t\tif (views[i].getList().count())\n\t\t\t\t\t\tviews[i].show();\n\t\t\t\t\telse views[i].hide();\n\t\t\t});\n\t},\n\t_fixStatus(values, kanban){\n\t\tvalues.$list = Number(values.$list) || 0;\n\t\tif (kanban._sublists[values.$list])\n\t\t\tkanban.setListStatus(values, kanban._sublists[values.$list]);\n\t},\n\tgetForm(){\n\t\treturn this._form;\n\t},\n\tgetKanban(){\n\t\treturn webix.$$(this.config.master);\n\t},\n\tsetValues(values){\n\t\tif (typeof values !== \"object\" || !values)\n\t\t\tvalues = {};\n\t\tlet kanban = this.getKanban();\n\t\tlet listIndex = kanban._assignList(values);\n\t\tvalues.$list = values.$list || (listIndex !== -1 ? listIndex : 0);\n\n\t\tthis._prepareEditor(kanban, values.id);\n\t\tthis._form.setValues(values);\n\t},\n\tgetValues(details){\n\t\treturn this._form.getValues(details);\n\t},\n\t_prepareEditor(kanban, id){\n\t\tif (id && kanban.exists(id)){\n\t\t\tthis._removeBtn.show();\n\t\t\tthis._header.define(\"label\", webix.i18n.kanban.editor.edit);\n\t\t} else {\n\t\t\tthis._removeBtn.hide();\n\t\t\tthis._header.define(\"label\", webix.i18n.kanban.editor.add);\n\t\t}\n\t\tthis._header.refresh();\n\t},\n\t_close(){\n\t\tthis.hide();\n\t\tthis._form.clear();\n\t\tthis._prepareEditor();\n\t}\n}, webix.ui.window);","webix.protoUI({\n\tname:\"kanbanuserlist\",\n\tdefaults:{\n\t\twidth:300,\n\t\tlayout:\"y\",\n\t\tscroll:true,\n\t\tyCount:4,\n\t\tautoheight:false,\n\t\tselect:true,\n\t\ttemplate:function(obj){\n\t\t\tif (obj.image)\n\t\t\t\treturn \"<img class='webix_kanban_list_avatar' src='\"+obj.image+\"'>\"+obj.value;\n\n\t\t\treturn \"<span class='webix_icon webix_kanban_icon kbi-account webix_kanban_list_avatar'></span>\"+obj.value;\n\t\t}\n\t},\n\t$init(){\n\t\tthis.$ready.push(function(){\n\t\t\tthis.attachEvent(\"onShow\", () => {\n\t\t\t\tlet user_id = this.getContext().user_id;\n\n\t\t\t\tif ( user_id && this.exists(user_id) ){\n\t\t\t\t\tthis.select(user_id);\n\t\t\t\t\tthis.showItem(user_id);\n\t\t\t\t} else this.unselectAll();\n\t\t\t});\n\n\t\t\tthis.attachEvent(\"onMenuItemClick\", (id) => {\n\t\t\t\tlet kanban = this.getKanban();\n\t\t\t\tlet selectedTask = this.getContext().id;\n\n\t\t\t\tkanban.updateItem(selectedTask, {user_id:id});\n\t\t\t});\n\n\t\t\tthis.type.master = this.config.masterId;\n\t\t});\n\t},\n\tgetKanban(){\n\t\treturn webix.$$(this.config.masterId);\n\t}\n}, webix.ui.contextmenu);\n","webix.protoUI({\n\tname:\"kanbanmenu\",\n\t$init(){\n\t\tthis.$ready.push(function(){\n\t\t\tthis.attachEvent(\"onItemClick\", function(id){\n\t\t\t\tlet cid = this.getContext().id;\n\t\t\t\tlet kanban = this.getKanban();\n\n\t\t\t\tif ( kanban.callEvent(\"onBeforeCardAction\", [id, cid]) ){\n\t\t\t\t\tswitch(id){\n\t\t\t\t\t\tcase \"edit\":\n\t\t\t\t\t\t\tkanban.showEditor(webix.copy( kanban.getItem(cid) ));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"copy\":\n\t\t\t\t\t\t\tkanban.copy(cid);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"remove\":\n\t\t\t\t\t\t\tkanban._removeCard(cid);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tgetKanban(){\n\t\treturn webix.$$(this.config.masterId);\n\t}\n}, webix.ui.contextmenu);","webix.protoUI({\n\tname:\"kanbanchat\",\n\t$init(config){\n\t\tconfig.padding = 0;\n\n\t\tthis.$ready.push(function(){\n\t\t\tthis.attachEvent(\"onHide\", this._hide_chat);\n\n\t\t\tlet list = this.queryView({view:\"list\"});\n\t\t\tlist.data.attachEvent(\"onStoreUpdated\", (id, obj, mode)=>{\n\t\t\t\tif (mode && mode !== \"paint\")\n\t\t\t\t\tthis._save();\n\t\t\t});\n\t\t});\n\t},\n\t_save(){\n\t\tlet context = this.getContext();\n\t\tlet comments = this.getBody();\n\t\tlet kanban = this.getKanban();\n\n\t\tif (context && kanban.exists(context.id))\n\t\t\tkanban.updateItem(context.id, {comments:comments.serialize()});\n\t},\n\t_hide_chat(){\n\t\tlet comments = this.getBody();\n\t\tcomments.queryView({view:\"form\"}).clear();\n\t\tcomments.queryView({view:\"list\"}).clearAll();\n\t},\n\tgetKanban(){\n\t\treturn webix.$$(this.config.masterId);\n\t}\n}, webix.ui.context);\n","webix.protoUI(\n\t{\n\t\tname: \"pivot-portlet\",\n\t\t$reorderOnly: true,\n\t\t$drag: function(object) {\n\t\t\twebix.html.addCss(this.$view, \"portlet_in_drag\");\n\t\t\tconst ctx = webix.DragControl.getContext();\n\t\t\tctx.source = ctx.from = object;\n\n\t\t\t// hide suggests\n\t\t\twebix.callEvent(\"onClick\", []);\n\n\t\t\tconst local = this.$scope.app.getService(\"local\");\n\t\t\tconst values = this.getChildViews()[0].getValues();\n\n\t\t\tlet text = \"\";\n\n\t\t\tif (values.operation == \"complex\") text = local.fixMath(values.math);\n\t\t\telse {\n\t\t\t\ttext = values.name ? local.getField(values.name).value : \"\";\n\n\t\t\t\tif (values.name2)\n\t\t\t\t\ttext += (text ? \", \" : \"\") + local.getField(values.name2).value;\n\t\t\t\telse if (!text) {\n\t\t\t\t\tconst _ = this.$scope.app.getService(\"locale\")._;\n\t\t\t\t\ttext = _(\"Field not defined\");\n\t\t\t\t} else if (values.operation) text += ` (${values.operation})`;\n\t\t\t}\n\n\t\t\tconst askin = webix.skin.$active;\n\t\t\tconst style = `width:${this.$width - askin.inputHeight}px;height:${\n\t\t\t\tthis.$height\n\t\t\t}px;`;\n\t\t\treturn `<div class=\"webix_pivot_portlet_drag\" style=\"${style}\">\n\t\t\t\t<span class=\"webix_icon ${this.config.icon}\"></span>${text}\n\t\t\t</div>`;\n\t\t},\n\t},\n\twebix.ui.portlet\n);\n","import { JetView } from \"webix-jet\";\n\nimport \"helpers/portlet\";\n\nexport default class Property extends JetView {\n\tconstructor(app, name, config) {\n\t\tsuper(app, name);\n\n\t\tif (!config) config = {};\n\n\t\tthis.plusLabel = config.plusLabel;\n\t\tthis.field = config.field;\n\t}\n\tconfig() {\n\t\tconst askin = webix.skin.$active;\n\t\treturn {\n\t\t\tborderless: true,\n\t\t\ttype: \"clean\",\n\t\t\tpaddingY: 8,\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tlocalId: \"forms\",\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\trows: [],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttemplate: `<div class=\"webix_pivot_handle_add_value\">\n\t\t\t\t\t\t<span class=\"webix_icon wxi-plus-circle\"></span><span>${this.plusLabel}</span>\n\t\t\t\t\t</div>`,\n\t\t\t\t\tcss: \"webix_pivot_add_value\",\n\t\t\t\t\theight: askin.inputHeight - 2 * askin.inputPadding,\n\t\t\t\t\tlocalId: \"addValue\",\n\t\t\t\t\tonClick: {\n\t\t\t\t\t\twebix_pivot_handle_add_value: () => {\n\t\t\t\t\t\t\tconst forms = this.$$(\"forms\").getChildViews();\n\n\t\t\t\t\t\t\tthis.Add(null, forms.length);\n\t\t\t\t\t\t\tconst input = forms[forms.length - 1].queryView({ name: \"name\" });\n\n\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\twebix.html.triggerEvent(\n\t\t\t\t\t\t\t\t\tinput.getInputNode(),\n\t\t\t\t\t\t\t\t\t\"MouseEvent\",\n\t\t\t\t\t\t\t\t\t\"click\"\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tthis.field != \"values\" &&\n\t\t\t\t\t\t\t\tforms.length == this.app.getState().fields.length\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tthis.$$(\"addValue\").hide();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\tinit() {\n\t\tthis.on(webix, \"onAfterPortletMove\", source => {\n\t\t\tif (source == this.$$(\"forms\"))\n\t\t\t\tthis.app.callEvent(\"property:change\", [this.field, this.GetValue()]);\n\t\t});\n\t\tthis.on(webix, \"onPortletDrag\", function(active, target) {\n\t\t\tif (active.$reorderOnly)\n\t\t\t\treturn active.getParentView() === target.getParentView();\n\t\t});\n\t}\n\tListTemplate(obj) {\n\t\tconst input = this._activeInput;\n\n\t\t//wavg - complex operation, no need to correct inputs\n\t\tconst wavg =\n\t\t\tthis.field == \"values\" &&\n\t\t\tinput &&\n\t\t\t!input.$destructed && // CorrectInputs calls SetValue, which recreates inputs\n\t\t\tinput.getFormView().elements.operation.getValue() == \"wavg\";\n\n\t\tconst corrections = this.getParentView().GetCorrections()[this.field];\n\t\tconst value = obj.value;\n\n\t\tif (!wavg && corrections) {\n\t\t\tconst includes = this.CheckCorrections(corrections, obj.id);\n\n\t\t\tlet css = \"webix_pivot_list_marker\";\n\t\t\tif (includes) css += \" webix_pivot_list_marker_fill\";\n\n\t\t\treturn `<div class=\"${css}\"> ${value}</div>`;\n\t\t} else return value;\n\t}\n\tCheckCorrections(corrections, id) {\n\t\tif (this._activeInput && id == this._activeInput.getValue()) return true;\n\n\t\tconst structure = this.app.getStructure();\n\n\t\tfor (let i = 0; i < corrections.length; i++) {\n\t\t\tconst name = corrections[i];\n\t\t\tconst val = structure[name];\n\n\t\t\tif (val) {\n\t\t\t\tif (typeof val == \"string\") {\n\t\t\t\t\tif (val == id) return true;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let j = 0; j < val.length; j++) {\n\t\t\t\t\t\tlet value = val[j];\n\t\t\t\t\t\tif (value.name) value = value.name;\n\n\t\t\t\t\t\tif (value == id) return true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\tGetValue() {\n\t\tconst forms = this.$$(\"forms\").getChildViews();\n\t\tlet arr = [];\n\n\t\tforms.forEach(form => {\n\t\t\tconst val = form.getChildViews()[0].getValues().name;\n\n\t\t\tif (val) arr.push(val);\n\t\t});\n\n\t\treturn arr;\n\t}\n\tSetValue(val) {\n\t\tconst layout = this.$$(\"forms\");\n\t\tconst forms = layout.getChildViews();\n\n\t\tfor (let i = forms.length - 1; i >= 0; i--) layout.removeView(forms[i]);\n\t\tfor (let i = 0; i < val.length; i++) {\n\t\t\tif (!val[i].external) this.Add(val[i], i);\n\t\t}\n\t}\n\tAdd(val, i) {\n\t\tthis.$$(\"forms\").addView({\n\t\t\tview: \"pivot-portlet\",\n\t\t\tmode: \"replace\",\n\t\t\tborderless: true,\n\t\t\tbody: {\n\t\t\t\tview: \"form\",\n\t\t\t\tpaddingY: 0,\n\t\t\t\tpaddingX: 2,\n\t\t\t\telements: [\n\t\t\t\t\t{\n\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\tcols: this.ItemConfig(val, i),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ton: {\n\t\t\t\t\tonChange: (val, old, config) => {\n\t\t\t\t\t\tif (config == \"user\")\n\t\t\t\t\t\t\tthis.app.callEvent(\"property:change\", [\n\t\t\t\t\t\t\t\tthis.field,\n\t\t\t\t\t\t\t\tthis.GetValue(),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\tItemConfig(val) {\n\t\treturn [\n\t\t\t{ width: webix.skin.$active.inputHeight }, //for portlet icon\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n\t\t\t\tname: \"name\",\n\t\t\t\tvalue: this.PrepareValue(val),\n\t\t\t\thidden: val && val.operation == \"complex\",\n\t\t\t\toptions: {\n\t\t\t\t\tcss: \"webix_pivot_suggest\",\n\t\t\t\t\tdata: this.app.getState().fields,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonBeforeShow: function() {\n\t\t\t\t\t\t\tconst input = webix.$$(this.config.master);\n\t\t\t\t\t\t\tconst master = input.$scope;\n\n\t\t\t\t\t\t\tconst data = master.GetValue();\n\t\t\t\t\t\t\tmaster._activeInput = input;\n\n\t\t\t\t\t\t\tthis.getList().filter(val =>\n\t\t\t\t\t\t\t\tmaster.FilterSuggest(data, input.getValue(), val)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tbody: {\n\t\t\t\t\t\ttemplate: obj => this.ListTemplate(obj),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"icon\",\n\t\t\t\ticon: \"wxi-close\",\n\t\t\t\tcss: \"webix_pivot_close_icon\",\n\t\t\t\tpivotPropertyRemove: true,\n\t\t\t\tclick: function() {\n\t\t\t\t\tconst master = this.$scope;\n\t\t\t\t\tmaster.$$(\"addValue\").show();\n\t\t\t\t\tmaster\n\t\t\t\t\t\t.$$(\"forms\")\n\t\t\t\t\t\t.removeView(this.queryView(\"pivot-portlet\", \"parent\"));\n\t\t\t\t\tmaster.app.callEvent(\"property:change\", [\n\t\t\t\t\t\tmaster.field,\n\t\t\t\t\t\tmaster.GetValue(),\n\t\t\t\t\t]);\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t}\n\tPrepareValue(val) {\n\t\tif (val) {\n\t\t\tif (typeof val == \"object\") val = val.name;\n\t\t\tif (webix.isArray(val)) val = val[0];\n\t\t} else val = \"\";\n\n\t\treturn val;\n\t}\n\tFilterSuggest(data, activeVal, val) {\n\t\tval = val.id;\n\n\t\tif (val == activeVal) return true;\n\n\t\treturn !data.find(item => {\n\t\t\tif (item.name) item = item.name;\n\n\t\t\treturn val == item;\n\t\t});\n\t}\n}\n","function isSymbolAllowed(char) {\n\tconst code = char.charCodeAt(0);\n\treturn code <= 122 ? (code >= 48 && code <= 57) || code >= 65 : code > 191;\n}\n\nfunction getLastSymbolIndex(str, right) {\n\tif (right) {\n\t\tfor (let i = 0; i < str.length; i++) if (!isSymbolAllowed(str[i])) return i;\n\t\treturn str.length;\n\t} else\n\t\tfor (let i = str.length - 1; i >= 0; i--)\n\t\t\tif (!isSymbolAllowed(str[i])) return i + 1;\n\n\treturn 0;\n}\n\nfunction startsWith(text, start) {\n\treturn text.toLowerCase().indexOf(start.toLowerCase()) === 0;\n}\n\nwebix.protoUI(\n\t{\n\t\tname: \"suggest-math\",\n\t\t$enterKey() {\n\t\t\tconst list = this.getList();\n\t\t\tif (this.isVisible() && !list.getSelectedId() && list.count()) {\n\t\t\t\tlist.select(list.data.order[1]);\n\t\t\t\tthis._addFirst = 1;\n\t\t\t}\n\n\t\t\twebix.ui.suggest.prototype.$enterKey.apply(this, arguments);\n\n\t\t\twebix.delay(() => {\n\t\t\t\tdelete this._addFirst; //wait for input node change event\n\t\t\t});\n\t\t},\n\t\tdefaults: {\n\t\t\tfilter(item, value) {\n\t\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\t\tconst str = value.substring(0, cursor);\n\t\t\t\tconst search = str.substring(getLastSymbolIndex(str));\n\t\t\t\tconst nextSymbol = value.charAt(cursor);\n\n\t\t\t\tif (search && (cursor === value.length || !isSymbolAllowed(nextSymbol)))\n\t\t\t\t\tvalue = search;\n\n\t\t\t\t//groups\n\t\t\t\tif (item.disabled) {\n\t\t\t\t\tconst app = editor.$scope.app;\n\n\t\t\t\t\tif (item.id == \"$fields\") {\n\t\t\t\t\t\tconst fields = app.getState().fields;\n\t\t\t\t\t\treturn !!fields.find(obj => startsWith(obj.value, value));\n\t\t\t\t\t} else if (item.id == \"$methods\") {\n\t\t\t\t\t\tconst _ = app.getService(\"locale\")._;\n\t\t\t\t\t\tconst operations = app.getService(\"local\").operations;\n\t\t\t\t\t\treturn !!operations.find(method => startsWith(_(method.id), value));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn startsWith(item.value, value);\n\t\t\t},\n\t\t},\n\t},\n\twebix.ui.suggest\n);\n\nwebix.protoUI(\n\t{\n\t\tname: \"math-editor\",\n\t\t$init() {\n\t\t\tthis.$view.className += \" webix_el_text\";\n\t\t},\n\t\t$onBlur() {\n\t\t\tconst suggest = webix.$$(this.config.suggest);\n\t\t\tconst suggestClick = suggest.$view.contains(document.activeElement);\n\n\t\t\twebix.delay(() => {\n\t\t\t\tconst focus = webix.UIManager.getFocus();\n\t\t\t\tif (focus && focus.config.pivotPropertyRemove) return;\n\n\t\t\t\tif (!suggestClick)\n\t\t\t\t\tthis.callEvent(\"onChange\", [this.getValue(), null, \"user\"]);\n\t\t\t});\n\t\t},\n\t\tsetValue() {\n\t\t\tconst suggest = webix.$$(this.config.suggest);\n\n\t\t\t//handle clicks on suggest items and add first suggest value via enter\n\t\t\tif (suggest.isVisible() || suggest._addFirst) return;\n\n\t\t\twebix.ui.text.prototype.setValue.apply(this, arguments);\n\t\t},\n\t\t$setValueHere(value) {\n\t\t\tthis.setValueHere(value);\n\t\t},\n\t\tsetValueHere(value) {\n\t\t\tconst formula = this.getValue();\n\t\t\tconst cursor = this.getInputNode().selectionStart;\n\n\t\t\tlet str1 = formula.substring(0, cursor);\n\t\t\tlet str2 = formula.substring(cursor);\n\n\t\t\tconst lastSymbol = getLastSymbolIndex(str2, true);\n\t\t\tstr1 += str2.substring(0, lastSymbol);\n\t\t\tstr2 = str2.substring(lastSymbol);\n\n\t\t\tif (str1[str1.length - 1] == \"(\")\n\t\t\t\tstr1 = str1.substring(0, str1.length - 1);\n\n\t\t\tstr1 = str1.substring(0, getLastSymbolIndex(str1)) + value;\n\n\t\t\tconst operations = this.$scope.app.getService(\"local\").operations;\n\t\t\tconst isMethod = operations.find(obj => obj.value == value);\n\n\t\t\tif (isMethod)\n\t\t\t\t//suggest called via up/down key\n\t\t\t\tstr1 += str2[0] == \"(\" ? \"\" : \"(\";\n\n\t\t\tthis.$setValue(str1 + str2);\n\t\t\tthis.getInputNode().setSelectionRange(str1.length, str1.length);\n\t\t},\n\t},\n\twebix.ui.text\n);\n","import \"helpers/complex\";\nimport Property from \"views/config/properties\";\n\nexport default class ValuesProperty extends Property {\n\tconstructor(app, name, config) {\n\t\tsuper(app, name, config);\n\t\tthis.Local = this.app.getService(\"local\");\n\n\t\tthis._ = this.app.getService(\"locale\")._;\n\n\t\tthis.typeName = \"operation\";\n\t\tthis.plusLabel = this._(\"Add value\");\n\t\tthis.field = \"values\";\n\n\t\tthis.operations = this.Local.operations;\n\n\t\tthis.operations.map(operation => {\n\t\t\toperation.value = this._(operation.id);\n\t\t\treturn operation;\n\t\t});\n\t}\n\tinit() {\n\t\tsuper.init();\n\n\t\tthis.State = this.app.getState();\n\n\t\tthis.on(this.State.$changes, \"mode\", () => {\n\t\t\tthis.ToggleColors();\n\t\t});\n\t}\n\tGetValue() {\n\t\tconst forms = this.$$(\"forms\").getChildViews();\n\t\tconst arr = [];\n\n\t\tforms.forEach(form => {\n\t\t\tconst values = form.getChildViews()[0].getValues({ hidden: false });\n\t\t\tif (!webix.isUndefined(values.name2)) {\n\t\t\t\t//wavg\n\t\t\t\tif (values.name && values.name2) {\n\t\t\t\t\tvalues.name = [values.name, values.name2];\n\t\t\t\t\tdelete values.name2;\n\t\t\t\t} else values.name = \"\";\n\t\t\t}\n\n\t\t\tif (values.name == \"\" || values.math == \"\") return;\n\t\t\tif (values.math) values.math = this.OutComplexMath(values.math);\n\t\t\tarr.push(values);\n\t\t});\n\n\t\treturn arr;\n\t}\n\tItemConfig(val, i) {\n\t\tconst config = super.ItemConfig(val);\n\n\t\tlet operation;\n\t\tif (val) operation = val.operation;\n\t\telse {\n\t\t\tconst def = this.app.config.defaultOperation;\n\t\t\tconst defIndex = Math.max(this.operations.findIndex(a => a.id == def), 0);\n\t\t\toperation = this.operations[defIndex].id;\n\t\t}\n\n\t\tconfig.splice(2, 0, {\n\t\t\tview: \"richselect\",\n\t\t\tname: \"operation\",\n\t\t\twidth: 110,\n\t\t\tvalue: operation,\n\t\t\toptions: {\n\t\t\t\tcss: \"webix_pivot_suggest\",\n\t\t\t\tdata: this.operations.filter(\n\t\t\t\t\tobj => obj.fields <= 2 || obj.id == \"complex\"\n\t\t\t\t),\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonChange: function(v) {\n\t\t\t\t\tthis.$scope.SetOperation(v, this);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tconfig.splice(2, 0, {\n\t\t\tview: \"richselect\",\n\t\t\thidden: this.Local.getOperation(operation).fields != 2,\n\t\t\tvalue: val && webix.isArray(val.name) ? val.name[1] : \"\",\n\t\t\tname: \"name2\",\n\t\t\toptions: {\n\t\t\t\tcss: \"webix_pivot_suggest\",\n\t\t\t\tdata: this.app.getState().fields,\n\t\t\t},\n\t\t});\n\n\t\t//custom math\n\t\tconfig.splice(1, 0, {\n\t\t\tview: \"math-editor\",\n\t\t\tname: \"math\",\n\t\t\thidden: !val || val.operation != \"complex\",\n\t\t\tvalue: val && val.math ? this.Local.fixMath(val.math) : \"\",\n\t\t\tsuggest: {\n\t\t\t\tview: \"suggest-math\",\n\t\t\t\tdata: this.SuggestData(),\n\t\t\t},\n\t\t});\n\n\t\tconst mini = webix.skin.$name == \"mini\" || webix.skin.$name == \"compact\";\n\t\tconst palette = this.Local.getPalette();\n\t\tconst color = (val && val.color) || this.Local.getValueColor(i);\n\n\t\tconfig.splice(1, 0, {\n\t\t\tview: \"colorpicker\",\n\t\t\thidden: this.State.mode != \"chart\",\n\t\t\tname: \"color\",\n\t\t\tcss: \"webix_pivot_value_color\",\n\t\t\tvalue: color,\n\t\t\twidth: mini ? 30 : 38,\n\t\t\tsuggest: {\n\t\t\t\ttype: \"colorboard\",\n\t\t\t\tbody: {\n\t\t\t\t\twidth: 150,\n\t\t\t\t\theight: 150,\n\t\t\t\t\tview: \"colorboard\",\n\t\t\t\t\tpalette,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn config;\n\t}\n\tToggleColors() {\n\t\tconst mode = this.State.mode;\n\n\t\tconst layout = this.$$(\"forms\");\n\t\tconst forms = layout.getChildViews();\n\n\t\tfor (let i = 0; i < forms.length; i++) {\n\t\t\tconst input = forms[i].getChildViews()[0].elements.color;\n\t\t\tif (mode == \"chart\") input.show();\n\t\t\telse input.hide();\n\t\t}\n\t}\n\tFilterSuggest() {\n\t\treturn true;\n\t}\n\tSetOperation(val, view) {\n\t\tconst form = view.getFormView();\n\t\tconst elements = form.elements;\n\n\t\tif (val == \"complex\") {\n\t\t\telements.name.hide();\n\t\t\telements.name2.hide();\n\t\t\telements.math.show();\n\n\t\t\telements.name.setValue();\n\t\t\telements.name2.setValue();\n\t\t} else if (this.Local.getOperation(val).fields == 2) {\n\t\t\telements.name.show();\n\t\t\telements.name2.show();\n\t\t\telements.math.hide();\n\t\t} else {\n\t\t\telements.name.show();\n\t\t\telements.name2.hide();\n\t\t\telements.math.hide();\n\t\t}\n\t}\n\tSuggestData() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tvalue: this._(\"Fields\"),\n\t\t\t\tid: \"$fields\",\n\t\t\t\tdisabled: true,\n\t\t\t\t$css: \"webix_pivot_values_section\",\n\t\t\t},\n\t\t\t...this.app.getState().fields,\n\t\t\t{\n\t\t\t\tvalue: this._(\"Methods\"),\n\t\t\t\tid: \"$methods\",\n\t\t\t\tdisabled: true,\n\t\t\t\t$css: \"webix_pivot_values_section\",\n\t\t\t},\n\t\t\t...this.operations.filter(obj => obj.id != \"complex\"),\n\t\t];\n\t}\n\tOutComplexMath(math) {\n\t\tconst fields = this.app.getState().fields;\n\t\tconst fieldsRegex = new RegExp(\n\t\t\t\"(\\\\(|\\\\s|,|^)(\" +\n\t\t\t\tfields\n\t\t\t\t\t.map(field => field.value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\"))\n\t\t\t\t\t.join(\"|\") +\n\t\t\t\t\")(\\\\)|\\\\s|,|$)\",\n\t\t\t\"g\"\n\t\t);\n\n\t\tconst fieldsMatch = Array.from(math.matchAll(fieldsRegex));\n\t\tfor (let i = fieldsMatch.length - 1; i >= 0; i--) {\n\t\t\tconst match = fieldsMatch[i];\n\t\t\tmath =\n\t\t\t\tmath.substring(0, match.index + match[1].length) +\n\t\t\t\tfields.find(obj => obj.value == match[2]).id +\n\t\t\t\tmath.substring(\n\t\t\t\t\tmatch.index + match[0].length - match[3].length,\n\t\t\t\t\tmath.length\n\t\t\t\t);\n\t\t}\n\n\t\tconst methods = this.operations;\n\t\tconst methodsRegex = new RegExp(\n\t\t\t\"(\\\\(|,|\\\\+|-|\\\\/|\\\\*|\\\\s|^)(\" +\n\t\t\t\tmethods\n\t\t\t\t\t.map(method =>\n\t\t\t\t\t\tmethod.value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\")\n\t\t\t\t\t)\n\t\t\t\t\t.join(\"|\") +\n\t\t\t\t\")\\\\(\",\n\t\t\t\"g\"\n\t\t);\n\n\t\tconst methodsMatch = Array.from(math.matchAll(methodsRegex));\n\t\tfor (let i = methodsMatch.length - 1; i >= 0; i--) {\n\t\t\tconst match = methodsMatch[i];\n\t\t\tmath =\n\t\t\t\tmath.substring(0, match.index + match[1].length) +\n\t\t\t\tthis.operations.find(operation => operation.value == match[2]).id +\n\t\t\t\tmath.substring(match.index + match[0].length - 1, math.length);\n\t\t}\n\n\t\treturn math;\n\t}\n}\n","import Property from \"views/config/properties\";\n\nexport default class GroupProperty extends Property {\n\tconstructor(app, name) {\n\t\tsuper(app, name);\n\n\t\tthis.field = \"groupBy\";\n\t}\n\tconfig() {\n\t\treturn {\n\t\t\tpadding: 10,\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\tlocalId: \"group\",\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tcss: \"webix_pivot_suggest\",\n\t\t\t\t\t\tdata: this.app.getState().fields,\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\ttemplate: obj => this.ListTemplate(obj),\n\t\t\t\t\t\t},\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonBeforeShow: () => {\n\t\t\t\t\t\t\t\tthis._activeInput = this.$$(\"group\");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: (value, oldValue, source) => {\n\t\t\t\t\t\t\tif (source == \"user\")\n\t\t\t\t\t\t\t\tthis.app.callEvent(\"property:change\", [this.field, value]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t}\n\tGetValue() {\n\t\treturn this.$$(\"group\").getValue();\n\t}\n\tSetValue(val) {\n\t\tthis.$$(\"group\").setValue(val);\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class ChartSettings extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tcomplexData: true,\n\t\t\tpadding: 10,\n\t\t\telementsConfig: {\n\t\t\t\tlabelWidth: 120,\n\t\t\t},\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\tname: \"type\",\n\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\tvalue: \"bar\",\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tcss: \"webix_pivot_suggest\",\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{ id: \"bar\", value: _(\"Bar\") },\n\t\t\t\t\t\t\t{ id: \"line\", value: _(\"Line\") },\n\t\t\t\t\t\t\t{ id: \"radar\", value: _(\"Radar\") },\n\t\t\t\t\t\t\t{ id: \"area\", value: _(\"Area\") },\n\t\t\t\t\t\t\t{ id: \"spline\", value: _(\"Spline\") },\n\t\t\t\t\t\t\t{ id: \"splineArea\", value: _(\"Spline Area\") },\n\t\t\t\t\t\t\t{ id: \"pie\", value: _(\"Pie\") },\n\t\t\t\t\t\t\t{ id: \"donut\", value: _(\"Donut\") },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"xAxis.title\",\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tlabel: _(\"X axis title\"),\n\t\t\t\t\tbatch: \"axis\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"yAxis.title\",\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tlabel: _(\"Y axis title\"),\n\t\t\t\t\tbatch: \"axis\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"scaleColor\",\n\t\t\t\t\tbatch: \"scale\",\n\t\t\t\t\tview: \"colorpicker\",\n\t\t\t\t\teditable: true,\n\t\t\t\t\tlabel: _(\"Scale color\"),\n\t\t\t\t\tsuggest: {\n\t\t\t\t\t\ttype: \"colorboard\",\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t\theight: 150,\n\t\t\t\t\t\t\tview: \"colorboard\",\n\t\t\t\t\t\t\tpalette: this.app.getService(\"local\").getPalette(),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"3D\",\n\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\tbatch: \"pie\",\n\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\tlabelRight: _(\"3D\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"pieInnerText\",\n\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\tbatch: \"pie\",\n\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\tlabelRight: _(\"Show values inside\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"stacked\",\n\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\tbatch: \"stacked\",\n\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\tlabelRight: _(\"Stacked\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"horizontal\",\n\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\tbatch: \"bar\",\n\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\tlabelRight: _(\"Horizontal\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"scale\",\n\t\t\t\t\tbatch: \"scale\",\n\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\tcheckValue: \"logarithmic\",\n\t\t\t\t\tuncheckValue: \"linear\",\n\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\tlabelRight: _(\"Logarithmic scale\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"yAxis.lineShape\",\n\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\tbatch: \"radar\",\n\t\t\t\t\tcheckValue: \"arc\",\n\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\tlabelRight: _(\"Circled lines\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"lines\",\n\t\t\t\t\tbatch: \"scale\",\n\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\tlabelRight: _(\"Lines\"),\n\t\t\t\t},\n\t\t\t],\n\t\t\ton: {\n\t\t\t\tonChange: (value, oldValue, source) => {\n\t\t\t\t\tif (source == \"user\") {\n\t\t\t\t\t\tconst out = this.OutValues(this.getRoot().getValues());\n\n\t\t\t\t\t\tthis.innerChange = true;\n\t\t\t\t\t\tthis.State.chart = Object.assign({}, out);\n\t\t\t\t\t\tthis.HandleVisibility();\n\t\t\t\t\t\tdelete this.innerChange;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\n\t\tthis.on(this.State.$changes, \"chart\", chart => {\n\t\t\tif (!this.innerChange) {\n\t\t\t\tthis.getRoot().setValues(this.InValues(chart));\n\t\t\t\tthis.HandleVisibility();\n\t\t\t}\n\t\t});\n\t}\n\tHandleVisibility() {\n\t\tconst form = this.getRoot();\n\t\tconst type = form.getValues().type;\n\t\tconst pieBased = type == \"pie\" || type == \"donut\";\n\n\t\tif (pieBased) form.showBatch(\"pie\");\n\t\telse {\n\t\t\tform.showBatch(\"scale\");\n\t\t\tif (type == \"radar\") form.showBatch(\"radar\", true);\n\t\t\telse {\n\t\t\t\tform.showBatch(\"axis\", true);\n\t\t\t\tconst bar = type == \"bar\";\n\t\t\t\tif (bar || type == \"area\") {\n\t\t\t\t\tif (bar) form.showBatch(\"bar\", true);\n\t\t\t\t\tform.showBatch(\"stacked\", true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tInValues(values) {\n\t\tvalues = webix.copy(values);\n\t\tconst type = values.type.toLowerCase();\n\t\tconst stackedArea = type == \"stackedarea\";\n\n\t\tif (type.indexOf(\"bar\") != -1 || stackedArea) {\n\t\t\tif (type.indexOf(\"stacked\") != -1) values.stacked = 1;\n\t\t\tif (type.indexOf(\"h\") != -1) values.horizontal = 1;\n\t\t\tvalues.type = stackedArea ? \"area\" : \"bar\";\n\t\t}\n\n\t\treturn values;\n\t}\n\tOutValues(values) {\n\t\tconst bar = values.type == \"bar\";\n\t\tif (bar || values.type == \"area\") {\n\t\t\tif (bar && values.horizontal) {\n\t\t\t\tvalues.type += \"H\";\n\t\t\t\tdelete values.horizontal;\n\t\t\t}\n\t\t\tif (values.stacked) {\n\t\t\t\tvalues.type =\n\t\t\t\t\t\"stacked\" + values.type[0].toUpperCase() + values.type.slice(1);\n\t\t\t\tdelete values.stacked;\n\t\t\t}\n\t\t}\n\n\t\treturn values;\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class TableSettings extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tpadding: 10,\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\tname: \"cleanRows\",\n\t\t\t\t\tlocalId: \"cleanRows\",\n\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\tlabelRight: _(\"Clean rows\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\theight: 20,\n\t\t\t\t\tlabel: _(\"Highlight\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"minX\",\n\t\t\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\t\t\tlabelRight: _(\"Min X\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"maxX\",\n\t\t\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\t\t\tlabelRight: _(\"Max X\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"minY\",\n\t\t\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\t\t\tlabelRight: _(\"Min Y\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"maxY\",\n\t\t\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\t\t\tlabelRight: _(\"Max Y\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\theight: 20,\n\t\t\t\t\tlabel: _(\"Footer\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"radio\",\n\t\t\t\t\tname: \"footer\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{ id: 1, value: _(\"Off\") },\n\t\t\t\t\t\t{ id: 2, value: _(\"On\") },\n\t\t\t\t\t\t{ id: 3, value: _(\"Sum Only\") },\n\t\t\t\t\t],\n\t\t\t\t\tvalue: 1,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\theight: 20,\n\t\t\t\t\tlabel: _(\"Total Column\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"radio\",\n\t\t\t\t\tname: \"totalColumn\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{ id: 1, value: _(\"Off\") },\n\t\t\t\t\t\t{ id: 2, value: _(\"On\") },\n\t\t\t\t\t\t{ id: 3, value: _(\"Sum Only\") },\n\t\t\t\t\t],\n\t\t\t\t\tvalue: 1,\n\t\t\t\t},\n\t\t\t],\n\t\t\ton: {\n\t\t\t\tonChange: (value, oldValue, source) => {\n\t\t\t\t\tif (source == \"user\") {\n\t\t\t\t\t\tconst out = this.OutValues(this.getRoot().getValues());\n\n\t\t\t\t\t\tthis.innerChange = true;\n\t\t\t\t\t\tthis.State.datatable = Object.assign({}, out);\n\t\t\t\t\t\tdelete this.innerChange;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\n\t\tthis.on(this.State.$changes, \"datatable\", datatable => {\n\t\t\tif (!this.innerChange) this.getRoot().setValues(this.InValues(datatable));\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"mode\", mode => {\n\t\t\tif (mode == \"table\") this.$$(\"cleanRows\").show();\n\t\t\telse this.$$(\"cleanRows\").hide();\n\t\t});\n\t}\n\tInValues(values) {\n\t\tvalues = webix.copy(values);\n\n\t\tif (values.footer) values.footer = values.footer == \"sumOnly\" ? 3 : 2;\n\t\telse values.footer = 1;\n\n\t\tif (values.totalColumn)\n\t\t\tvalues.totalColumn = values.totalColumn == \"sumOnly\" ? 3 : 2;\n\t\telse values.totalColumn = 1;\n\n\t\treturn values;\n\t}\n\tOutValues(values) {\n\t\tswitch (values.footer) {\n\t\t\tcase \"1\":\n\t\t\t\tdelete values.footer;\n\t\t\t\tbreak;\n\t\t\tcase \"2\":\n\t\t\t\tvalues.footer = true;\n\t\t\t\tbreak;\n\t\t\tcase \"3\":\n\t\t\t\tvalues.footer = \"sumOnly\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch (values.totalColumn) {\n\t\t\tcase \"1\":\n\t\t\t\tdelete values.totalColumn;\n\t\t\t\tbreak;\n\t\t\tcase \"2\":\n\t\t\t\tvalues.totalColumn = true;\n\t\t\t\tbreak;\n\t\t\tcase \"3\":\n\t\t\t\tvalues.totalColumn = \"sumOnly\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn values;\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class FilterView extends JetView {\n\tconfig() {\n\t\tthis.Local = this.app.getService(\"local\");\n\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tcss: \"webix_pivot_filter_popup\",\n\t\t\ttemplate: item => item.label,\n\t\t\tbody: {\n\t\t\t\tview: \"filter\",\n\t\t\t\tfield: \"value\",\n\t\t\t\ton: {\n\t\t\t\t\tonChange: config => {\n\t\t\t\t\t\tif (config == \"user\") {\n\t\t\t\t\t\t\tconst state = this.app.getState();\n\t\t\t\t\t\t\tconst structure = webix.copy(state.structure);\n\n\t\t\t\t\t\t\tlet value;\n\t\t\t\t\t\t\tstructure.filters = structure.filters.filter(filter => {\n\t\t\t\t\t\t\t\tconst exists = filter.name == this.field;\n\t\t\t\t\t\t\t\tconst inner = exists && !filter.external;\n\n\t\t\t\t\t\t\t\tif (inner) value = filter.value = this.filter.getValue();\n\n\t\t\t\t\t\t\t\treturn !exists || inner;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tstate.structure = structure;\n\n\t\t\t\t\t\t\tthis.app.callEvent(\"filter:change\", [this.field, value]);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\tShow(pos, filterObj) {\n\t\tconst popup = this.getRoot();\n\t\tconst filter = (this.filter = popup.getBody());\n\t\tthis.field = filterObj.name;\n\t\tconst list = filter.getChildViews()[2];\n\n\t\tconst field = this.Local.getField(this.field);\n\n\t\tthis.Local.collectFieldValues(this.field).then(values => {\n\t\t\tlist.clearAll();\n\t\t\tlist.parse(webix.copy(values));\n\n\t\t\tfilter.define({ mode: field.type });\n\t\t\tfilter.config.value = \"\";\n\t\t\tfilter.setValue(webix.copy(filterObj.value || {}));\n\n\t\t\tpopup.show(pos);\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class ModeView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tthis.Compact = this.getParam(\"compact\");\n\n\t\tconst askin = webix.skin.$active;\n\t\tconst mini = webix.skin.$name == \"mini\" || webix.skin.$name == \"compact\";\n\t\tconst config = {\n\t\t\theight: askin.toolbarHeight,\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"segmented\",\n\t\t\t\t\tlocalId: \"modes\",\n\t\t\t\t\talign: \"middle\",\n\t\t\t\t\tinputHeight: askin.inputHeight - askin.inputPadding * (mini ? 0 : 2),\n\t\t\t\t\toptionWidth: 80,\n\t\t\t\t\twidth: 244,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{ id: \"table\", value: _(\"Table\") },\n\t\t\t\t\t\t{ id: \"tree\", value: _(\"Tree\") },\n\t\t\t\t\t\t{ id: \"chart\", value: _(\"Chart\") },\n\t\t\t\t\t],\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: (v, o, c) => {\n\t\t\t\t\t\t\tif (c == \"user\") this.SetMode(v);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ width: askin.dataPadding },\n\t\t\t],\n\t\t};\n\n\t\tif (this.Compact) {\n\t\t\tconfig.css = \"webix_pivot_footer\";\n\t\t\tconfig.cols[1].width = 0;\n\t\t\tconfig.cols.unshift({});\n\t\t}\n\n\t\treturn config;\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\");\n\n\t\tthis.on(this.State.$changes, \"mode\", mode => {\n\t\t\tthis.$$(\"modes\").setValue(mode);\n\t\t});\n\t}\n\n\t/**\n\t * Sets Pivot mode\n\t * @param {string} desired mode (\"table\", \"tree\", \"data\")\n\t */\n\tSetMode(value) {\n\t\tthis.State.mode = value;\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport ModeView from \"views/mode\";\nimport filterPopup from \"views/filter\";\n\nexport default class ToolbarView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tthis.Compact = this.getParam(\"compact\");\n\t\tthis.State = this.getParam(\"state\");\n\n\t\tlet config;\n\t\tif (this.Compact) {\n\t\t\tconfig = {\n\t\t\t\tview: \"icon\",\n\t\t\t\ticon: \"pt-settings\",\n\t\t\t\tinputHeight: webix.skin.$active.buttonHeight,\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: () => this.ToggleConfig(),\n\t\t\t\t},\n\t\t\t};\n\t\t} else {\n\t\t\tconst label = _(\"Configure Pivot\");\n\t\t\tconst css = \"webix_template webix_pivot_measure_size\";\n\n\t\t\t// 20px icon width and 8px additional padding\n\t\t\tconst width = 20 + 8 + webix.html.getTextSize(label, css).width;\n\t\t\tconfig = {\n\t\t\t\tview: \"template\",\n\t\t\t\tborderless: true,\n\t\t\t\twidth,\n\t\t\t\ttemplate: () => {\n\t\t\t\t\treturn `\n\t\t\t\t\t\t<span>${label}</span>\n\t\t\t\t\t\t<span class=\"pt-settings webix_pivot_toolbar_icon\"></span>`;\n\t\t\t\t},\n\t\t\t\tonClick: {\n\t\t\t\t\twebix_pivot_settings: () => this.ToggleConfig(),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t\tconfig.localId = \"config\";\n\t\tconfig.css = \"webix_pivot_settings\";\n\t\tconfig.tooltip = _(\"Click to configure\");\n\n\t\tconst scrollSize = webix.env.$customScroll ? 0 : this._GetScrollWidth();\n\t\tconst height = webix.skin.$active.toolbarHeight + scrollSize;\n\n\t\tlet css = \"webix_pivot_toolbar\";\n\t\tif (scrollSize) {\n\t\t\twebix.html.addStyle(\n\t\t\t\t`.webix_pivot_bar_with_scroll .webix_pivot_settings>.webix_template{ line-height: ${height}px; }`\n\t\t\t);\n\t\t\tcss += \" webix_pivot_bar_with_scroll\";\n\t\t}\n\n\t\tconst result = {\n\t\t\tcss,\n\t\t\tmargin: this.Compact ? 12 : 0,\n\t\t\tpadding: {\n\t\t\t\tleft: this.Compact ? webix.skin.$active.inputPadding : 0,\n\t\t\t},\n\t\t\theight,\n\t\t\tcols: [config, this.GetFilters()],\n\t\t};\n\n\t\tif (!this.Compact) result.cols.push(ModeView);\n\n\t\treturn result;\n\t}\n\n\tinit() {\n\t\tthis.filterPopup = this.ui(filterPopup);\n\n\t\tthis.on(this.State.$changes, \"fields\", fields => {\n\t\t\tif (fields.length) {\n\t\t\t\t// render filters after fields set\n\t\t\t\tconst filtersView = this.$$(\"filters\").getParentView();\n\t\t\t\twebix.ui(this.GetFilters(), filtersView);\n\t\t\t}\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"structure\", (structure, old) => {\n\t\t\tif (old && this.FiltersChanged(structure, old)) {\n\t\t\t\tconst filtersView = this.$$(\"filters\").getParentView();\n\t\t\t\twebix.ui(this.GetFilters(), filtersView);\n\t\t\t}\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"readonly\", val => {\n\t\t\tthis.ToggleReadonly(val);\n\t\t});\n\t}\n\t/**\n\t * Compares filters when structure changes\n\t * @param {Object} structure - current structure\n\t * @param {Object} oldStructure - previous structure\n\t * @returns {boolean} result of comparison\n\t */\n\tFiltersChanged(structure, oldStructure) {\n\t\tif (structure.filters.length == oldStructure.filters.length) {\n\t\t\tfor (let i = 0; i < structure.filters.length; i++) {\n\t\t\t\tconst filter = structure.filters[i];\n\t\t\t\tconst old = oldStructure.filters[i];\n\t\t\t\tif (filter.name != old.name || filter.external != old.external)\n\t\t\t\t\treturn true;\n\t\t\t\tif (JSON.stringify(filter.value) != JSON.stringify(old.value))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t} else return true;\n\n\t\treturn false;\n\t}\n\t/**\n\t * Toggles the configuration window\n\t */\n\tToggleConfig() {\n\t\tthis.State.config = !this.State.config;\n\t}\n\t/**\n\t * Controls visibility of a button with Pivot settings\n\t * @param {boolean} val - indicates whether Pivot is in a readonly mode\n\t */\n\tToggleReadonly(val) {\n\t\tif (val) this.$$(\"config\").hide();\n\t\telse this.$$(\"config\").show();\n\t}\n\t/**\n\t * Gets configuration for toolbar filters\n\t * @returns {Object} layout with all filters\n\t */\n\tGetFilters() {\n\t\tconst structure = this.State.structure;\n\t\tconst filters = [];\n\n\t\tif (this.State.fields.length)\n\t\t\t// toolbar renders before fields set\n\t\t\tstructure.filters.forEach(filter => {\n\t\t\t\tif (!filter.external) filters.push(this.FilterConfig(filter));\n\t\t\t});\n\n\t\tconst askin = webix.skin.$active;\n\t\tconst padding = (askin.toolbarHeight - askin.buttonHeight) / 2;\n\t\treturn {\n\t\t\tview: \"scrollview\",\n\t\t\tborderless: true,\n\t\t\tscroll: \"x\",\n\t\t\tbody: {\n\t\t\t\tmargin: 8,\n\t\t\t\tpadding: {\n\t\t\t\t\tleft: this.Compact ? 0 : 8,\n\t\t\t\t\ttop: padding + askin.inputPadding,\n\t\t\t\t\tbottom: padding + askin.inputPadding,\n\t\t\t\t},\n\t\t\t\tlocalId: \"filters\",\n\t\t\t\tcols: filters,\n\t\t\t},\n\t\t};\n\t}\n\t/**\n\t * Gets configuration a single toolbar filter\n\t * @param {Object} filter - filter object from structure\n\t * @returns {Object} filter UI\n\t */\n\tFilterConfig(filter) {\n\t\tconst label = this.app.getService(\"local\").getField(filter.name).value;\n\t\tconst css = \"webix_template webix_pivot_measure_size\";\n\n\t\t// 20px icon width and 8px additional padding\n\t\tconst width =\n\t\t\t(this.Compact ? 0 : 20 + 8) + webix.html.getTextSize(label, css).width;\n\t\treturn {\n\t\t\tview: \"template\",\n\t\t\tborderless: true,\n\t\t\twidth,\n\t\t\tcss: \"webix_pivot_filter\",\n\t\t\ttemplate: () => {\n\t\t\t\tconst value = filter.value;\n\t\t\t\tconst activeCss =\n\t\t\t\t\tvalue && (value.includes || value.condition.filter)\n\t\t\t\t\t\t? \"webix_pivot_active_filter\"\n\t\t\t\t\t\t: \"\";\n\t\t\t\tconst icon = !this.Compact\n\t\t\t\t\t? \"<span class='pt-filter webix_pivot_toolbar_icon'></span>\"\n\t\t\t\t\t: \"\";\n\t\t\t\treturn `<div class=\"webix_pivot_filter_inner ${activeCss}\">\n\t\t\t\t\t<span>${label}</span>\n\t\t\t\t\t${icon}\n\t\t\t\t</div>`;\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_pivot_filter: function() {\n\t\t\t\t\tthis.$scope.filterPopup.Show(this.$view, filter);\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\t_GetScrollWidth() {\n\t\tconst outer = webix.html.create(\"DIV\", {\n\t\t\tstyle: \"visibility:hidden;overflow:scroll;\",\n\t\t});\n\t\tconst inner = webix.html.create(\"DIV\");\n\n\t\tdocument.body.appendChild(outer);\n\t\touter.appendChild(inner);\n\n\t\tconst scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n\n\t\touter.parentNode.removeChild(outer);\n\t\treturn scrollbarWidth;\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class ChartView extends JetView {\n\tconfig() {\n\t\tconst state = (this.State = this.getParam(\"state\", true));\n\n\t\tconst chart = {\n\t\t\tview: \"chart\",\n\t\t\t$mainView: true,\n\t\t\tborderless: true,\n\t\t\tlocalId: \"data\",\n\t\t\txAxis: {},\n\t\t\tyAxis: {},\n\t\t};\n\n\t\twebix.extend(chart, webix.copy(state.chart), true);\n\n\t\tconst type = chart.type;\n\t\tif (type == \"barH\" || type == \"stackedBarH\") {\n\t\t\tif (!chart.yAxis.template)\n\t\t\t\tchart.yAxis.template = obj => obj[obj.length - 1];\n\t\t} else if (!chart.xAxis.template)\n\t\t\tchart.xAxis.template = obj => obj[obj.length - 1];\n\n\t\tconst commonAxisSettings = {\n\t\t\tlines: chart.lines,\n\t\t};\n\n\t\t//save default chart line color\n\t\tif (chart.scaleColor)\n\t\t\tcommonAxisSettings.color = commonAxisSettings.lineColor =\n\t\t\t\tchart.scaleColor;\n\n\t\twebix.extend(chart.xAxis, commonAxisSettings, true);\n\t\twebix.extend(chart.yAxis, commonAxisSettings, true);\n\n\t\tif (this.IsPieBased()) {\n\t\t\twebix.extend(\n\t\t\t\tchart,\n\t\t\t\t{\n\t\t\t\t\tmultilevel: true,\n\t\t\t\t\ttooltip: this.ValueFormat,\n\t\t\t\t\tcolor: \"#color#\",\n\t\t\t\t\ttype: type + (chart[\"3D\"] ? \"3D\" : \"\"),\n\t\t\t\t\tpieInnerText: chart[\"pieInnerText\"] ? this.ValueFormat : \"\",\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\treturn chart;\n\t}\n\n\tinit() {\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tthis.LoadData();\n\n\t\tthis.on(this.State.$changes, \"structure\", (structure, old) => {\n\t\t\tif (old) this.LoadData();\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"chart\", (val, o) => {\n\t\t\tif (o) this.refresh();\n\t\t});\n\t}\n\t/**\n\t * Loads data to a chart\n\t * @returns {Promise} promise that resolves when data is parsed\n\t */\n\tLoadData() {\n\t\treturn this.Local.getData().then(data => {\n\t\t\tthis.UpdateChart(data);\n\t\t});\n\t}\n\t/**\n\t * Updates chart data\n\t * @param {Array} data - array of data\n\t */\n\tUpdateChart(data) {\n\t\tthis.$$(\"data\").clearAll();\n\n\t\tif (!this.IsPieBased()) {\n\t\t\tthis.$$(\"data\").removeAllSeries();\n\t\t\tthis.SetSeries(data.values);\n\t\t}\n\n\t\tthis.SetLegend(data.values);\n\t\tthis.$$(\"data\").parse(data.data);\n\t}\n\t/**\n\t * Checks if chart is pie based\n\t * @param {string} type (optional) - chart type\n\t * @returns {boolean} is pie based\n\t */\n\tIsPieBased(type) {\n\t\tif (!type) type = this.State.chart.type;\n\t\treturn type == \"pie\" || type == \"donut\";\n\t}\n\t/**\n\t * Sets chart series\n\t * @param {Array} values - array of values for series\n\t */\n\tSetSeries(values) {\n\t\tfor (let i = 0; i < values.length; i++)\n\t\t\tthis.$$(\"data\").addSeries(this.GetSeriesConfig(values[i], i));\n\t}\n\t/**\n\t * Prepares chart series\n\t * @param {object} settings - values for series\n\t * @param {number} i - index\n\t * @param {string} type - chart type (customizations)\n\t */\n\tGetSeriesConfig(settings, i, type) {\n\t\ttype = type || this.State.chart.type;\n\t\treturn {\n\t\t\ttype,\n\t\t\tvalue: obj => obj[i],\n\t\t\talpha: type == \"area\" || type == \"splineArea\" ? 0.7 : 1,\n\t\t\tcolor: settings.color,\n\t\t\ttooltip: obj => this.ValueFormat({ value: obj[i] }),\n\t\t\titem: {\n\t\t\t\tcolor: settings.color,\n\t\t\t\tborderColor: settings.color,\n\t\t\t},\n\t\t\tline: {\n\t\t\t\tcolor: settings.color,\n\t\t\t},\n\t\t};\n\t}\n\t/**\n\t * Prepares and sets chart legend\n\t * @param {Array} values - array of values for legend\n\t */\n\tSetLegend(values) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tvalues = values.map(v => {\n\t\t\tconst operation = v.operation;\n\t\t\tlet text = v.text;\n\t\t\tif (operation == \"complex\") text = this.Local.fixMath(text);\n\t\t\telse if (operation) {\n\t\t\t\ttext = text\n\t\t\t\t\t.split(\",\")\n\t\t\t\t\t.map(t => this.Local.getField(t).value)\n\t\t\t\t\t.join(\", \");\n\t\t\t\ttext = `${text} (${_(operation)})`;\n\t\t\t}\n\t\t\treturn { color: v.color, text };\n\t\t});\n\n\t\tconst legend = webix.extend(\n\t\t\t{\n\t\t\t\tvalues,\n\t\t\t\tvalign: \"middle\",\n\t\t\t\talign: \"right\",\n\t\t\t\tlayout: \"y\",\n\t\t\t},\n\t\t\tthis.State.chart.legend || {},\n\t\t\ttrue\n\t\t);\n\t\tthis.$$(\"data\").define({ legend });\n\t}\n\t/**\n\t * Formats tooltip values / inner text\n\t * @param {object} item - data item\n\t * @returns {number} formatted value\n\t */\n\tValueFormat(item) {\n\t\treturn item.text || parseFloat(item.value || 0).toFixed(3);\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport Property from \"views/config/properties\";\nimport ValuesProperty from \"views/config/properties/values\";\nimport GroupProperty from \"views/config/properties/group\";\nimport ChartSettings from \"views/config/properties/chart\";\nimport TableSettings from \"views/config/properties/table\";\n\nexport default class ConfigView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tthis.State = this.app.getState();\n\t\tthis.Compact = this.getParam(\"compact\", true);\n\n\t\tconst toolbar = {\n\t\t\ttype: \"form\",\n\t\t\tborderless: true,\n\t\t\tpadding: {\n\t\t\t\tleft: 16,\n\t\t\t\tright: 14, //button\n\t\t\t\ttop: 8,\n\t\t\t\tbottom: 4,\n\t\t\t},\n\t\t\tcols: [\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tlabel: _(\"Done\"),\n\t\t\t\t\thotkey: \"esc\",\n\t\t\t\t\tautowidth: true,\n\t\t\t\t\tcss: \"webix_primary\",\n\t\t\t\t\tclick: () => this.ToggleForm(),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst structure = {\n\t\t\tborderless: true,\n\t\t\tview: \"scrollview\",\n\t\t\tscroll: \"y\",\n\t\t\tbody: {\n\t\t\t\tview: \"accordion\",\n\t\t\t\tcss: \"webix_pivot_configuration\",\n\t\t\t\tlocalId: \"settings\",\n\t\t\t\tmulti: true,\n\t\t\t\ttype: \"space\",\n\t\t\t\tpadding: {\n\t\t\t\t\tleft: 16,\n\t\t\t\t\tright: 16,\n\t\t\t\t\ttop: 4,\n\t\t\t\t\tbottom: 16,\n\t\t\t\t},\n\t\t\t\tmargin: 20,\n\t\t\t\trows: [\n\t\t\t\t\tthis.GroupConfig(\n\t\t\t\t\t\t_(\"Rows\"),\n\t\t\t\t\t\t\"pt-rows\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"rows\",\n\t\t\t\t\t\t\t$subview: new Property(this.app, \"\", {\n\t\t\t\t\t\t\t\tfield: \"rows\",\n\t\t\t\t\t\t\t\tplusLabel: _(\"Add row\"),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"table\"\n\t\t\t\t\t),\n\t\t\t\t\tthis.GroupConfig(\n\t\t\t\t\t\t_(\"Columns\"),\n\t\t\t\t\t\t\"pt-columns\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"columns\",\n\t\t\t\t\t\t\t$subview: new Property(this.app, \"\", {\n\t\t\t\t\t\t\t\tfield: \"columns\",\n\t\t\t\t\t\t\t\tplusLabel: _(\"Add column\"),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"table\"\n\t\t\t\t\t),\n\t\t\t\t\tthis.GroupConfig(_(\"Values\"), \"pt-values\", {\n\t\t\t\t\t\tname: \"values\",\n\t\t\t\t\t\t$subview: ValuesProperty,\n\t\t\t\t\t}),\n\t\t\t\t\tthis.GroupConfig(\n\t\t\t\t\t\t_(\"Group By\"),\n\t\t\t\t\t\t\"pt-group\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"groupBy\",\n\t\t\t\t\t\t\t$subview: GroupProperty,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"chart\"\n\t\t\t\t\t),\n\t\t\t\t\tthis.GroupConfig(_(\"Filters\"), \"pt-filter\", {\n\t\t\t\t\t\tname: \"filters\",\n\t\t\t\t\t\t$subview: new Property(this.app, \"\", {\n\t\t\t\t\t\t\tfield: \"filters\",\n\t\t\t\t\t\t\tplusLabel: _(\"Add filter\"),\n\t\t\t\t\t\t}),\n\t\t\t\t\t}),\n\t\t\t\t\tthis.GroupConfig(\n\t\t\t\t\t\t_(\"Chart\"),\n\t\t\t\t\t\t\"pt-chart\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$subview: ChartSettings,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"chart\"\n\t\t\t\t\t),\n\t\t\t\t\tthis.GroupConfig(\n\t\t\t\t\t\t_(\"Table\"),\n\t\t\t\t\t\t\"wxi-columns\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$subview: TableSettings,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"table\"\n\t\t\t\t\t),\n\t\t\t\t\t{},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\n\t\treturn {\n\t\t\tmargin: 0,\n\t\t\trows: [toolbar, structure],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.on(this.State.$changes, \"readonly\", (_v, o) => {\n\t\t\tif (!webix.isUndefined(o)) this.ToggleForm();\n\t\t});\n\t}\n\n\tready() {\n\t\tthis.on(this.app, \"property:change\", (field, value) => {\n\t\t\tthis.HandleFieldChange(field, value);\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"structure\", () => {\n\t\t\tif (!this.innerChange) this.SetValues();\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"mode\", (mode, oldMode) => {\n\t\t\tconst isChart = mode == \"chart\";\n\n\t\t\tthis.$$(\"settings\").showBatch(isChart ? \"chart\" : \"table\");\n\n\t\t\t//columns can be updated in structure via groupBy\n\t\t\tif (oldMode && (isChart || oldMode == \"chart\")) this.SetValues();\n\t\t});\n\t}\n\t/** Toggles configuration form */\n\tToggleForm() {\n\t\tthis.State.config = !this.State.config;\n\t}\n\t/** Sets values into a  configuration form */\n\tSetValues() {\n\t\tconst structure = this.State.structure;\n\t\tconst inputs = [\"rows\", \"columns\", \"values\", \"filters\", \"groupBy\"];\n\n\t\tinputs.forEach(input => {\n\t\t\tconst value = structure[input] || this.State[input];\n\t\t\tconst view = this.getSubView(input);\n\t\t\tview.SetValue(value);\n\t\t});\n\t}\n\t/**\n\t * Applies changes in form fields to data structure\n\t * @param {string} field - field name\n\t * @param {string|Array} value - field value\n\t */\n\tHandleFieldChange(field, value) {\n\t\tconst structure = webix.copy(this.State.structure);\n\n\t\tif (field == \"filters\") value = this.CorrectFilters(structure, value);\n\t\telse this.CorrectInputs(structure, field, value);\n\n\t\tstructure[field] = value;\n\t\tthis.innerChange = true;\n\t\tthis.app.setStructure(structure);\n\t\tdelete this.innerChange;\n\t}\n\t/**\n\t * Prepares configuration for an accordion item with form fields\n\t * @param {string} name - accordion item header name\n\t * @param {string} icon - accordion item icon\n\t * @param {Object} config - object with form fields for this accordion item\n\t * @param {string} batch - batch name, used to control visibility\n\t * @returns {Object} configuration of the accordion item body\n\t */\n\tGroupConfig(name, icon, config, batch) {\n\t\treturn {\n\t\t\tbatch,\n\t\t\theader: `\n\t\t\t\t<span class=\"webix_icon webix_pivot_config_icon ${icon}\"></span>\n\t\t\t\t<span class=\"webix_pivot_config_label\">${name}</span>\n\t\t\t`,\n\t\t\tbody: config,\n\t\t\tborderless: true,\n\t\t};\n\t}\n\t/** Returns an object with fields that need to be corrected when some field changes */\n\tGetCorrections() {\n\t\treturn {\n\t\t\trows: [\"columns\", \"values\", \"groupBy\"],\n\t\t\tcolumns: [\"rows\", \"values\"],\n\t\t\tvalues: [\"rows\", \"columns\", \"groupBy\"],\n\t\t\tgroupBy: [\"rows\", \"values\"],\n\t\t};\n\t}\n\t/**\n\t * Prepares filters before applying them to data structure\n\t * @param {Object} structure - a copy of the current data structure\n\t * @param {Array} value - \"filters\" field value\n\t */\n\tCorrectFilters(structure, value) {\n\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\tconst active = structure.filters.find(filter => {\n\t\t\t\tif (filter.name == value[i]) return true;\n\t\t\t});\n\t\t\tvalue[i] = { name: value[i] };\n\t\t\tif (active && !active.external) value[i].value = active.value;\n\t\t}\n\n\t\tconst external = structure.filters.filter(filter => filter.external);\n\t\tvalue = value.concat(external);\n\n\t\treturn value;\n\t}\n\t/**\n\t * Prepares form fields before applying them to data structure\n\t * @param {Object} structure - a copy of the current data structure\n\t * @param {string} field -  field name\n\t * @param {string|Array} value -  field value\n\t */\n\tCorrectInputs(structure, field, value) {\n\t\tconst inputs = this.GetCorrections()[field];\n\n\t\tif (inputs) {\n\t\t\tif (typeof value == \"string\") value = [value];\n\n\t\t\tvalue = value.map(v => (v.name ? v.name : v));\n\n\t\t\tinputs.forEach(input => {\n\t\t\t\tconst view = this.getSubView(input);\n\t\t\t\tlet values = view.GetValue();\n\n\t\t\t\tif (typeof values == \"string\") {\n\t\t\t\t\tif (value.find(v => v == values)) values = \"\";\n\t\t\t\t} else\n\t\t\t\t\tvalues = values.filter(v => {\n\t\t\t\t\t\tif (v.name) v = v.name;\n\n\t\t\t\t\t\treturn value.indexOf(v) == -1;\n\t\t\t\t\t});\n\n\t\t\t\tstructure[input] = values;\n\t\t\t\tview.SetValue(values);\n\t\t\t});\n\t\t}\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class Popup extends JetView {\n\tconfig() {\n\t\treturn this.app.getService(\"jet-win\").updateConfig({\n\t\t\tview: \"window\",\n\t\t\tborderless: true,\n\t\t\tfullscreen: true,\n\t\t\thead: false,\n\t\t\tbody: { $subview: true },\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport ModeView from \"views/mode\";\nimport ToolbarView from \"views/toolbar\";\n\nimport { initRLayout } from \"@xbs/jet-helpers\";\n\nexport default class MainView extends JetView {\n\tconfig() {\n\t\tinitRLayout();\n\n\t\tconst fCompact = this.getParam(\"forceCompact\");\n\t\tif (!webix.isUndefined(fCompact)) this.setParam(\"compact\", fCompact);\n\t\tthis.Compact = this.getParam(\"compact\");\n\n\t\tconst rows = [\n\t\t\tToolbarView,\n\t\t\t{\n\t\t\t\tview: \"r-layout\",\n\t\t\t\tlocalId: \"main\",\n\t\t\t\tcols: [{ $subview: true }],\n\t\t\t},\n\t\t];\n\n\t\tif (this.Compact) {\n\t\t\trows.push(ModeView, {\n\t\t\t\t$subview: true,\n\t\t\t\tname: \"edit\",\n\t\t\t\tpopup: true,\n\t\t\t});\n\t\t} else {\n\t\t\trows[1].cols.push({\n\t\t\t\tview: \"proxy\",\n\t\t\t\tmaxWidth: 450,\n\t\t\t\tlocalId: \"edit\",\n\t\t\t\tcss: \"webix_pivot_config_container webix_shadow_medium\",\n\t\t\t\tborderless: true,\n\t\t\t\thidden: true,\n\t\t\t\tbody: { $subview: true, name: \"edit\" },\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tmargin: 0,\n\t\t\trows,\n\t\t\tview: webix.isUndefined(fCompact) ? \"r-layout\" : \"layout\",\n\t\t};\n\t}\n\n\tinit() {\n\t\tconst state = this.getParam(\"state\");\n\n\t\tthis.$$(\"main\").sizeTrigger(\n\t\t\tthis.app,\n\t\t\tmode => this.SetCompactMode(mode),\n\t\t\t!!this.Compact\n\t\t);\n\n\t\tthis.on(state.$changes, \"mode\", mode => {\n\t\t\tthis.show(\"./\" + (mode == \"chart\" ? \"chart\" : \"table\"));\n\t\t});\n\n\t\tthis.on(state.$changes, \"config\", val => {\n\t\t\tif (val) this.ShowConfig();\n\t\t\telse this.HideConfig();\n\t\t});\n\t}\n\n\t/** Shows configuration window*/\n\tShowConfig() {\n\t\tif (this.Compact) {\n\t\t\tthis.show(\"config.popup/config\", {\n\t\t\t\ttarget: \"edit\",\n\t\t\t});\n\t\t} else {\n\t\t\tthis.$$(\"edit\").show();\n\t\t\tthis.show(\"config\", {\n\t\t\t\ttarget: \"edit\",\n\t\t\t});\n\t\t}\n\t}\n\n\t/** Hides configuration window*/\n\tHideConfig() {\n\t\t// we need to destroy the view inside first\n\t\tthis.show(\"_blank\", { target: \"edit\" });\n\n\t\tif (!this.Compact) this.$$(\"edit\").hide();\n\t}\n\n\tSetCompactMode(mode) {\n\t\t//let it render, then recreate\n\t\twebix.delay(() => {\n\t\t\tthis.setParam(\"compact\", mode);\n\t\t\tif (!mode) webix.fullscreen.exit();\n\t\t\tthis.refresh();\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class TableView extends JetView {\n\tconfig() {\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tconst state = (this.State = this.getParam(\"state\", true));\n\t\tconst rows = state.structure.rows.length;\n\n\t\tconst table = {\n\t\t\tview: \"treetable\",\n\t\t\t$mainView: true,\n\t\t\tlocalId: \"data\",\n\t\t\tcss: \"webix_data_border webix_header_border\",\n\t\t\tselect: true,\n\t\t\tleftSplit: state.mode == \"table\" ? rows : rows ? 1 : 0,\n\t\t\tresizeColumn: true,\n\t\t\tborderless: true,\n\t\t\tcolumns: [],\n\t\t\tfooter: state.datatable.footer,\n\t\t};\n\n\t\twebix.extend(table, state.datatable, true);\n\n\t\treturn table;\n\t}\n\n\tinit() {\n\t\tthis.LoadData();\n\n\t\tthis.on(this.State.$changes, \"structure\", (structure, old) => {\n\t\t\tif (old) this.LoadData();\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"datatable\", (val, o) => {\n\t\t\tif (o) this.refresh();\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"mode\", (val, o) => {\n\t\t\tif (o && o != \"chart\" && val != \"chart\") this.refresh();\n\t\t});\n\t}\n\t/**\n\t * Loads data to a table\n\t * @returns {Promise} promise that resolves when data is parsed\n\t */\n\tLoadData() {\n\t\treturn this.Local.getData().then(data => {\n\t\t\tthis.UpdateTable(data);\n\t\t});\n\t}\n\t/**\n\t * Updates table data\n\t * @param {Array} data - array of data\n\t */\n\tUpdateTable(data) {\n\t\tconst state = this.State;\n\t\tconst structure = state.structure;\n\n\t\tconst freeze = this.CheckFreeze();\n\n\t\tlet rightSplit = 0;\n\t\tconst totalCols = state.datatable.totalColumn;\n\t\tlet totalOps;\n\t\tif (totalCols) {\n\t\t\tconst vals = structure.values;\n\t\t\ttotalOps =\n\t\t\t\ttotalCols == \"sumOnly\" ? vals.filter(v => v.operation == \"sum\") : vals;\n\t\t\tif (freeze) rightSplit = totalOps.length;\n\t\t}\n\n\t\tlet leftSplit = 0;\n\t\tif (freeze) {\n\t\t\tconst rows = structure.rows.length;\n\t\t\tleftSplit = state.mode == \"table\" ? rows : rows ? 1 : 0;\n\t\t}\n\n\t\tif (!data.$ready) {\n\t\t\tconst total = data.totalColumn;\n\t\t\tlet lastId;\n\n\t\t\tif (total) {\n\t\t\t\tlastId = data.header[data.header.length - 1].id;\n\n\t\t\t\tfor (let i = 0; i < totalOps.length; i++) {\n\t\t\t\t\tlet name = totalOps[i].name;\n\t\t\t\t\tif (webix.isArray(name)) name = name.join();\n\n\t\t\t\t\tdata.header.push({\n\t\t\t\t\t\theader: [\n\t\t\t\t\t\t\t{ name: \"total\", colspan: rightSplit },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: name || totalOps[i].operation,\n\t\t\t\t\t\t\t\toperation: totalOps[i].operation,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\tid: lastId + i + 1,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst totalIndex = { i: 0 };\n\t\t\tdata = this.Local._store = {\n\t\t\t\tdata: data.data.map(item =>\n\t\t\t\t\tthis._prepareData(item, total, totalIndex, lastId)\n\t\t\t\t),\n\t\t\t\tcolumns: this.SetColumns(data.header, data.footer, data.marks),\n\t\t\t\t$ready: 1,\n\t\t\t};\n\t\t}\n\n\t\tconst table = this.$$(\"data\");\n\t\ttable.clearAll();\n\t\ttable.define({ leftSplit, rightSplit }, true);\n\t\ttable.refreshColumns(data.columns);\n\t\ttable.parse(data.data);\n\t}\n\t/**\n\t * Prepares table item (updates id, adds total cols, etc.)\n\t * @param {Array} obj - data item\n\t * @param {Array} total - array with total values for columns\n\t * @param {Object} index - current total index\n\t * @param {number} lastId - last column id\n\t * @returns {Proxy} prepared item\n\t */\n\t_prepareData(obj, total, index, lastId) {\n\t\tconst table = this.State.mode == \"table\";\n\t\tlet totalIndex;\n\n\t\tif (table || (total && !obj.data)) totalIndex = index.i++;\n\n\t\tconst item = new Proxy(obj, {\n\t\t\tget: (item, prop) => {\n\t\t\t\tif (prop == \"data\") return item.vals;\n\t\t\t\tif (table && prop == \"id\") return totalIndex + 1;\n\n\t\t\t\tconst id = prop * 1;\n\t\t\t\tif (!isNaN(id)) {\n\t\t\t\t\tconst vals = typeof item.values == \"object\" ? item.values : item;\n\n\t\t\t\t\tif (total && id > lastId && (totalIndex || totalIndex === 0)) {\n\t\t\t\t\t\treturn total[totalIndex][id - lastId - 1];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn vals[id - 1];\n\t\t\t\t}\n\n\t\t\t\treturn item[prop];\n\t\t\t},\n\t\t});\n\n\t\tif (obj.data) {\n\t\t\titem.open = true;\n\t\t\titem.vals = obj.data.map(r => {\n\t\t\t\treturn this._prepareData(r, total, index, lastId);\n\t\t\t});\n\t\t}\n\n\t\treturn item;\n\t}\n\t/**\n\t * Checks if columns should be frozen\n\t */\n\tCheckFreeze() {\n\t\tconst freezeColumns = this.app.config.freezeColumns;\n\t\tconst compact = this.getParam(\"compact\", true);\n\n\t\treturn webix.isUndefined(freezeColumns) ? !compact : freezeColumns;\n\t}\n\t/**\n\t * Prepares table columns\n\t * @param {Array} columns - array with columns\n\t * @param {Array} footer - array with total values for columns\n\t * @param {Array} marks - array with min/max marks for columns\n\t * @returns {Array} column configurations\n\t */\n\tSetColumns(columns, footer, marks) {\n\t\tcolumns = webix.copy(columns);\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tconst rows = this.State.structure.rows.length;\n\t\tconst left = this.State.mode == \"table\" ? rows : rows ? 1 : 0;\n\n\t\tfor (let i = 0; i < columns.length; i++) {\n\t\t\tif (i < left) {\n\t\t\t\tthis.SetFirstColumn(columns[i], !i && this.State.datatable.footer, _);\n\t\t\t} else {\n\t\t\t\tcolumns[i].sort = \"int\";\n\n\t\t\t\tif (!columns[i].format) columns[i].format = this.CellFormat;\n\n\t\t\t\tif (marks.length)\n\t\t\t\t\tcolumns[i].cssFormat = (v, row, rid, cid) => {\n\t\t\t\t\t\tconst col = marks[rid - 1];\n\t\t\t\t\t\tconst css = col ? col[cid - 1] : null;\n\t\t\t\t\t\treturn css ? css.join(\" \") : \"\";\n\t\t\t\t\t};\n\n\t\t\t\tconst header = columns[i].header;\n\t\t\t\tfor (let j = 0; j < header.length; j++) {\n\t\t\t\t\tlet h = header[j];\n\t\t\t\t\tif (h) {\n\t\t\t\t\t\tif (!j && h.name == \"total\") {\n\t\t\t\t\t\t\th.text = _(\"Total\");\n\t\t\t\t\t\t} else if (j == header.length - 1) {\n\t\t\t\t\t\t\th.text = this.HeaderTemplate(h, _);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (footer.length) {\n\t\t\t\t\tcolumns[i].footer = this.CellFormat(footer[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn columns;\n\t}\n\t/**\n\t * Prepares first column\n\t * @param {Object} column - column configuration\n\t * @param {boolean} footer - column with footer name\n\t * @param {function} _ - function for translating text labels\n\t */\n\tSetFirstColumn(column, footer, _) {\n\t\tif (this.State.mode == \"tree\") {\n\t\t\tcolumn.header = {\n\t\t\t\ttext: this.State.structure.rows\n\t\t\t\t\t.map(field => this.Local.getField(field).value)\n\t\t\t\t\t.join(\"<span class='webix_icon wxi-angle-right'></span>\"),\n\t\t\t\tcss: \"webix_pivot_tree_header\",\n\t\t\t};\n\t\t\tcolumn.width = 300;\n\t\t\tcolumn.template = (obj, common) => {\n\t\t\t\treturn common.treetable(obj, common) + obj[1];\n\t\t\t};\n\t\t} else {\n\t\t\tcolumn.header = this.Local.getField(column.header[0].text).value;\n\t\t\tcolumn.width = 200;\n\t\t}\n\t\tif (footer) column.footer = _(\"Total\");\n\t}\n\t/**\n\t * Sets a template for column header\n\t * @param {Object} line - object with header line properties\n\t * @param {function} _ - function for translating text labels\n\t * @returns {string} string with header text\n\t */\n\tHeaderTemplate(line, _) {\n\t\tif (!line.operation || line.operation == \"complex\")\n\t\t\treturn this.Local.fixMath(line.text);\n\t\telse {\n\t\t\tlet text = line.text.split(\",\");\n\t\t\ttext = text.map(t => this.Local.getField(t).value).join(\", \");\n\t\t\treturn `${text} <span class=\"webix_pivot_operation\">${_(\n\t\t\t\tline.operation\n\t\t\t)}</span>`;\n\t\t}\n\t}\n\t/**\n\t * Formats a cell value\n\t * @param {(number|string)} value - raw value\n\t * @returns {(number|string)} formatted value\n\t */\n\tCellFormat(value) {\n\t\tif (!value) value = value === 0 ? \"0\" : \"\";\n\n\t\treturn value ? parseFloat(value).toFixed(3) : value;\n\t}\n}\n","const asc = (a, b) => (a.key > b.key ? 1 : -1);\nconst desc = (a, b) => (a.key < b.key ? 1 : -1);\nclass DataDimension {\n    constructor(table, getValue, label, meta, sort) {\n        if (sort === \"desc\") {\n            this._sort = desc;\n        }\n        else if (sort === \"asc\") {\n            this._sort = asc;\n        }\n        else if (sort) {\n            this._sort = (a, b) => sort(a.key, b.key);\n        }\n        this._label = label;\n        this._meta = meta || null;\n        this._table = table;\n        this._getter = getValue;\n        this._prepared = 0;\n    }\n    getIndexes() {\n        return this._indexes;\n    }\n    getValue(i) {\n        return this._values[i].key;\n    }\n    getSize() {\n        return this._values.length;\n    }\n    getLabel() {\n        return this._label;\n    }\n    getOptions() {\n        this._prepareOptions();\n        return this._values.map(a => a.key);\n    }\n    getMeta() {\n        return this._meta;\n    }\n    reset() {\n        this._prepared = 0;\n    }\n    prepare() {\n        // eslint-disable-next-line\n        if (this._prepared & 1)\n            return;\n        // eslint-disable-next-line\n        this._prepared = this._prepared | 1;\n        this._prepareOptions();\n        const { _table, _getter, _keys } = this;\n        const fSize = _table.count();\n        this._values.forEach((a, i) => (a.index = i));\n        const indexes = (this._indexes = new Array(fSize));\n        for (let i = 0; i < fSize; i++) {\n            const key = _getter(i);\n            indexes[i] = _keys.get(key).index;\n        }\n    }\n    _prepareOptions() {\n        // eslint-disable-next-line\n        if (this._prepared & 2)\n            return;\n        // eslint-disable-next-line\n        this._prepared = this._prepared | 2;\n        const { _table, _getter } = this;\n        const fSize = _table.count();\n        const keys = (this._keys = new Map());\n        const values = (this._values = []);\n        for (let i = 0; i < fSize; i++) {\n            const key = _getter(i);\n            const index = keys.get(key);\n            if (typeof index === \"undefined\") {\n                keys.set(key, (values[values.length] = { key, index: 0 }));\n            }\n        }\n        if (this._sort)\n            values.sort(this._sort);\n    }\n}\n\nclass DataExport {\n    constructor(pivot) {\n        this._pivot = pivot;\n    }\n    toArray({ cleanRows, filters, ops }) {\n        const out = [];\n        const limit = this._pivot.getLimit();\n        const maxRow = limit.rows || 0;\n        this._pivot.filter(filters);\n        this._pivot.operations(ops);\n        this._pivot.resetCursor();\n        let count = 0;\n        const header = new Set();\n        const rAggr = new Map();\n        const rowData = [];\n        // eslint-disable-next-line\n        while (true) {\n            const cAggr = {};\n            const row = this._pivot.next(header, out.length, rAggr, cAggr);\n            if (!row)\n                break;\n            out.push(row);\n            rowData.push(cAggr);\n            count++;\n            if (maxRow === count)\n                break;\n        }\n        const [scaleWidth, width] = this._pivot.getWidth();\n        if (cleanRows)\n            this._cleanRows(out, scaleWidth);\n        const result = {\n            data: out,\n            columns: Array.from(header).sort((a, b) => (a > b ? 1 : -1)),\n            width: width + scaleWidth,\n            scaleWidth,\n            rowData,\n        };\n        result.columnData = this._pivot.aggregateColumns(result, rAggr);\n        result.marks = this._pivot.mark(result, rAggr);\n        return result;\n    }\n    toNested({ filters, ops }) {\n        this._pivot.filter(filters);\n        this._pivot.operations(ops);\n        this._pivot.resetCursor();\n        const rAggr = new Map();\n        const result = this._pivot.nested(rAggr);\n        result.columnData = this._pivot.aggregateColumns(result, rAggr);\n        result.marks = this._pivot.mark(result, rAggr);\n        return result;\n    }\n    toXHeader(data, config) {\n        return this._pivot.getXHeader(data, config);\n    }\n    _cleanRows(data, rowsLength) {\n        const count = data.length;\n        const prev = new Array(rowsLength);\n        for (let j = 0; j < count; j++) {\n            const row = data[j];\n            for (let i = 0; i < rowsLength; i++) {\n                if (prev[i] !== row[i]) {\n                    for (let j = i; j < rowsLength; j++)\n                        prev[j] = row[j];\n                    break;\n                }\n                row[i] = \"\";\n            }\n        }\n    }\n}\n\nfunction t(t,e){let n=\"\";const o=t.length;let r=0,i=!1,s=!1,u=0;for(;r<o;){const o=t[r];if(r++,'\"'===o)i?n+=t.substr(u,r-u):u=r-1,i=!i;else {if(i)continue;const c=\",\"===o||\"/\"===o||\"*\"===o||\"+\"===o||\"-\"===o||\"(\"===o||\")\"===o,f=\" \"===o||\"\\t\"===o||\" \\n\"===o||\"\\r\"===o;if(s){if(!c&&!f)continue;{const i=t.substr(u,r-u-1);n+=\"(\"===o?e.method(i):e.property(i),s=!1;}}if(f)continue;if(c)n+=o;else {\"0\"===o||\"1\"===o||\"2\"===o||\"3\"===o||\"4\"===o||\"5\"===o||\"6\"===o||\"7\"===o||\"8\"===o||\"9\"===o?n+=o:(s=!0,u=r-1);}}}return s&&(n+=e.property(t.substr(u,r-u))),n}function e(e,n){return new Function(n.propertyName,n.methodName,n.contextName,\"return \"+t(e,n))}\n\nfunction optimize(table, order, code, allMath) {\n    const math = getMath(table, code);\n    const ctx = {\n        table,\n        order,\n        from: 0,\n        to: 0,\n        array: (i, c) => {\n            const size = c.to - c.from;\n            const temp = new Array(size);\n            const getter = cache[i];\n            for (let j = 0; j < size; j++) {\n                temp[j] = getter(c.order[j + c.from]);\n            }\n            return temp;\n        },\n    };\n    return function (from, to) {\n        ctx.from = from;\n        ctx.to = to;\n        return math(0, allMath, ctx);\n    };\n}\nfunction optimizeRangeGroup(table, order, code, allMath) {\n    const math = getMath(table, code);\n    const ctx = {\n        table,\n        order,\n        range: [],\n        array: (i, c) => {\n            const size = ctx.range.length;\n            const temp = [];\n            const getter = cache[i];\n            for (let j = 0; j < size; j += 2) {\n                const from = ctx.range[j];\n                const to = ctx.range[j + 1];\n                for (let i = from; i < to; i++) {\n                    temp.push(getter(c.order[i]));\n                }\n            }\n            return temp;\n        },\n    };\n    return function (range) {\n        ctx.range = range;\n        return math(0, allMath, ctx);\n    };\n}\nfunction optimizeGroup(code, allMath) {\n    const math = getGroupMath(code);\n    return function (v) {\n        return math(v, allMath, null);\n    };\n}\nlet id = 0;\nconst cache = [];\nfunction getMath(table, rule) {\n    return e(rule, {\n        propertyName: \"d\",\n        methodName: \"m\",\n        contextName: \"c\",\n        property: (a) => {\n            const i = id;\n            cache[i] = table.getColumn(a).getter;\n            id += 1;\n            return `c.array(\"${i}\", c)`;\n        },\n        method: (a) => {\n            return `m.${a.toLowerCase()}`;\n        },\n    });\n}\nfunction getGroupMath(rule) {\n    return e(rule, {\n        propertyName: \"d\",\n        methodName: \"m\",\n        contextName: \"c\",\n        property: () => {\n            return `d`;\n        },\n        method: (a) => {\n            return `m.${a.toLowerCase()}`;\n        },\n    });\n}\n\nconst and = (a, b) => c => a(c) && b(c);\nfunction buildFinder(data, key, value, context) {\n    const getValue = context.getter(data, key);\n    if (typeof value !== \"object\") {\n        const check = context.compare[\"eq\"](value);\n        return i => check(getValue(i));\n    }\n    else {\n        const ops = Object.keys(value);\n        let result = null;\n        for (let i = 0; i < ops.length; i++) {\n            const check = context.compare[ops[i].toLowerCase()](value[ops[i]]);\n            const step = i => check(getValue(i));\n            result = result ? and(result, step) : step;\n        }\n        return result;\n    }\n}\nfunction build(table, rule, context) {\n    const keys = Object.keys(rule);\n    let result = null;\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        const step = buildFinder(table, key, rule[key], context);\n        result = result ? and(result, step) : step;\n    }\n    return result;\n}\nfunction filter(order, table, rule, context) {\n    const filter = build(table, rule, context);\n    return order.filter(n => filter(n));\n}\n\nclass DataPivot {\n    constructor(table, rows, cols, filters, config) {\n        this._rows = rows;\n        this._cols = cols;\n        this._dims = rows.concat(cols);\n        this._table = table;\n        this._context = config;\n        this._cursor = -1;\n        this._order = this._base_order = this._sort();\n        this._data = this._dims.map(a => a.getIndexes());\n        this.filter(filters, true);\n    }\n    resetCursor() {\n        this._cursor = 0;\n        this._group = this._dims.map(() => null);\n        if (this._order.length) {\n            if (this._rows.length)\n                this._nextRow();\n            if (this._cols.length)\n                this._nextColumn();\n        }\n    }\n    next(header, index, rAggr, cAggr) {\n        const { _cursor, _cols, _order, _group, _ops, _rows } = this;\n        if (this._cursor >= _order.length)\n            return null;\n        const dimsSize = _rows.length;\n        const out = new Array(dimsSize + _ops.length * _cols.length);\n        // dimensions\n        for (let i = 0; i < dimsSize; i++)\n            out[i] = _rows[i].getValue(_group[i]);\n        // get end of next line ( all dataset for columns mode )\n        const to = this._rows.length\n            ? this._nextRow(_cols.length > 0)\n            : _order.length;\n        this._fillRow(out, index, _cursor, to, dimsSize, header, rAggr, cAggr);\n        this._cursor = to;\n        return out;\n    }\n    nested(rAggr) {\n        const { _cols, _order, _rows } = this;\n        const header = new Set();\n        const dimSize = _rows.length;\n        const dimOutSize = dimSize > 0 ? 1 : 0;\n        const levels = [{ data: [], values: [] }];\n        const data = [];\n        let prev = [];\n        let now = [];\n        let from = this._cursor;\n        let count = 0;\n        const { _groupOps } = this;\n        const _groupLength = [{}].concat(_rows.map(() => ({})));\n        const rowData = [];\n        const limit = this._context.limit.rows;\n        const width = Math.min(this._context.limit.columns, (_cols.length ? this._sizes[0] * _cols[0].getSize() : 0) + dimOutSize);\n        const closeLevels = function (j) {\n            // ignore not created, during first iteration\n            if (!levels[j])\n                return;\n            // each sub-level\n            for (; j < dimSize; j++) {\n                // get all known columns\n                for (const [kAgr, vAgr] of rAggr) {\n                    // get start of related rows\n                    const prev = _groupLength[j][kAgr] || 0;\n                    // if have new rows\n                    if (prev === 0 || vAgr.length > prev) {\n                        // check and calcualte op\n                        for (let z = 0; z < _groupOps.length; z++) {\n                            const math = _groupOps[z];\n                            if (math) {\n                                levels[j].values[dimOutSize + kAgr + z] = math(vAgr.slice(prev + 1));\n                                _groupLength[j][kAgr] = vAgr.length - 1;\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        while (this._cursor < _order.length) {\n            const out = new Array(width);\n            prev = now;\n            now = [].concat(this._group);\n            // get end of next line ( all dataset for columns mode )\n            const to = this._rows.length\n                ? this._nextRow(_cols.length > 0)\n                : _order.length;\n            // calculate finished branches\n            if (_groupOps !== null) {\n                for (let level = 0; level < dimSize; level++) {\n                    // find level at which route differs\n                    if (now[level] != prev[level]) {\n                        closeLevels(level + 1);\n                        break;\n                    }\n                }\n            }\n            const cAggr = {};\n            this._fillRow(out, data.length, from, to, dimOutSize, header, rAggr, cAggr);\n            rowData.push(cAggr);\n            // if we have row-dimensions\n            if (dimSize > 0) {\n                for (let level = 0; level < dimSize; level++) {\n                    // find level at which route differs\n                    if (now[level] != prev[level]) {\n                        // starting from that level and below\n                        for (let j = level; j < dimSize; j++) {\n                            const index = j + 1;\n                            const last = index === dimSize;\n                            // create new nodes\n                            const obj = (levels[index] = {\n                                id: last ? data.length + 1 : 0,\n                                data: last ? null : [],\n                                values: last ? out : [_rows[j].getValue(now[j])],\n                            });\n                            // store node in the parents branch\n                            levels[j].data.push(obj);\n                        }\n                        break;\n                    }\n                }\n                // store scale value in the first cell of the new row\n                out[0] = _rows[dimSize - 1].getValue(now[dimSize - 1]);\n                // store value line of the pivot ( leaf of the tree )\n                levels[dimSize].values = out;\n            }\n            else {\n                // if we have not row-dimensions, store plain data only\n                levels[0].data.push({ data: null, values: out });\n            }\n            data.push(out);\n            count++;\n            if (count >= limit)\n                break;\n            this._cursor = from = to;\n        }\n        if (_groupOps !== null) {\n            closeLevels(1);\n        }\n        const columns = Array.from(header).sort((a, b) => (a > b ? 1 : -1));\n        const result = {\n            tree: levels[0].data,\n            data,\n            width,\n            scaleWidth: dimOutSize,\n            columns,\n            rowData,\n        };\n        this._fillGroupRow(levels[0], result, rAggr, _rows.length - 1);\n        return result;\n    }\n    getLimit() {\n        return this._context.limit;\n    }\n    getWidth() {\n        return [\n            this._rows.length,\n            this._cols.length && this._ops.length\n                ? this._cols[0].getSize() * this._sizes[0]\n                : 0,\n            this._ops.length,\n        ];\n    }\n    getXHeader(result, hConfig) {\n        const { _cols, _rows, _ops, _opInfo } = this;\n        const { nonEmpty, meta } = hConfig || {};\n        const isNested = result.tree;\n        // compressed line\n        const line = [];\n        // rows prefix\n        const rpref = result.tree ? Math.min(_rows.length, 1) : _rows.length;\n        // count of operations, repeat step of bottom scale\n        const ostep = _ops.length;\n        // how many scale units in one parent\n        const unitsInParent = _cols.map(a => a.getSize());\n        // calculate full width of data\n        const length = unitsInParent.reduce((prev, value) => prev * value, ostep);\n        const columns = result.columns;\n        const fullLength = rpref +\n            Math.min(nonEmpty ? columns.length * ostep : length, this._context.limit.columns);\n        // how many data points per unit\n        let temp = length;\n        const unitSizes = unitsInParent.map(a => (temp = temp / a));\n        // result header\n        const out = [];\n        this._cols.forEach(() => out.push(new Array(fullLength)));\n        // build compressed order\n        if (nonEmpty) {\n            //check all cells, include columns of cells with data\n            for (let i = 0; i < rpref; i++)\n                line.push(i);\n            for (let j = 0; j < columns.length; j++) {\n                const base = rpref + columns[j];\n                for (let i = 0; i < ostep; i++)\n                    line.push(base + i);\n            }\n            // now check each scale line\n            for (let j = 0; j < _cols.length; j++) {\n                const step = unitSizes[j];\n                let start = -1;\n                let end = 0;\n                let colspan = 0;\n                let text;\n                // against each non-empty column\n                for (let i = rpref; i < line.length; i += ostep) {\n                    const test = line[i];\n                    // if we inside of span\n                    if (test < end) {\n                        colspan += ostep;\n                    }\n                    else {\n                        // we have reached the new span\n                        // setting old one if any\n                        if (colspan !== 0) {\n                            out[j][start] = { colspan, text };\n                        }\n                        // store position of new span\n                        const ind = Math.floor((test - rpref) / step);\n                        start = i;\n                        end = (ind + 1) * step + rpref;\n                        colspan = ostep;\n                        // store related text\n                        text = _cols[j].getValue(ind % unitsInParent[j]);\n                    }\n                }\n                // setting last span\n                if (colspan !== 0)\n                    out[j][start] = { colspan, text };\n            }\n        }\n        else {\n            // for each scale\n            for (let i = 0; i < _cols.length; i++) {\n                const size = unitsInParent[i];\n                const step = unitSizes[i];\n                let ind = 0;\n                // set value at n-th cell\n                for (let j = rpref; j < fullLength; j += step) {\n                    if (step === 1) {\n                        out[i][j] = _cols[i].getValue(ind++);\n                    }\n                    else {\n                        out[i][j] = { text: _cols[i].getValue(ind++), colspan: step };\n                    }\n                    // repeat dimension values\n                    if (ind >= size)\n                        ind = 0;\n                }\n            }\n        }\n        // add bottom line, with operations\n        if (this._ops) {\n            const opNames = new Array(fullLength);\n            const step = _ops.length;\n            for (let j = rpref; j < fullLength; j += step)\n                for (let z = 0; z < step; z++)\n                    opNames[j + z] = _opInfo[z].label;\n            out.push(opNames);\n        }\n        // prepend row labels\n        for (let i = 0; i < rpref; i++) {\n            const rowspan = _cols.length + (this._ops ? 1 : 0);\n            if (isNested) {\n                out[0][0] = { text: \"\", rowspan };\n                break;\n            }\n            const text = _rows[i].getLabel();\n            out[0][i] = rowspan > 1 ? { text, rowspan } : text;\n        }\n        const res = { data: out };\n        // add compression line to output\n        if (nonEmpty)\n            res.nonEmpty = line;\n        if (meta) {\n            const metaLine = new Array(fullLength);\n            for (let i = 0; i < rpref; i++)\n                metaLine[i] = _rows[i].getMeta();\n            const step = _ops.length;\n            for (let j = rpref; j < fullLength; j += step)\n                for (let z = 0; z < step; z++)\n                    metaLine[j + z] = _opInfo[z].meta;\n            res.meta = metaLine;\n        }\n        return res;\n    }\n    filter(rules, master) {\n        if (!rules || Object.keys(rules).length === 0) {\n            if (!master && this._masterRules)\n                rules = Object.assign(Object.assign({}, this._masterRules), rules);\n            else {\n                this._order = this._base_order;\n                return;\n            }\n        }\n        if (master)\n            this._masterRules = rules;\n        this._order = filter(this._base_order, this._table, rules, this._context);\n    }\n    operations(ops) {\n        const { _table, _order, _context } = this;\n        ops = ops || [];\n        this._ops = ops.map(p => optimize(_table, _order, typeof p === \"string\" ? p : p.math, _context.math));\n        this._groupResultOps = ops.map(p => p.branchMode === \"result\"\n            ? optimizeGroup(typeof p === \"string\" ? p : p.branchMath || p.math, _context.math)\n            : null);\n        if (!this._groupResultOps.find(a => a !== null))\n            this._groupResultOps = null;\n        this._groupOps = ops.map(p => p.branchMode === \"raw\"\n            ? optimizeRangeGroup(_table, _order, typeof p === \"string\" ? p : p.branchMath || p.math, _context.math)\n            : null);\n        if (!this._groupOps.find(a => a !== null))\n            this._groupOps = null;\n        this._opInfo = ops.map(p => {\n            if (typeof p === \"string\") {\n                return { label: p, math: p };\n            }\n            else {\n                return Object.assign(Object.assign({}, p), { label: p.label || p.math });\n            }\n        });\n        this._rowResultOps = compactOps(ops, \"row\", \"result\", (x, name) => ({\n            name,\n            op: optimizeGroup(x, _context.math),\n        }));\n        this._rowOps = compactOps(ops, \"row\", \"raw\", (x, name) => ({\n            name,\n            op: optimize(_table, _order, x, _context.math),\n        }));\n        this._colResultOps = compactOps(ops, \"column\", \"result\", (x, name) => ({\n            name,\n            op: optimizeGroup(x, _context.math),\n        }));\n        this._colOps = compactOps(ops, \"column\", \"raw\", (x, name) => ({\n            name,\n            op: optimizeRangeGroup(_table, _order, x, _context.math),\n        }));\n        this._marks = ops.map(a => a.marks || null);\n        if (!this._marks.find(a => a !== null))\n            this._marks = null;\n        this._setSizes();\n    }\n    aggregateColumns(result, rAggr) {\n        const { _colOps, _colResultOps } = this;\n        const { columns, data, scaleWidth } = result;\n        if (!_colOps && !_colResultOps)\n            return [];\n        const step = this._ops.length;\n        const out = [];\n        for (let i = 0; i < columns.length; i++) {\n            const ind = columns[i];\n            const dmr = rAggr.get(ind);\n            if (!dmr)\n                continue;\n            const keys = Array.from(dmr[0].keys());\n            for (let j = 0; j < step; j++) {\n                const column = {};\n                if (_colResultOps) {\n                    const op = _colResultOps[j];\n                    if (op) {\n                        const values = keys.map(a => data[a][ind + j + scaleWidth]);\n                        op.forEach(x => (column[x.name] = x.op(values)));\n                    }\n                }\n                if (_colOps) {\n                    const op = _colOps[j];\n                    if (op) {\n                        op.forEach(x => (column[x.name] = x.op(dmr.slice(1))));\n                    }\n                }\n                out[scaleWidth + ind + j] = column;\n            }\n        }\n        return out;\n    }\n    _optimizeGroup(ops) {\n        const config = {};\n        let exit = true;\n        for (const key in ops) {\n            const test = ops[key];\n            config[key] = optimizeGroup(test, this._context.math);\n            exit = false;\n        }\n        return exit ? null : config;\n    }\n    mark(result, rAggr) {\n        const out = [];\n        const { _marks, _ops } = this;\n        if (!_marks)\n            return out;\n        const opsLength = _ops.length;\n        const { scaleWidth, data, columnData, rowData } = result;\n        for (const [k, v] of rAggr) {\n            const r = v[0];\n            for (let i = 0; i < opsLength; i++) {\n                const marks = this._marks[i];\n                if (marks === null)\n                    continue;\n                for (const z of r) {\n                    const cid = k + i + scaleWidth;\n                    const rid = z;\n                    const cell = [];\n                    for (let j = 0; j < marks.length; j++) {\n                        if (marks[j].check(data[rid][cid], columnData[cid] || {}, rowData[rid] || {}))\n                            cell.push(marks[j].name);\n                    }\n                    if (cell.length) {\n                        let rarr = out[rid];\n                        if (typeof rarr === \"undefined\")\n                            rarr = out[rid] = [];\n                        rarr[cid] = cell;\n                    }\n                }\n            }\n        }\n        return out;\n    }\n    __getHeaderStub() {\n        return {};\n    }\n    _fillGroupRow(obj, result, rAggr, level) {\n        const { _groupResultOps } = this;\n        const { columns, scaleWidth } = result;\n        if (_groupResultOps) {\n            for (let i = 0; i < columns.length; i++) {\n                const ind = columns[i];\n                for (let j = 0; j < _groupResultOps.length; j++) {\n                    const op = _groupResultOps[j];\n                    if (!op)\n                        continue;\n                    if (level > 0)\n                        this._fillGroupRowInner(obj, op, ind + j + scaleWidth, level);\n                }\n            }\n        }\n    }\n    _fillGroupRowInner(obj, op, ind, level) {\n        const arr = [];\n        if (level > 0) {\n            obj.data.forEach(a => {\n                const res = this._fillGroupRowInner(a, op, ind, level - 1);\n                if (res !== null) {\n                    arr.push(res);\n                }\n            });\n        }\n        else {\n            for (let i = 0; i < obj.data.length; i++) {\n                const test = obj.data[i].values[ind];\n                if (typeof test !== \"undefined\")\n                    arr.push(test);\n            }\n        }\n        if (arr.length)\n            return (obj.values[ind] = op(arr));\n        return null;\n    }\n    _fillRow(out, index, from, to, dimsSize, header, rAggr, cAggr) {\n        const { _cols, _group, _ops, _sizes, _rows, _rowResultOps, _rowOps } = this;\n        const rl = _rows.length;\n        const collectRaggr = this._colResultOps !== null ||\n            this._colOps !== null ||\n            this._marks !== null;\n        let ctemp = [];\n        if (_rowResultOps !== null)\n            ctemp = _rowResultOps.map(() => []);\n        // calculations\n        if (_ops.length) {\n            if (_cols.length) {\n                let cfrom = from;\n                while (cfrom < to) {\n                    let cind = 0;\n                    for (let i = 0; i < _cols.length; i++)\n                        cind += _sizes[i] * _group[rl + i];\n                    const cto = this._nextColumn();\n                    for (let i = 0; i < _ops.length; i++) {\n                        const temp = (out[cind + dimsSize + i] = _ops[i](cfrom, cto));\n                        if (_rowResultOps !== null)\n                            ctemp[i].push(temp);\n                    }\n                    if (collectRaggr) {\n                        let arr = rAggr.get(cind);\n                        if (!arr)\n                            rAggr.set(cind, (arr = [new Set(), cfrom, cto]));\n                        else\n                            arr.push(cfrom, cto);\n                        arr[0].add(index);\n                    }\n                    header.add(cind);\n                    this._cursor = cfrom = cto;\n                }\n            }\n            else {\n                for (let i = 0; i < _ops.length; i++) {\n                    out[i + dimsSize] = _ops[i](from, to);\n                }\n                if (collectRaggr) {\n                    let arr = rAggr.get(0);\n                    if (!arr)\n                        rAggr.set(0, (arr = [new Set(), from, to]));\n                    else\n                        arr.push(from, to);\n                    arr[0].add(index);\n                }\n                header.add(0);\n            }\n        }\n        if (_rowResultOps !== null) {\n            _rowResultOps.forEach((opset, i) => {\n                const dataset = ctemp[i];\n                if (opset && dataset.length)\n                    opset.forEach(op => {\n                        cAggr[op.name] = op.op(ctemp[i]);\n                    });\n            });\n        }\n        if (_rowOps !== null) {\n            _rowOps.forEach(opset => {\n                opset === null || opset === void 0 ? void 0 : opset.forEach(op => {\n                    cAggr[op.name] = op.op(from, to);\n                });\n            });\n        }\n    }\n    _sort() {\n        const { _table, _dims } = this;\n        const size = Math.min(_table.count(), this._context.limit.raws);\n        const order = new Array(size);\n        for (let i = 0; i < size; i++) {\n            order[i] = i;\n        }\n        const dimsSize = _dims.length;\n        const dimsData = _dims.map(a => a.getIndexes());\n        order.sort((a, b) => {\n            for (let j = 0; j < dimsSize; j++) {\n                const left = dimsData[j][a];\n                const right = dimsData[j][b];\n                if (left > right)\n                    return 1;\n                if (left < right)\n                    return -1;\n            }\n            return 0;\n        });\n        return order;\n    }\n    _nextRow(silent) {\n        const { _data, _order, _group, _rows } = this;\n        const dimsSize = _rows.length;\n        let ok = true;\n        let to = this._cursor;\n        // eslint-disable-next-line\n        while (true) {\n            const ind = _order[to];\n            for (let i = 0; i < dimsSize; i++) {\n                if (_data[i][ind] != _group[i]) {\n                    if (!silent)\n                        _group[i] = _data[i][ind];\n                    ok = false;\n                }\n            }\n            if (!ok)\n                break;\n            to++;\n        }\n        return to;\n    }\n    _nextColumn() {\n        const { _data, _order, _group, _rows, _cols } = this;\n        const dimsSize = _cols.length + _rows.length;\n        let ok = true;\n        let to = this._cursor;\n        // eslint-disable-next-line\n        while (true) {\n            const ind = _order[to];\n            for (let i = 0; i < dimsSize; i++) {\n                if (_data[i][ind] != _group[i]) {\n                    _group[i] = _data[i][ind];\n                    ok = false;\n                }\n            }\n            if (!ok)\n                break;\n            to++;\n        }\n        return to;\n    }\n    _setSizes() {\n        const sizes = this._cols.map(a => a.getSize());\n        let sum = this._ops.length || 1;\n        for (let i = sizes.length - 1; i >= 0; i--) {\n            const now = sum;\n            sum *= sizes[i];\n            sizes[i] = now;\n        }\n        this._sizes = sizes;\n    }\n}\nfunction compactOps(ops, kind, mode, optimizer) {\n    const result = ops.map(p => {\n        const row = p[kind];\n        if (!row)\n            return null;\n        const out = row\n            .map(op => {\n            const source = op.source || \"raw\";\n            if (source === mode)\n                if (typeof op === \"string\")\n                    return optimizer(op, getName(op));\n                else\n                    return optimizer(op.math, op.as || getName(op.math));\n            return null;\n        })\n            .filter(a => a !== null);\n        if (!out.length)\n            return null;\n        return out;\n    });\n    if (!result.find(a => !!a))\n        return null;\n    return result;\n}\nfunction getName(x) {\n    const end = x.indexOf(\"(\");\n    if (end === -1)\n        return x.trim();\n    return x.substring(0, end).trim();\n}\n\nclass RawTable {\n    constructor(config) {\n        this._columns = config.fields;\n        this.parse(config.data);\n    }\n    parse(data) {\n        this._raw = data;\n        this._parse_inner();\n    }\n    prepare() {\n        if (this._prepared)\n            return;\n        this._prepared = true;\n        const data = this._raw;\n        const fields = this._columns;\n        const cols = fields.filter(a => a.type === 3);\n        if (!data || !cols.length)\n            return;\n        const dataLength = data.length;\n        const columnsLength = cols.length;\n        for (let i = 0; i < dataLength; i++) {\n            for (let j = 0; j < columnsLength; j++) {\n                const col = cols[j];\n                const text = col.getter(i);\n                if (typeof text === \"string\")\n                    col.setter(i, new Date(text));\n            }\n        }\n    }\n    _parse_inner() {\n        this._columns.forEach(a => {\n            const key = a.id;\n            a.getter = i => this._raw[i][key];\n            a.setter = (i, v) => (this._raw[i][key] = v);\n        });\n    }\n    getColumn(id) {\n        return this._columns.find(a => a.id === id);\n    }\n    count() {\n        return this._raw.length;\n    }\n}\n\nclass ColumnTable extends RawTable {\n    parse(data) {\n        this._parse_init(data.length);\n        const dataLength = data.length;\n        const columnsLength = this._columns.length;\n        for (let i = 0; i < dataLength; i++) {\n            const obj = data[i];\n            for (let j = 0; j < columnsLength; j++) {\n                const col = this._columns[j];\n                col.data[i] = obj[col.id];\n            }\n        }\n    }\n    _parse_init(n) {\n        this._columns.forEach(a => {\n            const data = (a.data = new Array(n));\n            a.getter = i => data[i];\n            a.setter = (i, v) => (data[i] = v);\n        });\n    }\n    count() {\n        return this._columns[0].data.length;\n    }\n}\n\nconst methods = {\n    round: (v) => Math.round(v),\n    sum: (arr) => arr.reduce((acc, a) => acc + a, 0),\n    min: (arr) => arr.reduce((acc, a) => (a < acc ? a : acc), arr.length ? arr[0] : 0),\n    max: (arr) => arr.reduce((acc, a) => (a > acc ? a : acc), arr.length ? arr[0] : 0),\n    avg: (arr) => arr.length ? arr.reduce((acc, a) => acc + a, 0) / arr.length : 0,\n    wavg: (arr, w) => {\n        if (!arr.length)\n            return 0;\n        let count = 0;\n        let summ = 0;\n        for (let i = arr.length - 1; i >= 0; i--) {\n            count += w[i];\n            summ += arr[i] * w[i];\n        }\n        return summ / count;\n    },\n    count: (arr) => arr.length,\n    any: (arr) => (arr.length ? arr[0] : null),\n};\nconst filters = {\n    eq: (v) => (x) => x == v,\n    neq: (v) => (x) => x != v,\n    gt: (v) => (x) => x > v,\n    gte: (v) => (x) => x >= v,\n    lt: (v) => (x) => x < v,\n    lte: (v) => (x) => x <= v,\n    in: (v) => (x) => v[x],\n    hasPrefix: (v) => (x) => x.indexOf(v) === 0,\n    contains: (v) => (x) => x.indexOf(v) !== -1,\n};\nconst predicates = {\n    year: (v) => v.getFullYear(),\n    month: (v) => v.getMonth(),\n    day: (v) => v.getDate(),\n    hour: (v) => v.getHours(),\n    minute: (v) => v.getMinutes(),\n};\n\nclass Analytic {\n    constructor(cfg) {\n        this._tables = {};\n        this._dimensions = {};\n        this._preds = Object.assign({}, predicates);\n        this._maths = Object.assign({}, methods);\n        this._comps = Object.assign({}, filters);\n        if (cfg && cfg.tables)\n            cfg.tables.forEach(s => this.addTable(s));\n        if (cfg && cfg.dimensions)\n            cfg.dimensions.forEach(s => this.addDimension(s));\n    }\n    addPredicate(name, code) {\n        this._preds[name.toLowerCase()] = code;\n    }\n    addMath(name, code) {\n        this._maths[name.toLowerCase()] = code;\n    }\n    addComparator(name, code) {\n        this._comps[name.toLowerCase()] = code;\n    }\n    getDimension(id) {\n        return this._dimensions[id];\n    }\n    addDimension(s) {\n        if (this._dimensions[s.id])\n            return;\n        const table = this._tables[s.table];\n        const getter = this._predicateGetter(table, s.rule.by);\n        this._dimensions[s.id] = new DataDimension(table, getter, s.label || s.id, s.meta || s, s.sort);\n    }\n    resetDimensions(s, preserve) {\n        const prev = this._dimensions;\n        this._dimensions = {};\n        if (s)\n            s.forEach(a => {\n                const used = prev[a.id];\n                if (preserve && used)\n                    this._dimensions[a.id] = used;\n                else\n                    this.addDimension(a);\n            });\n    }\n    addTable(s) {\n        const driver = (s.driver || \"raw\") === \"raw\" ? RawTable : ColumnTable;\n        const t = (this._tables[s.id] = new driver(s));\n        if (s.prepare)\n            t.prepare();\n    }\n    getTable(id) {\n        return this._tables[id];\n    }\n    compact(table, config) {\n        const { rows, cols, filters, limit } = config;\n        const base = this._tables[table];\n        const rDims = rows ? rows.map(a => this._dimensions[a]) : [];\n        const cDims = cols ? cols.map(a => this._dimensions[a]) : [];\n        [...rDims, ...cDims].forEach(a => a.prepare());\n        const pivot = new DataPivot(base, rDims, cDims, filters, {\n            getter: this._predicateGetter.bind(this),\n            math: this._maths,\n            compare: this._comps,\n            limit: Object.assign({ rows: 10000, columns: 5000, raws: Infinity }, (limit || {})),\n        });\n        return new DataExport(pivot);\n    }\n    _predicateGetter(table, key) {\n        const find = key.indexOf(\"(\");\n        if (find !== -1) {\n            const fn = this._preds[key.substr(0, find).toLowerCase()];\n            key = key.substr(find + 1, key.length - find - 2);\n            const getter = table.getColumn(key).getter;\n            return i => fn(getter(i));\n        }\n        else {\n            return table.getColumn(key).getter;\n        }\n    }\n}\n\nexport { Analytic };\n//# sourceMappingURL=rengine.es6.js.map\n","import * as rengine from \"@xbs/rengine\";\n\nexport default class LocalData {\n\t/**\n\t * @constructor\n\t * @param {App} app - Jet App instance\n\t */\n\tconstructor(app) {\n\t\tthis._app = app;\n\t\tthis._store = {}; //aggregated data\n\n\t\tthis._filtersHash = {};\n\t\tthis._state = app.getState();\n\n\t\tif (app.config.externalProcessing) this._setOperations();\n\t\telse {\n\t\t\tthis._data = [];\n\t\t\tthis._initRengine();\n\t\t}\n\t}\n\t/** Set list of avaible operations; adds custom operations from config */\n\t_setOperations() {\n\t\tthis.operations = [\n\t\t\t{ id: \"sum\", fields: 1, branchMode: \"result\" },\n\t\t\t{ id: \"min\", fields: 1, branchMode: \"result\" },\n\t\t\t{ id: \"max\", fields: 1, branchMode: \"result\" },\n\t\t\t{ id: \"avg\", fields: 1, branchMode: \"raw\" },\n\t\t\t{ id: \"wavg\", fields: 2, branchMode: \"raw\" },\n\t\t\t{ id: \"count\", fields: 1, branchMode: \"raw\" },\n\t\t\t{ id: \"any\", fields: 1, branchMode: \"result\" },\n\t\t\t{ id: \"complex\" },\n\t\t];\n\n\t\tconst config = this._app.config;\n\t\tconst extraOperations = this._app.config.operations;\n\t\tif (extraOperations) {\n\t\t\tif (config.externalProcessing)\n\t\t\t\tthis.operations = this.operations.concat(extraOperations);\n\t\t\telse\n\t\t\t\tfor (let name in extraOperations) {\n\t\t\t\t\tlet operation = extraOperations[name];\n\t\t\t\t\tlet fields, branchMode, hidden;\n\n\t\t\t\t\tif (typeof operation == \"object\") {\n\t\t\t\t\t\tfields = operation.fields || operation.handler.length;\n\t\t\t\t\t\tbranchMode = operation.branchMode;\n\t\t\t\t\t\thidden = operation.hidden;\n\t\t\t\t\t\toperation = operation.handler;\n\t\t\t\t\t} else fields = operation.length;\n\n\t\t\t\t\tthis._reng.addMath(name, operation);\n\n\t\t\t\t\tif (!hidden)\n\t\t\t\t\t\tthis.operations.push({\n\t\t\t\t\t\t\tid: name,\n\t\t\t\t\t\t\tfields,\n\t\t\t\t\t\t\tbranchMode,\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t}\n\t}\n\t/** Set list of avaible total operations */\n\t_setTotalOperations() {\n\t\tthis.totalOperations = {};\n\t\tconst totalOps = this._app.config.totalOperations;\n\n\t\tif (totalOps)\n\t\t\tfor (let name in totalOps) {\n\t\t\t\tconst op = totalOps[name];\n\t\t\t\tconst all = typeof totalOps[name] == \"string\";\n\t\t\t\t[\"footer\", \"group\", \"column\"].forEach(type => {\n\t\t\t\t\tif (all || op[type]) {\n\t\t\t\t\t\tif (!this.totalOperations[type]) this.totalOperations[type] = {};\n\t\t\t\t\t\tthis.totalOperations[type][name] = all ? op : op[type];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t}\n\t/** Sets default filter rules */\n\t_setFilters() {\n\t\tfor (let type in webix.filters) {\n\t\t\tthis._reng.addComparator(type, v => test => {\n\t\t\t\tif (type == \"date\") test = test.valueOf();\n\n\t\t\t\tif (!v) return true;\n\t\t\t\telse if (v.includes) return v.includes.indexOf(test) != -1;\n\t\t\t\telse if (!v.condition.filter) return true;\n\t\t\t\telse\n\t\t\t\t\treturn webix.filters[type][v.condition.type](\n\t\t\t\t\t\ttest,\n\t\t\t\t\t\tv.condition.filter\n\t\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n\t/** Adds predicates from config */\n\t_setPredicates() {\n\t\tconst predicates = this._app.config.predicates;\n\t\tif (predicates)\n\t\t\tfor (let name in predicates)\n\t\t\t\tthis._reng.addPredicate(name, predicates[name]);\n\t}\n\t/**\n\t * Returns fields that contain data\n\t * @param {object} firstRow - first row in data\n\t * @returns {array} data fields\n\t */\n\tgetFields(firstRow) {\n\t\tlet fields = this._app.config.fields;\n\n\t\tif (!fields) {\n\t\t\tfields = [];\n\n\t\t\tfor (let i in firstRow) {\n\t\t\t\tlet type;\n\n\t\t\t\tconst dataType = typeof firstRow[i];\n\t\t\t\tswitch (dataType) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\ttype = \"text\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"number\":\n\t\t\t\t\t\ttype = dataType;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\ttype = \"date\";\n\t\t\t\t}\n\n\t\t\t\tfields.push({ id: i, value: i, type });\n\t\t\t}\n\t\t}\n\n\t\treturn fields;\n\t}\n\t/**\n\t * Loads data and populates store\n\t * @param {boolean} force - if true, data will be reloaded\n\t * @returns {Promise} promise that resolves with store array\n\t */\n\tgetData(force) {\n\t\tif (!force && this.useOldData())\n\t\t\treturn this._dataLoad || webix.promise.resolve(this._store);\n\n\t\tconst externalProcessing = this._app.config.externalProcessing;\n\t\tif (externalProcessing || !Object.keys(this._store).length || force) {\n\t\t\treturn (this._dataLoad = this._app\n\t\t\t\t.getService(\"backend\")\n\t\t\t\t.data()\n\t\t\t\t.then(data => {\n\t\t\t\t\tif (externalProcessing)\n\t\t\t\t\t\tthis._store = this._rengineToWebix(data.result, data.header);\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._table = this.getTable(data);\n\t\t\t\t\t\tthis._reng.addTable(this._table);\n\t\t\t\t\t\tthis._store = this.getPivotData();\n\t\t\t\t\t}\n\t\t\t\t\tthis._filtersHash = {};\n\t\t\t\t\treturn this._store;\n\t\t\t\t})\n\t\t\t\t.catch(error => this.loadError(error))\n\t\t\t\t.finally(() => delete this._dataLoad));\n\t\t} else {\n\t\t\tthis._store = this.getPivotData();\n\t\t\treturn webix.promise.resolve(this._store);\n\t\t}\n\t}\n\t/** Checks if pivot should use last aggregated data **/\n\tuseOldData() {\n\t\tconst state = this._state;\n\t\tlet newConfig = `${state.mode}|${JSON.stringify(state.structure)}`;\n\t\tif (state.mode == \"chart\") {\n\t\t\tconst type = state.chart.type;\n\t\t\tnewConfig += `|${type == \"pie\" || type == \"donut\"}`;\n\t\t} else newConfig += `|${JSON.stringify(state.datatable)}`;\n\n\t\tconst refresh = this._old == newConfig;\n\t\tthis._old = newConfig;\n\t\treturn refresh;\n\t}\n\t/** Inits math module */\n\t_initRengine() {\n\t\tthis._reng = new rengine.Analytic();\n\n\t\tthis._setFilters();\n\t\tthis._setOperations();\n\t\tthis._setTotalOperations();\n\t\tthis._setPredicates();\n\t}\n\t/**\n\t * onverts data to pivot readable form\n\t * @returns {Object} object with aggregated data and its parameters\n\t */\n\tgetPivotData() {\n\t\tif (!this._table)\n\t\t\treturn {\n\t\t\t\tdata: [],\n\t\t\t\theader: [],\n\t\t\t\ttotal: [],\n\t\t\t\tmarks: [],\n\t\t\t};\n\n\t\tconst structure = this._state.structure;\n\t\tconst mode = this._state.mode;\n\t\tconst table = this._state.datatable;\n\n\t\tthis.setDimensions();\n\n\t\tconst filters = {};\n\t\tfor (let i = 0; i < structure.filters.length; i++) {\n\t\t\tconst filter = structure.filters[i];\n\n\t\t\tconst fields = this._state.fields;\n\t\t\tconst field = fields.find(field => field.id == filter.name);\n\n\t\t\tfilters[filter.name] = { [field.type]: filter.value };\n\t\t}\n\n\t\t//groups data\n\t\tconst res = this._reng.compact(this._table.id, {\n\t\t\trows: this.getRows(),\n\t\t\tcols: this.getColumns(),\n\t\t\tlimit: this.getLimits(),\n\t\t});\n\n\t\tconst ops = this.getOps();\n\n\t\ttry {\n\t\t\tlet result;\n\n\t\t\t//plain data\n\t\t\tif (mode == \"table\")\n\t\t\t\tresult = res.toArray({\n\t\t\t\t\tfilters,\n\t\t\t\t\tops,\n\t\t\t\t\t//remove repetitions in 'parent' col in 'table' mode\n\t\t\t\t\tcleanRows: table.cleanRows,\n\t\t\t\t});\n\t\t\t//groupped data\n\t\t\telse\n\t\t\t\tresult = res.toNested({\n\t\t\t\t\tfilters,\n\t\t\t\t\tops,\n\t\t\t\t});\n\n\t\t\tlet headerConfig;\n\t\t\tif (mode != \"chart\") headerConfig = { meta: true, nonEmpty: true };\n\n\t\t\treturn this._rengineToWebix(result, res.toXHeader(result, headerConfig));\n\t\t} catch (e) {\n\t\t\treturn this.loadError();\n\t\t}\n\t}\n\t/**\n\t * Updates math with custom total methods\n\t * @param {string} type - total operation type (group/footer/total)\n\t * @param {string} math - operation math\n\t * @param {Array} methodsMatch - math methods pos\n\t * @returns {string} updated math\n\t */\n\t_updateTotalMath(type, math, methodsMatch) {\n\t\tfor (let i = methodsMatch.length - 1; i >= 0; i--) {\n\t\t\tconst match = methodsMatch[i];\n\t\t\tmath =\n\t\t\t\tmath.substring(0, match.index + match[1].length) +\n\t\t\t\t(this.totalOperations[type][match[2]] || match[2]) +\n\t\t\t\tmath.substring(match.index + match[0].length - 1, math.length);\n\t\t}\n\t\treturn math;\n\t}\n\t/**\n\t * Applies math operations to data and groups\n\t * @returns {Object} ops\n\t */\n\tgetOps() {\n\t\tconst state = this._state;\n\t\tconst table = state.datatable;\n\t\tconst mode = state.mode;\n\t\tconst vals = state.structure.values;\n\t\tconst ops = [];\n\n\t\tfor (let i = 0; i < vals.length; i++) {\n\t\t\tconst format = vals[i].format;\n\t\t\tconst operation = vals[i].operation;\n\t\t\tconst color = vals[i].color;\n\n\t\t\tconst isComplex = operation == \"complex\";\n\t\t\tlet name = isComplex ? vals[i].math : vals[i].name;\n\t\t\tname = webix.isArray(name) ? name.join(\",\") : name;\n\n\t\t\tconst math = isComplex ? name : `${operation}(${name})`;\n\n\t\t\tlet branchMode;\n\t\t\tif (!isComplex) branchMode = this.getOperation(operation).branchMode;\n\n\t\t\tconst op = {\n\t\t\t\tmath,\n\t\t\t\tbranchMode: branchMode || \"raw\",\n\t\t\t\tlabel: name,\n\t\t\t\tmeta: { operation, format, color },\n\t\t\t\tcolumn: [],\n\t\t\t\trow: [],\n\t\t\t\tmarks: [],\n\t\t\t};\n\n\t\t\tconst total = this.totalOperations;\n\t\t\tlet methodsMatch;\n\t\t\tif (Object.keys(total).length) {\n\t\t\t\tconst methodsRegex = new RegExp(\n\t\t\t\t\t\"(\\\\(|,|\\\\+|-|\\\\/|\\\\*|\\\\s|^)(\" +\n\t\t\t\t\t\tthis.operations.map(method => method.id).join(\"|\") +\n\t\t\t\t\t\t\")\\\\(\",\n\t\t\t\t\t\"g\"\n\t\t\t\t);\n\t\t\t\tmethodsMatch = Array.from(math.matchAll(methodsRegex));\n\t\t\t}\n\n\t\t\tif (total.group)\n\t\t\t\top.branchMath = this._updateTotalMath(\"group\", math, methodsMatch);\n\n\t\t\tif (mode != \"chart\") {\n\t\t\t\tif (\n\t\t\t\t\ttable.footer &&\n\t\t\t\t\t((table.footer == \"sumOnly\" && operation == \"sum\") ||\n\t\t\t\t\t\ttable.footer != \"sumOnly\")\n\t\t\t\t)\n\t\t\t\t\top.column.push({\n\t\t\t\t\t\tmath: total.footer\n\t\t\t\t\t\t\t? this._updateTotalMath(\"footer\", math, methodsMatch)\n\t\t\t\t\t\t\t: math,\n\t\t\t\t\t\tas: \"value\",\n\t\t\t\t\t});\n\n\t\t\t\tif (\n\t\t\t\t\ttable.totalColumn &&\n\t\t\t\t\t((table.totalColumn == \"sumOnly\" && operation == \"sum\") ||\n\t\t\t\t\t\ttable.totalColumn != \"sumOnly\")\n\t\t\t\t)\n\t\t\t\t\top.row.push({\n\t\t\t\t\t\tmath: total.column\n\t\t\t\t\t\t\t? this._updateTotalMath(\"column\", math, methodsMatch)\n\t\t\t\t\t\t\t: math,\n\t\t\t\t\t\tas: \"\" + i,\n\t\t\t\t\t});\n\n\t\t\t\tif (table.minY) {\n\t\t\t\t\top.column.push({\n\t\t\t\t\t\tas: \"minY\",\n\t\t\t\t\t\tmath: \"min(group)\",\n\t\t\t\t\t\tsource: \"result\",\n\t\t\t\t\t});\n\t\t\t\t\top.marks.push({\n\t\t\t\t\t\tname: \"webix_min_y\",\n\t\t\t\t\t\tcheck: (v, column) => v == column.minY,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (table.maxY) {\n\t\t\t\t\top.column.push({\n\t\t\t\t\t\tas: \"maxY\",\n\t\t\t\t\t\tmath: \"max(group)\",\n\t\t\t\t\t\tsource: \"result\",\n\t\t\t\t\t});\n\t\t\t\t\top.marks.push({\n\t\t\t\t\t\tname: \"webix_max_y\",\n\t\t\t\t\t\tcheck: (v, column) => v == column.maxY,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (table.minX) {\n\t\t\t\t\top.row.push({\n\t\t\t\t\t\tas: \"minX\" + math,\n\t\t\t\t\t\tmath: \"min(group)\",\n\t\t\t\t\t\tsource: \"result\",\n\t\t\t\t\t});\n\t\t\t\t\top.marks.push({\n\t\t\t\t\t\tname: \"webix_min_x\",\n\t\t\t\t\t\tcheck: (v, column, row) => v == row[\"minX\" + math],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (table.maxX) {\n\t\t\t\t\top.row.push({\n\t\t\t\t\t\tas: \"maxX\" + math,\n\t\t\t\t\t\tmath: \"max(group)\",\n\t\t\t\t\t\tsource: \"result\",\n\t\t\t\t\t});\n\t\t\t\t\top.marks.push({\n\t\t\t\t\t\tname: \"webix_max_x\",\n\t\t\t\t\t\tcheck: (v, column, row) => v == row[\"maxX\" + math],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tops.push(op);\n\t\t}\n\t\treturn ops;\n\t}\n\t/** Convert rengine output data to pivot readable form **/\n\t_rengineToWebix(result, header) {\n\t\tconst state = this._state;\n\n\t\tif (state.mode == \"chart\") return this.getChartData(result, header);\n\n\t\tconst footer = header.nonEmpty.map(i =>\n\t\t\tresult.columnData[i] ? result.columnData[i].value : \"\"\n\t\t);\n\n\t\theader = this.getHeader(header);\n\n\t\tlet column;\n\t\tif (state.datatable.totalColumn) {\n\t\t\tcolumn = result.rowData.map(obj => {\n\t\t\t\tconst res = [];\n\t\t\t\tfor (let key in obj) {\n\t\t\t\t\tif (key.indexOf(\"minX\") == -1 && key.indexOf(\"maxX\") == -1)\n\t\t\t\t\t\tres[key] = obj[key];\n\t\t\t\t}\n\t\t\t\treturn res.filter(v => v || v === 0);\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tdata: result.tree || result.data,\n\t\t\theader,\n\t\t\tmarks: result.marks,\n\t\t\tfooter,\n\t\t\ttotalColumn: column,\n\t\t};\n\t}\n\t/**\n\t * Handle load error\n\t * @param {XMLHttpRequest} server error (customizations)\n\t * @returns {Object} empty data\n\t */\n\tloadError() {\n\t\twebix.message({\n\t\t\ttext: this._app.getService(\"locale\")._(\"Incorrect formula in values\"),\n\t\t\ttype: \"error\",\n\t\t});\n\n\t\treturn {\n\t\t\tdata: [],\n\t\t\tvalues: [],\n\t\t\theader: [],\n\t\t\tmarks: [],\n\t\t\tfooter: [],\n\t\t\ttotalColumn: [],\n\t\t};\n\t}\n\t/**\n\t * Prepares data for tree nodes\n\t * @param {Object} obj - item data as returted by Pivot engine\n\t * @returns {Object} item data ready for parsing in Webix Tree\n\t */\n\t_toTree(obj) {\n\t\tlet item = obj.values;\n\n\t\t// server returns object\n\t\tif (!webix.isArray(item)) {\n\t\t\tlet arr = [];\n\t\t\tfor (let name in item) arr[name] = item[name];\n\t\t\titem = arr;\n\t\t}\n\n\t\titem.unshift(\"\"); //header ids start from 1\n\t\tif (obj.data) {\n\t\t\titem.open = true;\n\t\t\titem.data = obj.data.map(r => {\n\t\t\t\treturn this._toTree(r);\n\t\t\t});\n\t\t} else item.id = obj.id; //row ids\n\t\treturn item;\n\t}\n\t/**\n\t * Prepares a storage for raw data before aggregation\n\t * @param {Array} data - initial data set\n\t * @returns {Object} object with storage data and parameters\n\t */\n\tgetTable(data) {\n\t\tconst fields = this.getFields(data[0]);\n\t\tthis._state.fields = fields;\n\t\tthis._data = data = this.prepareData(data, fields);\n\n\t\treturn {\n\t\t\tid: \"webixpivot\",\n\t\t\tprepare: true,\n\t\t\tdriver: \"raw\", //or \"columns\"\n\t\t\tfields: webix.copy(fields),\n\t\t\tdata,\n\t\t};\n\t}\n\t/**\n\t * Prepares data: parse dates, values template\n\t * @param {Array} data - initial data set\n\t * @returns {Array} data ready to parse\n\t */\n\tprepareData(data, fields) {\n\t\tfields = fields.filter(field => field.prepare || field.type == \"date\");\n\n\t\tif (fields.length) {\n\t\t\tdata = data.map(item => {\n\t\t\t\tfields.forEach(field => {\n\t\t\t\t\titem[field.id] = field.prepare\n\t\t\t\t\t\t? field.prepare(item[field.id])\n\t\t\t\t\t\t: new Date(item[field.id]);\n\t\t\t\t});\n\t\t\t\treturn item;\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n\t/**\n\t * Gets field values\n\t * @param {string} field name\n\t * @returns {Promise} promise that resolves with field values\n\t */\n\tcollectFieldValues(field) {\n\t\tif (this._filtersHash[field])\n\t\t\treturn webix.promise.resolve(this._filtersHash[field]);\n\n\t\tconst app = this._app;\n\t\tif (app.config.externalProcessing)\n\t\t\treturn (this._filtersHash[field] = app\n\t\t\t\t.getService(\"backend\")\n\t\t\t\t.collectFieldValues(field));\n\n\t\tconst fieldObj = this.getField(field);\n\n\t\tconst hash = {};\n\t\tconst values = [];\n\t\tfor (let i = 0; i < this._data.length; i++) {\n\t\t\tlet value = this._data[i][field];\n\t\t\tif (value || value === 0) {\n\t\t\t\tlet label = value;\n\n\t\t\t\tif (fieldObj.type == \"date\") value = value.valueOf();\n\n\t\t\t\tif (!hash[value]) {\n\t\t\t\t\thash[value] = true;\n\n\t\t\t\t\tif (fieldObj.predicate)\n\t\t\t\t\t\tlabel = app.config.predicates[fieldObj.predicate](label);\n\n\t\t\t\t\tvalues.push({ value, id: value, label });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._filtersHash[field] = values;\n\t\treturn webix.promise.resolve(values);\n\t}\n\t/**\n\t * Apply custom fields names and methods locale to complex math\n\t * @param {String} complex math\n\t * @returns {String} complex math with correct fields and math methods names\n\t */\n\tfixMath(math) {\n\t\tconst _ = this._app.getService(\"locale\")._;\n\n\t\tconst fields = this._state.fields;\n\t\tconst fieldsRegex = new RegExp(\n\t\t\tfields.map(field => \"\\\\b\" + field.id + \"\\\\b(?!\\\\()\").join(\"|\"),\n\t\t\t\"g\"\n\t\t);\n\n\t\tconst methods = this.operations;\n\t\tconst methodsRegex = new RegExp(\n\t\t\tmethods.map(method => \"\\\\b\" + method.id + \"\\\\b\\\\(\").join(\"|\"),\n\t\t\t\"g\"\n\t\t);\n\n\t\treturn math\n\t\t\t.replaceAll(fieldsRegex, id => fields.find(obj => obj.id == id).value)\n\t\t\t.replaceAll(\n\t\t\t\tmethodsRegex,\n\t\t\t\tmethod => _(method.substring(0, method.length - 1)) + \"(\"\n\t\t\t);\n\t}\n\t/**\n\t * Finds field\n\t * @param {String} field id\n\t * @returns {Object} field\n\t */\n\tgetField(id) {\n\t\treturn this._state.fields.find(obj => obj.id == id);\n\t}\n\t/**\n\t * Finds operation\n\t * @param {String} operation id\n\t * @returns {Object} operation\n\t */\n\tgetOperation(id) {\n\t\treturn this.operations.find(obj => obj.id == id);\n\t}\n\t/**\n\t * Returns columns for aggregation\n\t * @returns {Array} array of field names for columns\n\t */\n\tgetColumns() {\n\t\tconst struct = this._state.structure;\n\t\tif (this._state.mode == \"chart\" && struct.groupBy) return [struct.groupBy];\n\t\telse return struct.columns;\n\t}\n\t/**\n\t * Returns for aggregation\n\t * @returns {Array} array of field names for rows\n\t */\n\tgetRows() {\n\t\treturn this._state.mode == \"chart\" ? [] : this._state.structure.rows;\n\t}\n\t/** Sets limits for raw and output data\n\t * @returns {Object} object with limits. By default math engine uses\n\t * { rows: 10000, columns: 5000, raws: Infinity }\n\t */\n\tgetLimits() {\n\t\treturn {};\n\t}\n\t/**\n\t * Prepares table header\n\t * @param {Object} hdata - object with header config\n\t * @returns {Array} array with header lines\n\t */\n\tgetHeader(hdata) {\n\t\tconst header = hdata.data;\n\t\tconst rows = [];\n\n\t\thdata.nonEmpty.forEach((v, i) => {\n\t\t\trows.push({\n\t\t\t\tid: v + 1,\n\t\t\t\theader: header.map(h => {\n\t\t\t\t\th =\n\t\t\t\t\t\th[i] && !webix.isUndefined(h[i].text) ? h[i] : { text: h[i] || \"\" };\n\t\t\t\t\tconst op = hdata.meta[i] && hdata.meta[i].operation;\n\t\t\t\t\tif (op) h.operation = op;\n\t\t\t\t\treturn h;\n\t\t\t\t}),\n\t\t\t\tformat: hdata.meta[i] && hdata.meta[i].format,\n\t\t\t});\n\t\t});\n\n\t\treturn rows;\n\t}\n\t/**\n\t * Sets dimensions based on rows/columns from structure\n\t */\n\tsetDimensions() {\n\t\tthis._reng.resetDimensions();\n\t\tconst columns = this.getColumns();\n\t\tconst fields = columns.concat(this.getRows() || []);\n\n\t\tfor (let i = 0; i < fields.length; i++) {\n\t\t\tconst field = this.getField(fields[i]);\n\t\t\tthis._reng.addDimension({\n\t\t\t\tid: fields[i],\n\t\t\t\ttable: this._table.id,\n\t\t\t\tlabel: fields[i],\n\t\t\t\trule: {\n\t\t\t\t\tby: field.predicate ? `${field.predicate}(${fields[i]})` : fields[i],\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\t/**\n\t * Prepares chart data\n\t * @param {Object} res - object with groupped data\n\t * @param {Object} result - object with aggregated data and its parameters\n\t * @returns {Array} array with chart data\n\t */\n\tgetChartData(result, header) {\n\t\tconst state = this._state;\n\t\tconst ops = state.structure.values;\n\n\t\tlet data = [];\n\t\tlet values = [];\n\n\t\tif (result.data.length) {\n\t\t\tconst chartType = state.chart.type;\n\t\t\tconst groupBy = state.structure.groupBy;\n\n\t\t\tconst first = webix.copy(result.data[0]);\n\t\t\tconst axis = groupBy ? header.data[0] : first.map(() => \"\");\n\n\t\t\tlet count = 0;\n\t\t\twhile (first.length) {\n\t\t\t\tlet item = first.splice(0, ops.length);\n\t\t\t\tif (item.length) {\n\t\t\t\t\tlet text = axis[count].text;\n\t\t\t\t\tif (text === 0) text = \"0\";\n\n\t\t\t\t\tif (chartType == \"pie\" || chartType == \"donut\") {\n\t\t\t\t\t\tfor (let i = 0; i < item.length; i++)\n\t\t\t\t\t\t\titem[i] = { value: item[i], color: ops[i].color };\n\n\t\t\t\t\t\tif (groupBy)\n\t\t\t\t\t\t\tdata.push({\n\t\t\t\t\t\t\t\ttext: text || axis[count],\n\t\t\t\t\t\t\t\tcolor: this.getValueColor(count / ops.length, true),\n\t\t\t\t\t\t\t\tdata: item,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\telse data = item;\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem.push(text || axis[count]);\n\t\t\t\t\t\tdata.push(item);\n\t\t\t\t\t}\n\t\t\t\t\tcount += ops.length;\n\t\t\t\t} else break;\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < ops.length; i++) {\n\t\t\tconst op = ops[i];\n\n\t\t\tlet name = op.operation == \"complex\" ? op.math : op.name;\n\t\t\tname = Array.isArray(name) ? name.join(\",\") : name;\n\n\t\t\tvalues.push({\n\t\t\t\ttext: name || op.operation,\n\t\t\t\toperation: op.operation,\n\t\t\t\tcolor: op.color,\n\t\t\t});\n\t\t}\n\n\t\treturn { data, values };\n\t}\n\t/**\n\t * Gets built-in colors for chart values\n\t * @param {boolean} pieGroup - is palette for pie group (customizations)\n\t * @returns {Array} color palette\n\t */\n\tgetPalette() {\n\t\treturn [\n\t\t\t[\"#e33fc7\", \"#a244ea\", \"#476cee\", \"#36abee\", \"#58dccd\", \"#a7ee70\"],\n\t\t\t[\"#d3ee36\", \"#eed236\", \"#ee9336\", \"#ee4339\", \"#595959\", \"#b85981\"],\n\t\t\t[\"#c670b8\", \"#9984ce\", \"#b9b9e2\", \"#b0cdfa\", \"#a0e4eb\", \"#7faf1b\"],\n\t\t\t[\"#b4d9a4\", \"#f2f79a\", \"#ffaa7d\", \"#d6806f\", \"#939393\", \"#d9b0d1\"],\n\t\t\t[\"#780e3b\", \"#684da9\", \"#242464\", \"#205793\", \"#5199a4\", \"#065c27\"],\n\t\t\t[\"#54b15a\", \"#ecf125\", \"#c65000\", \"#990001\", \"#363636\", \"#800f3e\"],\n\t\t];\n\t}\n\t/**\n\t * Gets a color from the palette\n\t * @param {number} i - row number of the required value\n\t * @param {boolean} pieGroup - is palette for pie group (customizations)\n\t * @returns {string} HEX color\n\t */\n\tgetValueColor(i, pieGroup) {\n\t\tconst palette = this.getPalette(pieGroup);\n\t\tlet rowIndex = i / palette[0].length;\n\t\trowIndex = rowIndex == palette.length ? 0 : parseInt(rowIndex, 10);\n\t\tconst columnIndex = i % palette[0].length;\n\t\treturn palette[rowIndex][columnIndex];\n\t}\n\n\tclearAll() {\n\t\t// fields\n\t\tthis._app.config.fields = null;\n\t\tthis._state.fields = [];\n\t\t// structure\n\t\tthis._app.setStructure({});\n\t\t// reset aggregated data/table config\n\t\tdelete this._table;\n\t\tthis._store = this.getPivotData();\n\t\tthis._data = [];\n\t\tthis._filtersHash = {};\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class BaseExportView extends JetView {\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tpadding: 0,\n\t\t\tpoint: false,\n\t\t\tbody: {\n\t\t\t\tview: \"menu\",\n\t\t\t\tsubMenuPos: \"right\",\n\t\t\t\tlayout: \"y\",\n\t\t\t\tborderless: true,\n\t\t\t\ttype: {\n\t\t\t\t\tsubsign: true,\n\t\t\t\t},\n\t\t\t\tcss: \"webix_rpt_popup_menu\",\n\t\t\t\ttemplate: obj => this.GetTemplate(obj),\n\t\t\t\twidth: 160,\n\t\t\t\tsubmenuConfig: {\n\t\t\t\t\tpoint: false,\n\t\t\t\t\twidth: 190,\n\t\t\t\t\tpadding: 0,\n\t\t\t\t\ttemplate: obj => this.GetTemplate(obj),\n\t\t\t\t},\n\t\t\t\tautowidth: true,\n\t\t\t\tautoheight: true,\n\t\t\t\tdata: this.GetData(),\n\t\t\t\ton: {\n\t\t\t\t\tonMenuItemClick: (id, e) => this.PopupAction(id, e),\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\t/** Returns menu data */\n\tGetData() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn [\n\t\t\t{ value: _(\"To PNG\"), id: \"png\" },\n\t\t\t{ value: _(\"To PDF\"), id: \"pdf\" },\n\t\t];\n\t}\n\t/**\n\t * Calls \"exportModule\" event for app\n\t * @param {number} id - the ID of clicked menu option\n\t */\n\tPopupAction(id) {\n\t\tthis.app.callEvent(\"exportModule\", [id]);\n\t\tthis.getRoot().hide();\n\t}\n\t/**\n\t * Returns html template menu option\n\t * @param {Object} obj - data of menu option\n\t * @returns {String} - a string with html for an option\n\t */\n\tGetTemplate(obj) {\n\t\treturn `<span class='webix_icon ${obj.icon}'></span>${obj.value}`;\n\t}\n\t/**\n\t * Shows menu\n\t * @param {Object} node - html node where menu should be shown\n\t */\n\tShow(node) {\n\t\tif (this.getRoot().isVisible()) return;\n\t\tthis.webix.delay(() => this.getRoot().show(node));\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport ExportMenu from \"./export\";\n\nexport default class BaseToolbarView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tlocalId: \"toolbar\",\n\t\t\theight: webix.skin.$active.barHeight + 6,\n\t\t\thidden: true,\n\t\t\tpadding: { left: 10, right: 10, top: 6, bottom: 6 },\n\t\t\tmargin: 10,\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\twidth: 140,\n\t\t\t\t\tlabel: _(\"Export\"),\n\t\t\t\t\ticon: \"rpi-export\",\n\t\t\t\t\tclick: id => this.ShowExportPopup(id),\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t],\n\t\t};\n\t}\n\n\t/**\n\t * Shows menu\n\t * @param {String} viewId - webix view id\n\t */\n\tShowExportPopup(viewId) {\n\t\tif (!this.ExportMenu || !this.ExportMenu.$view)\n\t\t\tthis.ExportMenu = this.ui(ExportMenu);\n\t\tconst node = webix.$$(viewId);\n\t\tthis.ExportMenu.Show(node.$view);\n\t}\n}\n","import { createState, withContext } from \"jet-restate\";\n\nexport function bind(obj, key, ctrl, view) {\n\tbindOut(obj, key, ctrl);\n\treturn bindIn(obj, key, ctrl, view);\n}\n\nfunction bindIn(obj, key, ctrl, view) {\n\tconst handler = (v, o, k, meta) => {\n\t\tif (k === \"*\") {\n\t\t\tvar els = ctrl.elements;\n\t\t\tfor (var subkey in els) {\n\t\t\t\tif (typeof v[subkey] !== \"undefined\") els[subkey].setValue(v[subkey]);\n\t\t\t}\n\t\t} else if (key === \"*\") {\n\t\t\tvar el = ctrl.elements[k];\n\t\t\tif (el && el != meta) el.setValue(v);\n\t\t} else if (meta != ctrl) ctrl.setValue(v);\n\t};\n\n\treturn view\n\t\t? view.on(obj.$changes, key, handler)\n\t\t: obj.$changes.attachEvent(key, handler);\n}\n\nfunction bindOut(obj, key, ctrl) {\n\tif (key === \"*\") {\n\t\tvar els = ctrl.elements;\n\t\tfor (var subkey in els) {\n\t\t\tif (typeof obj[subkey] !== \"undefined\") bindOut(obj, subkey, els[subkey]);\n\t\t}\n\t\treturn;\n\t}\n\n\tconst trigger = function(newValue) {\n\t\tconst oldValue = obj[key];\n\t\tif (newValue !== oldValue) {\n\t\t\tobj[key] = newValue;\n\t\t}\n\t};\n\n\tif (!ctrl.getList)\n\t\tctrl.attachEvent(\"onTimedKeyPress\", function() {\n\t\t\tconst newValue = this.getValue();\n\t\t\tif (this.config.value !== newValue) {\n\t\t\t\tthis.config.value = newValue;\n\t\t\t\tthis.callEvent(\"onChange\", [newValue]);\n\t\t\t}\n\t\t});\n\n\tctrl.attachEvent(\"onChange\", function() {\n\t\twithContext(this, () => {\n\t\t\ttrigger(this.getValue());\n\t\t});\n\t});\n}\n\nexport function track(obj) {\n\tif (!obj.$changes) obj = createState(obj);\n\n\tvar observe = function(key, ctrl) {\n\t\treturn bind(obj, key, ctrl, ctrl);\n\t};\n\n\tvar observeEnd = function(id) {\n\t\tobj.$changes.detachEvent(id);\n\t};\n\n\treturn {\n\t\tattachEvent: observe,\n\t\tdetachEvent: observeEnd,\n\t};\n}\n","webix.protoUI(\n\t{\n\t\tname: \"input-list\",\n\t\tgetValue() {\n\t\t\treturn this._value || [];\n\t\t},\n\t\tsetValue(data) {\n\t\t\tthis._value = data;\n\n\t\t\tthis.clearAll();\n\t\t\tthis.parse([].concat(data));\n\t\t},\n\t},\n\twebix.ui.list\n);\n","export const menu = \"<span class='webix_icon action-menu mdi mdi-menu'></span>\";\nexport const edit =\n\t\"<span class='webix_icon action-edit mdi mdi-pencil'></span>\";\nexport const remove =\n\t\"<span class='webix_icon webix_rpt_action_remove rpi-trash-can-outline'></span>\";\n\nexport const menuRight =\n\t\"<span style='float:right' class='webix_icon action-menu mdi mdi-menu'></span>\";\nexport const editRight =\n\t\"<span style='float:right' class='webix_icon action-edit mdi mdi-pencil'></span>\";\nexport const removeRight =\n\t\"<span style='float:right' class='webix_icon webix_rpt_action_remove rpi-delete'></span>\";\n\nexport const visible =\n\t\"<span class='webix_icon action-visible mdi mdi-eye'></span>\";\nexport const hidden =\n\t\"<span class='webix_icon action-hidden mdi mdi-eye-off-outline'></span>\";\n\nexport const checked =\n\t\"<span class='webix_icon wbx-action_check mdi mdi-checkbox-marked-outline'></span>\";\nexport const notChecked =\n\t\"<span class='webix_icon wbx-action_check mdi mdi-checkbox-blank-outline'></span>\";\n\nexport const sortAsc =\n\t\"<span class='webix_icon rpi-sort-alphabetical-ascending'></span>\";\nexport const sortDesc =\n\t\"<span class='webix_icon rpi-sort-alphabetical-descending'></span>\";\n\nexport const types = {\n\ttable: \"<span class='rpi-table'></span>\",\n\tchart: \"<span class='rpi-poll'></span>\",\n\theatmap: \"<span class='rpi-chart-tree'></span>\",\n};\n\nexport const empty = {\n\tmain:\n\t\t\"<svg  xmlns='http://www.w3.org/2000/svg' viewBox='0 0 390 320'><path class='webix_rpt_cls1' d='M369.51,182.77c-23.18-52.39,32-103.23,13.74-148.28s-77.61-39.42-162.07-20S78.47-6.35,34.66,14.46c-29.39,14-27.27,58.82-5,107,38.95,84.29-51.86,117.32-24.38,166s118.91-.95,183.37,4.22c37.62.59,62.88,6.26,109.52,21.27C387.63,341.7,412.41,279.75,369.51,182.77Z'/><rect class='webix_rpt_cls2' x='111.53' y='226.04' width='212.47' height='0.91'/><rect class='webix_rpt_cls3' x='97' y='89.51' width='212' height='151.96'/><rect class='webix_rpt_cls4' x='67' y='159.96' width='136.33' height='81.98' rx='2'/><polygon class='webix_rpt_cls5' points='199.32 235.55 72.61 235.55 72.61 165.28 71.01 165.28 71.01 235.55 71.01 237.68 71.01 237.68 72.61 237.68 72.61 237.68 199.32 237.68 199.32 235.55'/><rect class='webix_rpt_cls6' x='84.64' y='165.28' width='0.8' height='68.14'/><rect class='webix_rpt_cls6' x='97.47' y='165.28' width='0.8' height='68.14'/><rect class='webix_rpt_cls6' x='110.3' y='165.28' width='0.8' height='68.14'/><rect class='webix_rpt_cls6' x='123.14' y='165.28' width='0.8' height='68.14'/><rect class='webix_rpt_cls6' x='135.97' y='165.28' width='0.8' height='68.14'/><rect class='webix_rpt_cls7' x='148.8' y='165.28' width='0.8' height='68.14'/><rect class='webix_rpt_cls6' x='161.63' y='165.28' width='0.8' height='68.14'/><rect class='webix_rpt_cls6' x='174.46' y='165.28' width='0.8' height='68.14'/><rect class='webix_rpt_cls6' x='187.29' y='165.28' width='0.8' height='68.14'/><rect class='webix_rpt_cls7' x='111.53' y='94.41' width='212.47' height='132.54'/><rect class='webix_rpt_cls8' x='111.53' y='109.85' width='212.47' height='0.91'/><path class='webix_rpt_cls9' d='M111.53,94.41H324v15.44H111.53Z'/><path class='webix_rpt_cls7' d='M111.53,79H324V94.41H111.53Z'/><path class='webix_rpt_cls2' d='M324,125.28v-.91H287.68V109.84h-.91v14.53H250.45V109.84h-.91v14.53H213.22V109.84h-.9v14.53H176V109.85h-.91v14.52H111.53v.91h63.56v13.61H111.53v.91h63.56v13.62H111.53v.91h63.56v13.61H111.53v.91h63.56v13.62H111.53v.91h63.56V197H111.53v.91h63.56v13.62H111.53v.9h63.56V227H176V212.42h36.32V227h.9V212.42h36.32V227h.91V212.42h36.32V227h.91V212.42H324v-.9H287.68V197.9H324V197H287.68V183.38H324v-.91H287.68V168.85H324v-.91H287.68V154.33H324v-.91H287.68V139.8H324v-.91H287.68V125.28Zm-74.46,0v13.61H213.22V125.28Zm-36.32,57.19V168.85h36.32v13.62Zm36.32.91V197H213.22V183.38Zm-36.32-15.44V154.33h36.32v13.61Zm0-14.52V139.8h36.32v13.62ZM176,125.28h36.32v13.61H176Zm0,14.52h36.32v13.62H176Zm0,14.53h36.32v13.61H176Zm0,14.52h36.32v13.62H176Zm0,14.53h36.32V197H176Zm0,28.14V197.9h36.32v13.62Zm37.22,0V197.9h36.32v13.62Zm73.55,0H250.45V197.9h36.32Zm0-14.53H250.45V183.38h36.32Zm0-14.52H250.45V168.85h36.32Zm0-14.53H250.45V154.33h36.32Zm0-14.52H250.45V139.8h36.32Zm0-14.53H250.45V125.28h36.32Z'/><rect class='webix_rpt_cls2' x='175.09' y='94.41' width='0.91' height='15.43'/><rect class='webix_rpt_cls2' x='212.32' y='94.41' width='0.91' height='15.43'/><rect class='webix_rpt_cls2' x='249.54' y='94.41' width='0.91' height='15.43'/><rect class='webix_rpt_cls2' x='286.77' y='94.41' width='0.91' height='15.43'/><rect class='webix_rpt_cls9' x='118.79' y='84.43' width='21.79' height='5.45'/><rect class='webix_rpt_cls9' x='250.45' y='84.43' width='66.28' height='5.45'/></svg>\",\n\talt:\n\t\t\"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 390 320' fill='none'><g clip-path='url(#clip0_4706_8889)'><path d='M369.502 182.763C346.322 130.373 401.502 79.5332 383.242 34.4832C364.982 -10.5668 305.632 -4.93676 221.172 14.4832C136.712 33.9032 78.4622 -6.35676 34.6522 14.4532C5.26223 28.4532 7.38222 73.2732 29.6522 121.453C68.6022 205.743 -22.2078 238.773 5.27222 287.453C32.7522 336.133 124.182 286.503 188.642 291.673C226.262 292.263 251.522 297.933 298.162 312.943C387.622 341.693 412.402 279.743 369.502 182.763Z' class='webix_rpt_cls1'/><path d='M112.545 76.0479C112.545 74.9421 113.475 74.0457 114.622 74.0457H215.368L256.913 114.09V251.238C256.913 252.344 255.983 253.241 254.836 253.241H114.622C113.475 253.241 112.545 252.344 112.545 251.238V76.0479Z' class='webix_rpt_cls6'/><path d='M128.322 60.5902C128.322 59.4844 129.252 58.588 130.399 58.588H231.145L272.69 98.6313V235.781C272.69 236.887 271.76 237.783 270.612 237.783H130.399C129.252 237.783 128.322 236.887 128.322 235.781V60.5902Z' class='webix_rpt_cls4'/><path fill-rule='evenodd' clip-rule='evenodd' d='M130.399 59.588C129.769 59.588 129.322 60.0708 129.322 60.5902V235.781C129.322 236.3 129.769 236.783 130.399 236.783H270.612C271.243 236.783 271.69 236.299 271.69 235.781V99.0563L230.742 59.588H130.399ZM231.145 58.588H130.399C129.252 58.588 128.322 59.4844 128.322 60.5902V235.781C128.322 236.887 129.252 237.783 130.399 237.783H270.612C271.76 237.783 272.69 236.887 272.69 235.781V98.6313L231.145 58.588Z' class='webix_rpt_cls3'/><path d='M231.146 96.6297V58.588L272.69 98.6313H233.222C232.075 98.6313 231.146 97.7353 231.146 96.6297Z' class='webix_rpt_cls3'/><path d='M184.729 74.0457H143.184C142.323 74.0457 141.626 74.718 141.626 75.5473V75.5473C141.626 76.3766 142.323 77.0489 143.184 77.0489H184.729C185.589 77.0489 186.287 76.3766 186.287 75.5473C186.287 74.718 185.589 74.0457 184.729 74.0457Z' class='webix_rpt_cls2'/><path d='M184.729 87.0457H143.184C142.323 87.0457 141.626 87.718 141.626 88.5473V88.5473C141.626 89.3766 142.323 90.0489 143.184 90.0489H184.729C185.589 90.0489 186.287 89.3766 186.287 88.5473C186.287 87.718 185.589 87.0457 184.729 87.0457Z' class='webix_rpt_cls2'/><path d='M222.443 101H143.557C142.697 101 142 101.672 142 102.5C142 103.328 142.697 104 143.557 104H222.443C223.303 104 224 103.328 224 102.5C224 101.672 223.303 101 222.443 101Z' class='webix_rpt_cls2'/><path d='M222.443 115H143.557C142.697 115 142 115.672 142 116.5V116.5C142 117.328 142.697 118 143.557 118H222.443C223.303 118 224 117.328 224 116.5C224 115.672 223.303 115 222.443 115Z' class='webix_rpt_cls2'/><path fill-rule='evenodd' clip-rule='evenodd' d='M218 223C240.644 223 259 204.644 259 182C259 159.356 240.644 141 218 141C195.356 141 177 159.356 177 182C177 204.644 195.356 223 218 223ZM218 227C242.853 227 263 206.853 263 182C263 157.147 242.853 137 218 137C193.147 137 173 157.147 173 182C173 206.853 193.147 227 218 227Z' class='webix_rpt_cls4'/><path d='M219.686 134C231.802 134 243.423 138.813 251.99 147.381C260.558 155.949 265.371 167.569 265.371 179.686C265.371 191.002 261.225 201.404 254.407 209.417L256.305 211.314H261.857L297 246.457L286.457 257L251.314 221.857V216.305L249.417 214.407C241.404 221.225 231.002 225.371 219.686 225.371C207.569 225.371 195.949 220.558 187.381 211.99C178.813 203.423 174 191.802 174 179.686C174 167.569 178.813 155.949 187.381 147.381C195.949 138.813 207.569 134 219.686 134ZM219.686 148.057C202.114 148.057 188.057 162.114 188.057 179.686C188.057 197.257 202.114 211.314 219.686 211.314C237.257 211.314 251.314 197.257 251.314 179.686C251.314 162.114 237.257 148.057 219.686 148.057Z' class='webix_rpt_cls5'/><path fill-rule='evenodd' clip-rule='evenodd' d='M253.047 209.471L253.645 208.769C260.316 200.928 264.371 190.754 264.371 179.686C264.371 167.834 259.663 156.468 251.283 148.088C242.903 139.708 231.537 135 219.686 135C207.834 135 196.468 139.708 188.088 148.088C179.708 156.468 175 167.834 175 179.686C175 191.537 179.708 202.903 188.088 211.283C196.468 219.663 207.834 224.371 219.686 224.371C230.754 224.371 240.928 220.316 248.769 213.645L249.471 213.047L252.314 215.89V221.443L286.457 255.586L295.586 246.457L261.443 212.314H255.89L253.047 209.471ZM261.857 211.314L297 246.457L286.457 257L251.314 221.857V216.305L249.417 214.407C241.404 221.225 231.002 225.371 219.686 225.371C207.569 225.371 195.949 220.558 187.381 211.99C178.813 203.423 174 191.802 174 179.686C174 167.569 178.813 155.949 187.381 147.381C195.949 138.813 207.569 134 219.686 134C231.802 134 243.423 138.813 251.99 147.381C260.558 155.949 265.371 167.569 265.371 179.686C265.371 191.002 261.225 201.404 254.407 209.417L256.305 211.314H261.857ZM187.057 179.686C187.057 161.562 201.562 147.057 219.686 147.057C237.809 147.057 252.314 161.562 252.314 179.686C252.314 197.809 237.809 212.314 219.686 212.314C201.562 212.314 187.057 197.809 187.057 179.686ZM188.057 179.686C188.057 162.114 202.114 148.057 219.686 148.057C237.257 148.057 251.314 162.114 251.314 179.686C251.314 197.257 237.257 211.314 219.686 211.314C202.114 211.314 188.057 197.257 188.057 179.686Z' class='webix_rpt_cls3'/><path d='M236.083 167.231L232.852 164L220.042 176.81L207.231 164L204 167.231L216.81 180.042L204 192.852L207.231 196.083L220.042 183.273L232.852 196.083L236.083 192.852L223.273 180.042L236.083 167.231Z' class='webix_rpt_cls3'/></g><defs><clipPath id='clip0_4706_8889'><rect width='390' height='320' class='webix_rpt_cls4'/></clipPath></defs></svg>\",\n};\n","/*\n@license\nWebix Query v.10.0.9\nThis software is covered by Webix Commercial License.\nUsage without proper license is prohibited.\n(c) XB Software Ltd.\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = global || self, factory(global.query = {}));\n}(this, (function (exports) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    var NavigationBlocked = (function () {\n        function NavigationBlocked() {\n        }\n        return NavigationBlocked;\n    }());\n    var JetBase = (function () {\n        function JetBase(webix, config) {\n            this.webixJet = true;\n            this.webix = webix;\n            this._events = [];\n            this._subs = {};\n            this._data = {};\n            if (config && config.params)\n                webix.extend(this._data, config.params);\n        }\n        JetBase.prototype.getRoot = function () {\n            return this._root;\n        };\n        JetBase.prototype.destructor = function () {\n            this._detachEvents();\n            this._destroySubs();\n            this._events = this._container = this.app = this._parent = this._root = null;\n        };\n        JetBase.prototype.setParam = function (id, value, url) {\n            if (this._data[id] !== value) {\n                this._data[id] = value;\n                this._segment.update(id, value, 0);\n                if (url) {\n                    return this.show(null);\n                }\n            }\n        };\n        JetBase.prototype.getParam = function (id, parent) {\n            var value = this._data[id];\n            if (typeof value !== \"undefined\" || !parent) {\n                return value;\n            }\n            var view = this.getParentView();\n            if (view) {\n                return view.getParam(id, parent);\n            }\n        };\n        JetBase.prototype.getUrl = function () {\n            return this._segment.suburl();\n        };\n        JetBase.prototype.getUrlString = function () {\n            return this._segment.toString();\n        };\n        JetBase.prototype.getParentView = function () {\n            return this._parent;\n        };\n        JetBase.prototype.$$ = function (id) {\n            if (typeof id === \"string\") {\n                var root_1 = this.getRoot();\n                return root_1.queryView((function (obj) { return (obj.config.id === id || obj.config.localId === id) &&\n                    (obj.$scope === root_1.$scope); }), \"self\");\n            }\n            else {\n                return id;\n            }\n        };\n        JetBase.prototype.on = function (obj, name, code) {\n            var id = obj.attachEvent(name, code);\n            this._events.push({ obj: obj, id: id });\n            return id;\n        };\n        JetBase.prototype.contains = function (view) {\n            for (var key in this._subs) {\n                var kid = this._subs[key].view;\n                if (kid === view || kid.contains(view)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        JetBase.prototype.getSubView = function (name) {\n            var sub = this.getSubViewInfo(name);\n            if (sub) {\n                return sub.subview.view;\n            }\n        };\n        JetBase.prototype.getSubViewInfo = function (name) {\n            var sub = this._subs[name || \"default\"];\n            if (sub) {\n                return { subview: sub, parent: this };\n            }\n            if (name === \"_top\") {\n                this._subs[name] = { url: \"\", id: null, popup: true };\n                return this.getSubViewInfo(name);\n            }\n            if (this._parent) {\n                return this._parent.getSubViewInfo(name);\n            }\n            return null;\n        };\n        JetBase.prototype._detachEvents = function () {\n            var events = this._events;\n            for (var i = events.length - 1; i >= 0; i--) {\n                events[i].obj.detachEvent(events[i].id);\n            }\n        };\n        JetBase.prototype._destroySubs = function () {\n            for (var key in this._subs) {\n                var subView = this._subs[key].view;\n                if (subView) {\n                    subView.destructor();\n                }\n            }\n            this._subs = {};\n        };\n        JetBase.prototype._init_url_data = function () {\n            var url = this._segment.current();\n            this._data = {};\n            this.webix.extend(this._data, url.params, true);\n        };\n        JetBase.prototype._getDefaultSub = function () {\n            if (this._subs.default) {\n                return this._subs.default;\n            }\n            for (var key in this._subs) {\n                var sub = this._subs[key];\n                if (!sub.branch && sub.view && key !== \"_top\") {\n                    var child = sub.view._getDefaultSub();\n                    if (child) {\n                        return child;\n                    }\n                }\n            }\n        };\n        JetBase.prototype._routed_view = function () {\n            var parent = this.getParentView();\n            if (!parent) {\n                return true;\n            }\n            var sub = parent._getDefaultSub();\n            if (!sub && sub !== this) {\n                return false;\n            }\n            return parent._routed_view();\n        };\n        return JetBase;\n    }());\n    function parse(url) {\n        if (url[0] === \"/\") {\n            url = url.substr(1);\n        }\n        var parts = url.split(\"/\");\n        var chunks = [];\n        for (var i = 0; i < parts.length; i++) {\n            var test = parts[i];\n            var result = {};\n            var pos = test.indexOf(\":\");\n            if (pos === -1) {\n                pos = test.indexOf(\"?\");\n            }\n            if (pos !== -1) {\n                var params = test.substr(pos + 1).split(/[\\:\\?\\&]/g);\n                for (var _i = 0, params_1 = params; _i < params_1.length; _i++) {\n                    var param = params_1[_i];\n                    var dchunk = param.split(\"=\");\n                    result[dchunk[0]] = decodeURIComponent(dchunk[1]);\n                }\n            }\n            chunks[i] = {\n                page: (pos > -1 ? test.substr(0, pos) : test),\n                params: result,\n                isNew: true\n            };\n        }\n        return chunks;\n    }\n    function url2str(stack) {\n        var url = [];\n        for (var _i = 0, stack_1 = stack; _i < stack_1.length; _i++) {\n            var chunk = stack_1[_i];\n            url.push(\"/\" + chunk.page);\n            var params = obj2str(chunk.params);\n            if (params) {\n                url.push(\"?\" + params);\n            }\n        }\n        return url.join(\"\");\n    }\n    function obj2str(obj) {\n        var str = [];\n        for (var key in obj) {\n            if (typeof obj[key] === \"object\")\n                continue;\n            if (str.length) {\n                str.push(\"&\");\n            }\n            str.push(key + \"=\" + encodeURIComponent(obj[key]));\n        }\n        return str.join(\"\");\n    }\n    var Route = (function () {\n        function Route(route, index) {\n            this._next = 1;\n            if (typeof route === \"string\") {\n                this.route = {\n                    url: parse(route),\n                    path: route\n                };\n            }\n            else {\n                this.route = route;\n            }\n            this.index = index;\n        }\n        Route.prototype.current = function () {\n            return this.route.url[this.index];\n        };\n        Route.prototype.next = function () {\n            return this.route.url[this.index + this._next];\n        };\n        Route.prototype.suburl = function () {\n            return this.route.url.slice(this.index);\n        };\n        Route.prototype.shift = function (params) {\n            var route = new Route(this.route, this.index + this._next);\n            route.setParams(route.route.url, params, route.index);\n            return route;\n        };\n        Route.prototype.setParams = function (url, params, index) {\n            if (params) {\n                var old = url[index].params;\n                for (var key in params)\n                    old[key] = params[key];\n            }\n        };\n        Route.prototype.refresh = function () {\n            var url = this.route.url;\n            for (var i = this.index + 1; i < url.length; i++) {\n                url[i].isNew = true;\n            }\n        };\n        Route.prototype.toString = function () {\n            var str = url2str(this.suburl());\n            return str ? str.substr(1) : \"\";\n        };\n        Route.prototype._join = function (path, kids) {\n            var url = this.route.url;\n            if (path === null) {\n                return url;\n            }\n            var old = this.route.url;\n            var reset = true;\n            url = old.slice(0, this.index + (kids ? this._next : 0));\n            if (path) {\n                url = url.concat(parse(path));\n                for (var i = 0; i < url.length; i++) {\n                    if (old[i]) {\n                        url[i].view = old[i].view;\n                    }\n                    if (reset && old[i] && url[i].page === old[i].page) {\n                        url[i].isNew = false;\n                    }\n                    else if (url[i].isNew) {\n                        reset = false;\n                    }\n                }\n            }\n            return url;\n        };\n        Route.prototype.append = function (path) {\n            var url = this._join(path, true);\n            this.route.path = url2str(url);\n            this.route.url = url;\n            return this.route.path;\n        };\n        Route.prototype.show = function (path, view, kids) {\n            var _this = this;\n            var url = this._join(path.url, kids);\n            this.setParams(url, path.params, this.index + (kids ? this._next : 0));\n            return new Promise(function (res, rej) {\n                var redirect = url2str(url);\n                var obj = {\n                    url: url,\n                    redirect: redirect,\n                    confirm: Promise.resolve()\n                };\n                var app = view ? view.app : null;\n                if (app) {\n                    var result = app.callEvent(\"app:guard\", [obj.redirect, view, obj]);\n                    if (!result) {\n                        rej(new NavigationBlocked());\n                        return;\n                    }\n                }\n                obj.confirm.catch(function (err) { return rej(err); }).then(function () {\n                    if (obj.redirect === null) {\n                        rej(new NavigationBlocked());\n                        return;\n                    }\n                    if (obj.redirect !== redirect) {\n                        app.show(obj.redirect);\n                        rej(new NavigationBlocked());\n                        return;\n                    }\n                    _this.route.path = redirect;\n                    _this.route.url = url;\n                    res();\n                });\n            });\n        };\n        Route.prototype.size = function (n) {\n            this._next = n;\n        };\n        Route.prototype.split = function () {\n            var route = {\n                url: this.route.url.slice(this.index + 1),\n                path: \"\"\n            };\n            if (route.url.length) {\n                route.path = url2str(route.url);\n            }\n            return new Route(route, 0);\n        };\n        Route.prototype.update = function (name, value, index) {\n            var chunk = this.route.url[this.index + (index || 0)];\n            if (!chunk) {\n                this.route.url.push({ page: \"\", params: {} });\n                return this.update(name, value, index);\n            }\n            if (name === \"\") {\n                chunk.page = value;\n            }\n            else {\n                chunk.params[name] = value;\n            }\n            this.route.path = url2str(this.route.url);\n        };\n        return Route;\n    }());\n    var JetView = (function (_super) {\n        __extends(JetView, _super);\n        function JetView(app, config) {\n            var _this = _super.call(this, app.webix) || this;\n            _this.app = app;\n            _this._children = [];\n            return _this;\n        }\n        JetView.prototype.ui = function (ui, config) {\n            config = config || {};\n            var container = config.container || ui.container;\n            var jetview = this.app.createView(ui);\n            this._children.push(jetview);\n            jetview.render(container, this._segment, this);\n            if (typeof ui !== \"object\" || (ui instanceof JetBase)) {\n                return jetview;\n            }\n            else {\n                return jetview.getRoot();\n            }\n        };\n        JetView.prototype.show = function (path, config) {\n            config = config || {};\n            if (typeof path === \"object\") {\n                for (var key in path) {\n                    this.setParam(key, path[key]);\n                }\n                path = null;\n            }\n            else {\n                if (path.substr(0, 1) === \"/\") {\n                    return this.app.show(path, config);\n                }\n                if (path.indexOf(\"./\") === 0) {\n                    path = path.substr(2);\n                }\n                if (path.indexOf(\"../\") === 0) {\n                    var parent_1 = this.getParentView();\n                    if (parent_1) {\n                        return parent_1.show(path.substr(3), config);\n                    }\n                    else {\n                        return this.app.show(\"/\" + path.substr(3));\n                    }\n                }\n                var sub = this.getSubViewInfo(config.target);\n                if (sub) {\n                    if (sub.parent !== this) {\n                        return sub.parent.show(path, config);\n                    }\n                    else if (config.target && config.target !== \"default\") {\n                        return this._renderFrameLock(config.target, sub.subview, {\n                            url: path,\n                            params: config.params,\n                        });\n                    }\n                }\n                else {\n                    if (path) {\n                        return this.app.show(\"/\" + path, config);\n                    }\n                }\n            }\n            return this._show(this._segment, { url: path, params: config.params }, this);\n        };\n        JetView.prototype._show = function (segment, path, view) {\n            var _this = this;\n            return segment.show(path, view, true).then(function () {\n                _this._init_url_data();\n                return _this._urlChange();\n            }).then(function () {\n                if (segment.route.linkRouter) {\n                    _this.app.getRouter().set(segment.route.path, { silent: true });\n                    _this.app.callEvent(\"app:route\", [segment.route.path]);\n                }\n            });\n        };\n        JetView.prototype.init = function (_$view, _$) {\n        };\n        JetView.prototype.ready = function (_$view, _$url) {\n        };\n        JetView.prototype.config = function () {\n            this.app.webix.message(\"View:Config is not implemented\");\n        };\n        JetView.prototype.urlChange = function (_$view, _$url) {\n        };\n        JetView.prototype.destroy = function () {\n        };\n        JetView.prototype.destructor = function () {\n            this.destroy();\n            this._destroyKids();\n            if (this._root) {\n                this._root.destructor();\n                _super.prototype.destructor.call(this);\n            }\n        };\n        JetView.prototype.use = function (plugin, config) {\n            plugin(this.app, this, config);\n        };\n        JetView.prototype.refresh = function () {\n            var url = this.getUrl();\n            this.destroy();\n            this._destroyKids();\n            this._destroySubs();\n            this._detachEvents();\n            if (this._container.tagName) {\n                this._root.destructor();\n            }\n            this._segment.refresh();\n            return this._render(this._segment);\n        };\n        JetView.prototype.render = function (root, url, parent) {\n            var _this = this;\n            if (typeof url === \"string\") {\n                url = new Route(url, 0);\n            }\n            this._segment = url;\n            this._parent = parent;\n            this._init_url_data();\n            root = root || document.body;\n            var _container = (typeof root === \"string\") ? this.webix.toNode(root) : root;\n            if (this._container !== _container) {\n                this._container = _container;\n                return this._render(url);\n            }\n            else {\n                return this._urlChange().then(function () { return _this.getRoot(); });\n            }\n        };\n        JetView.prototype._render = function (url) {\n            var _this = this;\n            var config = this.config();\n            if (config.then) {\n                return config.then(function (cfg) { return _this._render_final(cfg, url); });\n            }\n            else {\n                return this._render_final(config, url);\n            }\n        };\n        JetView.prototype._render_final = function (config, url) {\n            var _this = this;\n            var slot = null;\n            var container = null;\n            var show = false;\n            if (!this._container.tagName) {\n                slot = this._container;\n                if (slot.popup) {\n                    container = document.body;\n                    show = true;\n                }\n                else {\n                    container = this.webix.$$(slot.id);\n                }\n            }\n            else {\n                container = this._container;\n            }\n            if (!this.app || !container) {\n                return Promise.reject(null);\n            }\n            var response;\n            var current = this._segment.current();\n            var result = { ui: {} };\n            this.app.copyConfig(config, result.ui, this._subs);\n            this.app.callEvent(\"app:render\", [this, url, result]);\n            result.ui.$scope = this;\n            if (!slot && current.isNew && current.view) {\n                current.view.destructor();\n            }\n            try {\n                if (slot && !show) {\n                    var oldui = container;\n                    var parent_2 = oldui.getParentView();\n                    if (parent_2 && parent_2.name === \"multiview\" && !result.ui.id) {\n                        result.ui.id = oldui.config.id;\n                    }\n                }\n                this._root = this.app.webix.ui(result.ui, container);\n                var asWin = this._root;\n                if (show && asWin.setPosition && !asWin.isVisible()) {\n                    asWin.show();\n                }\n                if (slot) {\n                    if (slot.view && slot.view !== this && slot.view !== this.app) {\n                        slot.view.destructor();\n                    }\n                    slot.id = this._root.config.id;\n                    if (this.getParentView() || !this.app.app)\n                        slot.view = this;\n                    else {\n                        slot.view = this.app;\n                    }\n                }\n                if (current.isNew) {\n                    current.view = this;\n                    current.isNew = false;\n                }\n                response = Promise.resolve(this._init(this._root, url)).then(function () {\n                    return _this._urlChange().then(function () {\n                        _this._initUrl = null;\n                        return _this.ready(_this._root, url.suburl());\n                    });\n                });\n            }\n            catch (e) {\n                response = Promise.reject(e);\n            }\n            return response.catch(function (err) { return _this._initError(_this, err); });\n        };\n        JetView.prototype._init = function (view, url) {\n            return this.init(view, url.suburl());\n        };\n        JetView.prototype._urlChange = function () {\n            var _this = this;\n            this.app.callEvent(\"app:urlchange\", [this, this._segment]);\n            var waits = [];\n            for (var key in this._subs) {\n                var frame = this._subs[key];\n                var wait = this._renderFrameLock(key, frame, null);\n                if (wait) {\n                    waits.push(wait);\n                }\n            }\n            return Promise.all(waits).then(function () {\n                return _this.urlChange(_this._root, _this._segment.suburl());\n            });\n        };\n        JetView.prototype._renderFrameLock = function (key, frame, path) {\n            if (!frame.lock) {\n                var lock = this._renderFrame(key, frame, path);\n                if (lock) {\n                    frame.lock = lock.then(function () { return frame.lock = null; }, function () { return frame.lock = null; });\n                }\n            }\n            return frame.lock;\n        };\n        JetView.prototype._renderFrame = function (key, frame, path) {\n            var _this = this;\n            if (key === \"default\") {\n                if (this._segment.next()) {\n                    var params = path ? path.params : null;\n                    if (frame.params) {\n                        params = this.webix.extend(params || {}, frame.params);\n                    }\n                    return this._createSubView(frame, this._segment.shift(params));\n                }\n                else if (frame.view && frame.popup) {\n                    frame.view.destructor();\n                    frame.view = null;\n                }\n            }\n            if (path !== null) {\n                frame.url = path.url;\n                if (frame.params) {\n                    path.params = this.webix.extend(path.params || {}, frame.params);\n                }\n            }\n            if (frame.route) {\n                if (path !== null) {\n                    return frame.route.show(path, frame.view).then(function () {\n                        return _this._createSubView(frame, frame.route);\n                    });\n                }\n                if (frame.branch) {\n                    return;\n                }\n            }\n            var view = frame.view;\n            if (!view && frame.url) {\n                if (typeof frame.url === \"string\") {\n                    frame.route = new Route(frame.url, 0);\n                    if (path)\n                        frame.route.setParams(frame.route.route.url, path.params, 0);\n                    if (frame.params)\n                        frame.route.setParams(frame.route.route.url, frame.params, 0);\n                    return this._createSubView(frame, frame.route);\n                }\n                else {\n                    if (typeof frame.url === \"function\" && !(view instanceof frame.url)) {\n                        view = new (this.app._override(frame.url))(this.app, \"\");\n                    }\n                    if (!view) {\n                        view = frame.url;\n                    }\n                }\n            }\n            if (view) {\n                return view.render(frame, (frame.route || this._segment), this);\n            }\n        };\n        JetView.prototype._initError = function (view, err) {\n            if (this.app) {\n                this.app.error(\"app:error:initview\", [err, view]);\n            }\n            return true;\n        };\n        JetView.prototype._createSubView = function (sub, suburl) {\n            var _this = this;\n            return this.app.createFromURL(suburl.current()).then(function (view) {\n                return view.render(sub, suburl, _this);\n            });\n        };\n        JetView.prototype._destroyKids = function () {\n            var uis = this._children;\n            for (var i = uis.length - 1; i >= 0; i--) {\n                if (uis[i] && uis[i].destructor) {\n                    uis[i].destructor();\n                }\n            }\n            this._children = [];\n        };\n        return JetView;\n    }(JetBase));\n    var JetViewRaw = (function (_super) {\n        __extends(JetViewRaw, _super);\n        function JetViewRaw(app, config) {\n            var _this = _super.call(this, app, config) || this;\n            _this._ui = config.ui;\n            return _this;\n        }\n        JetViewRaw.prototype.config = function () {\n            return this._ui;\n        };\n        return JetViewRaw;\n    }(JetView));\n    var SubRouter = (function () {\n        function SubRouter(cb, config, app) {\n            this.path = \"\";\n            this.app = app;\n        }\n        SubRouter.prototype.set = function (path, config) {\n            this.path = path;\n            var a = this.app;\n            a.app.getRouter().set(a._segment.append(this.path), { silent: true });\n        };\n        SubRouter.prototype.get = function () {\n            return this.path;\n        };\n        return SubRouter;\n    }());\n    var _once = true;\n    var JetAppBase = (function (_super) {\n        __extends(JetAppBase, _super);\n        function JetAppBase(config) {\n            var _this = this;\n            var webix = (config || {}).webix || window.webix;\n            config = webix.extend({\n                name: \"App\",\n                version: \"1.0\",\n                start: \"/home\"\n            }, config, true);\n            _this = _super.call(this, webix, config) || this;\n            _this.config = config;\n            _this.app = _this.config.app;\n            _this.ready = Promise.resolve();\n            _this._services = {};\n            _this.webix.extend(_this, _this.webix.EventSystem);\n            return _this;\n        }\n        JetAppBase.prototype.getUrl = function () {\n            return this._subSegment.suburl();\n        };\n        JetAppBase.prototype.getUrlString = function () {\n            return this._subSegment.toString();\n        };\n        JetAppBase.prototype.getService = function (name) {\n            var obj = this._services[name];\n            if (typeof obj === \"function\") {\n                obj = this._services[name] = obj(this);\n            }\n            return obj;\n        };\n        JetAppBase.prototype.setService = function (name, handler) {\n            this._services[name] = handler;\n        };\n        JetAppBase.prototype.destructor = function () {\n            this.getSubView().destructor();\n            _super.prototype.destructor.call(this);\n        };\n        JetAppBase.prototype.copyConfig = function (obj, target, config) {\n            if (obj instanceof JetBase ||\n                (typeof obj === \"function\" && obj.prototype instanceof JetBase)) {\n                obj = { $subview: obj };\n            }\n            if (typeof obj.$subview != \"undefined\") {\n                return this.addSubView(obj, target, config);\n            }\n            var isArray = obj instanceof Array;\n            target = target || (isArray ? [] : {});\n            for (var method in obj) {\n                var point = obj[method];\n                if (typeof point === \"function\" && point.prototype instanceof JetBase) {\n                    point = { $subview: point };\n                }\n                if (point && typeof point === \"object\" &&\n                    !(point instanceof this.webix.DataCollection) && !(point instanceof RegExp) && !(point instanceof Map)) {\n                    if (point instanceof Date) {\n                        target[method] = new Date(point);\n                    }\n                    else {\n                        var copy = this.copyConfig(point, (point instanceof Array ? [] : {}), config);\n                        if (copy !== null) {\n                            if (isArray)\n                                target.push(copy);\n                            else\n                                target[method] = copy;\n                        }\n                    }\n                }\n                else {\n                    target[method] = point;\n                }\n            }\n            return target;\n        };\n        JetAppBase.prototype.getRouter = function () {\n            return this.$router;\n        };\n        JetAppBase.prototype.clickHandler = function (e, target) {\n            if (e) {\n                target = target || (e.target || e.srcElement);\n                if (target && target.getAttribute) {\n                    var trigger_1 = target.getAttribute(\"trigger\");\n                    if (trigger_1) {\n                        this._forView(target, function (view) { return view.app.trigger(trigger_1); });\n                        e.cancelBubble = true;\n                        return e.preventDefault();\n                    }\n                    var route_1 = target.getAttribute(\"route\");\n                    if (route_1) {\n                        this._forView(target, function (view) { return view.show(route_1); });\n                        e.cancelBubble = true;\n                        return e.preventDefault();\n                    }\n                }\n            }\n            var parent = target.parentNode;\n            if (parent) {\n                this.clickHandler(e, parent);\n            }\n        };\n        JetAppBase.prototype.getRoot = function () {\n            return this.getSubView().getRoot();\n        };\n        JetAppBase.prototype.refresh = function () {\n            var _this = this;\n            if (!this._subSegment) {\n                return Promise.resolve(null);\n            }\n            return this.getSubView().refresh().then(function (view) {\n                _this.callEvent(\"app:route\", [_this.getUrl()]);\n                return view;\n            });\n        };\n        JetAppBase.prototype.loadView = function (url) {\n            var _this = this;\n            var views = this.config.views;\n            var result = null;\n            if (url === \"\") {\n                return Promise.resolve(this._loadError(\"\", new Error(\"Webix Jet: Empty url segment\")));\n            }\n            try {\n                if (views) {\n                    if (typeof views === \"function\") {\n                        result = views(url);\n                    }\n                    else {\n                        result = views[url];\n                    }\n                    if (typeof result === \"string\") {\n                        url = result;\n                        result = null;\n                    }\n                }\n                if (!result) {\n                    if (url === \"_hidden\") {\n                        result = { hidden: true };\n                    }\n                    else if (url === \"_blank\") {\n                        result = {};\n                    }\n                    else {\n                        url = url.replace(/\\./g, \"/\");\n                        result = this.require(\"jet-views\", url);\n                    }\n                }\n            }\n            catch (e) {\n                result = this._loadError(url, e);\n            }\n            if (!result.then) {\n                result = Promise.resolve(result);\n            }\n            result = result\n                .then(function (module) { return module.__esModule ? module.default : module; })\n                .catch(function (err) { return _this._loadError(url, err); });\n            return result;\n        };\n        JetAppBase.prototype._forView = function (target, handler) {\n            var view = this.webix.$$(target);\n            if (view) {\n                handler(view.$scope);\n            }\n        };\n        JetAppBase.prototype._loadViewDynamic = function (url) {\n            return null;\n        };\n        JetAppBase.prototype.createFromURL = function (chunk) {\n            var _this = this;\n            var view;\n            if (chunk.isNew || !chunk.view) {\n                view = this.loadView(chunk.page)\n                    .then(function (ui) { return _this.createView(ui, name, chunk.params); });\n            }\n            else {\n                view = Promise.resolve(chunk.view);\n            }\n            return view;\n        };\n        JetAppBase.prototype._override = function (ui) {\n            var over = this.config.override;\n            if (over) {\n                var dv = void 0;\n                while (ui) {\n                    dv = ui;\n                    ui = over.get(ui);\n                }\n                return dv;\n            }\n            return ui;\n        };\n        JetAppBase.prototype.createView = function (ui, name, params) {\n            ui = this._override(ui);\n            var obj;\n            if (typeof ui === \"function\") {\n                if (ui.prototype instanceof JetAppBase) {\n                    return new ui({ app: this, name: name, params: params, router: SubRouter });\n                }\n                else if (ui.prototype instanceof JetBase) {\n                    return new ui(this, { name: name, params: params });\n                }\n                else {\n                    ui = ui(this);\n                }\n            }\n            if (ui instanceof JetBase) {\n                obj = ui;\n            }\n            else {\n                obj = new JetViewRaw(this, { name: name, ui: ui });\n            }\n            return obj;\n        };\n        JetAppBase.prototype.show = function (url, config) {\n            if (url && this.app && url.indexOf(\"//\") == 0)\n                return this.app.show(url.substr(1), config);\n            return this.render(this._container, url || this.config.start, config);\n        };\n        JetAppBase.prototype.trigger = function (name) {\n            var rest = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                rest[_i - 1] = arguments[_i];\n            }\n            this.apply(name, rest);\n        };\n        JetAppBase.prototype.apply = function (name, data) {\n            this.callEvent(name, data);\n        };\n        JetAppBase.prototype.action = function (name) {\n            return this.webix.bind(function () {\n                var rest = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    rest[_i] = arguments[_i];\n                }\n                this.apply(name, rest);\n            }, this);\n        };\n        JetAppBase.prototype.on = function (name, handler) {\n            this.attachEvent(name, handler);\n        };\n        JetAppBase.prototype.use = function (plugin, config) {\n            plugin(this, null, config);\n        };\n        JetAppBase.prototype.error = function (name, er) {\n            this.callEvent(name, er);\n            this.callEvent(\"app:error\", er);\n            if (this.config.debug) {\n                for (var i = 0; i < er.length; i++) {\n                    console.error(er[i]);\n                    if (er[i] instanceof Error) {\n                        var text = er[i].message;\n                        if (text.indexOf(\"Module build failed\") === 0) {\n                            text = text.replace(/\\x1b\\[[0-9;]*m/g, \"\");\n                            document.body.innerHTML = \"<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>\" + text + \"</pre>\";\n                        }\n                        else {\n                            text += \"<br><br>Check console for more details\";\n                            this.webix.message({ type: \"error\", text: text, expire: -1 });\n                        }\n                    }\n                }\n                debugger;\n            }\n        };\n        JetAppBase.prototype.render = function (root, url, config) {\n            var _this = this;\n            this._container = (typeof root === \"string\") ?\n                this.webix.toNode(root) :\n                (root || document.body);\n            var firstInit = !this.$router;\n            var path = null;\n            if (firstInit) {\n                if (_once && \"tagName\" in this._container) {\n                    this.webix.event(document.body, \"click\", function (e) { return _this.clickHandler(e); });\n                    _once = false;\n                }\n                if (typeof url === \"string\") {\n                    url = new Route(url, 0);\n                }\n                this._subSegment = this._first_start(url);\n                this._subSegment.route.linkRouter = true;\n            }\n            else {\n                if (typeof url === \"string\") {\n                    path = url;\n                }\n                else {\n                    if (this.app) {\n                        path = url.split().route.path || this.config.start;\n                    }\n                    else {\n                        path = url.toString();\n                    }\n                }\n            }\n            var params = config ? config.params : this.config.params || null;\n            var top = this.getSubView();\n            var segment = this._subSegment;\n            var ready = segment\n                .show({ url: path, params: params }, top)\n                .then(function () { return _this.createFromURL(segment.current()); })\n                .then(function (view) { return view.render(root, segment); })\n                .then(function (base) {\n                _this.$router.set(segment.route.path, { silent: true });\n                _this.callEvent(\"app:route\", [_this.getUrl()]);\n                return base;\n            });\n            this.ready = this.ready.then(function () { return ready; });\n            return ready;\n        };\n        JetAppBase.prototype.getSubView = function () {\n            if (this._subSegment) {\n                var view = this._subSegment.current().view;\n                if (view)\n                    return view;\n            }\n            return new JetView(this, {});\n        };\n        JetAppBase.prototype.require = function (type, url) { return null; };\n        JetAppBase.prototype._first_start = function (route) {\n            var _this = this;\n            this._segment = route;\n            var cb = function (a) { return setTimeout(function () {\n                _this.show(a).catch(function (e) {\n                    if (!(e instanceof NavigationBlocked))\n                        throw e;\n                });\n            }, 1); };\n            this.$router = new (this.config.router)(cb, this.config, this);\n            if (this._container === document.body && this.config.animation !== false) {\n                var node_1 = this._container;\n                this.webix.html.addCss(node_1, \"webixappstart\");\n                setTimeout(function () {\n                    _this.webix.html.removeCss(node_1, \"webixappstart\");\n                    _this.webix.html.addCss(node_1, \"webixapp\");\n                }, 10);\n            }\n            if (!route) {\n                var urlString = this.$router.get();\n                if (!urlString) {\n                    urlString = this.config.start;\n                    this.$router.set(urlString, { silent: true });\n                }\n                route = new Route(urlString, 0);\n            }\n            else if (this.app) {\n                var now = route.current().view;\n                route.current().view = this;\n                if (route.next()) {\n                    route.refresh();\n                    route = route.split();\n                }\n                else {\n                    route = new Route(this.config.start, 0);\n                }\n                route.current().view = now;\n            }\n            return route;\n        };\n        JetAppBase.prototype._loadError = function (url, err) {\n            this.error(\"app:error:resolve\", [err, url]);\n            return { template: \" \" };\n        };\n        JetAppBase.prototype.addSubView = function (obj, target, config) {\n            var url = obj.$subview !== true ? obj.$subview : null;\n            var name = obj.name || (url ? this.webix.uid() : \"default\");\n            target.id = obj.id || \"s\" + this.webix.uid();\n            var view = config[name] = {\n                id: target.id,\n                url: url,\n                branch: obj.branch,\n                popup: obj.popup,\n                params: obj.params\n            };\n            return view.popup ? null : target;\n        };\n        return JetAppBase;\n    }(JetBase));\n    var HashRouter = (function () {\n        function HashRouter(cb, config) {\n            var _this = this;\n            this.config = config || {};\n            this._detectPrefix();\n            this.cb = cb;\n            window.onpopstate = function () { return _this.cb(_this.get()); };\n        }\n        HashRouter.prototype.set = function (path, config) {\n            var _this = this;\n            if (this.config.routes) {\n                var compare = path.split(\"?\", 2);\n                for (var key in this.config.routes) {\n                    if (this.config.routes[key] === compare[0]) {\n                        path = key + (compare.length > 1 ? \"?\" + compare[1] : \"\");\n                        break;\n                    }\n                }\n            }\n            if (this.get() !== path) {\n                window.history.pushState(null, null, this.prefix + this.sufix + path);\n            }\n            if (!config || !config.silent) {\n                setTimeout(function () { return _this.cb(path); }, 1);\n            }\n        };\n        HashRouter.prototype.get = function () {\n            var path = this._getRaw().replace(this.prefix, \"\").replace(this.sufix, \"\");\n            path = (path !== \"/\" && path !== \"#\") ? path : \"\";\n            if (this.config.routes) {\n                var compare = path.split(\"?\", 2);\n                var key = this.config.routes[compare[0]];\n                if (key) {\n                    path = key + (compare.length > 1 ? \"?\" + compare[1] : \"\");\n                }\n            }\n            return path;\n        };\n        HashRouter.prototype._detectPrefix = function () {\n            var sufix = this.config.routerPrefix;\n            this.sufix = \"#\" + ((typeof sufix === \"undefined\") ? \"!\" : sufix);\n            this.prefix = document.location.href.split(\"#\", 2)[0];\n        };\n        HashRouter.prototype._getRaw = function () {\n            return document.location.href;\n        };\n        return HashRouter;\n    }());\n    var isPatched = false;\n    function patch(w) {\n        if (isPatched || !w) {\n            return;\n        }\n        isPatched = true;\n        var win = window;\n        if (!win.Promise) {\n            win.Promise = w.promise;\n        }\n        var version = w.version.split(\".\");\n        if (version[0] * 10 + version[1] * 1 < 53) {\n            w.ui.freeze = function (handler) {\n                var res = handler();\n                if (res && res.then) {\n                    res.then(function (some) {\n                        w.ui.$freeze = false;\n                        w.ui.resize();\n                        return some;\n                    });\n                }\n                else {\n                    w.ui.$freeze = false;\n                    w.ui.resize();\n                }\n                return res;\n            };\n        }\n        var baseAdd = w.ui.baselayout.prototype.addView;\n        var baseRemove = w.ui.baselayout.prototype.removeView;\n        var config = {\n            addView: function (view, index) {\n                if (this.$scope && this.$scope.webixJet && !view.queryView) {\n                    var jview_1 = this.$scope;\n                    var subs_1 = {};\n                    view = jview_1.app.copyConfig(view, {}, subs_1);\n                    baseAdd.apply(this, [view, index]);\n                    var _loop_1 = function (key) {\n                        jview_1._renderFrame(key, subs_1[key], null).then(function () {\n                            jview_1._subs[key] = subs_1[key];\n                        });\n                    };\n                    for (var key in subs_1) {\n                        _loop_1(key);\n                    }\n                    return view.id;\n                }\n                else {\n                    return baseAdd.apply(this, arguments);\n                }\n            },\n            removeView: function () {\n                baseRemove.apply(this, arguments);\n                if (this.$scope && this.$scope.webixJet) {\n                    var subs = this.$scope._subs;\n                    for (var key in subs) {\n                        var test = subs[key];\n                        if (!w.$$(test.id)) {\n                            test.view.destructor();\n                            delete subs[key];\n                        }\n                    }\n                }\n            }\n        };\n        w.extend(w.ui.layout.prototype, config, true);\n        w.extend(w.ui.baselayout.prototype, config, true);\n        w.protoUI({\n            name: \"jetapp\",\n            $init: function (cfg) {\n                this.$app = new this.app(cfg);\n                var id = w.uid().toString();\n                cfg.body = { id: id };\n                this.$ready.push(function () {\n                    this.callEvent(\"onInit\", [this.$app]);\n                    this.$app.render({ id: id });\n                });\n            }\n        }, w.ui.proxy, w.EventSystem);\n    }\n    var JetApp = (function (_super) {\n        __extends(JetApp, _super);\n        function JetApp(config) {\n            var _this = this;\n            config.router = config.router || HashRouter;\n            _this = _super.call(this, config) || this;\n            patch(_this.webix);\n            return _this;\n        }\n        JetApp.prototype.require = function (type, url) {\n            return require(type + \"/\" + url);\n        };\n        return JetApp;\n    }(JetAppBase));\n    var UrlRouter = (function (_super) {\n        __extends(UrlRouter, _super);\n        function UrlRouter() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        UrlRouter.prototype._detectPrefix = function () {\n            this.prefix = \"\";\n            this.sufix = this.config.routerPrefix || \"\";\n        };\n        UrlRouter.prototype._getRaw = function () {\n            return document.location.pathname + (document.location.search || \"\");\n        };\n        return UrlRouter;\n    }(HashRouter));\n    var EmptyRouter = (function () {\n        function EmptyRouter(cb, _$config) {\n            this.path = \"\";\n            this.cb = cb;\n        }\n        EmptyRouter.prototype.set = function (path, config) {\n            var _this = this;\n            this.path = path;\n            if (!config || !config.silent) {\n                setTimeout(function () { return _this.cb(path); }, 1);\n            }\n        };\n        EmptyRouter.prototype.get = function () {\n            return this.path;\n        };\n        return EmptyRouter;\n    }());\n    function UnloadGuard(app, view, config) {\n        view.on(app, \"app:guard\", function (_$url, point, promise) {\n            if (point === view || point.contains(view)) {\n                var res_1 = config();\n                if (res_1 === false) {\n                    promise.confirm = Promise.reject(new NavigationBlocked());\n                }\n                else {\n                    promise.confirm = promise.confirm.then(function () { return res_1; });\n                }\n            }\n        });\n    }\n    function has(store, key) {\n        return Object.prototype.hasOwnProperty.call(store, key);\n    }\n    function forEach(obj, handler, context) {\n        for (var key in obj) {\n            if (has(obj, key)) {\n                handler.call((context || obj), obj[key], key, obj);\n            }\n        }\n    }\n    function trim(str) {\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n    function warn(message) {\n        message = 'Warning: ' + message;\n        if (typeof console !== 'undefined') {\n            console.error(message);\n        }\n        try {\n            throw new Error(message);\n        }\n        catch (x) { }\n    }\n    var replace = String.prototype.replace;\n    var split = String.prototype.split;\n    var delimiter = '||||';\n    var russianPluralGroups = function (n) {\n        var end = n % 10;\n        if (n !== 11 && end === 1) {\n            return 0;\n        }\n        if (2 <= end && end <= 4 && !(n >= 12 && n <= 14)) {\n            return 1;\n        }\n        return 2;\n    };\n    var pluralTypes = {\n        arabic: function (n) {\n            if (n < 3) {\n                return n;\n            }\n            var lastTwo = n % 100;\n            if (lastTwo >= 3 && lastTwo <= 10)\n                return 3;\n            return lastTwo >= 11 ? 4 : 5;\n        },\n        bosnian_serbian: russianPluralGroups,\n        chinese: function () { return 0; },\n        croatian: russianPluralGroups,\n        french: function (n) { return n > 1 ? 1 : 0; },\n        german: function (n) { return n !== 1 ? 1 : 0; },\n        russian: russianPluralGroups,\n        lithuanian: function (n) {\n            if (n % 10 === 1 && n % 100 !== 11) {\n                return 0;\n            }\n            return n % 10 >= 2 && n % 10 <= 9 && (n % 100 < 11 || n % 100 > 19) ? 1 : 2;\n        },\n        czech: function (n) {\n            if (n === 1) {\n                return 0;\n            }\n            return (n >= 2 && n <= 4) ? 1 : 2;\n        },\n        polish: function (n) {\n            if (n === 1) {\n                return 0;\n            }\n            var end = n % 10;\n            return 2 <= end && end <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2;\n        },\n        icelandic: function (n) { return (n % 10 !== 1 || n % 100 === 11) ? 1 : 0; },\n        slovenian: function (n) {\n            var lastTwo = n % 100;\n            if (lastTwo === 1) {\n                return 0;\n            }\n            if (lastTwo === 2) {\n                return 1;\n            }\n            if (lastTwo === 3 || lastTwo === 4) {\n                return 2;\n            }\n            return 3;\n        }\n    };\n    var pluralTypeToLanguages = {\n        arabic: ['ar'],\n        bosnian_serbian: ['bs-Latn-BA', 'bs-Cyrl-BA', 'srl-RS', 'sr-RS'],\n        chinese: ['id', 'id-ID', 'ja', 'ko', 'ko-KR', 'lo', 'ms', 'th', 'th-TH', 'zh'],\n        croatian: ['hr', 'hr-HR'],\n        german: ['fa', 'da', 'de', 'en', 'es', 'fi', 'el', 'he', 'hi-IN', 'hu', 'hu-HU', 'it', 'nl', 'no', 'pt', 'sv', 'tr'],\n        french: ['fr', 'tl', 'pt-br'],\n        russian: ['ru', 'ru-RU'],\n        lithuanian: ['lt'],\n        czech: ['cs', 'cs-CZ', 'sk'],\n        polish: ['pl'],\n        icelandic: ['is'],\n        slovenian: ['sl-SL']\n    };\n    function langToTypeMap(mapping) {\n        var ret = {};\n        forEach(mapping, function (langs, type) {\n            forEach(langs, function (lang) {\n                ret[lang] = type;\n            });\n        });\n        return ret;\n    }\n    function pluralTypeName(locale) {\n        var langToPluralType = langToTypeMap(pluralTypeToLanguages);\n        return langToPluralType[locale]\n            || langToPluralType[split.call(locale, /-/, 1)[0]]\n            || langToPluralType.en;\n    }\n    function pluralTypeIndex(locale, count) {\n        return pluralTypes[pluralTypeName(locale)](count);\n    }\n    function escape(token) {\n        return token.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    }\n    function constructTokenRegex(opts) {\n        var prefix = (opts && opts.prefix) || '%{';\n        var suffix = (opts && opts.suffix) || '}';\n        if (prefix === delimiter || suffix === delimiter) {\n            throw new RangeError('\"' + delimiter + '\" token is reserved for pluralization');\n        }\n        return new RegExp(escape(prefix) + '(.*?)' + escape(suffix), 'g');\n    }\n    var dollarRegex = /\\$/g;\n    var dollarBillsYall = '$$';\n    var defaultTokenRegex = /%\\{(.*?)\\}/g;\n    function transformPhrase(phrase, substitutions, locale, tokenRegex) {\n        if (typeof phrase !== 'string') {\n            throw new TypeError('Polyglot.transformPhrase expects argument #1 to be string');\n        }\n        if (substitutions == null) {\n            return phrase;\n        }\n        var result = phrase;\n        var interpolationRegex = tokenRegex || defaultTokenRegex;\n        var options = typeof substitutions === 'number' ? { smart_count: substitutions } : substitutions;\n        if (options.smart_count != null && result) {\n            var texts = split.call(result, delimiter);\n            result = trim(texts[pluralTypeIndex(locale || 'en', options.smart_count)] || texts[0]);\n        }\n        result = replace.call(result, interpolationRegex, function (expression, argument) {\n            if (!has(options, argument) || options[argument] == null) {\n                return expression;\n            }\n            return replace.call(options[argument], dollarRegex, dollarBillsYall);\n        });\n        return result;\n    }\n    function Polyglot(options) {\n        var opts = options || {};\n        this.phrases = {};\n        this.extend(opts.phrases || {});\n        this.currentLocale = opts.locale || 'en';\n        var allowMissing = opts.allowMissing ? transformPhrase : null;\n        this.onMissingKey = typeof opts.onMissingKey === 'function' ? opts.onMissingKey : allowMissing;\n        this.warn = opts.warn || warn;\n        this.tokenRegex = constructTokenRegex(opts.interpolation);\n    }\n    Polyglot.prototype.locale = function (newLocale) {\n        if (newLocale)\n            this.currentLocale = newLocale;\n        return this.currentLocale;\n    };\n    Polyglot.prototype.extend = function (morePhrases, prefix) {\n        forEach(morePhrases, function (phrase, key) {\n            var prefixedKey = prefix ? prefix + '.' + key : key;\n            if (typeof phrase === 'object') {\n                this.extend(phrase, prefixedKey);\n            }\n            else {\n                this.phrases[prefixedKey] = phrase;\n            }\n        }, this);\n    };\n    Polyglot.prototype.unset = function (morePhrases, prefix) {\n        if (typeof morePhrases === 'string') {\n            delete this.phrases[morePhrases];\n        }\n        else {\n            forEach(morePhrases, function (phrase, key) {\n                var prefixedKey = prefix ? prefix + '.' + key : key;\n                if (typeof phrase === 'object') {\n                    this.unset(phrase, prefixedKey);\n                }\n                else {\n                    delete this.phrases[prefixedKey];\n                }\n            }, this);\n        }\n    };\n    Polyglot.prototype.clear = function () {\n        this.phrases = {};\n    };\n    Polyglot.prototype.replace = function (newPhrases) {\n        this.clear();\n        this.extend(newPhrases);\n    };\n    Polyglot.prototype.t = function (key, options) {\n        var phrase, result;\n        var opts = options == null ? {} : options;\n        if (typeof this.phrases[key] === 'string') {\n            phrase = this.phrases[key];\n        }\n        else if (typeof opts._ === 'string') {\n            phrase = opts._;\n        }\n        else if (this.onMissingKey) {\n            var onMissingKey = this.onMissingKey;\n            result = onMissingKey(key, opts, this.currentLocale, this.tokenRegex);\n        }\n        else {\n            this.warn('Missing translation for key: \"' + key + '\"');\n            result = key;\n        }\n        if (typeof phrase === 'string') {\n            result = transformPhrase(phrase, opts, this.currentLocale, this.tokenRegex);\n        }\n        return result;\n    };\n    Polyglot.prototype.has = function (key) {\n        return has(this.phrases, key);\n    };\n    Polyglot.transformPhrase = function transform(phrase, substitutions, locale) {\n        return transformPhrase(phrase, substitutions, locale);\n    };\n    var webixPolyglot = Polyglot;\n    function Locale(app, _view, config) {\n        config = config || {};\n        var storage = config.storage;\n        var lang = storage ? (storage.get(\"lang\") || \"en\") : (config.lang || \"en\");\n        function setLangData(name, data, silent) {\n            if (data.__esModule) {\n                data = data.default;\n            }\n            var pconfig = { phrases: data };\n            if (config.polyglot) {\n                app.webix.extend(pconfig, config.polyglot);\n            }\n            var poly = service.polyglot = new webixPolyglot(pconfig);\n            poly.locale(name);\n            service._ = app.webix.bind(poly.t, poly);\n            lang = name;\n            if (storage) {\n                storage.put(\"lang\", lang);\n            }\n            if (config.webix) {\n                var locName = config.webix[name];\n                if (locName) {\n                    app.webix.i18n.setLocale(locName);\n                }\n            }\n            if (!silent) {\n                return app.refresh();\n            }\n            return Promise.resolve();\n        }\n        function getLang() { return lang; }\n        function setLang(name, silent) {\n            if (config.path === false) {\n                return;\n            }\n            var path = (config.path ? config.path + \"/\" : \"\") + name;\n            var data = app.require(\"jet-locales\", path);\n            setLangData(name, data, silent);\n        }\n        var service = {\n            getLang: getLang, setLang: setLang, setLangData: setLangData, _: null, polyglot: null\n        };\n        app.setService(\"locale\", service);\n        setLang(lang, true);\n    }\n    function show(view, config, value) {\n        var _a;\n        if (config.urls) {\n            value = config.urls[value] || value;\n        }\n        else if (config.param) {\n            value = (_a = {}, _a[config.param] = value, _a);\n        }\n        view.show(value);\n    }\n    function Menu(app, view, config) {\n        var frame = view.getSubViewInfo().parent;\n        var ui = view.$$(config.id || config);\n        var silent = false;\n        ui.attachEvent(\"onchange\", function () {\n            if (!silent) {\n                show(frame, config, this.getValue());\n            }\n        });\n        ui.attachEvent(\"onafterselect\", function () {\n            if (!silent) {\n                var id = null;\n                if (ui.setValue) {\n                    id = this.getValue();\n                }\n                else if (ui.getSelectedId) {\n                    id = ui.getSelectedId();\n                }\n                show(frame, config, id);\n            }\n        });\n        view.on(app, \"app:route\", function () {\n            var name = \"\";\n            if (config.param) {\n                name = view.getParam(config.param, true);\n            }\n            else {\n                var segment = frame.getUrl()[1];\n                if (segment) {\n                    name = segment.page;\n                }\n            }\n            if (name) {\n                silent = true;\n                if (ui.setValue && ui.getValue() !== name) {\n                    ui.setValue(name);\n                }\n                else if (ui.select && ui.exists(name) && ui.getSelectedId() !== name) {\n                    ui.select(name);\n                }\n                silent = false;\n            }\n        });\n    }\n    var baseicons = {\n        good: \"check\",\n        error: \"warning\",\n        saving: \"refresh fa-spin\"\n    };\n    var basetext = {\n        good: \"Ok\",\n        error: \"Error\",\n        saving: \"Connecting...\"\n    };\n    function Status(app, view, config) {\n        var status = \"good\";\n        var count = 0;\n        var iserror = false;\n        var expireDelay = config.expire;\n        if (!expireDelay && expireDelay !== false) {\n            expireDelay = 2000;\n        }\n        var texts = config.texts || basetext;\n        var icons = config.icons || baseicons;\n        if (typeof config === \"string\") {\n            config = { target: config };\n        }\n        function refresh(content) {\n            var area = view.$$(config.target);\n            if (area) {\n                if (!content) {\n                    content = \"<div class='status_\" +\n                        status +\n                        \"'><span class='webix_icon fa-\" +\n                        icons[status] + \"'></span> \" + texts[status] + \"</div>\";\n                }\n                area.setHTML(content);\n            }\n        }\n        function success() {\n            count--;\n            setStatus(\"good\");\n        }\n        function fail(err) {\n            count--;\n            setStatus(\"error\", err);\n        }\n        function start(promise) {\n            count++;\n            setStatus(\"saving\");\n            if (promise && promise.then) {\n                promise.then(success, fail);\n            }\n        }\n        function getStatus() {\n            return status;\n        }\n        function hideStatus() {\n            if (count === 0) {\n                refresh(\" \");\n            }\n        }\n        function setStatus(mode, err) {\n            if (count < 0) {\n                count = 0;\n            }\n            if (mode === \"saving\") {\n                status = \"saving\";\n                refresh();\n            }\n            else {\n                iserror = (mode === \"error\");\n                if (count === 0) {\n                    status = iserror ? \"error\" : \"good\";\n                    if (iserror) {\n                        app.error(\"app:error:server\", [err.responseText || err]);\n                    }\n                    else {\n                        if (expireDelay) {\n                            setTimeout(hideStatus, expireDelay);\n                        }\n                    }\n                    refresh();\n                }\n            }\n        }\n        function track(data) {\n            var dp = app.webix.dp(data);\n            if (dp) {\n                view.on(dp, \"onAfterDataSend\", start);\n                view.on(dp, \"onAfterSaveError\", function (_id, _obj, response) { return fail(response); });\n                view.on(dp, \"onAfterSave\", success);\n            }\n        }\n        app.setService(\"status\", {\n            getStatus: getStatus,\n            setStatus: setStatus,\n            track: track\n        });\n        if (config.remote) {\n            view.on(app.webix, \"onRemoteCall\", start);\n        }\n        if (config.ajax) {\n            view.on(app.webix, \"onBeforeAjax\", function (_mode, _url, _data, _request, _headers, _files, promise) {\n                start(promise);\n            });\n        }\n        if (config.data) {\n            track(config.data);\n        }\n    }\n    function Theme(app, _view, config) {\n        config = config || {};\n        var storage = config.storage;\n        var theme = storage ?\n            (storage.get(\"theme\") || \"flat-default\")\n            :\n                (config.theme || \"flat-default\");\n        var service = {\n            getTheme: function () { return theme; },\n            setTheme: function (name, silent) {\n                var parts = name.split(\"-\");\n                var links = document.getElementsByTagName(\"link\");\n                for (var i = 0; i < links.length; i++) {\n                    var lname = links[i].getAttribute(\"title\");\n                    if (lname) {\n                        if (lname === name || lname === parts[0]) {\n                            links[i].disabled = false;\n                        }\n                        else {\n                            links[i].disabled = true;\n                        }\n                    }\n                }\n                app.webix.skin.set(parts[0]);\n                app.webix.html.removeCss(document.body, \"theme-\" + theme);\n                app.webix.html.addCss(document.body, \"theme-\" + name);\n                theme = name;\n                if (storage) {\n                    storage.put(\"theme\", name);\n                }\n                if (!silent) {\n                    app.refresh();\n                }\n            }\n        };\n        app.setService(\"theme\", service);\n        service.setTheme(theme, true);\n    }\n    function copyParams(data, url, route) {\n        for (var i = 0; i < route.length; i++) {\n            data[route[i]] = url[i + 1] ? url[i + 1].page : \"\";\n        }\n    }\n    function UrlParam(app, view, config) {\n        var route = config.route || config;\n        var data = {};\n        view.on(app, \"app:urlchange\", function (subview, segment) {\n            if (view === subview) {\n                copyParams(data, segment.suburl(), route);\n                segment.size(route.length + 1);\n            }\n        });\n        var os = view.setParam;\n        var og = view.getParam;\n        view.setParam = function (name, value, show) {\n            var index = route.indexOf(name);\n            if (index >= 0) {\n                data[name] = value;\n                this._segment.update(\"\", value, index + 1);\n                if (show) {\n                    return view.show(null);\n                }\n            }\n            else {\n                return os.call(this, name, value, show);\n            }\n        };\n        view.getParam = function (key, mode) {\n            var val = data[key];\n            if (typeof val !== \"undefined\") {\n                return val;\n            }\n            return og.call(this, key, mode);\n        };\n        copyParams(data, view.getUrl(), route);\n    }\n    function User(app, _view, config) {\n        config = config || {};\n        var login = config.login || \"/login\";\n        var logout = config.logout || \"/logout\";\n        var afterLogin = config.afterLogin || app.config.start;\n        var afterLogout = config.afterLogout || \"/login\";\n        var ping = config.ping || 5 * 60 * 1000;\n        var model = config.model;\n        var user = config.user;\n        var service = {\n            getUser: function () {\n                return user;\n            },\n            getStatus: function (server) {\n                if (!server) {\n                    return user !== null;\n                }\n                return model.status().catch(function () { return null; }).then(function (data) {\n                    user = data;\n                });\n            },\n            login: function (name, pass) {\n                return model.login(name, pass).then(function (data) {\n                    user = data;\n                    if (!data) {\n                        throw new Error(\"Access denied\");\n                    }\n                    app.callEvent(\"app:user:login\", [user]);\n                    app.show(afterLogin);\n                });\n            },\n            logout: function () {\n                user = null;\n                return model.logout().then(function (res) {\n                    app.callEvent(\"app:user:logout\", []);\n                    return res;\n                });\n            }\n        };\n        function canNavigate(url, obj) {\n            if (url === logout) {\n                service.logout();\n                obj.redirect = afterLogout;\n            }\n            else if (url !== login && !service.getStatus()) {\n                obj.redirect = login;\n            }\n        }\n        app.setService(\"user\", service);\n        app.attachEvent(\"app:guard\", function (url, _$root, obj) {\n            if (config.public && config.public(url)) {\n                return true;\n            }\n            if (typeof user === \"undefined\") {\n                obj.confirm = service.getStatus(true).then(function () { return canNavigate(url, obj); });\n            }\n            return canNavigate(url, obj);\n        });\n        if (ping) {\n            setInterval(function () { return service.getStatus(true); }, ping);\n        }\n    }\n    var webix$1 = window.webix;\n    if (webix$1) {\n        patch(webix$1);\n    }\n    var plugins = {\n        UnloadGuard: UnloadGuard, Locale: Locale, Menu: Menu, Theme: Theme, User: User, Status: Status, UrlParam: UrlParam\n    };\n    var w = window;\n    if (!w.Promise) {\n        w.Promise = w.webix.promise;\n    }\n\n    var index = 1;\n    function uid() {\n        return index++;\n    }\n    var empty = undefined;\n    function ignoreInitial(code) {\n        var init = false;\n        return function () {\n            if (init)\n                return code.apply(this, arguments);\n            else\n                init = true;\n        };\n    }\n    var context = null;\n    function link(source, target, key) {\n        Object.defineProperty(target, key, {\n            get: function () { return source[key]; },\n            set: function (value) { return (source[key] = value); },\n        });\n    }\n    function createState(data, config) {\n        config = config || {};\n        var handlers = {};\n        var out = {};\n        var observe = function (mask, handler) {\n            var key = uid();\n            handlers[key] = { mask: mask, handler: handler };\n            if (mask === \"*\")\n                handler(out, empty, mask);\n            else\n                handler(out[mask], empty, mask);\n            return key;\n        };\n        var observeEnd = function (id) {\n            delete handlers[id];\n        };\n        var queue = [];\n        var waitInQueue = false;\n        var batch = function (code) {\n            if (typeof code !== \"function\") {\n                var values_1 = code;\n                code = function () {\n                    for (var key in values_1)\n                        out[key] = values_1[key];\n                };\n            }\n            waitInQueue = true;\n            code(out);\n            waitInQueue = false;\n            while (queue.length) {\n                var obj = queue.shift();\n                notify.apply(this, obj);\n            }\n        };\n        var notify = function (key, old, value, meta) {\n            if (waitInQueue) {\n                queue.push([key, old, value, meta]);\n                return;\n            }\n            var list = Object.keys(handlers);\n            for (var i = 0; i < list.length; i++) {\n                var obj = handlers[list[i]];\n                if (!obj)\n                    continue;\n                if (obj.mask === \"*\" || obj.mask === key) {\n                    obj.handler(value, old, key, meta);\n                }\n            }\n        };\n        for (var key2 in data) {\n            if (data.hasOwnProperty(key2)) {\n                var test = data[key2];\n                if (config.nested && typeof test === \"object\" && test) {\n                    out[key2] = createState(test, config);\n                }\n                else {\n                    reactive(out, test, key2, notify);\n                }\n            }\n        }\n        Object.defineProperty(out, \"$changes\", {\n            value: {\n                attachEvent: observe,\n                detachEvent: observeEnd,\n            },\n            enumerable: false,\n            configurable: false,\n        });\n        Object.defineProperty(out, \"$observe\", {\n            value: observe,\n            enumerable: false,\n            configurable: false,\n        });\n        Object.defineProperty(out, \"$batch\", {\n            value: batch,\n            enumerable: false,\n            configurable: false,\n        });\n        return out;\n    }\n    function reactive(obj, val, key, notify) {\n        Object.defineProperty(obj, key, {\n            get: function () {\n                return val;\n            },\n            set: function (value) {\n                var changed = false;\n                if (val === null || value === null) {\n                    changed = val !== value;\n                }\n                else {\n                    changed = val.valueOf() != value.valueOf();\n                }\n                if (changed) {\n                    var old = val;\n                    val = value;\n                    notify(key, old, value, context);\n                }\n            },\n            enumerable: true,\n            configurable: false,\n        });\n    }\n\n    var ActionsPopupView = (function (_super) {\n        __extends(ActionsPopupView, _super);\n        function ActionsPopupView() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        ActionsPopupView.prototype.config = function () {\n            var _this = this;\n            var _ = this.app.getService(\"locale\")._;\n            return {\n                view: \"popup\",\n                point: false,\n                body: {\n                    view: \"list\",\n                    yCount: 4,\n                    width: 120,\n                    borderless: true,\n                    data: [\n                        { id: \"edit\", value: _(\"Edit\") },\n                        { id: \"add-filter\", value: _(\"Add Filter\") },\n                        { id: \"add-group\", value: _(\"Add Group\") },\n                        { id: \"delete\", value: _(\"Delete\") },\n                    ],\n                    click: function (id) {\n                        _this.app.callEvent(\"action\", [id, _this.Item]);\n                        _this.Hide();\n                    },\n                },\n            };\n        };\n        ActionsPopupView.prototype.Hide = function () {\n            this.getRoot().hide();\n        };\n        ActionsPopupView.prototype.Show = function (node, item) {\n            this.Item = item;\n            var pos = webix.html.offset(node);\n            this.getRoot().show({\n                x: pos.x + pos.width + webix.skin.$active.dataPadding,\n                y: pos.y - 10,\n            });\n        };\n        return ActionsPopupView;\n    }(JetView));\n\n    var menuRight = \"<span style='float:right' class='webix_icon action-menu wxi-dots'></span>\";\n    var menuClose = \"<span style='float:right' class='webix_icon action-close wxi-close'></span>\";\n\n    var BaseView = (function (_super) {\n        __extends(BaseView, _super);\n        function BaseView() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        BaseView.prototype.GetButton = function () {\n            var _this = this;\n            var _ = this.app.getService(\"locale\")._;\n            var button = {\n                view: \"button\",\n                value: _(\"Add filter\"),\n                localId: \"button\",\n                css: \"webix_primary\",\n                click: function () { return _this.Add(null, null); },\n            };\n            return button;\n        };\n        BaseView.prototype.GetList = function () {\n            var _this = this;\n            var _ = this.app.getService(\"locale\")._;\n            var simple = this.getParam(\"simple\");\n            var icon = simple ? menuClose : menuRight;\n            var AND = _(\"and\");\n            var OR = _(\"or\");\n            var GLUE = function (obj) { return (obj.glue == \"and\" ? AND : OR); };\n            var list = {\n                view: \"tree\",\n                borderless: true,\n                localId: \"list\",\n                glue: \"and\",\n                css: \"wbq-query_list\",\n                scheme: {\n                    $serialize: function (obj) {\n                        if (obj.group) {\n                            return { group: obj.group, glue: obj.glue };\n                        }\n                        var out = {\n                            glue: obj.glue,\n                            field: obj.field,\n                            condition: obj.condition,\n                        };\n                        if (obj.includes && obj.includes.length)\n                            out.includes = obj.includes;\n                        return out;\n                    },\n                    $init: function (obj) {\n                        if (obj.group) {\n                            obj.$css = \"group\";\n                            obj.open = true;\n                        }\n                    },\n                },\n                type: {\n                    template: function (obj) {\n                        if (obj.group) {\n                            var editCss = _this.DisableSwitch\n                                ? \"wbq-filter_join_disabled\"\n                                : \"\";\n                            return \"<div class='wbq-filter_join wbq-filter_join_\" + obj.glue + \" \" + editCss + \"'>\" + GLUE(obj) + \"</div>\";\n                        }\n                        return (_this.Template(obj, _this.app.config.fields, icon, _) +\n                            (\"<div class='wbq-filter_join wbq-filter_join_\" + obj.glue + \"'>\" + GLUE(obj) + \"</div>\"));\n                    },\n                },\n                onClick: {\n                    \"action-menu\": function (e, id) {\n                        this.$scope.Actions.Show(e.target, id);\n                    },\n                    \"action-close\": function (e, id) {\n                        _this.Delete(id);\n                    },\n                    \"wbq-filter_join\": function (e, id) {\n                        _this.SwitchGlue(id);\n                    },\n                },\n                on: {\n                    onItemDblClick: function (id) {\n                        _this.EditStart(id);\n                    },\n                },\n            };\n            return list;\n        };\n        BaseView.prototype.init = function () {\n            var _this = this;\n            this.Actions = this.ui(ActionsPopupView);\n            this.on(this.app, \"applyFilter\", function (v) { return _this.EditStop(v); });\n            this.on(this.app, \"action\", function (type, id) {\n                if (type === \"delete\") {\n                    _this.Delete(id);\n                }\n                else if (type === \"add-filter\") {\n                    _this.Add(null, id);\n                }\n                else if (type === \"add-group\") {\n                    _this.AddGroup(null, id);\n                }\n                else if (type === \"edit\") {\n                    webix.delay(function () { return _this.EditStart(id); });\n                }\n            });\n            this.State = this.getParam(\"state\");\n            this.on(this.State.$changes, \"value\", function (v) {\n                _this.LastValue = JSON.stringify(v);\n                _this.EditStop();\n                _this.$$(\"list\").clearAll();\n                if (v) {\n                    _this.$$(\"list\").parse(_this.ConvertTo(v));\n                }\n            });\n        };\n        BaseView.prototype.ConvertTo = function (v, glue) {\n            var _this = this;\n            if (v.rules) {\n                var data = v.rules.map(function (a) { return _this.ConvertTo(a, v.glue); });\n                if (!glue)\n                    return data;\n                return { group: true, glue: glue, data: data };\n            }\n            var out = __assign(__assign({}, v), { glue: glue });\n            return out;\n        };\n        BaseView.prototype.ConvertFrom = function (id, source) {\n            var _this = this;\n            var glue = \"and\";\n            var branch = source.getBranch(id);\n            var rules = branch.map(function (_a) {\n                var id = _a.id, field = _a.field, type = _a.type, condition = _a.condition, includes = _a.includes;\n                if (field)\n                    return { field: field, type: type, condition: condition, includes: includes };\n                return _this.ConvertFrom(id, source);\n            });\n            if (!rules.length)\n                return null;\n            glue = branch[0].glue;\n            return { glue: glue, rules: rules };\n        };\n        BaseView.prototype.Add = function (obj, after) {\n            this.EditStop();\n            obj = obj || { field: \"\" };\n            var list = this.$$(\"list\");\n            var parent = after ? list.getParentId(after) : 0;\n            var index = after ? list.getBranchIndex(after) + 1 : -1;\n            if (!after && list.count())\n                after = list.getFirstId();\n            var glue = after ? list.getItem(after).glue : list.config.glue;\n            obj.glue = glue;\n            var id = list.add(obj, index, parent);\n            this.EditStart(id);\n            this.CreateMode = true;\n        };\n        BaseView.prototype.SwitchGlue = function (id) {\n            this.EditStop();\n            var list = this.$$(\"list\");\n            var branch = list.data.getBranch(list.getParentId(id));\n            for (var i = 0; i < branch.length; i++) {\n                list.updateItem(branch[i].id, {\n                    glue: branch[i].glue == \"and\" ? \"or\" : \"and\",\n                });\n            }\n            this.Save();\n        };\n        BaseView.prototype.AddGroup = function (obj, after) {\n            this.EditStop();\n            obj = obj || {};\n            var list = this.$$(\"list\");\n            var parent = after ? list.getParentId(after) : 0;\n            var index = after ? list.getBranchIndex(after) + 1 : -1;\n            var node = { id: webix.uid(), group: true };\n            var glue = after ? list.getItem(after).glue : list.config.glue;\n            node.glue = glue;\n            obj.glue = node.glue == \"and\" ? \"or\" : \"and\";\n            this.DisableSwitch = true;\n            list.add(node, index, parent);\n            var id = list.add(obj, null, node.id);\n            this.EditStart(id);\n            this.DisableSwitch = false;\n            this.CreateMode = true;\n        };\n        BaseView.prototype.Delete = function (id) {\n            this.EditStop();\n            this.DeleteSilent(id);\n            this.Save();\n        };\n        BaseView.prototype.DeleteSilent = function (id) {\n            var list = this.$$(\"list\");\n            if (!list.exists(id))\n                return null;\n            var parent = list.getParentId(id);\n            list.remove(id);\n            var branch = list.data.branch[parent];\n            if (parent && !branch) {\n                this.DeleteSilent(parent);\n            }\n            else if (branch.length == 1 && list.getItem(branch[0]).group) {\n                var sub = branch[0];\n                if (parent) {\n                    var grand = list.getParentId(parent);\n                    var pIndex = list.getBranchIndex(parent, grand);\n                    list.move(sub, pIndex, list, { parent: grand });\n                    this.DeleteSilent(parent);\n                }\n                else {\n                    var pIndex = list.getBranchIndex(sub, 0);\n                    var kids = [].concat(list.data.branch[sub]);\n                    list.move(kids, pIndex, list, { parent: 0 });\n                    this.DeleteSilent(sub);\n                }\n            }\n        };\n        BaseView.prototype.EditStop = function (v) {\n            if (!this.Active)\n                return;\n            var list = this.$$(\"list\");\n            if (!v) {\n                if (this.CreateMode)\n                    this.DeleteSilent(this.ActiveId);\n                else\n                    list.refresh(this.ActiveId);\n            }\n            else {\n                v = v || this.Active.GetValue();\n                v.includes = v.includes || [];\n                list.updateItem(this.ActiveId, __assign({}, v));\n            }\n            var t = this.Active;\n            this.Active = null;\n            this.ActiveId = null;\n            t.destructor();\n            this.Save();\n        };\n        BaseView.prototype.Save = function () {\n            var v = this.ConvertFrom(0, this.$$(\"list\").data);\n            var asString = JSON.stringify(v);\n            if (this.LastValue !== asString) {\n                this.State.value = v;\n            }\n        };\n        BaseView.prototype.Template = function (obj, fields, icon, _) {\n            var op = \"&nbsp;\";\n            var field = fields.find(function (a) { return a.id === obj.field; }) || { value: \"\" };\n            if (obj.includes && obj.includes.length) {\n                op = _(\"in\") + \" \";\n                for (var i = 0; i < obj.includes.length; i++) {\n                    op +=\n                        (i > 0 ? \", \" : \"\") +\n                            (\"<span class='wbq-field-value'>\" + obj.includes[i] + \"</span>\");\n                }\n            }\n            else {\n                if (obj.condition && obj.condition.type) {\n                    op = _(obj.condition.type) + \" <span class='wbq-field-value'>\" + this.Format(obj.condition.filter, field.format, field.type) + \"</span>\";\n                }\n            }\n            return \"<span class='wbq-field-box'><span class='wbq-field-name'>\" + field.value + \"</span> \" + op + \" </span>\" + icon;\n        };\n        BaseView.prototype.Format = function (value, format, type) {\n            if (!value)\n                return \"\";\n            if (value.start)\n                value =\n                    this.Format(value.start, format, type) +\n                        (value.end ? \" - \" + this.Format(value.end, format, type) : \"\");\n            else {\n                var parser = format || (type == \"date\" ? webix.i18n.dateFormatStr : null);\n                if (parser)\n                    value = parser(value);\n            }\n            return value;\n        };\n        return BaseView;\n    }(JetView));\n\n    var FilterView = (function (_super) {\n        __extends(FilterView, _super);\n        function FilterView() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        FilterView.prototype.config = function () {\n            var _this = this;\n            var _ = this.app.getService(\"locale\")._;\n            var fieldselect = {\n                view: \"richselect\",\n                options: [],\n                localId: \"field\",\n                on: {\n                    onChange: function () { return _this.AdjustToField(); },\n                },\n            };\n            var filter = { localId: \"filter\" };\n            var bottombar = {\n                type: \"clean\",\n                cols: [\n                    {\n                        view: \"button\",\n                        value: _(\"Cancel\"),\n                        width: 100,\n                        click: function () { return _this.Hide(); },\n                    },\n                    {},\n                    {\n                        view: \"button\",\n                        value: _(\"Apply\"),\n                        width: 100,\n                        css: \"webix_primary\",\n                        click: function () { return _this.ApplyFilter(); },\n                    },\n                ],\n            };\n            return {\n                padding: 10,\n                margin: 6,\n                css: \"webix_shadow_small\",\n                rows: [fieldselect, filter, bottombar],\n            };\n        };\n        FilterView.prototype.GetField = function () {\n            var fselect = this.$$(\"field\");\n            return fselect.getList().getItem(fselect.getValue());\n        };\n        FilterView.prototype.AdjustToField = function () {\n            var field = this.GetField();\n            this.CreateFilter(field.id, field.type, field.format, field.conditions, this.$$(\"filter\"));\n        };\n        FilterView.prototype.CreateFilter = function (field, type, format, conditions, place) {\n            var ui = {\n                view: \"filter\",\n                localId: \"filter\",\n                conditions: conditions,\n                field: field,\n                mode: type,\n                template: function (o) {\n                    var str = o[field];\n                    var parser = format || (type == \"date\" ? webix.i18n.dateFormatStr : null);\n                    if (parser)\n                        str = parser(str);\n                    return str;\n                },\n                margin: 6,\n            };\n            var filter = webix.ui(ui, place);\n            var data = this.app.getService(\"backend\").data(field);\n            filter.parse(data);\n            return filter;\n        };\n        FilterView.prototype.ApplyFilter = function () {\n            this.app.callEvent(\"applyFilter\", [this.GetValue()]);\n        };\n        FilterView.prototype.GetValue = function () {\n            var field = this.GetField();\n            var rule = __assign(__assign({}, this.$$(\"filter\").getValue()), { field: field.id, type: field.type });\n            if (rule.condition.filter == \"\" &&\n                (!rule.includes || !rule.includes.length))\n                rule = null;\n            return rule;\n        };\n        FilterView.prototype.Hide = function () {\n            this.app.callEvent(\"applyFilter\", [null]);\n        };\n        FilterView.prototype.Show = function (value, fields) {\n            var fselect = this.$$(\"field\");\n            fselect.getList().parse(fields);\n            if (value.field) {\n                fselect.setValue(value.field);\n            }\n            else {\n                fselect.setValue(fields[0].id);\n            }\n            this.$$(\"filter\").setValue(webix.copy(value));\n        };\n        return FilterView;\n    }(JetView));\n\n    var FilterPopup = (function (_super) {\n        __extends(FilterPopup, _super);\n        function FilterPopup() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        FilterPopup.prototype.config = function () {\n            return {\n                view: \"popup\",\n                point: false,\n                body: { $subview: FilterView, name: \"body\" },\n            };\n        };\n        FilterPopup.prototype.Show = function (value, fields, at) {\n            var _this = this;\n            setTimeout(function () {\n                _this.getRoot().show(at);\n                _this.getSubView(\"body\").Show(value, fields);\n            }, 100);\n        };\n        return FilterPopup;\n    }(JetView));\n\n    var TopBarView = (function (_super) {\n        __extends(TopBarView, _super);\n        function TopBarView() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        TopBarView.prototype.config = function () {\n            var button = this.GetButton();\n            button.width = 100;\n            var list = this.GetList();\n            list.scroll = this.app.config.scroll !== false ? \"x\" : \"\";\n            list.borderless = true;\n            list.css = \"wbq-query_bar\";\n            var small = webix.skin.$name == \"mini\" || webix.skin.$name == \"compact\";\n            var padding = 8, height = 58;\n            if (small) {\n                padding = 4;\n                height = 50;\n            }\n            if (list.scroll)\n                height += webix.env.scrollSize;\n            return {\n                view: \"toolbar\",\n                paddingX: padding * 2,\n                paddingY: padding,\n                height: height,\n                borderless: true,\n                cols: [list, button],\n            };\n        };\n        TopBarView.prototype.EditStart = function (id) {\n            var _this = this;\n            this.EditStop();\n            var list = this.$$(\"list\");\n            this.ActiveId = id;\n            this.Active = this.ui(FilterPopup);\n            this.Active.getRoot().attachEvent(\"onHide\", function () {\n                if (_this.Active)\n                    _this.EditStop();\n            });\n            var at = webix.html.offset(list.getItemNode(id));\n            this.Active.Show(list.getItem(id), this.app.config.fields, at);\n            this.CreateMode = false;\n        };\n        return TopBarView;\n    }(BaseView));\n\n    var TopListView = (function (_super) {\n        __extends(TopListView, _super);\n        function TopListView() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        TopListView.prototype.config = function () {\n            return {\n                paddingX: 16,\n                paddingY: 8,\n                margin: 0,\n                rows: [this.GetButton(), this.GetList()],\n            };\n        };\n        TopListView.prototype.EditStart = function (id) {\n            var _this = this;\n            if (this.ActiveId && this.ActiveId == id)\n                return;\n            this.EditStop();\n            var list = this.$$(\"list\");\n            var container = list.getItemNode(id);\n            container.classList.add(\"active-editor\");\n            container.innerHTML = \"\";\n            this.ActiveId = id;\n            this.Active = this.ui(FilterView, { container: container });\n            this.$$(\"list\").attachEvent(\"onAfterRender\", function () { return _this.EditStop(); });\n            this.Active.Show(list.getItem(id), this.app.config.fields);\n            this.CreateMode = false;\n        };\n        return TopListView;\n    }(BaseView));\n\n    var views = { JetView: JetView };\n    views[\"actions\"] = ActionsPopupView;\n    views[\"bar\"] = TopBarView;\n    views[\"base\"] = BaseView;\n    views[\"filter\"] = FilterView;\n    views[\"list\"] = TopListView;\n    views[\"popup\"] = FilterPopup;\n\n    var en = {\n        \"Add filter\": \"Add filter\",\n        in: \"=\",\n        equal: \"=\",\n        notEqual: \"<>\",\n        less: \"<\",\n        greater: \">\",\n        greaterOrEqual: \">=\",\n        lessOrEqual: \"<=\",\n        contains: \"contains\",\n        notContains: \"not contains\",\n        beginsWith: \"begins\",\n        notBeginsWith: \"not begings\",\n        endsWith: \"ends\",\n        notEndsWith: \"not ends\",\n        between: \"between\",\n        notBetween: \"not between\",\n        and: \"and\",\n        or: \"or\",\n        Edit: \"Edit\",\n        \"Add Filter\": \"Add Filter\",\n        \"Add Group\": \"Add Group\",\n        Delete: \"Delete\",\n        Apply: \"Apply\",\n        Cancel: \"Cancel\",\n    };\n\n    var Backend = (function () {\n        function Backend(app) {\n            this._app = app;\n        }\n        Backend.prototype.data = function (field) {\n            var data = this._app.config.data;\n            if (typeof data == \"function\")\n                return Promise.resolve(data(field)).then(function (a) {\n                    return a.map(function (b) {\n                        var _a;\n                        return (_a = {}, _a[field] = b, _a);\n                    });\n                });\n            return Promise.resolve(data);\n        };\n        Backend.prototype.save = function (v) {\n            console.log(v);\n        };\n        return Backend;\n    }());\n\n    function query(query, fields) {\n        var ops = webix.filters;\n        var types = {};\n        fields.forEach(function (a) {\n            if (a.conditions)\n                a.conditions.forEach(function (op) {\n                    if (typeof op === \"object\") {\n                        ops[op.id] = op.handler;\n                    }\n                });\n            if (a.type)\n                types[a.id] = a.type;\n        });\n        return queryToFilter(query, ops, types);\n    }\n    function queryToFilter(query, ops, types) {\n        if (!query || !query.rules.length)\n            return function () { return true; };\n        var filters = query.rules.map(function (a) { return singleFilter(a, ops, types); });\n        return (query.glue === \"or\" ? glueOr : glueAnd)(filters);\n    }\n    function glueAnd(f) {\n        return function (v) {\n            for (var i = 0; i < f.length; i++) {\n                if (!f[i](v))\n                    return false;\n            }\n            return true;\n        };\n    }\n    function glueOr(f) {\n        return function (v) {\n            for (var i = 0; i < f.length; i++) {\n                if (f[i](v))\n                    return true;\n            }\n            return false;\n        };\n    }\n    function singleFilter(rule, ops, types) {\n        if (rule.rules) {\n            return queryToFilter(rule, ops, types);\n        }\n        return function (v) {\n            var test = v[rule.field];\n            if (rule.includes && rule.includes.length) {\n                return rule.includes.findIndex(function (a) { return a === test; }) !== -1;\n            }\n            if (!webix.isUndefined(test)) {\n                var con = rule.condition.type;\n                var filter = ops[con] || ops[types[rule.field]][con];\n                return filter(test, rule.condition.filter);\n            }\n            return false;\n        };\n    }\n\n    var App = (function (_super) {\n        __extends(App, _super);\n        function App(config) {\n            var _this = this;\n            var state = createState({\n                value: config.value || null,\n            });\n            var defaults = {\n                router: EmptyRouter,\n                version: \"10.0.9\",\n                debug: true,\n            };\n            _this = _super.call(this, __assign(__assign({}, defaults), config)) || this;\n            _this.config.start = config.type === \"bar\" ? \"/bar\" : \"/list\";\n            _this.config.params = { state: state, simple: config.simple === true };\n            _this.setService(\"backend\", new (_this.dynamic(Backend))(_this));\n            _this.use(plugins.Locale, _this.config.locale || {\n                lang: \"en\",\n                webix: {\n                    en: \"en-US\",\n                },\n            });\n            return _this;\n        }\n        App.prototype.dynamic = function (obj) {\n            return this.config.override ? this.config.override.get(obj) || obj : obj;\n        };\n        App.prototype.require = function (type, name) {\n            if (type === \"jet-views\")\n                return views[name];\n            else if (type === \"jet-locales\")\n                return locales[name];\n            return null;\n        };\n        App.prototype.getState = function () {\n            return this.config.params.state;\n        };\n        App.prototype.GetFilter = function () {\n            return query(this.config.params.state.value, this.config.fields);\n        };\n        return App;\n    }(JetApp));\n    webix.protoUI({\n        name: \"query\",\n        app: App,\n        getState: function () {\n            return this.$app.getState();\n        },\n        getService: function (name) {\n            return this.$app.getService(name);\n        },\n        $init: function () {\n            var _this = this;\n            var state = this.getState();\n            for (var key in state) {\n                link(state, this.config, key);\n            }\n            state.$changes.attachEvent(\"value\", ignoreInitial(function (v, o) { return _this.callEvent(\"onChange\", v, o); }));\n        },\n        getFilterFunction: function () {\n            return this.$app.GetFilter();\n        },\n    }, webix.ui.jetapp);\n    var services = { Backend: Backend };\n    var locales = { en: en };\n\n    exports.App = App;\n    exports.locales = locales;\n    exports.services = services;\n    exports.views = views;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","import { JetView } from \"webix-jet\";\nimport { bind } from \"jet-restate-bind\";\nimport \"../../helpers/inputlist\";\nimport { removeRight } from \"../../helpers/icons\";\n\nexport default class CommonView extends JetView {\n\tconfig() {\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\n\t\tlet form = {\n\t\t\tview: \"form\",\n\t\t\tscroll: \"auto\",\n\t\t\telementsConfig: {\n\t\t\t\tlabelWidth: 130,\n\t\t\t\tlabelPosition: \"top\",\n\t\t\t},\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\trows: [\n\t\t\t\t\t\t{ view: \"label\", label: _(\"Report name\") },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\tname: \"name\",\n\t\t\t\t\t\t\tlocalId: \"name\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\trows: [\n\t\t\t\t\t\t{ view: \"label\", label: _(\"Description\") },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\t\tlabelPosition: \"top\",\n\t\t\t\t\t\t\theight: 150,\n\t\t\t\t\t\t\tname: \"desc\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\trows: [\n\t\t\t\t\t\t{ view: \"label\", label: _(\"Data source\") },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"combo\",\n\t\t\t\t\t\t\tname: \"data\",\n\t\t\t\t\t\t\toptions: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"input-list\",\n\t\t\t\t\tname: \"joins\",\n\t\t\t\t\ttemplate: this.JoinListTemplate.bind(this),\n\t\t\t\t\tdata: [],\n\t\t\t\t\tautoheight: true,\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tonClick: {\n\t\t\t\t\t\twebix_rpt_action_remove: (ev, id) => this.RemoveJoin(id),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tlocalId: \"add\",\n\t\t\t\t\tlabel: _(\"Join data\"),\n\t\t\t\t\tclick: () => this.ShowJoins(),\n\t\t\t\t},\n\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tlabel: _(\"Delete report\"),\n\t\t\t\t\tlocalId: \"delete\",\n\t\t\t\t\tinputWidth: 170,\n\t\t\t\t\talign: \"left\",\n\t\t\t\t\tcss: \"webix_rpt_delete\",\n\t\t\t\t\tclick: () => this.app.callEvent(\"onMenuAction\", [null, \"delete\"]),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\treturn form;\n\t}\n\n\tinit() {\n\t\tconst els = this.getRoot().elements;\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.AppState = this.app.getParam(\"state\");\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tthis.Models = this.Local.getModels(true);\n\n\t\tconst keys = Object.keys(this.Models);\n\t\tconst combo = els.data;\n\t\tcombo.getList().parse(\n\t\t\tkeys.map(a => {\n\t\t\t\tconst m = this.Models[a];\n\t\t\t\treturn { id: m.id, value: m.name };\n\t\t\t})\n\t\t);\n\n\t\tbind(this.State, \"*\", this.getRoot(), this);\n\t\tthis.on(this.State.$changes, \"id\", v => this.ShowDeleteButton(v));\n\n\t\tthis.on(this.AppState.$changes, \"toolbar\", v => this.ShowDeleteButton(v));\n\n\t\tthis.SourcesList = this.ui({\n\t\t\tview: \"popup\",\n\t\t\tbody: {\n\t\t\t\tview: \"list\",\n\t\t\t\tautoheight: true,\n\t\t\t\ttype: {\n\t\t\t\t\ttemplate: this.JoinTemplate.bind(this),\n\t\t\t\t},\n\t\t\t\tclick: id => {\n\t\t\t\t\tconst item = this.SourcesList.getBody().getItem(id);\n\t\t\t\t\tthis.AddJoin(item);\n\t\t\t\t\tthis.SourcesList.hide();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tAddJoin(item) {\n\t\tconst batch = this.Local.addJoin(item.tid, this.State);\n\t\tbatch.joins = [...this.State.joins, item];\n\t\tthis.State.$batch(batch);\n\t}\n\n\tRemoveJoin(id) {\n\t\tconst next = this.Local.cleanLinkedModels(id, this.State);\n\n\t\tif (!next.block) this.State.$batch(next);\n\t\telse {\n\t\t\tif (next.block.filter)\n\t\t\t\twebix.alert({\n\t\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t\t\ttext: this._(\"Please delete the related query filter first\"),\n\t\t\t\t});\n\t\t\tif (next.block.group)\n\t\t\t\twebix.alert({\n\t\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t\t\ttext: this._(\"Please delete the related group rule first\"),\n\t\t\t\t});\n\t\t}\n\t}\n\n\tJoinTemplate(obj) {\n\t\tconst s = this.Models[obj.sid];\n\t\tconst t = this.Models[obj.tid];\n\t\tconst f = obj.sf || obj.tf;\n\t\tconst n = (obj.sf ? s : t).data.find(a => a.id === f).name;\n\t\treturn `${t.name} <span class='webix_rpt_sources_path'>${s.name}${\n\t\t\tobj.sf ? ` (${n})` : \"\"\n\t\t} -> ${t.name}${obj.tf ? ` (${n})` : \"\"}</span>`;\n\t}\n\n\tJoinListTemplate(obj) {\n\t\treturn removeRight + this.JoinTemplate(obj);\n\t}\n\n\tShowJoins() {\n\t\tconst data = this.Local.getLinkedModels(\n\t\t\t[this.State.data].concat(this.State.joins.map(a => a.tid)),\n\t\t\ttrue\n\t\t);\n\t\tif (!data.length) return;\n\n\t\tconst list = this.SourcesList.getBody();\n\n\t\tlist.clearAll();\n\t\tlist.parse(data);\n\n\t\tthis.SourcesList.show(this.$$(\"add\").$view);\n\t}\n\n\tShowDeleteButton() {\n\t\tif (this.State.id && this.AppState.toolbar) this.$$(\"delete\").show();\n\t\telse this.$$(\"delete\").hide();\n\t}\n}\n","export function prompt(config, app) {\n\tconst result = new webix.promise.defer();\n\n\twebix\n\t\t.ui(\n\t\t\tapp.getService(\"jet-win\").updateConfig({\n\t\t\t\tview: \"window\",\n\t\t\t\thead: {\n\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\tpadding: { left: 12, right: 4 },\n\t\t\t\t\tborderless: true,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ view: \"label\", label: config.text },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"icon\",\n\t\t\t\t\t\t\ticon: \"wxi-close\",\n\t\t\t\t\t\t\thotkey: \"esc\",\n\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\tresult.reject(\"prompt cancelled\");\n\t\t\t\t\t\t\t\tthis.getTopParentView().close();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tbody: {\n\t\t\t\t\tview: \"form\",\n\t\t\t\t\tpadding: { top: 5, left: 20, right: 20, bottom: 20 },\n\t\t\t\t\trows: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 10,\n\t\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\t\tname: \"name\",\n\t\t\t\t\t\t\t\t\tvalue: config.value,\n\t\t\t\t\t\t\t\t\twidth: 230,\n\t\t\t\t\t\t\t\t\tcss: \"fm-prompt-input\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\t\tvalue: config.button,\n\t\t\t\t\t\t\t\t\twidth: 100,\n\t\t\t\t\t\t\t\t\thotkey: \"enter\",\n\t\t\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\t\t\tconst popup = this.getTopParentView();\n\t\t\t\t\t\t\t\t\t\tconst newname = popup.getBody().getValues().name;\n\t\t\t\t\t\t\t\t\t\tresult.resolve(newname);\n\t\t\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tonShow() {\n\t\t\t\t\t\tconst input = this.getBody().elements.name.getInputNode();\n\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\tif (config.selectMask) config.selectMask(input);\n\t\t\t\t\t\telse input.select();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t})\n\t\t)\n\t\t.show();\n\n\treturn result;\n}\n","webix.protoUI(\n\t{\n\t\tname: \"query-select\",\n\t\t$cssName: \"richselect\",\n\n\t\t$init() {\n\t\t\twebix.extend(this.on_click, {\n\t\t\t\twebix_rpt_qselect_icon: function() {\n\t\t\t\t\tthis.callEvent(\"onClearClick\", []);\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t},\n\twebix.ui.richselect\n);\n","import { JetView } from \"webix-jet\";\n\nimport \"@xbs/query/codebase/query\";\n\nexport default class QueryView extends JetView {\n\tconfig() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tconst local = this.app.getService(\"local\");\n\n\t\treturn {\n\t\t\tview: \"query\",\n\t\t\tlocalId: \"query\",\n\t\t\tcss: \"webix_rpt_query\",\n\t\t\tlocale: { lang: this.app.getService(\"locale\").getLang() },\n\t\t\tdata: field => {\n\t\t\t\tconst column = this.State.fields.find(a => a.id === field);\n\t\t\t\tif (column.type === \"boolean\") return [0, 1];\n\t\t\t\treturn local.getFieldData(field, column.type);\n\t\t\t},\n\t\t\tfields: this.State.fields\n\t\t\t\t.filter(a => a.type !== \"reference\" && a.type !== \"picklist\")\n\t\t\t\t.map(a => {\n\t\t\t\t\tconst obj = {\n\t\t\t\t\t\tid: a.id,\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\ta.name +\n\t\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\t\t(a.model\n\t\t\t\t\t\t\t\t? \"<span class='webix_rpt_sources_path'>\" + a.model + \"</span>\"\n\t\t\t\t\t\t\t\t: \"\"),\n\t\t\t\t\t\ttype: a.type,\n\t\t\t\t\t};\n\n\t\t\t\t\tif (obj.type === \"boolean\") {\n\t\t\t\t\t\tobj.conditions = [\"equal\"];\n\t\t\t\t\t\tobj.type = \"number\";\n\t\t\t\t\t}\n\n\t\t\t\t\treturn obj;\n\t\t\t\t}),\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\n\t\tconst query = this.getRoot();\n\n\t\tthis.on(this.State.$changes, \"query\", value => {\n\t\t\tquery.$app.callEvent(\"applyFilter\", [null]);\n\t\t\tquery.config.value = value ? fixDates(JSON.parse(value)) : null;\n\t\t});\n\t\tquery.getState().$observe(\"value\", v => {\n\t\t\tthis.State.query = v ? JSON.stringify(v) : \"\";\n\t\t});\n\t}\n}\n\nfunction fixDates(value) {\n\tif (value.rules) value.rules.forEach(fixDates);\n\telse {\n\t\tif (value.type === \"date\") {\n\t\t\tvar c = value.condition;\n\t\t\tif (c.filter && typeof value.condition.filter === \"string\")\n\t\t\t\tc.filter = new Date(c.filter);\n\t\t\tif (c.filter.start && typeof c.filter.start === \"string\")\n\t\t\t\tc.filter.start = new Date(c.filter.start);\n\t\t\tif (c.filter.end && typeof c.filter.end === \"string\")\n\t\t\t\tc.filter.end = new Date(c.filter.end);\n\t\t}\n\t}\n\n\treturn value;\n}\n","import { JetView } from \"webix-jet\";\nimport { createState } from \"jet-restate\";\nimport { bind } from \"jet-restate-bind\";\nimport { prompt } from \"../../helpers/prompt\";\nimport \"../../helpers/queryselect\";\n\nimport Query from \"./query\";\n\nexport default class QueryBuilderView extends JetView {\n\tconfig() {\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\t\tconst querySelect = {\n\t\t\tlocalId: \"qblock\",\n\t\t\ttype: \"clean\",\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"form\",\n\t\t\t\t\tmargin: 5,\n\t\t\t\t\tpadding: { bottom: 5 },\n\t\t\t\t\trows: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlocalId: \"queryBar\",\n\t\t\t\t\t\t\tvisibleBatch: \"def\",\n\t\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t\t{ view: \"label\", label: _(\"Filtering query\"), width: 120 },\n\t\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbatch: \"query\",\n\t\t\t\t\t\t\t\t\tview: \"icon\",\n\t\t\t\t\t\t\t\t\tlocalId: \"delete\",\n\t\t\t\t\t\t\t\t\ticon: \"rpi-delete\",\n\t\t\t\t\t\t\t\t\ttooltip: _(\"Delete\"),\n\t\t\t\t\t\t\t\t\tclick: () => this.DeleteQuery(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbatch: \"query\",\n\t\t\t\t\t\t\t\t\tview: \"icon\",\n\t\t\t\t\t\t\t\t\tlocalId: \"copy\",\n\t\t\t\t\t\t\t\t\ticon: \"rpi-content-copy\",\n\t\t\t\t\t\t\t\t\ttooltip: _(\"Create copy\"),\n\t\t\t\t\t\t\t\t\tclick: () => this.CopyQuery(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbatch: \"query\",\n\t\t\t\t\t\t\t\t\tview: \"icon\",\n\t\t\t\t\t\t\t\t\tlocalId: \"rename\",\n\t\t\t\t\t\t\t\t\ticon: \"rpi-pencil\",\n\t\t\t\t\t\t\t\t\ttooltip: _(\"Rename\"),\n\t\t\t\t\t\t\t\t\tclick: () => this.RenameQuery(),\n\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\t\t\t\tcss: \"webix_primary\",\n\t\t\t\t\t\t\t\t\tlocalId: \"save\",\n\t\t\t\t\t\t\t\t\tlabel: _(\"Save\"),\n\t\t\t\t\t\t\t\t\ttooltip: _(\"Save query\"),\n\t\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t\t\t\tclick: () => this.SaveQuery(null),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"query-select\",\n\t\t\t\t\t\t\toptions: [],\n\t\t\t\t\t\t\tname: \"id\",\n\t\t\t\t\t\t\tcss: \"webix_rpt_qselect\",\n\t\t\t\t\t\t\tlocalId: \"qselect\",\n\t\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\t\tcss: \"webix_rpt_qselect_suggest\",\n\t\t\t\t\t\t\t\ttemplate: item => this.QSelectTemplate(item),\n\t\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\t\tminHeight: 25,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonShow: function() {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t!this.getBody().$view.firstChild.getAttribute(\n\t\t\t\t\t\t\t\t\t\t\t\t\"placeholder\"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\tthis.getBody().$view.firstChild.setAttribute(\n\t\t\t\t\t\t\t\t\t\t\t\t\"placeholder\",\n\t\t\t\t\t\t\t\t\t\t\t\t_(\"No saved queries\")\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\tonClearClick: () => this.NewQuery(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\t\ttemplate: _(\"Save filter to use it in other reports\"),\n\t\t\t\t\t\t\tcss: \"webix_rpt_description\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tQuery,\n\t\t\t],\n\t\t};\n\n\t\treturn querySelect;\n\t}\n\n\tinit() {\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tthis.Operations = this.app.getService(\"operations\");\n\t\tconst state = (this.State = this.getParam(\"state\", true));\n\t\tconst qData = (this.Queries = this.Local.getQueries());\n\n\t\tthis.LocalState = createState({ id: \"\", saved: true });\n\n\t\tqData.waitData.then(() => {\n\t\t\tconst now = this.State.query;\n\t\t\tconst ctrl = this.$$(\"qselect\");\n\t\t\tconst list = ctrl.getList();\n\n\t\t\tconst tables = { [this.State.data]: 1 };\n\t\t\tthis.State.joins.forEach(a => (tables[a.tid] = 1));\n\n\t\t\tqData.filter(a => {\n\t\t\t\tlet res = true;\n\t\t\t\ta.models.forEach(m => {\n\t\t\t\t\tif (!tables[m]) res = false;\n\t\t\t\t});\n\t\t\t\treturn res;\n\t\t\t});\n\t\t\tlist.sync(qData);\n\n\t\t\tqData.data.each(v => {\n\t\t\t\tif (v.text == now) ctrl.setValue(v.id);\n\t\t\t});\n\n\t\t\tthis.on(state.$changes, \"query\", v => {\n\t\t\t\tconst id = this.LocalState.id;\n\t\t\t\tconst changed = (!id && v) || (id && qData.getItem(id).text != v);\n\t\t\t\tthis.LocalState.saved = !changed;\n\t\t\t});\n\t\t});\n\n\t\tbind(this.LocalState, \"id\", this.$$(\"qselect\"), this);\n\n\t\tconst saveBtn = this.$$(\"save\");\n\t\tthis.on(this.LocalState.$changes, \"saved\", v => {\n\t\t\tif (v) saveBtn.disable();\n\t\t\telse saveBtn.enable();\n\t\t});\n\n\t\tthis.on(this.LocalState.$changes, \"id\", v => {\n\t\t\tif (v) {\n\t\t\t\tconst item = qData.getItem(v);\n\t\t\t\tthis.State.query = item.text;\n\t\t\t\tthis.$$(\"queryBar\").showBatch(\"query\");\n\t\t\t} else {\n\t\t\t\tthis.$$(\"queryBar\").showBatch(\"def\");\n\t\t\t}\n\t\t});\n\t}\n\n\tNewQuery() {\n\t\tthis.LocalState.id = null;\n\t\tthis.LocalState.saved = true;\n\t\tthis.State.query = null;\n\t}\n\n\tSaveQuery(name) {\n\t\tconst id = this.LocalState.id;\n\t\tconst text = this.State.query;\n\n\t\tif (id) {\n\t\t\tif (name === null) name = this.Queries.getItem(id).name;\n\t\t\tthis.Operations.updateQuery(id, { name, text }).then(() => {\n\t\t\t\tthis.$$(\"qselect\").setValue(id);\n\t\t\t\tthis.LocalState.saved = true;\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tprompt(\n\t\t\t{\n\t\t\t\ttext: this._(\"Enter query name\"),\n\t\t\t\tbutton: this._(\"Save\"),\n\t\t\t\tvalue: \"\",\n\t\t\t},\n\t\t\tthis.app\n\t\t).then(name => {\n\t\t\tif (name) {\n\t\t\t\tthis.Operations.addQuery({ name, text }).then(id => {\n\t\t\t\t\tthis.LocalState.saved = true;\n\t\t\t\t\tthis.LocalState.id = id;\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tRenameQuery() {\n\t\tconst id = this.LocalState.id;\n\t\tconst { name } = this.Queries.getItem(id);\n\n\t\tprompt(\n\t\t\t{\n\t\t\t\ttext: this._(\"Enter query name\"),\n\t\t\t\tvalue: name,\n\t\t\t\tbutton: this._(\"Save\"),\n\t\t\t},\n\t\t\tthis.app\n\t\t).then(name => {\n\t\t\tif (!name) return;\n\n\t\t\tthis.SaveQuery(name);\n\t\t});\n\t}\n\n\tCopyQuery() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tlet { name, text } = this.Queries.getItem(this.LocalState.id);\n\t\tname = _(\"Copy of\") + \" \" + name;\n\t\tthis.Operations.addQuery({ name, text }).then(id => {\n\t\t\tthis.LocalState.id = id;\n\t\t});\n\t}\n\n\tDeleteQuery() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\twebix\n\t\t\t.confirm({\n\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t\ttitle: _(\"Delete\"),\n\t\t\t\tok: _(\"Delete\"),\n\t\t\t\tcancel: _(\"Cancel\"),\n\t\t\t\ttext: _(\"Are you sure to delete this query?\"),\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tconst id = this.LocalState.id;\n\t\t\t\tthis.Operations.deleteQuery(id).then(() => {\n\t\t\t\t\tthis.LocalState.$batch({ saved: true, id: null });\n\t\t\t\t\tthis.State.query = null;\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tGetMenuOptions() {\n\t\treturn [\n\t\t\t{ id: \"copy\", value: \"Copy\", icon: \"rpi-content-copy\" },\n\t\t\t{ id: \"rename\", value: \"Rename\", icon: \"rpi-pencil\" },\n\t\t\t{ id: \"delete\", value: \"Delete\", icon: \"rpi-delete\" },\n\t\t];\n\t}\n\n\tGetMenuTemplate(obj) {\n\t\treturn `<span class='webix_icon ${obj.icon}'></span>${obj.value}`;\n\t}\n\n\tApplyQueryAction(id) {\n\t\tthis.QueryMenu.hide();\n\t\tswitch (id) {\n\t\t\tcase \"rename\":\n\t\t\t\tthis.RenameQuery();\n\t\t\t\tbreak;\n\t\t\tcase \"copy\":\n\t\t\t\tthis.CopyQuery();\n\t\t\t\tbreak;\n\t\t\tcase \"delete\":\n\t\t\t\tthis.DeleteQuery();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tQSelectTemplate(obj) {\n\t\treturn `${obj.value} <span class='webix_icon wxi-close webix_rpt_qselect_icon'></span>`;\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { withContext, createState, debounce } from \"jet-restate\";\n\nexport default class TopView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst tabbar = {\n\t\t\toptionWidth: 102,\n\t\t\ttabMinWidth: 102,\n\t\t\tview: \"tabbar\",\n\t\t\tlocalId: \"tabbar\",\n\t\t\tcss: \"webix_rpt_editor_tabbar\",\n\t\t\tborderless: true,\n\t\t\toptions: [\n\t\t\t\t{ id: \"common\", value: _(\"Common\") },\n\t\t\t\t{ id: \"data\", value: _(\"Query\") },\n\t\t\t\t{ id: \"other\", value: _(\"Data\") },\n\t\t\t\t{ id: \"structure\", value: _(\"View\") },\n\t\t\t],\n\t\t\ton: {\n\t\t\t\tonChange: v => this.ShowView(v),\n\t\t\t},\n\t\t};\n\n\t\tconst skin = webix.skin.$name;\n\t\tif (skin == \"flat\" || skin == \"compact\" || skin == \"contrast\")\n\t\t\ttabbar.type = \"bottom\";\n\n\t\tconst toolbar = {\n\t\t\tview: \"toolbar\",\n\t\t\tpadding: { left: 13, top: 0, bottom: 0 },\n\t\t\t//padding: { left: 13, top: webix.skin.$active.layoutPadding.toolbar, bottom: webix.skin.$active.layoutPadding.toolbar },\n\t\t\theight: webix.skin.$active.barHeight + 6,\n\t\t\tscroll: false,\n\t\t\tcols: [\n\t\t\t\ttabbar,\n\t\t\t\t{\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\twidth: 40,\n\t\t\t\t\tlocalId: \"closeBtn\",\n\t\t\t\t\ticon: \"rpi-close\",\n\t\t\t\t\tclick: () => this.Hide(),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst ui = {\n\t\t\twidth: 490,\n\t\t\thidden: false,\n\t\t\tlocalId: \"settings\",\n\t\t\trows: [toolbar, { $subview: true }],\n\t\t};\n\n\t\tthis.Operations = this.app.getService(\"operations\");\n\t\tthis.Local = this.app.getService(\"local\");\n\t\treturn this.Local.ready(ui);\n\t}\n\n\tinit() {\n\t\tthis.AppState = this.app.getParam(\"state\");\n\n\t\tconst initial = this.Local.newModule();\n\t\tinitial.id = -1; // mark as temporary\n\n\t\tconst state = (this.State = createState(initial));\n\t\tthis.setParam(\"state\", this.State);\n\n\t\tthis.on(this.AppState.$changes, \"moduleId\", v => this.ChangeModule(v));\n\t\tthis.on(this.State.$changes, \"data\", (id, o, k, ctx) => {\n\t\t\tif (id && (!ctx || !ctx.load)) this.ChangeModel(id);\n\t\t});\n\n\t\tthis.on(this.AppState.$changes, \"toolbar\", v => this.ShowHideButton(v));\n\n\t\tthis.on(\n\t\t\tthis.State.$changes,\n\t\t\t\"*\",\n\t\t\tdebounce(() => {\n\t\t\t\tif (this.State.id === -1) return;\n\n\t\t\t\tthis.TrackChanges();\n\t\t\t\tthis.AppState.module = Object.assign({}, this.State);\n\t\t\t})\n\t\t);\n\n\t\tthis.on(state.$changes, \"group\", (v, old, _key, ctx) => {\n\t\t\tif (!v && old) {\n\t\t\t\t// revert back\n\t\t\t\tconst columns =\n\t\t\t\t\tstate.oldColumns ||\n\t\t\t\t\tthis.Local.getFields(state.data, state.joins, true);\n\t\t\t\tconst numColumns = webix\n\t\t\t\t\t.copy(columns)\n\t\t\t\t\t.filter(a => a.type == \"number\" && !a.key);\n\t\t\t\tconst meta = this.UpdateMeta(numColumns, columns);\n\t\t\t\tstate.$batch({\n\t\t\t\t\tpublicFields: null,\n\t\t\t\t\tcolumns,\n\t\t\t\t\tmeta,\n\t\t\t\t});\n\t\t\t} else if (v) {\n\t\t\t\tlet prev = [];\n\t\t\t\tif (!ctx || !ctx.load) {\n\t\t\t\t\tif (!old) state.oldColumns = state.columns;\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (JSON.stringify(v) == JSON.stringify(old)) return;\n\t\t\t\t\t\tprev = [...this.State.columns];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tprev = [...this.State.columns];\n\t\t\t\t}\n\n\t\t\t\t// group mode changed, add new columns\n\t\t\t\tlet columns = v.columns.map(a => ({\n\t\t\t\t\tid: `${a.op}.${a.id}`,\n\t\t\t\t\tname: a.name,\n\t\t\t\t\ttype: \"number\",\n\t\t\t\t\tmeta: {},\n\t\t\t\t\tmodel: \"\",\n\t\t\t\t}));\n\t\t\t\tconst groupColumns = webix.copy(columns);\n\t\t\t\tif (v.by)\n\t\t\t\t\tcolumns = columns.concat(\n\t\t\t\t\t\tv.by.map(a => {\n\t\t\t\t\t\t\tconst base = this.State.fields.find(b => b.id == a.id);\n\t\t\t\t\t\t\tconst id = a.mod ? `${a.mod}.${a.id}` : a.id;\n\t\t\t\t\t\t\tconst obj = { ...base, id };\n\t\t\t\t\t\t\tif (a.mod) obj.type = \"text\";\n\n\t\t\t\t\t\t\treturn obj;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t// apply modifications\n\t\t\t\tconst was = {};\n\t\t\t\t(state.publicFields || state.columns).forEach(a => (was[a.id] = 1));\n\t\t\t\tconst now = {};\n\t\t\t\t// add new / rename\n\t\t\t\tcolumns.forEach(a => {\n\t\t\t\t\tnow[a.id] = 1;\n\t\t\t\t\tif (!was[a.id]) prev.push(a);\n\t\t\t\t\telse {\n\t\t\t\t\t\t// rename a column if needed\n\t\t\t\t\t\tlet column = prev.find(b => b.id == a.id);\n\t\t\t\t\t\tif (column && column.name != a.name) column.name = a.name;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t//remove old\n\t\t\t\tprev = prev.filter(a => now[a.id]);\n\n\t\t\t\tconst meta = this.UpdateMeta(groupColumns, columns);\n\t\t\t\tif (meta.freeze && meta.freeze >= prev.length) delete meta.freeze;\n\t\t\t\tstate.$batch({ publicFields: columns, columns: prev, meta });\n\t\t\t}\n\t\t});\n\n\t\tthis.on(this.app, \"saveModule\", () => this.Save());\n\n\t\tthis.on(this.app, \"resetModule\", () => this.Reset());\n\n\t\tthis.on(this.app, \"onColumnResize\", (id, width) => {\n\t\t\tvar next = [...this.State.columns];\n\t\t\tnext.find(a => a.id == id).width = width;\n\t\t\tthis.State.columns = next;\n\t\t});\n\n\t\tthis.on(this.AppState.$changes, \"readonly\", mod => {\n\t\t\tif (mod) this.Reset();\n\t\t});\n\n\t\tthis.show(\"./editor.common\");\n\t}\n\n\tSave() {\n\t\tconst save = this.Operations.getModuleSaveData(this.State);\n\t\tconst data = {\n\t\t\tname: this.State.name,\n\t\t\ttext: JSON.stringify(save),\n\t\t};\n\n\t\tif (this.AppState.moduleId)\n\t\t\tthis.Operations.updateModule(this.AppState.moduleId, data).then(id =>\n\t\t\t\tthis.SaveCallback(id)\n\t\t\t);\n\t\telse this.Operations.addModule(data).then(id => this.SaveCallback(id));\n\t}\n\tSaveCallback(id) {\n\t\tthis.AppState.$batch({\n\t\t\tmoduleId: id,\n\t\t\tmode: \"view\",\n\t\t\tmodule: Object.assign({}, this.AppState.module),\n\t\t\tsaved: true,\n\t\t});\n\t}\n\n\tShowView(v) {\n\t\tthis.$$(\"tabbar\").setValue(v);\n\t\tthis.show(\"editor.\" + v);\n\t}\n\n\tHide() {\n\t\tthis.Reset();\n\t}\n\n\tReset() {\n\t\tconst id = this.AppState.moduleId;\n\t\tif (!id) {\n\t\t\tthis.AppState.$batch({ mode: \"list\", module: null, saved: true });\n\t\t} else\n\t\t\tthis.Local.getModule(id).then(mod => {\n\t\t\t\tthis.AppState.$batch({\n\t\t\t\t\tmode: \"view\",\n\t\t\t\t\tmodule: Object.assign({}, JSON.parse(mod.text)),\n\t\t\t\t\tsaved: true,\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tChangeModel(id) {\n\t\tif (id) this.State.$batch(this.Local.setDataSource(id));\n\t}\n\n\tChangeModule(id) {\n\t\tthis.InitStateValue = \"\";\n\t\tif (id) {\n\t\t\tthis.Local.getModule(id).then(item => {\n\t\t\t\tconst obj = JSON.parse(item.text);\n\n\t\t\t\tthis.InitStateValue = item.text;\n\t\t\t\tthis.InitName = obj.name = item.name;\n\n\t\t\t\tobj.id = item.id;\n\t\t\t\tobj.saved = true;\n\t\t\t\tobj.fields = this.Local.getFields(obj.data, obj.joins);\n\n\t\t\t\twithContext({ load: true }, () => this.State.$batch(obj));\n\t\t\t\tthis.AppState.saved = true;\n\t\t\t});\n\t\t} else {\n\t\t\tthis.InitStateValue = null; // we need to have an always active Save button\n\t\t\tthis.State.$batch(this.Local.newModule());\n\t\t\tthis.State.fields = this.Local.getFields(\n\t\t\t\tthis.State.data,\n\t\t\t\tthis.State.joins\n\t\t\t);\n\t\t\tthis.AppState.saved = false;\n\t\t}\n\t}\n\tTrackChanges() {\n\t\tthis.AppState.saved =\n\t\t\tJSON.stringify(this.Operations.getModuleSaveData(this.State)) ==\n\t\t\t\tthis.InitStateValue && this.State.name == this.InitName;\n\t}\n\n\tShowHideButton(v) {\n\t\tif (v) this.$$(\"closeBtn\").show();\n\t\telse this.$$(\"closeBtn\").hide();\n\t}\n\n\tUpdateMeta(numColumns, columns) {\n\t\tlet meta = this.State.meta;\n\t\tconst state = this.State;\n\t\tif (numColumns.length) {\n\t\t\tif (state.type == \"chart\") {\n\t\t\t\tnumColumns = numColumns.map(a => {\n\t\t\t\t\tconst c = { ...a, value: a.name };\n\t\t\t\t\tdelete c.name;\n\t\t\t\t\treturn c;\n\t\t\t\t});\n\t\t\t\tmeta.chart.series = this.app\n\t\t\t\t\t.getService(\"charts\")\n\t\t\t\t\t.getSeries(numColumns, state.chartType);\n\t\t\t} else if (state.type == \"heatmap\") {\n\t\t\t\tmeta.value = numColumns[0].id;\n\t\t\t\tmeta.label = state.publicFields\n\t\t\t\t\t? columns[columns.length - 1].id\n\t\t\t\t\t: columns[0].id;\n\t\t\t\tif (meta.color && !numColumns.find(a => a.id == meta.color))\n\t\t\t\t\tmeta.color = numColumns[0].id;\n\t\t\t}\n\t\t}\n\t\treturn meta;\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class SummaryPopupView extends JetView {\n\tconstructor(app, masterName) {\n\t\tsuper(app);\n\t\tthis.Name = masterName;\n\t}\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tbody: {\n\t\t\t\tview: \"list\",\n\t\t\t\tcss: \"webix_rpt_popup_menu\",\n\t\t\t\twidth: 160,\n\t\t\t\tautoheight: true,\n\t\t\t\ttemplate: obj => this.GetTemplate(obj),\n\t\t\t\tclick: id => {\n\t\t\t\t\tthis.ClickHandler(id);\n\t\t\t\t\tthis.getRoot().close();\n\t\t\t\t},\n\t\t\t\tdata: this.GetOptions(),\n\t\t\t},\n\t\t};\n\t}\n\n\tClickHandler(id) {\n\t\tthis.getParentView().ApplyAction(id);\n\t}\n\tShow(node, data, index) {\n\t\tthis.SetActionStates(data, index);\n\t\tthis.getRoot().show(node);\n\t}\n\tGetOptions() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn [{ id: \"delete\", value: _(\"Delete\"), icon: \"rpi-delete\" }];\n\t}\n\tSetActionStates(data) {\n\t\tconst popup = this.getRoot();\n\t\tconst list = popup.getBody();\n\t\tlist.data.each(action => {\n\t\t\tif (data.length == 1) list.disableItem(action.id);\n\t\t\telse list.enableItem(action.id);\n\t\t});\n\t}\n\tGetTemplate(obj) {\n\t\treturn `<span class='webix_icon ${obj.icon}'></span> ${obj.value}`;\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport Popup from \"./summarypopup\";\n\nexport default class BucketView extends JetView {\n\tconstructor(app, state, pstate) {\n\t\tsuper(app);\n\t\tthis.State = state;\n\t\tthis.ParentState = pstate;\n\t}\n\n\tconfig() {\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\t\tthis.ValueSeparator = \",\";\n\t\tconst inputs = {\n\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\tpadding: { top: 0, bottom: 0, left: 0, right: 0 },\n\t\t\tlocalId: \"forms\",\n\t\t\tview: \"form\",\n\t\t\ttype: \"clean\",\n\t\t\telements: [],\n\t\t};\n\t\tconst other = {\n\t\t\tlocalId: \"other\",\n\t\t\tview: \"form\",\n\t\t\ttype: \"clean\",\n\t\t\tborderless: true,\n\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"text\",\n\t\t\t\t\tname: \"name\",\n\t\t\t\t\twidth: 150,\n\t\t\t\t\tplaceholder: _(\"Bucket name\"),\n\t\t\t\t\tvalue: _(\"Other\"),\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: v => this.Changed(\"other\", \"name\", v),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tcss: \"webix_rpt_subtitle\",\n\t\t\t\t\tlabel: _(\"Other values\"),\n\t\t\t\t},\n\t\t\t],\n\t\t\trules: {\n\t\t\t\tname: webix.rules.isNotEmpty,\n\t\t\t},\n\t\t};\n\t\tconst padding = webix.skin.$active.layoutPadding.form;\n\t\treturn {\n\t\t\tborderless: true,\n\t\t\ttype: \"clean\",\n\t\t\tpadding: { top: padding, bottom: padding, left: 0, right: 0 },\n\t\t\tcss: \"webix_rpt_subview\",\n\t\t\trows: [\n\t\t\t\tinputs,\n\t\t\t\t{\n\t\t\t\t\theight: webix.skin.$active.layoutMargin.form,\n\t\t\t\t},\n\t\t\t\tother,\n\t\t\t\t{\n\t\t\t\t\theight: webix.skin.$active.layoutMargin.form,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\ticon: \"wxi-plus\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\tlabel: _(\"Add bucket\"),\n\t\t\t\t\tinputWidth: 210,\n\t\t\t\t\talign: \"left\",\n\t\t\t\t\tclick: () => this.AddNewBucket(),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tthis.Forms = this.$$(\"forms\");\n\t\tthis.GetRowKeys(this.State.id).then(data => {\n\t\t\tthis.Data = data.sort((a, b) => this.Sort(a, b));\n\t\t\tthis.CreateForm();\n\t\t});\n\t\tthis.on(this.app, \"onAction\", (name, action, id) => {\n\t\t\tif (name == \"bucket\" && action == \"focus\" && id == this.State.id)\n\t\t\t\tthis.Focus(0);\n\t\t});\n\t}\n\t/*\n\t * Gets row keys (requires data loading)\n\t * params:\n\t * - the field / column id where keys need to be found\n\t * Returns a promise\n\t * */\n\tGetRowKeys(base) {\n\t\tif (base && this.ParentState.columns.length) {\n\t\t\tlet keys = [];\n\t\t\treturn this.GetColumnData(base).then(([data, baseOptions]) => {\n\t\t\t\tdata.forEach(row => {\n\t\t\t\t\tconst key = row[base];\n\t\t\t\t\tif (keys.indexOf(key) == -1) keys.push(key);\n\t\t\t\t});\n\n\t\t\t\tif (baseOptions)\n\t\t\t\t\treturn keys.map(key => {\n\t\t\t\t\t\tconst keyOption =\n\t\t\t\t\t\t\tbaseOptions.data.find(option => option.id == key) || null;\n\t\t\t\t\t\treturn { id: key, value: keyOption ? keyOption.value : key };\n\t\t\t\t\t});\n\t\t\t\treturn keys.map(key => ({ id: key, value: key }));\n\t\t\t});\n\t\t} else return Promise.resolve([]);\n\t}\n\tGetColumnData(baseColumn) {\n\t\tconst appState = this.app.getParam(\"state\");\n\t\tlet moduleConfig = this.Local.getDataConfig(appState.module);\n\t\tmoduleConfig.columns = [baseColumn];\n\t\tdelete moduleConfig.buckets;\n\t\tdelete moduleConfig.group;\n\t\tlet waitData = [\n\t\t\tthis.Local.getData(moduleConfig),\n\t\t\tthis.Local.getOptionsList(baseColumn),\n\t\t];\n\t\treturn Promise.all(waitData);\n\t}\n\n\tCreateForm() {\n\t\tconst options = this.State.options;\n\t\tif (options && options.length) this.LoadBuckets(options);\n\t\telse this.AddNewBucket();\n\t\twebix.delay(() => {\n\t\t\tthis.app.callEvent(\"onAction\", [\"bucket\", \"resize\", this.State.id]);\n\t\t\tthis.Focus(0);\n\t\t});\n\t}\n\n\tAddNewBucket() {\n\t\tthis.AddBucket();\n\t\tthis.Changed();\n\t\tthis.Focus();\n\t}\n\n\tLoadBuckets(data) {\n\t\tdata.forEach(bucket => {\n\t\t\tif (!bucket.values) this.LoadOther(bucket);\n\t\t\telse this.AddBucket(bucket);\n\t\t});\n\t\tthis.Changed();\n\t}\n\tLoadOther(b) {\n\t\tconst other = this.$$(\"other\");\n\t\tother.setValues({ name: b.id });\n\t}\n\tAddBucket(bucket) {\n\t\tbucket = bucket || {};\n\t\tthis.Forms.addView(this.GetRowForm(webix.uid(), bucket));\n\t}\n\n\tGetRowForm(id, data) {\n\t\tlet cols = [\n\t\t\t{\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\tname: \"name\",\n\t\t\t\t\t\tvalue: data.id || null,\n\t\t\t\t\t\tplaceholder: this._(\"Bucket name\"),\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: v => this.Changed(id, \"name\", v),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"multicombo\",\n\t\t\t\tname: \"values\",\n\t\t\t\tplaceholder: this._(\"Bucket values\"),\n\t\t\t\tcss: \"webix_multilist webix_rpt_multicombo\",\n\t\t\t\tseparator: this.ValueSeparator,\n\t\t\t\tsuggest: {\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tcss: \"webix_multilist webix_rpt_bucket_values\",\n\t\t\t\t\t\tdata: this.Data,\n\t\t\t\t\t\ttemplate: obj => this.OptionTemplate(id, obj),\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonBeforeShow: function() {\n\t\t\t\t\t\t\tthis.getList().refresh();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tvalue: data.values || null,\n\t\t\t\ton: {\n\t\t\t\t\tonChange: v => this.Changed(id, \"values\", v),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"icon\",\n\t\t\t\t\t\ticon: \"wxi-dots\",\n\t\t\t\t\t\tclick: (id, ev) => this.ShowPopup(id, ev),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tlocalId: id,\n\t\t\ttype: \"clean\",\n\t\t\tborderless: true,\n\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\trules: {\n\t\t\t\tname: webix.rules.isNotEmpty,\n\t\t\t\tvalues: webix.rules.isNotEmpty,\n\t\t\t},\n\t\t\tcols: cols,\n\t\t};\n\t}\n\tShowPopup(id, ev) {\n\t\tif (!this.Popup || !this.Popup.$view)\n\t\t\tthis.Popup = this.ui(new Popup(this.app, \"bucket\"));\n\t\tconst form = webix\n\t\t\t.$$(id)\n\t\t\t.getParentView()\n\t\t\t.getParentView();\n\t\tthis.ActiveForm = form;\n\t\tthis.Popup.Show(\n\t\t\tev.target,\n\t\t\tthis.GetValues(),\n\t\t\tform.getParentView().index(form)\n\t\t);\n\t}\n\tGetValidBuckets() {\n\t\tconst otherForm = this.$$(\"other\");\n\t\tconst otherName = otherForm.elements.name.getValue();\n\t\totherForm.validate();\n\t\tconst names = {};\n\t\tif (otherName) names[otherName] = [otherForm];\n\t\tconst options = [];\n\t\tthis.ForEachFormRow(form => {\n\t\t\tform.validate();\n\t\t\tlet values = form.getValues();\n\t\t\tlet n = values.name;\n\t\t\tif (n) {\n\t\t\t\tif (names[n]) {\n\t\t\t\t\tthis.$$(names[n]).forEach(f => f.markInvalid(\"name\", true));\n\t\t\t\t\tform.markInvalid(\"name\", true);\n\t\t\t\t} else if (values.values.length)\n\t\t\t\t\toptions.push({ id: n, values: values.values.split(\",\") });\n\t\t\t\tif (!names[n]) names[n] = [];\n\t\t\t\tnames[n].push(form);\n\t\t\t}\n\t\t});\n\t\tif (options.length && otherName) options.push({ id: otherName });\n\t\treturn options;\n\t}\n\tChanged(id, name, value) {\n\t\tif (name == \"values\") this.CorrectValues(id, value);\n\t\tconst options = this.GetValidBuckets();\n\t\tthis.State.options = options;\n\t}\n\n\tOptionTemplate(id, obj) {\n\t\tlet selected =\n\t\t\t!obj.$checked &&\n\t\t\tthis.GetValues().find(\n\t\t\t\tbucket => bucket.id != id && bucket.values.indexOf(obj.value) > -1\n\t\t\t);\n\t\tconst css =\n\t\t\t\"webix_rpt_bucket_value\" +\n\t\t\t(selected ? \" webix_rpt_bucket_value_selected\" : \"\");\n\t\treturn (\n\t\t\t\"<div class='\" +\n\t\t\tcss +\n\t\t\t\"'>\" +\n\t\t\tobj.value +\n\t\t\t\"</div>\" +\n\t\t\t(selected\n\t\t\t\t? \"<span class='webix_rpt_bucket_icon webix_icon rpi-pail-outline'></span>\"\n\t\t\t\t: \"\")\n\t\t);\n\t}\n\tGetValues() {\n\t\tlet data = [];\n\t\tthis.ForEachFormRow(form => {\n\t\t\tconst v = form.getValues();\n\t\t\tv.id = form.config.localId;\n\t\t\tdata.push(v);\n\t\t});\n\t\treturn data;\n\t}\n\tForEachFormRow(handler) {\n\t\tthis.Forms.getChildViews().forEach(form => {\n\t\t\tif (form && form.elements) {\n\t\t\t\thandler(form);\n\t\t\t}\n\t\t});\n\t}\n\tCorrectValues(id, v) {\n\t\tthis.ForEachFormRow(form => {\n\t\t\tif (form.config.localId != id) {\n\t\t\t\tlet values = form.getValues().values.split(\",\");\n\t\t\t\tvalues = values.filter(a => v.indexOf(a) == -1);\n\t\t\t\tform.elements.values.setValue(values);\n\t\t\t}\n\t\t});\n\t}\n\tApplyAction(id) {\n\t\tif (id == \"delete\") this.DeleteBucket(this.ActiveForm);\n\t}\n\n\tDeleteBucket(form) {\n\t\tthis.Forms.removeView(form);\n\t\tthis.Changed();\n\t}\n\tSort(a, b) {\n\t\tconst type = this.ParentState.fields.find(c => c.id == this.State.id).type;\n\t\ta = a.value;\n\t\tb = b.value;\n\t\tif (type == \"number\") {\n\t\t\ta = a * 1;\n\t\t\tb = b * 1;\n\t\t\tif (isNaN(b)) return 1;\n\t\t\tif (isNaN(a)) return -1;\n\t\t} else {\n\t\t\tif (!b) return 1;\n\t\t\tif (!a) return -1;\n\t\t\ta = a.toString().toLowerCase();\n\t\t\tb = b.toString().toLowerCase();\n\t\t}\n\t\treturn a > b ? 1 : a < b ? -1 : 0;\n\t}\n\tFocus(index) {\n\t\twebix.delay(\n\t\t\t() => {\n\t\t\t\tconst forms = this.Forms.getChildViews();\n\t\t\t\tif (typeof index == \"undefined\") index = forms.length - 1;\n\t\t\t\tconst form = forms[index];\n\t\t\t\tif (form) form.elements.name.focus();\n\t\t\t},\n\t\t\tnull,\n\t\t\tnull,\n\t\t\t100\n\t\t);\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class SummaryPopupView extends JetView {\n\tconstructor(app, master) {\n\t\tsuper(app);\n\t\tthis.Master = master;\n\t}\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tautoheight: true,\n\t\t\tfitMaster: true,\n\t\t\tbody: {\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tpadding: { top: 5, bottom: 5, left: 10, right: 10 },\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\tlocalId: \"search\",\n\t\t\t\t\t\t\t\tplaceholder: _(\"Search\"),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"list\",\n\t\t\t\t\t\tscroll: true,\n\t\t\t\t\t\tyCount: 5,\n\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\tselect: true,\n\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\ttemplate: obj => this.GetTemplate(obj),\n\t\t\t\t\t\t},\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonItemClick: id => {\n\t\t\t\t\t\t\t\tconst item = this.List.getItem(id);\n\t\t\t\t\t\t\t\tthis.AddColumn(item);\n\t\t\t\t\t\t\t\tthis.View.hide();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonEnter: () => {\n\t\t\t\t\t\t\t\tconst item = this.List.getSelectedItem();\n\t\t\t\t\t\t\t\tif (item) {\n\t\t\t\t\t\t\t\t\tthis.AddColumn(item);\n\t\t\t\t\t\t\t\t\twebix.delay(() => this.View.hide());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.View = this.getRoot();\n\t\tconst views = this.View.getBody().getChildViews();\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.BucketState = this.getParam(\"buckets\", true);\n\t\tthis.Text = views[0].getChildViews()[0];\n\t\tthis.List = views[1];\n\t\tthis.Text.attachEvent(\"onTimedKeyPress\", () => {\n\t\t\tthis.Find(this.Text.getValue());\n\t\t});\n\t}\n\tAddColumn(column) {\n\t\tconst t = [...this.BucketState.buckets];\n\t\tt.push({ column: column.id, options: [] });\n\t\tthis.BucketState.buckets = t;\n\t}\n\tShow(node) {\n\t\tnode = node.firstChild.firstChild;\n\t\tthis.View.config.width = node.offsetWidth - 2;\n\t\tthis.View.adjust();\n\t\tthis.View.show(node);\n\t\tthis.Text.focus();\n\t\tthis.List.clearAll();\n\t\tthis.List.parse(this.GetColumns());\n\t}\n\tGetColumns() {\n\t\tlet columns = this.State.fields;\n\t\tif (this.State.publicFields)\n\t\t\tcolumns = columns.filter(a =>\n\t\t\t\tthis.State.publicFields.find(b => b.id == a.id)\n\t\t\t);\n\t\treturn columns.map(a => ({\n\t\t\tid: a.id,\n\t\t\tvalue: a.name,\n\t\t\ttype: a.type,\n\t\t\tmodel: a.model,\n\t\t\tdisabled:\n\t\t\t\tthis.BucketState.buckets &&\n\t\t\t\tthis.BucketState.buckets.find(b => b.column == a.id),\n\t\t}));\n\t}\n\n\tGetTemplate(obj) {\n\t\treturn (\n\t\t\tobj.value +\n\t\t\t(obj.model\n\t\t\t\t? \"<span class='webix_rpt_sources_path'>\" + obj.model + \"</span>\"\n\t\t\t\t: \"\")\n\t\t);\n\t}\n\n\tFind(value) {\n\t\tvalue = value.toLowerCase();\n\t\tif (value)\n\t\t\tthis.List.filter(item => item.value.toLowerCase().indexOf(value) > -1);\n\t\telse this.List.filter(\"\");\n\t}\n}\n","webix.protoUI(\n\t{\n\t\tname: \"groupselect\",\n\t\t$cssName: \"text webix_rpt_groupselect\",\n\t\tdefaults: {\n\t\t\tselectIcon: true,\n\t\t\tmodifiers: {},\n\t\t},\n\t\trenderModifier(id) {\n\t\t\tconst mid = this._modifiers[id];\n\t\t\tif (mid) {\n\t\t\t\tconst option = this.config.modifiers.find(a => a.id === mid);\n\t\t\t\treturn (\n\t\t\t\t\t\"<div class='webix_rpt_date_selector'>\" +\n\t\t\t\t\t(option ? option.value : \"\") +\n\t\t\t\t\t(this.config.selectIcon\n\t\t\t\t\t\t? \"<span class='webix_icon wxi-angle-down'></span>\"\n\t\t\t\t\t\t: \"\") +\n\t\t\t\t\t\"</div> <span class='webix_rpt_groupselect_sep'> | </span> \"\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn \"\";\n\t\t},\n\t\t$renderTag(text, width, height, value) {\n\t\t\tlet content = this.renderModifier(value);\n\t\t\tcontent +=\n\t\t\t\t\"<span>\" +\n\t\t\t\ttext +\n\t\t\t\t\"</span><span class='webix_multicombo_delete webix_rpt_groupselect_delete' role='button' aria-label='\" +\n\t\t\t\twebix.i18n.aria.removeItem +\n\t\t\t\t\"'></span>\";\n\t\t\treturn (\n\t\t\t\t\"<li class='webix_multicombo_value' style='line-height:\" +\n\t\t\t\theight +\n\t\t\t\t\"px;' optvalue='\" +\n\t\t\t\twebix.template.escape(value) +\n\t\t\t\t\"'>\" +\n\t\t\t\tcontent +\n\t\t\t\t\"</li>\"\n\t\t\t);\n\t\t},\n\t\t$init() {\n\t\t\tthis._modifiers = {};\n\t\t\twebix.extend(this.on_click, {\n\t\t\t\twebix_rpt_date_selector: function(e, id, node) {\n\t\t\t\t\tlet value = webix.html.locate(e, \"optvalue\");\n\t\t\t\t\tthis.callEvent(\"onModifierClick\", [value, e, node]);\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tsetValue(value) {\n\t\t\tif (value) {\n\t\t\t\tif (typeof value !== \"string\" && typeof value[0] !== \"string\") {\n\t\t\t\t\tthis._modifiers = {};\n\t\t\t\t\tvalue = value.map(a => {\n\t\t\t\t\t\tthis._modifiers[a.id] = a.mod || null;\n\t\t\t\t\t\treturn a.id;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\twebix.ui.multicombo.prototype.setValue.call(this, value);\n\t\t\t} else {\n\t\t\t\tthis._modifiers = {};\n\t\t\t}\n\n\t\t\treturn webix.ui.multicombo.prototype.setValue.call(this, value);\n\t\t},\n\t\tgetModifier(id) {\n\t\t\treturn this._modifiers[id];\n\t\t},\n\t\tsetModifier(id, value, silent) {\n\t\t\tthis._modifiers[id] = value;\n\t\t\tif (!silent) this.callEvent(\"onChange\", []);\n\t\t\tthis.refresh();\n\t\t},\n\t\t// [FIXME] bug in multicombo repainting during view replacing\n\t\t$setSize: function(x, y) {\n\t\t\tvar config = this.config;\n\n\t\t\tconst [px, py] = this._custom_last_size || [0, 0];\n\t\t\tif (x == px && y == py) return;\n\t\t\tthis._custom_last_size = [x, y];\n\n\t\t\tif (webix.ui.view.prototype.$setSize.call(this, x, y)) {\n\t\t\t\tif (!x || !y) return;\n\t\t\t\tif (config.labelPosition == \"top\") {\n\t\t\t\t\tconfig.labelWidth = 0;\n\t\t\t\t}\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t},\n\t},\n\twebix.ui.multicombo\n);\n","import { JetView } from \"webix-jet\";\nimport { createState, ignoreInitial } from \"jet-restate\";\nimport \"../../../helpers/groupselect\";\nimport BucketView from \"./bucket\";\nimport BucketPopup from \"./bucketpopup\";\n\nexport default class BucketSettingsView extends JetView {\n\tconfig() {\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\t\tthis.Views = {};\n\t\tconst columns = {\n\t\t\tmargin: 5,\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tautoheight: true,\n\t\t\t\t\tborderless: true,\n\t\t\t\t\ttemplate: _(\"Specify columns and their data buckets\"),\n\t\t\t\t\tcss: \"webix_rpt_description\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\ticon: \"wxi-plus\",\n\t\t\t\t\tlocalId: \"addColumn\",\n\n\t\t\t\t\tlabel: _(\"Add column\"),\n\t\t\t\t\tclick: () => this.ShowColumns(),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\tconst buckets = {\n\t\t\tview: \"datatable\",\n\t\t\tcss: \"webix_rpt_columns_list webix_rpt_bcols\",\n\t\t\tlocalId: \"table\",\n\t\t\tborderless: true,\n\t\t\tautoheight: true,\n\t\t\theader: false,\n\t\t\tselect: false,\n\t\t\tsubview: (obj, target) => {\n\t\t\t\tconst buckets = createState({\n\t\t\t\t\tid: obj.id,\n\t\t\t\t\toptions: obj.options,\n\t\t\t\t});\n\t\t\t\tthis.on(\n\t\t\t\t\tbuckets.$changes,\n\t\t\t\t\t\"*\",\n\t\t\t\t\tignoreInitial(() => {\n\t\t\t\t\t\tthis.Update(obj.id, buckets);\n\t\t\t\t\t})\n\t\t\t\t);\n\n\t\t\t\tconst sub = (this.Views[obj.id] = new BucketView(\n\t\t\t\t\tthis.app,\n\t\t\t\t\tbuckets,\n\t\t\t\t\tthis.State\n\t\t\t\t));\n\t\t\t\tthis.ui(sub, { container: target });\n\t\t\t\treturn sub.getRoot();\n\t\t\t},\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tfillspace: true,\n\t\t\t\t\ttemplate: (item, common) => this.RowTemplate(item, common),\n\t\t\t\t},\n\t\t\t],\n\t\t\ton: {\n\t\t\t\tonItemClick: id => this.ToggleSub(id),\n\t\t\t\tonAfterRender: () => {\n\t\t\t\t\tif (this._hasFocus) {\n\t\t\t\t\t\tconst el = this._hasFocus;\n\t\t\t\t\t\tthis._hasFocus = null;\n\n\t\t\t\t\t\tif (el && document.contains(el) && el !== document.activeElement)\n\t\t\t\t\t\t\tel.focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSubViewOpen: id => this.HideAllEditors(id),\n\t\t\t\tonSubViewClose: () => this.ResetEditor(),\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_rpt_bucket_delete: (e, id) => {\n\t\t\t\t\twebix\n\t\t\t\t\t\t.confirm({\n\t\t\t\t\t\t\ttitle: _(\"Delete\"),\n\t\t\t\t\t\t\tok: _(\"Delete\"),\n\t\t\t\t\t\t\tcancel: _(\"Cancel\"),\n\t\t\t\t\t\t\ttext: _(\"Are you sure to delete?\"),\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => this.RemoveColumn(id));\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tborderless: true,\n\t\t\tpadding: 0,\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\trows: [columns, buckets],\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.Table = this.$$(\"table\");\n\t\tconst buckets = this.State.buckets || [];\n\n\t\tthis.BucketState = createState({ buckets, newColumn: null });\n\t\tthis.LoadBuckets();\n\t\tthis.setParam(\"buckets\", this.BucketState);\n\t\tthis.on(\n\t\t\tthis.BucketState.$changes,\n\t\t\t\"*\",\n\t\t\tignoreInitial((v, o) => this.Changed(v, o))\n\t\t);\n\t\tthis.on(this.app, \"onAction\", (name, action, id) => {\n\t\t\tif (this.getRoot() && name == \"bucket\" && action == \"resize\")\n\t\t\t\tthis.Table.refresh(id);\n\t\t});\n\t}\n\tShowColumns() {\n\t\tif (!this.ColumnList || !this.ColumnList.$view)\n\t\t\tthis.ColumnList = this.ui(BucketPopup, this.State);\n\t\tthis.ColumnList.Show(this.$$(\"addColumn\").$view);\n\t}\n\n\tLoadBuckets() {\n\t\tconst tableData = this.BucketState.buckets\n\t\t\t? this.BucketState.buckets.map(a => {\n\t\t\t\t\tconst field = this.State.fields.find(f => f.id == a.column);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: a.column,\n\t\t\t\t\t\tname: field.name,\n\t\t\t\t\t\tmodel: field.model || null,\n\t\t\t\t\t\toptions: a.options,\n\t\t\t\t\t};\n\t\t\t  })\n\t\t\t: [];\n\t\tthis.Table.clearAll();\n\t\tthis.Table.parse(tableData);\n\t\tif (!tableData.length) this.Table.hide();\n\t}\n\tAddColumn(id) {\n\t\tif (this.Table.config.hidden) this.Table.show();\n\t\tconst field = this.State.fields.find(f => f.id == id);\n\t\tthis.Table.add({\n\t\t\tid,\n\t\t\tname: field.name,\n\t\t\tmodel: field.model || null,\n\t\t\toptions: [],\n\t\t});\n\t}\n\tRemoveColumn(id) {\n\t\tthis.Table.remove(id);\n\t\tconst buckets = [...this.BucketState.buckets];\n\t\tconst i = buckets.findIndex(a => a.column == id);\n\t\tbuckets.splice(i, 1);\n\t\tthis.BucketState.buckets = buckets;\n\t\tif (!buckets.length) this.Table.hide();\n\t\tif (this._ActiveEditor && String(id) == String(this._ActiveEditor))\n\t\t\tthis.ResetEditor();\n\t\tthis.Views[id].destructor();\n\t}\n\n\tListTemplate(obj) {\n\t\treturn (\n\t\t\tobj.value +\n\t\t\t(obj.model\n\t\t\t\t? \"<span class='webix_rpt_sources_path'>\" + obj.model + \"</span>\"\n\t\t\t\t: \"\")\n\t\t);\n\t}\n\n\tChanged(newV, oldV) {\n\t\tif (newV.length > oldV.length) {\n\t\t\tconst id = newV[newV.length - 1].column;\n\t\t\tthis.AddColumn(id);\n\t\t\tthis.Table.openSub(id);\n\t\t}\n\t\tconst buckets = this.BucketState.buckets.filter(b => b.options.length);\n\t\tthis.State.buckets = buckets;\n\t}\n\n\tRowTemplate(item, common) {\n\t\tconst html = `<div class='webix_rpt_config_row'>\n\t\t\t<span class='webix_rpt_buckets_num'>\n\t\t\t\t<span class='webix_rpt_bucket_sublabel'>${this._(\"buckets\")}: </span>\n\t\t\t\t\t${item.options.length}\n\t\t\t\t</span>\n\t\t\t\t<div class='webix_rpt_config_row_name'>\n\t\t\t\t\t<span class='webix_rpt_bucket_sublabel'>${this._(\"column\")}: </span>\n\t\t\t\t\t${item.name}${\n\t\t\titem.model\n\t\t\t\t? `<span class='webix_rpt_sources_path'>${item.model}</span>`\n\t\t\t\t: \"\"\n\t\t}\n\t\t\t\t</div>\n\t\t\t\t<span class='webix_icon rpi-delete webix_rpt_bucket_delete'></span>\n\t\t\t\t${common.subrow(item, common)}\n\t\t\n\t\t</div>`;\n\n\t\treturn html;\n\t}\n\n\tHideAllEditors(id) {\n\t\tconst prevId = this._ActiveEditor;\n\t\tif (prevId && this.Table.getItem(prevId)) this.Table.closeSub(prevId);\n\n\t\tthis._ActiveEditor = id;\n\t\tif (id) this.FocusEditor();\n\t}\n\tFocusEditor() {\n\t\tthis.app.callEvent(\"onAction\", [\"bucket\", \"focus\", this._ActiveEditor]);\n\t}\n\n\tResetEditor() {\n\t\tthis._ActiveEditor = null;\n\t}\n\n\tToggleSub(id) {\n\t\tvar row = this.Table.getItem(id);\n\t\tif (row.$subopen) this.Table.closeSub(id);\n\t\telse this.Table.openSub(id);\n\t}\n\tUpdate(id, data) {\n\t\tthis._hasFocus = document.activeElement;\n\t\tconst buckets = [...this.BucketState.buckets];\n\t\tconst column = this.BucketState.buckets.find(b => b.column == id);\n\t\tcolumn.options = data.options;\n\t\tthis.BucketState.buckets = buckets;\n\t\tthis.Table.updateItem(id, { options: column.options });\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class DateView extends JetView {\n\tconstructor(app, master) {\n\t\tsuper(app);\n\t\tthis.Master = master;\n\t}\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tbody: {\n\t\t\t\tview: \"list\",\n\t\t\t\twidth: 160,\n\t\t\t\tautoheight: true,\n\t\t\t\tcss: \"webix_rpt_grouppopup\",\n\t\t\t\ttemplate: obj => this.GetPopupTemplate(obj),\n\t\t\t\tdata: this.Master.config.modifiers,\n\t\t\t\tclick: id => {\n\t\t\t\t\tthis.Master.setModifier(this.ActiveGroup, id);\n\t\t\t\t\tthis.getRoot().hide();\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\t$init() {\n\t\tthis.ActiveGroup = null;\n\t}\n\tGetPopupTemplate(obj) {\n\t\tconst isSelected = obj.id == this.Master.getModifier(this.ActiveGroup);\n\t\treturn `${obj.value} <span class='webix_icon wxi-radiobox-${\n\t\t\tisSelected ? \"marked\" : \"blank\"\n\t\t}'></span>`;\n\t}\n\tShow(node, id) {\n\t\tthis.ActiveGroup = id;\n\t\tthis.getRoot().show(node, { x: -10 });\n\t\tthis.getRoot()\n\t\t\t.getBody()\n\t\t\t.refresh();\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport Popup from \"./summarypopup\";\n\nexport default class Summaries extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst labels = {\n\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: _(\"Function\"),\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tcss: \"webix_rpt_subtitle\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: _(\"Column\"),\n\t\t\t\t\tcss: \"webix_rpt_subtitle\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: _(\"New column name\"),\n\t\t\t\t\tcss: \"webix_rpt_subtitle\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\twidth: 38,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst inputs = {\n\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\tlocalId: \"summaries\",\n\t\t\tview: \"form\",\n\t\t\ttype: \"clean\",\n\t\t\tcss: \"webix_rpt_summary_form\",\n\t\t\telements: [],\n\t\t};\n\n\t\treturn {\n\t\t\tborderless: true,\n\t\t\ttype: \"clean\",\n\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tcols: [{ view: \"label\", label: _(\"Group summaries\") }],\n\t\t\t\t},\n\t\t\t\tlabels,\n\t\t\t\tinputs,\n\t\t\t\t{\n\t\t\t\t\theight: webix.skin.$active.layoutMargin.form,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\ticon: \"wxi-plus\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\tlabel: _(\"Add column\"),\n\t\t\t\t\twidth: 210,\n\t\t\t\t\talign: \"left\",\n\t\t\t\t\tclick: () => this.AddNewAggregation(),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.GroupState = this.getParam(\"group\", true);\n\n\t\tthis.SummaryColumns = this.State.fields\n\t\t\t.filter(column => {\n\t\t\t\treturn (\n\t\t\t\t\t(column.type == \"number\" || column.type == \"date\") && !column.key\n\t\t\t\t);\n\t\t\t})\n\t\t\t.sort((a, b) => (a.type < b.type ? 1 : -1))\n\t\t\t.map(a => ({ id: a.id, value: a.name, type: a.type }));\n\n\t\tthis.CreateForm();\n\t\tthis.on(this.GroupState.$changes, \"by\", () => this.ValidateFormData());\n\t}\n\n\tCreateForm() {\n\t\tconst aggregate = this.GroupState.columns;\n\t\tif (aggregate && aggregate.length) this.LoadAggregations(aggregate);\n\t\telse this.AddNewAggregation();\n\n\t\tif (!this.SummaryColumns.length) {\n\t\t\tthis.ApplyOneRowMode();\n\t\t}\n\t}\n\tApplyOneRowMode() {\n\t\tconst rows = this.getRoot().getChildViews();\n\t\trows[3].hide();\n\t\trows[4].hide();\n\t}\n\n\tAddNewAggregation() {\n\t\tthis.AddAggregation();\n\t\tthis.Changed();\n\t}\n\n\tLoadAggregations(data) {\n\t\tdata.forEach(summary => {\n\t\t\tthis.AddAggregation(summary);\n\t\t});\n\t\tthis.Changed();\n\t}\n\n\tAddAggregation(aggregation) {\n\t\taggregation = aggregation || this.GetDefaultFormData();\n\t\tif (!aggregation) return false;\n\t\tconst formId = aggregation.id || \"form\" + webix.uid();\n\t\tthis.$$(\"summaries\").addView(this.GetRowForm(formId, aggregation));\n\t}\n\n\tGetRowForm(id, data) {\n\t\tlet cols = [\n\t\t\t{\n\t\t\t\twidth: 100,\n\t\t\t\tview: \"richselect\",\n\t\t\t\tname: \"op\",\n\t\t\t\tvalue: data.op || null,\n\t\t\t\toptions: this.GetOperations(),\n\t\t\t\ton: {\n\t\t\t\t\tonChange: v => this.Changed(id, \"op\", v),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"richselect\",\n\t\t\t\tname: \"id\",\n\t\t\t\tdisabled: data.op == \"count\",\n\t\t\t\tvalue: data.id || null,\n\t\t\t\toptions: this.SummaryColumns,\n\t\t\t\ton: {\n\t\t\t\t\tonChange: v => this.Changed(id, \"id\", v),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"text\",\n\t\t\t\tvalue: data.name || null,\n\t\t\t\tname: \"name\",\n\t\t\t\ton: {\n\t\t\t\t\tonTimedKeypress: v => this.Changed(id, \"name\", v),\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\tcols.push({\n\t\t\tview: \"icon\",\n\t\t\ticon: \"wxi-dots\",\n\t\t\tclick: (id, ev) => this.ShowPopup(id, ev),\n\t\t});\n\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tlocalId: id,\n\t\t\ttype: \"clean\",\n\t\t\tborderless: true,\n\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\trules: {\n\t\t\t\tid: value => {\n\t\t\t\t\tconst groupBy = this.GroupState.by;\n\t\t\t\t\treturn !groupBy || groupBy.indexOf(value) < 0;\n\t\t\t\t},\n\t\t\t},\n\t\t\tcols: cols,\n\t\t};\n\t}\n\n\tGetDefaultFormData() {\n\t\tconst data = this.GetData();\n\t\tconst columns = this.SummaryColumns;\n\t\tconst operations = this.GetOperations();\n\t\tif (!columns.length) {\n\t\t\tconst op = !data.length ? operations.find(op => op.id == \"count\") : null;\n\t\t\treturn op\n\t\t\t\t? {\n\t\t\t\t\t\top: \"count\",\n\t\t\t\t\t\tid: \"\",\n\t\t\t\t\t\tname: this.NewColumnTemplate(op),\n\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t  }\n\t\t\t\t: null;\n\t\t} else {\n\t\t\tfor (let i = 0; i < operations.length; i++) {\n\t\t\t\tfor (let j = 0; j < columns.length; j++) {\n\t\t\t\t\tconst op = operations[i];\n\t\t\t\t\tif (\n\t\t\t\t\t\t!data.find(\n\t\t\t\t\t\t\trow =>\n\t\t\t\t\t\t\t\trow.op == op.id && (op.id == \"count\" || row.id == columns[j].id)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\top: op.id,\n\t\t\t\t\t\t\tid: op.id != \"count\" ? columns[j].id : null,\n\t\t\t\t\t\t\tname: this.NewColumnTemplate(op, columns[j]),\n\t\t\t\t\t\t\ttype: columns[j].type,\n\t\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tNewColumnTemplate(operation, column) {\n\t\treturn operation.id == \"count\"\n\t\t\t? operation.value\n\t\t\t: operation.value + \" \" + column.value;\n\t}\n\n\tShowPopup(id, ev) {\n\t\tif (!this.Popup || !this.Popup.$view)\n\t\t\tthis.Popup = this.ui(new Popup(this.app, \"summary\"));\n\t\tconst form = webix.$$(id).getParentView();\n\t\tthis.ActiveForm = form;\n\t\tthis.Popup.Show(\n\t\t\tev.target,\n\t\t\tthis.GetData(),\n\t\t\tform.getParentView().index(form)\n\t\t);\n\t}\n\n\tApplyAction(id) {\n\t\tif (id == \"delete\") this.DeleteAggregation();\n\t}\n\n\tDeleteAggregation(form) {\n\t\tform = form || this.ActiveForm;\n\t\tconst formList = form.getParentView();\n\t\tif (formList.getChildViews().length > 1) formList.removeView(form);\n\t\telse form.setValues({});\n\t\tthis.Changed();\n\t}\n\n\tGetOperations() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn [\n\t\t\t{ id: \"sum\", value: _(\"Sum\") },\n\t\t\t{ id: \"count\", value: _(\"Count\") },\n\t\t\t{ id: \"avg\", value: _(\"Average\") },\n\t\t\t{ id: \"max\", value: _(\"Max\") },\n\t\t\t{ id: \"min\", value: _(\"Min\") },\n\t\t];\n\t}\n\n\tGetData() {\n\t\tlet data = [];\n\t\tthis.ForEachFormRow(form => {\n\t\t\tdata.push(form.getValues());\n\t\t});\n\t\treturn data;\n\t}\n\n\tForEachFormRow(handler) {\n\t\tthis.$$(\"summaries\")\n\t\t\t.getChildViews()\n\t\t\t.forEach(form => {\n\t\t\t\tif (form && form.elements) {\n\t\t\t\t\thandler(form);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tValidateFormData() {\n\t\tlet valid = true;\n\t\tthis.ForEachFormRow(form => (valid = form.validate() && valid));\n\t\treturn valid;\n\t}\n\n\tChangeNewColumnName(formId) {\n\t\tconst form = this.$$(formId).elements;\n\t\tconst oId = form.op.getValue();\n\t\tconst cId = form.id.getValue();\n\t\tconst operations = this.GetOperations();\n\n\t\tif (oId) {\n\t\t\tif (oId == \"count\")\n\t\t\t\tform.name.setValue(\n\t\t\t\t\tthis.NewColumnTemplate(operations.find(o => o.id == oId))\n\t\t\t\t);\n\t\t\telse if (cId)\n\t\t\t\tform.name.setValue(\n\t\t\t\t\tthis.NewColumnTemplate(\n\t\t\t\t\t\toperations.find(o => o.id == oId),\n\t\t\t\t\t\tthis.SummaryColumns.find(c => c.id == cId)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t}\n\t}\n\n\tChanged(formId, name, value) {\n\t\tif (name == \"op\" || name == \"id\") this.ChangeNewColumnName(formId);\n\t\tif (name == \"op\" && value == \"count\") {\n\t\t\tthis.$$(formId).elements.id.setValue(null);\n\t\t\tthis.$$(formId).elements.id.disable();\n\t\t} else {\n\t\t\tif (formId && name) this.$$(formId).elements.id.enable();\n\t\t}\n\n\t\tthis.ValidateFormData();\n\t\tconst columns = this.GetData();\n\t\tcolumns.forEach(\n\t\t\ta =>\n\t\t\t\t(a.type = (\n\t\t\t\t\tthis.SummaryColumns.find(b => b.id == a.id) || { type: \"number\" }\n\t\t\t\t).type)\n\t\t);\n\t\tthis.GroupState.columns = columns;\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { createState, ignoreInitial } from \"jet-restate\";\nimport Summaries from \"./summary\";\nimport \"../../../helpers/groupselect\";\nimport DatePopupView from \"./datepopup\";\n\nexport default class OtherSettingsView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst groupBy = {\n\t\t\tmargin: 5,\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tautoheight: true,\n\t\t\t\t\tborderless: true,\n\t\t\t\t\ttemplate: _(\"Specify columns to group by and output(s)\"),\n\t\t\t\t\tcss: \"webix_rpt_description\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"groupselect\",\n\t\t\t\t\tlocalId: \"groupBy\",\n\t\t\t\t\tmodifiers: this.GetDateOptions(),\n\t\t\t\t\toptions: [],\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: () => this.ChangeGroupBy(),\n\t\t\t\t\t\tonModifierClick: (id, e, node) =>\n\t\t\t\t\t\t\tthis.ShowModifierPopup(id, e, node),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tborderless: true,\n\t\t\tpadding: 0,\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\tlocalId: \"groupByLayout\",\n\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\trows: [groupBy, Summaries],\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\n\t\tconst groupState = this.State.group || {};\n\t\tthis.GroupState = createState({\n\t\t\tby: groupState.by || null,\n\t\t\tcolumns: groupState.columns || null,\n\t\t});\n\n\t\tthis.LoadColumns();\n\n\t\tthis.setParam(\"group\", this.GroupState);\n\t\tthis.on(this.GroupState.$changes, \"*\", ignoreInitial(() => this.Apply()));\n\t}\n\n\tChangeGroupBy() {\n\t\tconst group = this.$$(\"groupBy\");\n\t\tconst list = group.getPopup().getList();\n\t\tlet arr = group.getValue();\n\t\tarr = arr ? (typeof arr === \"string\" ? arr.split(\",\") : arr) : [];\n\n\t\tthis.GroupState.by = arr.map(a => {\n\t\t\tlet mod = group.getModifier(a);\n\t\t\tif (list.getItem(a).type === \"date\" && !mod) {\n\t\t\t\tmod = \"year\";\n\t\t\t\tgroup.setModifier(a, mod, true);\n\t\t\t}\n\n\t\t\tconst obj = { id: a };\n\t\t\tif (mod) obj.mod = mod;\n\n\t\t\treturn obj;\n\t\t});\n\t}\n\n\tFilterGroupByColumns(column) {\n\t\treturn column.id != \"id\";\n\t}\n\n\tLoadColumns() {\n\t\tconst columns = this.State.fields.map(a => ({\n\t\t\tid: a.id,\n\t\t\tvalue: a.name,\n\t\t\ttype: a.type,\n\t\t\tmodel: a.model,\n\t\t}));\n\t\tconst groupBy = this.$$(\"groupBy\");\n\t\tconst list = groupBy.getPopup().getList();\n\t\tlist.type.template = obj => this.ListTemplate(obj);\n\t\tlist.parse(columns);\n\n\t\tthis.$$(\"groupBy\").setValue(this.GroupState.by);\n\t}\n\n\tListTemplate(obj) {\n\t\treturn (\n\t\t\tobj.value +\n\t\t\t(obj.model\n\t\t\t\t? \"<span class='webix_rpt_sources_path'>\" + obj.model + \"</span>\"\n\t\t\t\t: \"\")\n\t\t);\n\t}\n\n\tShowModifierPopup(id, e, node) {\n\t\tif (!this.DatePopup)\n\t\t\tthis.DatePopup = this.ui(new DatePopupView(this.app, this.$$(\"groupBy\")));\n\t\twebix.delay(() => this.DatePopup.Show(node, id));\n\t}\n\n\tGetDateOptions() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn [\n\t\t\t{ id: \"day\", value: _(\"Day\") },\n\t\t\t{ id: \"month\", value: _(\"Month\") },\n\t\t\t{ id: \"year\", value: _(\"Year\") },\n\t\t\t{ id: \"yearmonth\", value: _(\"Year\") + \"/\" + _(\"Month\") },\n\t\t\t{\n\t\t\t\tid: \"yearmonthday\",\n\t\t\t\tvalue: _(\"Year\") + \"/\" + _(\"Month\") + \"/\" + _(\"Day\"),\n\t\t\t},\n\t\t];\n\t}\n\tApply() {\n\t\tconst s = this.GroupState;\n\t\tthis.State.group = {\n\t\t\tby: s.by || null,\n\t\t\tcolumns: s.columns || [],\n\t\t};\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class OtherSettingsView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst groupByMode = {\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"switch\",\n\t\t\t\t\tlocalId: \"groupBySwitch\",\n\t\t\t\t\tcss: \"webix_rpt_title\",\n\t\t\t\t\twidth: 65,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: v => this.ToggleGroupBy(v),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: _(\"Group\"),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\tconst buckets = {\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"switch\",\n\t\t\t\t\tlocalId: \"bucketsSwitch\",\n\t\t\t\t\tcss: \"webix_rpt_title\",\n\t\t\t\t\twidth: 65,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: v => this.ToggleBuckets(v),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: _(\"Data buckets\"),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\tconst sortByMode = {\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"switch\",\n\t\t\t\t\tlocalId: \"sortBySwitch\",\n\t\t\t\t\tcss: \"webix_rpt_title\",\n\t\t\t\t\twidth: 65,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: v => this.ToggleSortBy(v),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: _(\"Sort\"),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"scrollview\",\n\t\t\tbody: {\n\t\t\t\ttype: \"form\",\n\t\t\t\trows: [\n\t\t\t\t\tgroupByMode,\n\t\t\t\t\t{ $subview: \"_hidden\", name: \"group\" },\n\t\t\t\t\tbuckets,\n\t\t\t\t\t{ $subview: \"_hidden\", name: \"buckets\" },\n\t\t\t\t\tsortByMode,\n\t\t\t\t\t{ $subview: \"_hidden\", name: \"sort\" },\n\t\t\t\t\t{ gravity: 0.000001 },\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.$$(\"groupBySwitch\").setValue(!!this.State.group);\n\t\tthis.$$(\"sortBySwitch\").setValue(!!this.State.sort);\n\t\tthis.$$(\"bucketsSwitch\").setValue(!!this.State.buckets);\n\t}\n\n\tToggleGroupBy(v) {\n\t\tif (v) {\n\t\t\tthis.show(\"./editor.other.groups\", { target: \"group\" });\n\t\t} else {\n\t\t\tthis.State.group = null;\n\t\t\tthis.show(\"_hidden\", { target: \"group\" });\n\t\t}\n\t}\n\n\tToggleSortBy(v) {\n\t\tif (v) {\n\t\t\tthis.show(\"./editor.other.sorts\", { target: \"sort\" });\n\t\t} else {\n\t\t\tthis.State.sort = null;\n\t\t\tthis.show(\"_hidden\", { target: \"sort\" });\n\t\t}\n\t}\n\tToggleBuckets(v) {\n\t\tif (v) {\n\t\t\tthis.show(\"./editor.other.buckets\", { target: \"buckets\" });\n\t\t} else {\n\t\t\tthis.State.buckets = null;\n\t\t\tthis.show(\"_hidden\", { target: \"buckets\" });\n\t\t}\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { sortAsc, sortDesc } from \"helpers/icons\";\nimport \"../../../helpers/groupselect\";\n\nexport default class OtherSettingsView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tconst sortBy = {\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlabel: _(\"Specify columns to sort by\"),\n\t\t\t\t\tcss: \"webix_rpt_subtitle\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"groupselect\",\n\t\t\t\t\tlocalId: \"sortBy\",\n\t\t\t\t\tselectIcon: false,\n\t\t\t\t\tcss: \"webix_rpt_sort_selector\",\n\t\t\t\t\tmodifiers: [\n\t\t\t\t\t\t{ id: \"asc\", value: sortAsc },\n\t\t\t\t\t\t{ id: \"desc\", value: sortDesc },\n\t\t\t\t\t],\n\t\t\t\t\toptions: [],\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: () => this.ChangeSortBy(),\n\t\t\t\t\t\tonModifierClick: id => this.ChangeDirection(id),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\treturn sortBy;\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.on(this.State.$changes, \"publicFields\", v => {\n\t\t\tif (v) this.LoadColumns();\n\t\t});\n\t\tthis.on(this.State.$changes, \"fields\", () => {\n\t\t\tif (!this.State.publicFields) this.LoadColumns();\n\t\t});\n\t}\n\n\tLoadColumns() {\n\t\tconst columns = (this.State.publicFields || this.State.fields).map(a => ({\n\t\t\tid: a.id,\n\t\t\tvalue: a.name,\n\t\t\ttype: a.type,\n\t\t\tmodel: a.model,\n\t\t}));\n\n\t\tconst sortBy = this.$$(\"sortBy\");\n\t\tconst list = sortBy.getPopup().getList();\n\t\tlist.type.template = obj => this.ListTemplate(obj);\n\t\tlist.clearAll();\n\t\tlist.parse(columns);\n\n\t\tlet sort = this.State.sort;\n\t\tif (sort) sort = sort.filter(a => !!columns.find(b => b.id == a.id));\n\t\tsortBy.setValue(sort);\n\t}\n\n\tListTemplate(obj) {\n\t\treturn (\n\t\t\tobj.value +\n\t\t\t(obj.model\n\t\t\t\t? \"<span class='webix_rpt_sources_path'>\" + obj.model + \"</span>\"\n\t\t\t\t: \"\")\n\t\t);\n\t}\n\n\tChangeSortBy() {\n\t\tconst ui = this.$$(\"sortBy\");\n\t\tlet arr = ui.getValue();\n\t\tarr = arr ? (typeof arr === \"string\" ? arr.split(\",\") : arr) : [];\n\n\t\tconst state = arr.map(id => {\n\t\t\tlet mod = ui.getModifier(id);\n\t\t\tif (!mod) {\n\t\t\t\tmod = \"asc\";\n\t\t\t\tui.setModifier(id, mod, true);\n\t\t\t}\n\n\t\t\tconst obj = { id };\n\t\t\tif (mod) obj.mod = mod;\n\n\t\t\treturn obj;\n\t\t});\n\n\t\tthis.State.sort = state.length ? state : null;\n\t}\n\n\tChangeDirection(id) {\n\t\tconst ui = this.$$(\"sortBy\");\n\t\tui.setModifier(id, ui.getModifier(id) === \"asc\" ? \"desc\" : \"asc\");\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { bind } from \"jet-restate-bind\";\n\nexport default class AxisPropertiesView extends JetView {\n\tconstructor(app, data, chartState) {\n\t\tsuper(app);\n\t\tthis.Axis = data;\n\t\tthis.ChartState = chartState;\n\t}\n\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tthis.Charts = this.app.getService(\"charts\");\n\t\tconst inputs = [\n\t\t\t{\n\t\t\t\tlabel: _(\"Logarithmic scale\"),\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname: \"logarithmic\",\n\t\t\t\thidden: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: _(\"Title\"),\n\t\t\t\tview: \"text\",\n\t\t\t\tname: \"title\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: _(\"Color\"),\n\t\t\t\tview: \"colorpicker\",\n\t\t\t\tname: \"color\",\n\t\t\t\tcss: \"webix_rpt_colorpicker\",\n\t\t\t\tsuggest: {\n\t\t\t\t\tpadding: 0, //for Flat skins\n\t\t\t\t\ttype: \"colorselect\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tbutton: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabelWidth: 190,\n\t\t\t\t\t\tlabel: _(\"Gridlines\"),\n\t\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\t\tname: \"lines\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"colorpicker\",\n\t\t\t\t\t\tname: \"lineColor\",\n\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\tcss: \"webix_rpt_colorpicker\",\n\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\tpadding: 0, //for Flat skins\n\t\t\t\t\t\t\ttype: \"colorselect\",\n\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\tbutton: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\n\t\t\t{\n\t\t\t\tlabel: _(\"Vertical labels\"),\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname: \"verticalLabels\",\n\t\t\t\thidden: true,\n\t\t\t},\n\t\t];\n\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tborderless: true,\n\t\t\telementsConfig: {\n\t\t\t\tlabelAlign: \"right\",\n\t\t\t\tlabelWidth: 190,\n\t\t\t},\n\t\t\tvisibleBatch: \"default\",\n\t\t\trows: inputs,\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.on(this.Axis.$changes, \"id\", id => {\n\t\t\tif (id == \"y\") this.ApplyYAxis();\n\t\t\telse this.ApplyXAxis();\n\t\t});\n\t\tthis.on(this.Axis.$changes, \"lines\", v => {\n\t\t\tconst lineColor = this.getRoot().elements[\"lineColor\"];\n\t\t\tif (v) lineColor.show();\n\t\t\telse lineColor.hide();\n\t\t});\n\t\tbind(this.Axis, \"*\", this.getRoot());\n\t}\n\n\tApplyYAxis() {\n\t\tthis.getRoot().elements[\"logarithmic\"].show();\n\t}\n\tApplyXAxis() {\n\t\tthis.getRoot().elements[\"verticalLabels\"].show();\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class BaseStructureView extends JetView {\n\tHideField(id) {\n\t\tthis.$$(\"fields\").updateItem(id, { show: false });\n\t\tthis.SaveOrder();\n\t}\n\n\tShowField(id) {\n\t\tthis.$$(\"fields\").updateItem(id, { show: true });\n\t\tthis.SaveOrder();\n\t}\n\n\tHideAllEditors(id, name) {\n\t\tif (!name) name = \"fields\";\n\t\tif (this._ActiveEditor[name])\n\t\t\tthis.$$(name).closeSub(this._ActiveEditor[name]);\n\n\t\tthis._ActiveEditor[name] = id;\n\t\tif (id) {\n\t\t\twebix.delay(\n\t\t\t\t() => {\n\t\t\t\t\tconst subView = this.$$(name).getSubView(id);\n\t\t\t\t\tif (subView) subView.focus();\n\t\t\t\t},\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\t100\n\t\t\t);\n\t\t}\n\t}\n\n\tResetEditor(name) {\n\t\tthis._ActiveEditor[name || \"fields\"] = null;\n\t}\n\n\tToggleSub(id, name) {\n\t\tconst table = this.$$(name || \"fields\");\n\t\tvar row = table.getItem(id);\n\t\tif (row.$subopen) table.closeSub(id);\n\t\telse table.openSub(id);\n\t}\n\n\tSaveOrder() {}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class ColorPopupView extends JetView {\n\tconstructor(app, state) {\n\t\tsuper(app);\n\t\tthis.State = state;\n\t\tthis.Id = null;\n\t}\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tbody: {\n\t\t\t\tview: \"colorselect\",\n\t\t\t\tbutton: true,\n\t\t\t\ton: {\n\t\t\t\t\tonColorSelect: color => {\n\t\t\t\t\t\tlet s = this.GetSeries(this.Id);\n\t\t\t\t\t\tif (s) s.meta.color = color;\n\t\t\t\t\t\tthis.State.updatedSeries = this.Id;\n\t\t\t\t\t\tthis.getRoot().close();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\tShow(node, id) {\n\t\tconst popup = this.getRoot();\n\t\tthis.Id = id;\n\t\tpopup.show(node);\n\t\tpopup.getBody().setValue(this.GetSeries(id).meta.color);\n\t}\n\n\tGetSeries(id) {\n\t\treturn this.State.series.find(s => s.id == id);\n\t}\n}\n","webix.protoUI(\n\t{\n\t\tname: \"text-search\",\n\t\t$cssName: \"search\",\n\t\tdefaults: {\n\t\t\tcloseIcon: \"wxi-close\",\n\t\t\ttemplate: function(obj, common) {\n\t\t\t\tvar text = common.$renderInput(obj);\n\t\t\t\tif (obj.badge || obj.badge === 0)\n\t\t\t\t\ttext = text.replace(\n\t\t\t\t\t\tnew RegExp(\"</div>$\"),\n\t\t\t\t\t\t\"<span class='webix_badge'>\" + obj.badge + \"</span></div>\"\n\t\t\t\t\t);\n\t\t\t\treturn text;\n\t\t\t},\n\t\t},\n\n\t\ton_click: {\n\t\t\twebix_input_icon: function(e) {\n\t\t\t\tconst css = e.target.className;\n\t\t\t\tthis.getInputNode().focus();\n\n\t\t\t\tif (css.indexOf(this.config.closeIcon) > -1) {\n\t\t\t\t\tthis.setValue(\"\");\n\t\t\t\t\tthis.callEvent(\"onCloseIconClick\", [e]);\n\t\t\t\t\tthis.hideCloseIcon();\n\t\t\t\t} else {\n\t\t\t\t\tthis.callEvent(\"onSearchIconClick\", [e]);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t$init() {\n\t\t\tthis.attachEvent(\"onTimedKeyPress\", () => this._onSearch());\n\t\t\tthis.attachEvent(\"onChange\", () => this._onSearch());\n\t\t},\n\t\t_onSearch() {\n\t\t\tconst v = this.getValue();\n\t\t\tif (v) this.showCloseIcon();\n\t\t\telse this.hideCloseIcon();\n\n\t\t\tthis.callEvent(\"onSearchChange\", [v]);\n\t\t},\n\t\tsetIcon(icon) {\n\t\t\tconst nodes = this.$view.getElementsByClassName(\"webix_input_icon\");\n\t\t\tif (nodes.length) nodes[0].className = \"webix_input_icon \" + icon;\n\t\t},\n\t\tshowCloseIcon() {\n\t\t\tthis.setIcon(this.config.closeIcon);\n\t\t},\n\t\thideCloseIcon() {\n\t\t\tthis.setIcon(this.config.icon);\n\t\t},\n\t\tsetBadge(value) {\n\t\t\tlet node = this.$view.querySelector(\".webix_badge\");\n\t\t\tif (value || value === 0) {\n\t\t\t\tif (!node) {\n\t\t\t\t\tnode = webix.html.create(\n\t\t\t\t\t\t\"SPAN\",\n\t\t\t\t\t\t{ class: \"webix_badge\" },\n\t\t\t\t\t\t\"\" + value\n\t\t\t\t\t);\n\t\t\t\t\tthis.$view.querySelector(\".webix_el_box\").appendChild(node);\n\t\t\t\t} else node.innerHTML = \"\" + value;\n\t\t\t} else if (node) webix.html.remove(node);\n\t\t\tthis.config.badge = value;\n\t\t},\n\t},\n\twebix.ui.search\n);\n","import { JetView } from \"webix-jet\";\nimport { bind } from \"jet-restate-bind\";\n\nexport default class SeriesPropertiesView extends JetView {\n\tconstructor(app, data, chartState) {\n\t\tsuper(app);\n\t\tthis.Series = data;\n\t\tthis.ChartState = chartState;\n\t}\n\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tthis.Charts = this.app.getService(\"charts\");\n\t\tconst inputs = [\n\t\t\t{\n\t\t\t\tlabelAlign: \"right\",\n\t\t\t\tlabel: _(\"Title\"),\n\t\t\t\tview: \"text\",\n\t\t\t\tname: \"name\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabelAlign: \"right\",\n\t\t\t\tlabel: _(\"Color\"),\n\t\t\t\tview: \"colorpicker\",\n\t\t\t\tname: \"color\",\n\t\t\t\tcss: \"webix_rpt_colorpicker\",\n\t\t\t\tsuggest: {\n\t\t\t\t\tpadding: 0, //for Flat skins\n\t\t\t\t\ttype: \"colorselect\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tbutton: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabelAlign: \"right\",\n\t\t\t\tlabel: _(\"Marker type\"),\n\t\t\t\tview: \"richselect\",\n\t\t\t\tcss: \"webix_rpt_markerselect\",\n\t\t\t\tname: \"markerType\",\n\t\t\t\toptions: {\n\t\t\t\t\tpadding: 0, //for Flat skins\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tcss: \"webix_rpt_markerselect_list\",\n\t\t\t\t\t\ttemplate: item => this.ItemListTemplate(item),\n\t\t\t\t\t\tdata: this.Charts.getItemTypes(),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tbatch: \"marker\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabelAlign: \"right\",\n\t\t\t\tlabel: _(\"Fill marker\"),\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tname: \"fillMarker\",\n\t\t\t\tbatch: \"marker\",\n\t\t\t},\n\t\t];\n\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tborderless: true,\n\t\t\telementsConfig: {\n\t\t\t\tlabelWidth: 170,\n\t\t\t},\n\t\t\tvisibleBatch: \"default\",\n\t\t\trows: inputs,\n\t\t};\n\t}\n\n\tinit() {\n\t\tbind(this.Series, \"*\", this.getRoot());\n\t\tif (this.Charts.itemSupport.indexOf(this.ChartState.chartType) > -1)\n\t\t\tthis.getRoot().showBatch(\"marker\");\n\n\t\tthis.on(this.Series.$changes, \"color\", () => {\n\t\t\tconst markerType = this.getRoot().elements[\"markerType\"];\n\t\t\tmarkerType.refresh();\n\t\t\tmarkerType.getList().refresh();\n\t\t});\n\t}\n\n\tItemListTemplate(item) {\n\t\treturn `<div class=\"webix_rpt_config_row\">${item.value} <span class='webix_icon ${item.icon}' style='color:${this.Series.color}'></span></div>`;\n\t}\n}\n","import { createState, ignoreInitial } from \"jet-restate\";\nimport ColorPopup from \"./colorpopup\";\nimport BaseView from \"./baseview\";\nimport \"../../../helpers/rsearch\";\nimport SeriesProperties from \"./chartseries\";\nimport AxisProperties from \"./axis\";\n//import LegendProperties from \"./legend\";\n\nexport default class ChartView extends BaseView {\n\tconfig() {\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\t\tthis.Charts = this.app.getService(\"charts\");\n\t\tthis.Local = this.app.getService(\"local\");\n\t\tthis._ActiveEditor = {};\n\t\tconst type = {\n\t\t\trows: [\n\t\t\t\t{ view: \"label\", label: this._(\"Chart type\") },\n\t\t\t\t{\n\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\tlocalId: \"type\",\n\t\t\t\t\toptions: this.Charts.getTypes(),\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: v => (this.ChartState.chartType = v),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst labelField = {\n\t\t\trows: [\n\t\t\t\t{ view: \"label\", label: _(\"X axis column\") },\n\t\t\t\t{\n\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\tlocalId: \"labelColumn\",\n\t\t\t\t\toptions: [],\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: v => this.ChangeLabelField(v),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst valueFields = {\n\t\t\tview: \"datatable\",\n\t\t\tcss: \"webix_rpt_columns_list\",\n\t\t\tlocalId: \"fields\",\n\t\t\tborderless: true,\n\t\t\tautoheight: true,\n\t\t\theader: false,\n\t\t\tselect: false,\n\t\t\teditable: true,\n\t\t\tsubview: (obj, target) => {\n\t\t\t\tif (!this.SubState) this.SubState = {};\n\t\t\t\tconst series = (this.SubState[obj.id] = createState({\n\t\t\t\t\tname: obj.meta.name,\n\t\t\t\t\tcolor: obj.meta.color,\n\t\t\t\t\ttype: obj.meta.type || null,\n\t\t\t\t\tmarkerType: obj.meta.markerType || null,\n\t\t\t\t\tfillMarker: obj.meta.fillMarker || null,\n\t\t\t\t}));\n\t\t\t\tthis.on(\n\t\t\t\t\tseries.$changes,\n\t\t\t\t\t\"*\",\n\t\t\t\t\tignoreInitial(() => {\n\t\t\t\t\t\tthis.UpdateSeries(obj.id, series);\n\t\t\t\t\t})\n\t\t\t\t);\n\n\t\t\t\tconst sub = new SeriesProperties(this.app, series, this.ChartState);\n\t\t\t\tthis.ui(sub, { container: target });\n\t\t\t\treturn sub.getRoot();\n\t\t\t},\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tfillspace: true,\n\t\t\t\t\ttemplate: (item, common) => this.RowTemplate(item, common),\n\t\t\t\t},\n\t\t\t],\n\t\t\tdrag: \"order\",\n\t\t\ton: {\n\t\t\t\tonItemDblClick: function(id) {\n\t\t\t\t\tthis.openSub(id);\n\t\t\t\t},\n\t\t\t\tonAfterRender: () => {\n\t\t\t\t\tif (this._hasFocus) {\n\t\t\t\t\t\tconst el = this._hasFocus;\n\t\t\t\t\t\tthis._hasFocus = null;\n\n\t\t\t\t\t\tif (el && document.contains(el) && el !== document.activeElement)\n\t\t\t\t\t\t\tel.focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonAfterDrop: () => this.SaveOrder(),\n\t\t\t\tonSubViewOpen: id => this.HideAllEditors(id),\n\t\t\t\t\"data->onClearAll\": () => this.ResetEditor(),\n\t\t\t\tonSubViewClose: () => this.ResetEditor(),\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_rpt_chart_color: (e, id) => this.ShowColorPopup(e, id),\n\t\t\t\t\"action-visible\": (e, id) => this.HideField(id),\n\t\t\t\t\"action-hidden\": (e, id) => this.ShowField(id),\n\t\t\t\twebix_rpt_config_row_name: (e, id) => this.ToggleSub(id),\n\t\t\t},\n\t\t};\n\t\tconst axisFields = {\n\t\t\trows: [\n\t\t\t\t{ view: \"label\", label: _(\"Axes\") },\n\n\t\t\t\t{\n\t\t\t\t\tview: \"datatable\",\n\t\t\t\t\tcss: \"webix_rpt_columns_list\",\n\t\t\t\t\tlocalId: \"axisFields\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tautoheight: true,\n\t\t\t\t\theader: false,\n\t\t\t\t\tselect: false,\n\t\t\t\t\tsubview: (obj, target) => {\n\t\t\t\t\t\tconst axis = createState({ id: obj.id, ...obj.meta });\n\t\t\t\t\t\tthis.on(\n\t\t\t\t\t\t\taxis.$changes,\n\t\t\t\t\t\t\t\"*\",\n\t\t\t\t\t\t\tignoreInitial(() => {\n\t\t\t\t\t\t\t\tthis.UpdateAxis(obj.id, axis);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst sub = new AxisProperties(this.app, axis, this.ChartState);\n\t\t\t\t\t\tthis.ui(sub, { container: target });\n\t\t\t\t\t\treturn sub.getRoot();\n\t\t\t\t\t},\n\t\t\t\t\tcolumns: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfillspace: true,\n\t\t\t\t\t\t\ttemplate: (item, common) => this.AxisRowTemplate(item, common),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonItemClick: id => this.ToggleSub(id, \"axisFields\"),\n\t\t\t\t\t\tonAfterRender: () => {\n\t\t\t\t\t\t\tif (this._hasFocus) {\n\t\t\t\t\t\t\t\tconst el = this._hasFocus;\n\t\t\t\t\t\t\t\tthis._hasFocus = null;\n\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tel &&\n\t\t\t\t\t\t\t\t\tdocument.contains(el) &&\n\t\t\t\t\t\t\t\t\tel !== document.activeElement\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\tel.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSubViewOpen: id => this.HideAllEditors(id, \"axisFields\"),\n\t\t\t\t\t\tonSubViewClose: () => this.ResetEditor(\"axisFields\"),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst legendFields = {\n\t\t\trows: [\n\t\t\t\t{ view: \"label\", label: _(\"Legend\") },\n\t\t\t\t{\n\t\t\t\t\tview: \"radio\",\n\t\t\t\t\tlocalId: \"legendPosition\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{ id: \"bottom\", value: _(\"Bottom\") },\n\t\t\t\t\t\t{ id: \"right\", value: _(\"Right\") },\n\t\t\t\t\t\t{ id: \"none\", value: _(\"None\") },\n\t\t\t\t\t],\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: v => this.ChangeLegend(v),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tscroll: \"auto\",\n\t\t\tcss: \"webix_rpt_chart_config\",\n\t\t\tpadding: { top: webix.skin.$active.layoutPadding.toolbar },\n\t\t\trows: [\n\t\t\t\ttype,\n\t\t\t\tlabelField,\n\t\t\t\t{\n\t\t\t\t\tlocalId: \"dataInputs\",\n\t\t\t\t\trows: this.GetDataInputs(),\n\t\t\t\t},\n\t\t\t\tvalueFields,\n\t\t\t\taxisFields,\n\t\t\t\tlegendFields,\n\t\t\t\t{},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.Types = this.Charts.getTypes();\n\n\t\tlet fields = [];\n\t\t(this.State.publicFields || this.State.fields).forEach(a => {\n\t\t\tfields.push({ ...a });\n\t\t});\n\n\t\t// options with all fields\n\t\tthis.Fields = fields\n\t\t\t.filter(field => {\n\t\t\t\treturn !field.key;\n\t\t\t})\n\t\t\t.sort((a, b) => (a.type < b.type ? 1 : -1))\n\t\t\t.map(a => ({ id: a.id, value: a.name, type: a.type }));\n\n\t\t// Options with numeric fields\n\t\tthis.ValueFields = fields\n\t\t\t.filter(field => {\n\t\t\t\treturn field.type == \"number\" && !field.key;\n\t\t\t})\n\t\t\t.map(a => ({ id: a.id, value: a.name, type: a.type, model: a.model }));\n\n\t\tthis.ChartState = createState(this.GetInitState());\n\n\t\tthis.on(this.ChartState.$changes, \"*\", () => {\n\t\t\tthis.UpdateModuleState();\n\t\t});\n\t\tthis.on(this.ChartState.$changes, \"chartType\", (type, prev) => {\n\t\t\tthis.ApplyChartType(type, prev);\n\t\t});\n\t\tthis.on(this.ChartState.$changes, \"seriesFrom\", (value, prev) => {\n\t\t\tthis.ApplySeriesFrom(value, prev);\n\t\t});\n\n\t\tthis.on(\n\t\t\tthis.ChartState.$changes,\n\t\t\t\"baseColumn\",\n\t\t\tignoreInitial(() => {\n\t\t\t\tthis.GenerateSeries();\n\t\t\t})\n\t\t);\n\t\tthis.on(\n\t\t\tthis.ChartState.$changes,\n\t\t\t\"dataColumn\",\n\t\t\tignoreInitial(() => {\n\t\t\t\tthis.GenerateSeries();\n\t\t\t})\n\t\t);\n\n\t\tthis.on(this.ChartState.$changes, \"updatedSeries\", v => {\n\t\t\tif (v) {\n\t\t\t\tthis.$$(\"fields\").refresh(v);\n\t\t\t\tif (this.SubState && this.SubState[v])\n\t\t\t\t\tthis.SubState[v].color = this.ChartState.series.find(\n\t\t\t\t\t\ts => s.id == v\n\t\t\t\t\t).meta.color;\n\t\t\t\tthis.ChartState.updatedSeries = null;\n\t\t\t}\n\t\t});\n\n\t\tthis.$$(\"type\").setValue(this.ChartState.chartType);\n\n\t\tthis.$$(\"labelColumn\")\n\t\t\t.getList()\n\t\t\t.parse(this.Fields);\n\t\tthis.$$(\"labelColumn\").setValue(this.ChartState.labelColumn);\n\n\t\tthis.$$(\"seriesFrom\").setValue(this.ChartState.seriesFrom);\n\n\t\tthis.$$(\"baseColumn\")\n\t\t\t.getList()\n\t\t\t.parse(this.Fields);\n\t\tthis.$$(\"baseColumn\").setValue(this.ChartState.baseColumn);\n\n\t\tthis.$$(\"dataColumn\")\n\t\t\t.getList()\n\t\t\t.parse(this.ValueFields);\n\t\tthis.$$(\"dataColumn\").setValue(this.ChartState.dataColumn);\n\n\t\tthis.$$(\"legendPosition\").setValue(this.ChartState.legendPosition);\n\t}\n\n\tChangeLabelField(label) {\n\t\tthis.ChartState.labelColumn = label;\n\t}\n\tChangeLegend(v) {\n\t\tthis.ChartState.legendPosition = v;\n\t}\n\n\tGetInitState() {\n\t\tconst meta = this.State.meta.chart || {};\n\t\treturn {\n\t\t\tchartType: meta.chartType || this.Charts.type,\n\t\t\tlabelColumn: meta.labelColumn || null,\n\t\t\tupdatedSeries: null,\n\t\t\tseriesFrom: meta.seriesFrom || \"columns\",\n\t\t\tbaseColumn: meta.baseColumn || null,\n\t\t\tdataColumn: meta.dataColumn || null,\n\t\t\tseries: meta.series || null,\n\t\t\tlegend: meta.legend || { layout: \"x\" },\n\t\t\taxises: meta.axises || null,\n\t\t\tlegendPosition: meta.legendPosition || \"bottom\",\n\t\t};\n\t}\n\n\t/*\n\t * Called when chart type changed.\n\t * */\n\tApplyChartType(type, prevType) {\n\t\tthis.ShowAxisInputs(type);\n\t\tthis.RenderSeries(prevType);\n\t}\n\n\t/*\n\t * Renders chart series. Loads init state values\n\t * or generates new series depending on selected type\n\t * */\n\tRenderSeries(prevType) {\n\t\tconst series = this.ChartState.series;\n\t\tif (series && typeof prevType == \"undefined\") this.LoadSeries(series);\n\t\telse this.GenerateSeries();\n\t}\n\n\t// Loads axis data\n\tShowAxisInputs(type) {\n\t\tconst isAxises = this.Charts.noAxisSupport.indexOf(type);\n\t\tif (isAxises) {\n\t\t\tif (!this.ChartState.axises) {\n\t\t\t\tthis.ChartState.axises = {\n\t\t\t\t\tx: {\n\t\t\t\t\t\ttitle: \"\",\n\t\t\t\t\t\tcolor: \"#edeff0\",\n\t\t\t\t\t\tlineColor: \"#edeff0\",\n\t\t\t\t\t\tlines: true,\n\t\t\t\t\t\tverticalLabels: true,\n\t\t\t\t\t},\n\t\t\t\t\ty: {\n\t\t\t\t\t\ttitle: \"\",\n\t\t\t\t\t\tcolor: \"#edeff0\",\n\t\t\t\t\t\tlineColor: \"#edeff0\",\n\t\t\t\t\t\tlines: true,\n\t\t\t\t\t\tlogarithmic: false,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (!this.$$(\"axisFields\").data.count())\n\t\t\t\tthis.$$(\"axisFields\").parse([\n\t\t\t\t\t{ id: \"x\", meta: { ...this.ChartState.axises.x } },\n\t\t\t\t\t{ id: \"y\", meta: { ...this.ChartState.axises.y } },\n\t\t\t\t]);\n\t\t} else {\n\t\t\tthis.ChartState.axises = null;\n\t\t\tthis.$$(\"axisFields\").clearAll();\n\t\t}\n\t}\n\tGetDataInputs() {\n\t\treturn [\n\t\t\t{\n\t\t\t\trows: [\n\t\t\t\t\t{ view: \"label\", label: this._(\"Data series\") },\n\t\t\t\t\t{\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tview: \"label\",\n\t\t\t\t\t\t\t\t\t\tlabel: this._(\"Extract series from\"),\n\t\t\t\t\t\t\t\t\t\tcss: \"webix_rpt_subtitle\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tview: \"radio\",\n\t\t\t\t\t\t\t\t\t\twidth: 200,\n\t\t\t\t\t\t\t\t\t\tlocalId: \"seriesFrom\",\n\t\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t\t{ id: \"columns\", value: this._(\"columns\") },\n\t\t\t\t\t\t\t\t\t\t\t{ id: \"rows\", value: this._(\"rows\") },\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t\tonChange: v => (this.ChartState.seriesFrom = v),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thidden: true,\n\t\t\t\t\t\t\t\tlocalId: \"baseColumnLayout\",\n\t\t\t\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tview: \"label\",\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: this._(\"Keys column\"),\n\t\t\t\t\t\t\t\t\t\t\t\tcss: \"webix_rpt_subtitle\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\n\t\t\t\t\t\t\t\t\t\t\t\tcss: \"webix_rpt_subtitle\",\n\t\t\t\t\t\t\t\t\t\t\t\tlocalId: \"baseColumn\",\n\t\t\t\t\t\t\t\t\t\t\t\toptions: [],\n\t\t\t\t\t\t\t\t\t\t\t\tlabelPosition: \"top\",\n\t\t\t\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange: v => (this.ChartState.baseColumn = v),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\trows: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tview: \"label\",\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: this._(\"Values column\"),\n\t\t\t\t\t\t\t\t\t\t\t\tcss: \"webix_rpt_subtitle\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\t\t\t\t\t\t\tcss: \"webix_rpdataColumnt_subtitle\",\n\t\t\t\t\t\t\t\t\t\t\t\tlocalId: \"dataColumn\",\n\t\t\t\t\t\t\t\t\t\t\t\toptions: [],\n\t\t\t\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange: v => (this.ChartState.dataColumn = v),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\t}\n\n\t/*\n\t * Generates series and loads these data\n\t * params:\n\t * - an array of fields/ keys options\n\t * */\n\tApplySeriesKeys(sourceArray) {\n\t\tconst data = this.Charts.getSeries(sourceArray, this.ChartState.type);\n\t\tthis.ChartState.series = data;\n\t\tthis.LoadSeries(data);\n\t}\n\n\tLoadSeries(data) {\n\t\tif (!data.length) this.$$(\"fields\").hide();\n\t\telse this.$$(\"fields\").show();\n\n\t\tthis.$$(\"fields\").clearAll();\n\t\tthis.$$(\"fields\").parse(data);\n\t}\n\t/*\n\t * Gets row keys (requires data loading)\n\t * params:\n\t * - the field / column id where keys need to be found\n\t * Returns a promise\n\t * */\n\tGetRowKeys(base) {\n\t\tif (base && this.State.columns.length) {\n\t\t\tlet keys = [];\n\t\t\treturn this.GetData(base).then(([data, baseOptions]) => {\n\t\t\t\tdata.forEach(row => {\n\t\t\t\t\tconst key = row[base];\n\t\t\t\t\tif (keys.indexOf(key) == -1) keys.push(key);\n\t\t\t\t});\n\n\t\t\t\tif (baseOptions)\n\t\t\t\t\treturn keys.map(key => {\n\t\t\t\t\t\tconst keyOption =\n\t\t\t\t\t\t\tbaseOptions.data.find(option => option.id == key) || null;\n\t\t\t\t\t\treturn { id: key, value: keyOption ? keyOption.value : key };\n\t\t\t\t\t});\n\t\t\t\treturn keys.map(key => ({ id: key, value: key }));\n\t\t\t});\n\t\t} else return Promise.resolve([]);\n\t}\n\n\tGenerateSeries() {\n\t\tconst from = this.ChartState.seriesFrom;\n\t\tif (from == \"columns\") this.ApplySeriesKeys([...this.ValueFields], null);\n\t\telse {\n\t\t\tthis.ChartState.dataColumn = this.$$(\"dataColumn\").getValue();\n\t\t\tconst base = (this.ChartState.baseColumn = this.$$(\n\t\t\t\t\"baseColumn\"\n\t\t\t).getValue());\n\t\t\tthis.GetRowKeys(base).then(arr => this.ApplySeriesKeys(arr, base));\n\t\t}\n\t}\n\n\tApplySeriesFrom(v, prevValue) {\n\t\tif (this.$$(\"baseColumnLayout\")) {\n\t\t\tif (v == \"columns\") {\n\t\t\t\tthis.$$(\"baseColumnLayout\").hide();\n\t\t\t\tthis.$$(\"baseColumn\").setValue(null);\n\t\t\t} else this.$$(\"baseColumnLayout\").show();\n\t\t\tif (prevValue) {\n\t\t\t\tthis.GenerateSeries();\n\t\t\t}\n\t\t}\n\t}\n\n\tUpdateSeries(id, update) {\n\t\tthis._hasFocus = document.activeElement;\n\t\tconst series = [...this.ChartState.series];\n\t\tconst ind = series.findIndex(a => a.id == id);\n\t\tObject.assign(series[ind].meta, update);\n\t\tthis.ChartState.series = series;\n\t\tthis.$$(\"fields\").refresh(id);\n\t}\n\n\tUpdateAxis(id, update) {\n\t\tthis._hasFocus = document.activeElement;\n\t\tlet axises = { ...this.ChartState.axises };\n\t\tObject.assign(axises[id], update);\n\t\tthis.ChartState.axises = axises;\n\t}\n\n\tRowTemplate(item, common) {\n\t\tlet html =\n\t\t\t\"<div class='webix_rpt_config_row'><div class='webix_icon rpi-drag-vertical'></div>\";\n\t\thtml +=\n\t\t\t\"<span class='webix_icon \" +\n\t\t\t(item.show\n\t\t\t\t? \"action-visible rpi-eye\"\n\t\t\t\t: \"action-hidden rpi-eye-off-outline\") +\n\t\t\t\"'></span>\";\n\t\thtml +=\n\t\t\t\"<div class='webix_rpt_chart_color' style='background:\" +\n\t\t\titem.meta.color +\n\t\t\t\"'> </div>\";\n\t\thtml +=\n\t\t\t\"<div class='webix_rpt_config_row_name'>\" +\n\t\t\titem.name +\n\t\t\t(item.model\n\t\t\t\t? \"<span class='webix_rpt_sources_path'>\" + item.model + \"</span>\"\n\t\t\t\t: \"\") +\n\t\t\t\"</div>\";\n\t\thtml += common.subrow(item, common);\n\t\treturn html + \"</div>\";\n\t}\n\n\tGetData(baseColumn) {\n\t\tconst appState = this.app.getParam(\"state\");\n\t\tlet moduleConfig = this.Local.getDataConfig(appState.module);\n\t\tmoduleConfig.columns = this.State.columns.map(c => c.id);\n\t\tlet waitData = [this.Local.getData(moduleConfig)];\n\t\tif (baseColumn) waitData.push(this.Local.getOptionsList(baseColumn));\n\t\treturn Promise.all(waitData);\n\t}\n\n\tShowColorPopup(e, id) {\n\t\tif (!this.ColorPopup || !this.ColorPopup.$view)\n\t\t\tthis.ColorPopup = this.ui(new ColorPopup(this.app, this.ChartState));\n\t\tthis.ActiveSeries = id;\n\t\tthis.ColorPopup.Show(e.target, id);\n\t}\n\n\tSaveOrder() {\n\t\tconst table = this.$$(\"fields\");\n\t\tconst columns = [];\n\t\ttable.data.each(a => {\n\t\t\tif (a.show)\n\t\t\t\tcolumns.push(\n\t\t\t\t\t(this.State.publicFields || this.State.fields).find(\n\t\t\t\t\t\tb => b.id === a.id\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t});\n\t\tthis.ChartState.series = table.serialize();\n\t}\n\n\tUpdateModuleState() {\n\t\tconst state = this.ChartState;\n\t\tconst columns = [];\n\n\t\tif (state.labelColumn) this.AddColumn(columns, state.labelColumn);\n\t\tif (state.seriesFrom == \"columns\") {\n\t\t\tif (state.series)\n\t\t\t\tstate.series.forEach(a => {\n\t\t\t\t\tif (a.show) this.AddColumn(columns, a.id);\n\t\t\t\t});\n\t\t} else {\n\t\t\tif (state.baseColumn) this.AddColumn(columns, state.baseColumn);\n\t\t\tif (state.dataColumn) this.AddColumn(columns, state.dataColumn);\n\t\t}\n\t\tthis.State.$batch({\n\t\t\tcolumns,\n\t\t\tmeta: { ...this.State.meta, chart: this.ChartState },\n\t\t});\n\t}\n\n\tAddColumn(columns, id) {\n\t\tconst col = (this.State.publicFields || this.State.fields).find(\n\t\t\tb => b.id === id\n\t\t);\n\t\tif (col) columns.push(col);\n\t}\n\n\tAxisRowTemplate(item, common) {\n\t\tlet html =\n\t\t\t\"<div class='webix_rpt_config_row'>\" +\n\t\t\tthis._(item.id == \"x\" ? \"X Axis\" : \"Y Axis\");\n\t\thtml += common.subrow(item, common);\n\t\treturn html + \"</div>\";\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { bind } from \"jet-restate-bind\";\n\nexport default class ColumnPropertiesView extends JetView {\n\tconstructor(app, data) {\n\t\tsuper(app);\n\t\tthis.Column = data;\n\t}\n\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst inputs = [\n\t\t\t{\n\t\t\t\tlabelAlign: \"right\",\n\t\t\t\tlabel: _(\"Title\"),\n\t\t\t\tview: \"text\",\n\t\t\t\tname: \"name\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabelAlign: \"right\",\n\t\t\t\tlabel: _(\"Filter\"),\n\t\t\t\tview: \"richselect\",\n\t\t\t\tname: \"header\",\n\t\t\t\toptions: [\n\t\t\t\t\t{ id: \"none\", value: _(\"No filter\") },\n\t\t\t\t\t{ id: \"text\", value: _(\"Text\") },\n\t\t\t\t\t{ id: \"select\", value: _(\"Select\") },\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tborderless: true,\n\t\t\telementsConfig: {\n\t\t\t\tlabelWidth: 120,\n\t\t\t},\n\t\t\trows: inputs,\n\t\t};\n\t}\n\n\tinit() {\n\t\tbind(this.Column, \"*\", this.getRoot());\n\t}\n}\n","import BaseView from \"./baseview\";\n\nexport default class ChartView extends BaseView {\n\tconfig() {\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\n\t\tconst labelField = {\n\t\t\trows: [\n\t\t\t\t{ view: \"label\", label: _(\"Labels column\") },\n\t\t\t\t{\n\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\tname: \"label\",\n\t\t\t\t\toptions: [],\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst valueField = {\n\t\t\trows: [\n\t\t\t\t{ view: \"label\", label: _(\"Values column\") },\n\t\t\t\t{\n\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\tname: \"value\",\n\t\t\t\t\toptions: [],\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst colorField = {\n\t\t\trows: [\n\t\t\t\t{ view: \"label\", label: _(\"Color column\") },\n\t\t\t\t{\n\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\tname: \"color\",\n\t\t\t\t\toptions: [],\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tscroll: false,\n\t\t\tpadding: { top: webix.skin.$active.layoutPadding.toolbar },\n\t\t\trows: [valueField, labelField, colorField, {}],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.Local = this.app.getService(\"local\");\n\n\t\tlet fields = (this.Fields = (\n\t\t\tthis.State.publicFields || this.State.fields\n\t\t).map(a => ({\n\t\t\t...a,\n\t\t})));\n\t\tlet valueFields = fields.filter(\n\t\t\tfield => field.type == \"number\" && !field.key\n\t\t);\n\t\tif (!valueFields.length)\n\t\t\tvalueFields = fields.filter(field => field.type == \"number\");\n\t\tconst els = this.getRoot().elements;\n\n\t\tconst lc = els.label;\n\t\tlc.getList().parse(fields);\n\t\tlc.getList().type.template = obj => this.ListTemplate(obj);\n\t\tlc.setValue(this.State.meta.label || fields[0].id);\n\n\t\tconst vc = els.value;\n\t\tvc.getList().parse(valueFields);\n\t\tvc.getList().type.template = obj => this.ListTemplate(obj);\n\t\tvc.setValue(this.State.meta.value || valueFields[0].id);\n\n\t\tconst cc = els.color;\n\t\tcc.getList().parse(valueFields);\n\t\tcc.getList().type.template = obj => this.ListTemplate(obj);\n\t\tcc.setValue(this.State.meta.color || valueFields[0].id);\n\n\t\tthis.getRoot().attachEvent(\"onChange\", () => this.OnChange());\n\t\tif (!this.State.meta.value) this.OnChange();\n\t}\n\n\tOnChange() {\n\t\tthis.Apply({ ...this.State.meta, ...this.getRoot().getValues() });\n\t}\n\n\tApply(meta) {\n\t\tconst check = [meta.value, meta.label, meta.color];\n\t\tconst columns = this.Fields.filter(a => check.indexOf(a.id) !== -1);\n\n\t\tthis.State.$batch({\n\t\t\tmeta,\n\t\t\tcolumns,\n\t\t});\n\t}\n\n\tListTemplate(obj) {\n\t\treturn (\n\t\t\tobj.name +\n\t\t\t(obj.model\n\t\t\t\t? \"<span class='webix_rpt_sources_path'>\" + obj.model + \"</span>\"\n\t\t\t\t: \"\")\n\t\t);\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { types } from \"../../../helpers/icons\";\n\nexport default class StructureView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst tabbar = {\n\t\t\tview: \"richselect\",\n\t\t\tlocalId: \"select\",\n\t\t\tborderless: true,\n\t\t\talign: \"left\",\n\t\t\tinputWidth: 170,\n\t\t\toptions: [\n\t\t\t\t{\n\t\t\t\t\tid: \"table\",\n\t\t\t\t\tvalue: types.table + \" \" + _(\"Table\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"chart\",\n\t\t\t\t\tvalue: types.chart + \" \" + _(\"Chart\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"heatmap\",\n\t\t\t\t\tvalue: types.heatmap + \" \" + _(\"Heatmap\"),\n\t\t\t\t},\n\t\t\t],\n\t\t\ton: {\n\t\t\t\tonChange: v => this.ChangeReportType(v),\n\t\t\t},\n\t\t};\n\n\t\tconst toolbar = {\n\t\t\tview: \"form\",\n\t\t\tpadding: {\n\t\t\t\tleft: webix.skin.$active.layoutPadding.form,\n\t\t\t\ttop: 5,\n\t\t\t\tbottom: 0,\n\t\t\t},\n\t\t\tscroll: false,\n\t\t\tcols: [tabbar],\n\t\t};\n\n\t\tconst ui = {\n\t\t\twidth: 480,\n\t\t\thidden: false,\n\t\t\tlocalId: \"settings\",\n\t\t\ttype: \"clean\",\n\n\t\t\trows: [toolbar, { $subview: true }],\n\t\t};\n\n\t\tthis.Local = this.app.getService(\"local\");\n\t\treturn ui;\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\n\t\tthis.on(this.State.$changes, \"type\", v => {\n\t\t\tthis.show(\"editor.structure.\" + v);\n\t\t});\n\t\tthis.$$(\"select\").setValue(this.State.type);\n\t}\n\n\tChangeReportType(type) {\n\t\tif (this.State.type != type) this.State.$batch({ type, meta: {} });\n\t}\n}\n","import { createState, ignoreInitial } from \"jet-restate\";\n\nimport ColumnProperties from \"./column\";\n\nimport \"../../../helpers/rsearch\";\nimport BaseView from \"./baseview\";\n\nexport default class ColumnsView extends BaseView {\n\tconfig() {\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\t\tthis._ActiveEditor = {};\n\t\tconst header = {\n\t\t\tpadding: { top: webix.skin.$active.layoutPadding.toolbar },\n\t\t\trows: [\n\t\t\t\t{ view: \"label\", label: _(\"Columns\") },\n\t\t\t\t{\n\t\t\t\t\tview: \"text-search\",\n\t\t\t\t\tlocalId: \"search\",\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonSearchChange: () => this.FilterFields(),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst fields = {\n\t\t\tview: \"datatable\",\n\t\t\tcss: \"webix_rpt_columns_list\",\n\t\t\tlocalId: \"fields\",\n\t\t\tborderless: true,\n\t\t\tautoheight: true,\n\t\t\theader: false,\n\t\t\tselect: false,\n\t\t\tsubview: (obj, target) => {\n\t\t\t\tconst column = createState({\n\t\t\t\t\tname: obj.meta.name || obj.name,\n\t\t\t\t\theader: obj.meta.header || \"none\",\n\t\t\t\t});\n\t\t\t\tthis.on(\n\t\t\t\t\tcolumn.$changes,\n\t\t\t\t\t\"*\",\n\t\t\t\t\tignoreInitial(() => {\n\t\t\t\t\t\tthis.Update(obj.id, column);\n\t\t\t\t\t})\n\t\t\t\t);\n\n\t\t\t\tconst sub = new ColumnProperties(this.app, column);\n\t\t\t\tthis.ui(sub, { container: target });\n\t\t\t\treturn sub.getRoot();\n\t\t\t},\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tfillspace: true,\n\t\t\t\t\ttemplate: (item, common) => this.RowTemplate(item, common),\n\t\t\t\t},\n\t\t\t],\n\t\t\tdrag: \"order\",\n\t\t\ton: {\n\t\t\t\tonItemDblClick: function(id) {\n\t\t\t\t\tif (id.row !== \"$freeze\") this.openSub(id);\n\t\t\t\t},\n\t\t\t\tonBeforeDrag: ctx => {\n\t\t\t\t\tthis.HideAllEditors();\n\t\t\t\t\tconst list = this.$$(\"fields\");\n\t\t\t\t\twebix.html.addCss(list.$view, \"webix_rpt_drag\");\n\n\t\t\t\t\tif (ctx.start === \"$freeze\") {\n\t\t\t\t\t\tctx.html = `<div class=\"webix_drag_zone\"><div class=\"webix_dd_drag wbx-mark_frozen\" style=\"width:${\n\t\t\t\t\t\t\tlist.$width\n\t\t\t\t\t\t}px;\"><div>${this.FrozenTemplate()}</div></div></div>`;\n\t\t\t\t\t} else if (!list.getItem(ctx.start).show) return false;\n\t\t\t\t},\n\t\t\t\tonAfterRender: () => {\n\t\t\t\t\tif (this._hasFocus) {\n\t\t\t\t\t\tconst el = this._hasFocus;\n\t\t\t\t\t\tthis._hasFocus = null;\n\n\t\t\t\t\t\tif (el && document.contains(el) && el !== document.activeElement)\n\t\t\t\t\t\t\tel.focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonAfterDrop: () => {\n\t\t\t\t\twebix.html.removeCss(this.$$(\"fields\").$view, \"webix_rpt_drag\");\n\t\t\t\t\tthis.SaveOrder();\n\t\t\t\t},\n\t\t\t\tonSubViewOpen: id => this.HideAllEditors(id),\n\t\t\t\tonSubViewClose: () => this.ResetEditor(),\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\t\"action-visible\": (e, id) => this.HideField(id),\n\t\t\t\t\"action-hidden\": (e, id) => this.ShowField(id),\n\t\t\t\twebix_rpt_config_row_name: (e, id) => this.ToggleSub(id),\n\t\t\t},\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tscroll: \"auto\",\n\t\t\tpadding: { top: webix.skin.$active.layoutPadding.toolbar },\n\t\t\trows: [header, fields],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\n\t\tconst table = this.$$(\"fields\");\n\t\tconst has = {};\n\t\tconst columns = this.State.columns.map(a => {\n\t\t\thas[a.id] = 1;\n\t\t\treturn { ...a, show: true };\n\t\t});\n\n\t\t(this.State.publicFields || this.State.fields).forEach(a => {\n\t\t\tif (!has[a.id]) columns.push({ ...a, show: false });\n\t\t});\n\n\t\tcolumns.splice(this.State.meta.freeze || 0, 0, {\n\t\t\tid: \"$freeze\",\n\t\t\t$css: \"wbx-mark_frozen\",\n\t\t\tname: this.FrozenTemplate(),\n\t\t});\n\t\ttable.parse(columns);\n\t}\n\n\tFilterFields() {\n\t\tconst f = this.$$(\"search\")\n\t\t\t.getValue()\n\t\t\t.toLowerCase();\n\t\tthis.$$(\"fields\").filter(a => a.name.toLowerCase().indexOf(f) !== -1);\n\t}\n\n\tUpdate(id, update) {\n\t\tthis._hasFocus = document.activeElement;\n\t\tconst columns = [...this.State.columns];\n\t\tconst ind = columns.findIndex(a => a.id == id);\n\t\tObject.assign(columns[ind].meta, update);\n\t\tthis.State.$batch({\n\t\t\tcolumns,\n\t\t\tmeta: { ...this.State.meta, freeze: this.GetFreeze() },\n\t\t});\n\t}\n\n\tGetFreeze() {\n\t\tconst table = this.$$(\"fields\");\n\t\tconst order = table.data.order;\n\n\t\tlet freezeColumn = 0;\n\t\tfor (var i = 0; i < order.length; i++) {\n\t\t\tif (order[i] === \"$freeze\") break;\n\t\t\tfreezeColumn += table.getItem(order[i]).show ? 1 : 0;\n\t\t}\n\n\t\treturn freezeColumn;\n\t}\n\n\tSaveOrder() {\n\t\tconst table = this.$$(\"fields\");\n\t\tconst columns = [];\n\t\ttable.data.each(a => {\n\t\t\tif (a.show)\n\t\t\t\tcolumns.push(\n\t\t\t\t\t(this.State.publicFields || this.State.fields).find(\n\t\t\t\t\t\tb => b.id === a.id\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t});\n\n\t\tthis.State.$batch({\n\t\t\tcolumns,\n\t\t\tmeta: { ...this.State.meta, freeze: this.GetFreeze() },\n\t\t});\n\t}\n\n\tFrozenTemplate() {\n\t\treturn (\n\t\t\t\"<span class='webix_rpt_frozen webix_icon rpi-arrow-horizontal-lock'></span><span>\" +\n\t\t\tthis._(\"Frozen columns above\") +\n\t\t\t\"</span>\"\n\t\t);\n\t}\n\n\tRowTemplate(item, common) {\n\t\tlet html =\n\t\t\t\"<div class='webix_rpt_config_row'><div class='webix_icon rpi-drag-vertical'></div>\";\n\t\thtml +=\n\t\t\titem.id !== \"$freeze\"\n\t\t\t\t? \"<span class='webix_icon \" +\n\t\t\t\t  (item.show\n\t\t\t\t\t\t? \"action-visible rpi-eye\"\n\t\t\t\t\t\t: \"action-hidden rpi-eye-off-outline\") +\n\t\t\t\t  \"'></span>\"\n\t\t\t\t: \"\";\n\t\thtml +=\n\t\t\t\"<div class='webix_rpt_config_row_name'>\" +\n\t\t\titem.name +\n\t\t\t(item.model\n\t\t\t\t? \"<span class='webix_rpt_sources_path'>\" + item.model + \"</span>\"\n\t\t\t\t: \"\") +\n\t\t\t\"</div>\";\n\t\thtml += item.id !== \"$freeze\" ? common.subrow(item, common) : \"\";\n\t\treturn html + \"</div>\";\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { empty } from \"../helpers/icons\";\n\nexport default class EmptyView extends JetView {\n\tconfig() {\n\t\treturn {\n\t\t\tcss: \"webix_rpt_empty\",\n\t\t\tview: \"template\",\n\t\t\tborderless: true,\n\t\t\ttemplate: value => this.GetTemplate(value),\n\t\t};\n\t}\n\tinit() {\n\t\tconst mods = this.app.getService(\"local\").getModules();\n\t\tmods.waitData.then(() => {\n\t\t\tconst text = this.GetText(mods.data.count());\n\t\t\tthis.getRoot().setValues({ text });\n\t\t});\n\t}\n\tGetText(count) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn count\n\t\t\t? _(\"Select any report from the list\")\n\t\t\t: _(\"Click 'New' button to add a new report\");\n\t}\n\tGetSVG() {\n\t\tconst skin = webix.skin.$name;\n\t\tconst icon = skin == \"willow\" || skin == \"dark\" ? \"alt\" : \"main\";\n\t\treturn empty[icon];\n\t}\n\tGetTemplate(value) {\n\t\tconst text =\n\t\t\t\"<div class='webix_rpt_empty_placeholder'>\" +\n\t\t\t(value.text || \"\") +\n\t\t\t\"</div>\";\n\t\treturn text + this.GetSVG();\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport Toolbar from \"./common/toolbar\";\n\nexport default class TableView extends JetView {\n\tconfig() {\n\t\tconst page = {\n\t\t\ttype: \"wide\",\n\t\t\tmargin: 5,\n\t\t\tcols: [{}],\n\t\t};\n\n\t\treturn { rows: [Toolbar, page] };\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.Local = this.app.getService(\"local\");\n\t}\n\tready() {\n\t\tconst parts = this.getRoot().getChildViews();\n\t\tthis.Bar = parts[0];\n\t\tthis.Host = parts[1];\n\n\t\tthis.on(this.State.$changes, \"module\", mod => this.Show(mod));\n\t\tthis.on(this.app, \"exportModule\", mode => this.Export(mode));\n\t}\n\n\tShow(mod) {\n\t\tconst host = this.Host;\n\t\tif (mod && mod.meta.value && mod.type === \"heatmap\") {\n\t\t\tconst config = this.GetChartConfig(mod);\n\t\t\tif (!config.view) return;\n\t\t\tthis.Bar.show();\n\t\t\tthis.GetChartData(mod).then(([data, options]) => {\n\t\t\t\tconfig.data = this.FormatLabels(webix.copy(data), options);\n\t\t\t\tif (data.length && mod.meta.color)\n\t\t\t\t\tconfig.type.cssClass = this.CssFactory(data, mod.meta.color);\n\n\t\t\t\twebix.ui([config], host);\n\t\t\t\tthis.Chart = host.getChildViews()[0];\n\t\t\t});\n\t\t} else {\n\t\t\twebix.ui([{ template: \" \" }], host);\n\t\t\tthis.Bar.hide();\n\t\t\tthis.Chart = null;\n\t\t}\n\t}\n\n\tGetChartConfig(mod) {\n\t\tconst { meta, columns } = mod;\n\n\t\tconst obj = {\n\t\t\tview: \"treemap\",\n\t\t\tcss: \"webix_rpt\",\n\t\t\tvalue: obj => obj[meta.value],\n\t\t\ttooltip: this.TooltipFactory(meta, columns),\n\t\t\ttype: {},\n\t\t};\n\n\t\tif (meta.label) obj.type.template = obj => obj[meta.label];\n\n\t\treturn obj;\n\t}\n\n\tGetChartData(mod) {\n\t\treturn Promise.all([\n\t\t\tthis.Local.getData(\n\t\t\t\tthis.Local.getDataConfig(mod),\n\t\t\t\tthis.State.mode == \"edit\"\n\t\t\t),\n\t\t\tthis.Local.getOptions(mod.columns),\n\t\t]);\n\t}\n\n\tCssFactory(data, prop) {\n\t\tvar min = Infinity;\n\t\tvar max = -Infinity;\n\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tconst v = data[i][prop];\n\t\t\tif (v > max) max = v * 1;\n\t\t\tif (v < min) min = v * 1;\n\t\t}\n\n\t\tconst step = (max - min) / 4;\n\t\tconst bases = [max - step, max - step * 2, max - step * 3, min];\n\n\t\treturn function(obj) {\n\t\t\tconst v = obj[prop];\n\t\t\tfor (var i = 0; i < bases.length; i++) if (v >= bases[i]) return \"l\" + i;\n\t\t};\n\t}\n\n\tTooltipFactory(obj, columns) {\n\t\tconst valueColumn = columns.find(a => a.id === obj.value);\n\t\tconst colorColumn = columns.find(a => a.id === obj.color);\n\t\tif (!valueColumn || !colorColumn) return \"\";\n\t\tconst props = [obj.value, valueColumn.name];\n\t\tif (obj.color && obj.color != obj.value)\n\t\t\tprops.push(obj.color, colorColumn.name);\n\n\t\treturn function(obj) {\n\t\t\tlet out = \"\";\n\t\t\tfor (let i = 0; i < props.length; i += 2) {\n\t\t\t\tout += (i ? \", \" : \"\") + props[i + 1] + \": \" + obj[props[i]];\n\t\t\t}\n\n\t\t\treturn out;\n\t\t};\n\t}\n\t/**\n\t * Exports chart to png image or PDF\n\t * @param {String} mode - export mode ( \"png\" or PDF \"table\"/\"image\"/\"all\"),\n\t */\n\tExport(mode) {\n\t\tif (this.Chart) {\n\t\t\tif (mode == \"png\") webix.toPNG(this.Chart);\n\t\t\telse if (mode == \"pdf\") {\n\t\t\t\tlet params = { autowidth: true, display: \"image\" };\n\t\t\t\twebix.toPDF(this.Chart, params);\n\t\t\t}\n\t\t}\n\t}\n\tFormatLabels(data, options) {\n\t\tconst labelColumn = this.State.module.meta.label;\n\t\tconst labelOptions =\n\t\t\tlabelColumn && options.length\n\t\t\t\t? options.find(op => op.field == labelColumn)\n\t\t\t\t: null;\n\n\t\tif (labelOptions)\n\t\t\tdata.forEach(item => {\n\t\t\t\tconst option = labelOptions.data.find(o => o.id == item[labelColumn]);\n\t\t\t\titem[labelColumn] = option ? option.value : item[labelColumn];\n\t\t\t});\n\t\telse {\n\t\t\tconst field = this.State.module.fields.find(\n\t\t\t\tfield => field.id == labelColumn\n\t\t\t);\n\t\t\tif (field && field.type == \"date\") {\n\t\t\t\tdata.forEach(item => {\n\t\t\t\t\titem[labelColumn] = webix.i18n.dateFormatStr(\n\t\t\t\t\t\tnew Date(item[labelColumn])\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class MenuPopup extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tpadding: 0,\n\t\t\tpoint: false,\n\t\t\tbody: {\n\t\t\t\tview: \"list\",\n\t\t\t\tborderless: true,\n\t\t\t\tcss: \"webix_rpt_popup_menu\",\n\t\t\t\ttemplate: obj =>\n\t\t\t\t\t`<span class='webix_icon ${obj.icon}'></span>${obj.value}`,\n\t\t\t\twidth: 160,\n\t\t\t\tautoheight: true,\n\t\t\t\tdata: [\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: _(\"Edit\"),\n\t\t\t\t\t\tid: \"edit\",\n\t\t\t\t\t\ticon: \"rpi-square-edit-outline\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: _(\"Create copy\"),\n\t\t\t\t\t\tid: \"copy\",\n\t\t\t\t\t\ticon: \"rpi-content-copy\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: _(\"Delete\"),\n\t\t\t\t\t\tid: \"delete\",\n\t\t\t\t\t\ticon: \"rpi-delete\",\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: id => {\n\t\t\t\t\t\tthis.app.callEvent(\"onMenuAction\", [this.ID, id]);\n\t\t\t\t\t\tthis.getRoot().hide();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\tinit() {}\n\n\tShow(trg, id) {\n\t\tthis.ID = id;\n\t\twebix.delay(() => {\n\t\t\tif (this.getRoot()) this.getRoot().show(trg);\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport \"../helpers/rsearch\";\nimport MenuPopup from \"./menu\";\nimport { types } from \"../helpers/icons\";\n\nexport default class GridsView extends JetView {\n\tconfig() {\n\t\tconst _ = (this._ = this.app.getService(\"locale\")._);\n\t\tconst bar = {\n\t\t\tview: \"form\",\n\t\t\theight: webix.skin.$active.barHeight + 6,\n\t\t\tpadding: { left: 10, right: 10, top: 5, bottom: 5 },\n\t\t\tmargin: 0,\n\t\t\tlocalId: \"bar\",\n\t\t\tcols: [\n\t\t\t\t{ view: \"label\", label: _(\"Reports\") },\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\tlocalId: \"nameSorting\",\n\t\t\t\t\ticon: \"rpi-sort-alphabetical-ascending\",\n\t\t\t\t\tcss: \"webix_rpt_sort_icon webix_rpt_btn_active\",\n\t\t\t\t\ticons: {\n\t\t\t\t\t\tasc: \"rpi-sort-alphabetical-ascending\",\n\t\t\t\t\t\tdesc: \"rpi-sort-alphabetical-descending\",\n\t\t\t\t\t},\n\t\t\t\t\tclick: () => this.Sort(\"name\"),\n\t\t\t\t},\n\t\t\t\t{ width: 4 },\n\t\t\t\t{\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\tlocalId: \"updatedSorting\",\n\t\t\t\t\tcss: \"webix_rpt_sort_icon\",\n\t\t\t\t\ticon: \"rpi-sort-calendar-descending\",\n\t\t\t\t\ticons: {\n\t\t\t\t\t\tasc: \"rpi-sort-calendar-ascending\",\n\t\t\t\t\t\tdesc: \"rpi-sort-calendar-descending\",\n\t\t\t\t\t},\n\t\t\t\t\tclick: () => this.Sort(\"updated\"),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst menu = {\n\t\t\tview: \"form\",\n\t\t\tpadding: { left: 10, right: 10, top: 2, bottom: 4 },\n\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"text-search\",\n\t\t\t\t\tlocalId: \"search\",\n\t\t\t\t\tplaceholder: _(\"Type to search\"),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\tconst table = {\n\t\t\tview: \"list\",\n\t\t\tlocalId: \"list\",\n\t\t\tscroll: true,\n\t\t\tselect: true,\n\t\t\tcss: \"webix_rpt_list\",\n\t\t\ttype: {\n\t\t\t\theight: webix.skin.$active.rowHeight + 24,\n\t\t\t\ttemplate: data => this.GetListTemplate(data),\n\t\t\t},\n\t\t\tscheme: {\n\t\t\t\t$change: function(obj) {\n\t\t\t\t\tif (obj.date && typeof obj.date === \"string\")\n\t\t\t\t\t\tobj.date = new Date(obj.date);\n\t\t\t\t},\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_rpt_action_menu: (e, id) => {\n\t\t\t\t\tthis.Menu.Show(e, id);\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t},\n\t\t\tonDblClick: {},\n\t\t\ton: {\n\t\t\t\tonAfterSelect: id => this.LoadModule(id, null),\n\t\t\t\tonItemDblClick: id => this.LoadModule(id, \"edit\"),\n\t\t\t},\n\t\t};\n\n\t\treturn {\n\t\t\twidth: 320,\n\t\t\ttype: \"clean\",\n\t\t\trows: [bar, { type: \"clean\", rows: [menu, table] }],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.Menu = this.ui(MenuPopup);\n\n\t\tconst list = this.$$(\"list\");\n\t\tlist.$view.firstChild.setAttribute(\"placeholder\", this._(\"No reports\"));\n\n\t\tconst mods = this.app.getService(\"local\").getModules();\n\t\tlist.sync(mods);\n\t\tmods.waitData.then(() => {\n\t\t\tif (this.State.moduleId) list.select(this.State.moduleId);\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"readonly\", () => this.$$(\"list\").refresh());\n\n\t\tthis.$$(\"search\").attachEvent(\"onSearchChange\", v => this.Find(v));\n\n\t\tthis.Sorting = { by: \"name\", dir: \"asc\" };\n\t}\n\n\tLoadModule(id, mode) {\n\t\tthis.app.callEvent(\"loadModule\", [id, mode]);\n\t}\n\n\tHide() {\n\t\tthis.app.callEvent(\"hideModuleList\");\n\t}\n\n\tFind() {\n\t\tlet text = this.$$(\"search\").getValue();\n\t\tconst list = this.$$(\"list\");\n\t\tif (text) {\n\t\t\ttext = text.toLowerCase();\n\t\t\tlist.filter(data => this.SearchCompare(text, data));\n\t\t} else {\n\t\t\tlist.filter();\n\t\t}\n\t}\n\tSearchCompare(value, item) {\n\t\treturn item.name.toLowerCase().indexOf(value) > -1;\n\t}\n\n\tGetListTemplate(item) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tlet html = \"<div class='webix_rpt_list_block'>\";\n\t\thtml +=\n\t\t\t\"<div class='webix_rpt_list_report_name'>\" +\n\t\t\ttypes[item.parsed.type] +\n\t\t\t\" \" +\n\t\t\titem.name +\n\t\t\t\"</div>\";\n\t\thtml +=\n\t\t\t\"<div class='webix_rpt_list_report_date'>\" +\n\t\t\t_(\"Last modified\") +\n\t\t\t\": \" +\n\t\t\twebix.i18n.longDateFormatStr(item.updated || new Date()) +\n\t\t\t\"</div>\";\n\t\tif (!this.State.readonly)\n\t\t\thtml +=\n\t\t\t\t\"<span class='webix_icon webix_rpt_action_menu rpi-dots-vertical'></span>\";\n\t\treturn html + \"</div>\";\n\t}\n\n\tSort(by) {\n\t\tlet sState = this.Sorting;\n\t\tconst prevState = webix.copy(sState);\n\t\tif (sState.by == by) sState.dir = sState.dir == \"desc\" ? \"asc\" : \"desc\";\n\t\telse {\n\t\t\tsState.by = by;\n\t\t\tsState.dir = \"desc\";\n\t\t}\n\t\tsState.as = by == \"updated\" ? \"date\" : \"string\";\n\t\tthis.ChangeSortButtons(sState, prevState);\n\t\tthis.$$(\"list\").sort(sState);\n\t}\n\n\tChangeSortButtons(state, prevState) {\n\t\tconst btn = this.$$(state.by + \"Sorting\");\n\n\t\tthis.webix.html.addCss(btn.$view, \"webix_rpt_btn_active\");\n\t\tbtn.config.icon = btn.config.icons[state.dir];\n\t\tbtn.refresh();\n\t\tif (state.by != prevState.by) {\n\t\t\tconst prevBtn = this.$$(prevState.by + \"Sorting\");\n\t\t\tthis.webix.html.removeCss(prevBtn.$view, \"webix_rpt_btn_active\");\n\t\t}\n\t}\n}\n","import BaseExportView from \"../common/export\";\n\nexport default class ExportView extends BaseExportView {\n\t/** Returns menu data */\n\tGetData() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn [\n\t\t\t{ value: _(\"To Excel\"), id: \"excel\" },\n\t\t\t{ value: _(\"To CSV\"), id: \"csv\" },\n\t\t];\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport \"../../helpers/rsearch\";\nimport ExportMenu from \"./export\";\n\nexport default class ToolbarView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst bar = {\n\t\t\tview: \"form\",\n\t\t\tlocalId: \"toolbar\",\n\t\t\theight: webix.skin.$active.barHeight + 6,\n\t\t\thidden: true,\n\t\t\tpadding: { left: 10, right: 10, top: 6, bottom: 6 },\n\t\t\tmargin: 10,\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\twidth: 140,\n\t\t\t\t\tlabel: _(\"Export\"),\n\t\t\t\t\ticon: \"rpi-export\",\n\t\t\t\t\tclick: viewId => this.ShowExportPopup(viewId),\n\t\t\t\t},\n\t\t\t\t{},\n\n\t\t\t\t{\n\t\t\t\t\tview: \"text-search\",\n\t\t\t\t\tlocalId: \"search\",\n\t\t\t\t\tplaceholder: _(\"Type to search\"),\n\t\t\t\t\tmaxWidth: 600,\n\t\t\t\t\tminWidth: 200,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\treturn bar;\n\t}\n\n\tready() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.$$(\"search\").attachEvent(\n\t\t\t\"onSearchChange\",\n\t\t\tv => (this.State.search = v)\n\t\t);\n\t\tthis.on(this.app, \"onRecordsSearch\", (value, result) => {\n\t\t\tif (value) this.$$(\"search\").setBadge(result.length);\n\t\t\telse this.$$(\"search\").setBadge(null);\n\t\t});\n\t}\n\t/**\n\t * Shows menu\n\t * @param {String} viewId - webix view id\n\t */\n\tShowExportPopup(viewId) {\n\t\tif (!this.ExportMenu || !this.ExportMenu.$view)\n\t\t\tthis.ExportMenu = this.ui(ExportMenu);\n\t\tconst node = webix.$$(viewId);\n\t\tthis.ExportMenu.Show(node.$view);\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { createState } from \"jet-restate\";\nimport Toolbar from \"./toolbar\";\n\nconst typeToSort = {\n\tnumber: \"int\",\n\tdate: \"date\",\n\ttext: \"string\",\n\tboolean: \"number\",\n\tpicklist: \"text\",\n\treference: \"text\",\n};\n\nexport default class TableView extends JetView {\n\tconfig() {\n\t\tconst page = {\n\t\t\ttype: \"wide\",\n\t\t\tmargin: 5,\n\t\t\tcols: [{}],\n\t\t};\n\n\t\treturn { rows: [Toolbar, page] };\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.LocalState = createState({ search: \"\" });\n\t\tthis.setParam(\"state\", this.LocalState);\n\n\t\tthis.Local = this.app.getService(\"local\");\n\t}\n\tready() {\n\t\tconst parts = this.getRoot().getChildViews();\n\t\tthis.Bar = parts[0];\n\t\tthis.Host = parts[1];\n\n\t\tthis.on(this.State.$changes, \"module\", mod => this.Show(mod));\n\t\tthis.on(this.app, \"exportModule\", mode => this.Export(mode));\n\t\tthis.on(this.LocalState.$changes, \"search\", v => this.Find(v));\n\t}\n\n\tExport(mode) {\n\t\tconst params = {\n\t\t\tignore: { $selection: true },\n\t\t\tplainOutput: true,\n\t\t\tfilterHTML: true,\n\t\t};\n\t\tif (this.Table) {\n\t\t\tif (mode == \"excel\") webix.toExcel(this.Table, params);\n\t\t\telse if (mode == \"csv\") webix.toCSV(this.Table, params);\n\t\t}\n\t}\n\n\tShow(mod) {\n\t\tconst host = this.Host;\n\t\tif (mod && mod.columns.length && mod.type === \"table\") {\n\t\t\tconst config = this.GetTableConfig(mod);\n\t\t\tif (!config) return;\n\n\t\t\tthis.Bar.show();\n\t\t\twebix.ui([config], host);\n\t\t\tconst table = (this.Table = host.getChildViews()[0]);\n\n\t\t\tthis.GetTableData(mod).then(([data, options]) => {\n\t\t\t\t// table already reconstructed on moment of data loading\n\t\t\t\tif (table.$destructed) return;\n\t\t\t\toptions.forEach(({ field, data }) => {\n\t\t\t\t\tif (!this.IsBucketColumn(field))\n\t\t\t\t\t\ttable.getColumnConfig(field).collection.parse(data);\n\t\t\t\t});\n\t\t\t\ttable.parse(data);\n\t\t\t});\n\t\t} else {\n\t\t\twebix.ui([{}], host);\n\t\t\tthis.Table = null;\n\t\t\tthis.Bar.hide();\n\t\t}\n\t}\n\tIsBucketColumn(field, module) {\n\t\tmodule = module || this.State.module;\n\t\treturn module.buckets && module.buckets.find(b => b.column == field);\n\t}\n\tGetTableConfig(mod) {\n\t\tconst { groups, columns, meta } = mod;\n\t\tif (!columns) return null;\n\t\tlet dateColumns = [];\n\t\tconst gColumns = columns.map(a => {\n\t\t\tif (a.type == \"date\") dateColumns.push(a.id);\n\t\t\treturn this.GetColumnConfig(a);\n\t\t});\n\n\t\tconst edit = this.State.mode === \"edit\";\n\t\tconst grid = {\n\t\t\tview: groups ? \"treetable\" : \"datatable\",\n\t\t\tcolumns: gColumns,\n\t\t\tresizeColumn: edit ? { headerOnly: true } : false,\n\t\t\tleftSplit: meta.freeze ? meta.freeze : 0,\n\t\t\tcss: edit ? \"webix_header_border\" : \"\",\n\t\t\ton: {\n\t\t\t\tonColumnResize: (id, width, old, byUser) =>\n\t\t\t\t\tthis.SetColWidth(id, width, old, byUser),\n\t\t\t},\n\t\t};\n\n\t\tif (dateColumns.length)\n\t\t\tgrid.scheme = {\n\t\t\t\t$change: row =>\n\t\t\t\t\tdateColumns.forEach(cId => (row[cId] = new Date(row[cId]))),\n\t\t\t};\n\n\t\treturn grid;\n\t}\n\n\tGetColumnConfig(a) {\n\t\tlet column = {\n\t\t\tid: a.id,\n\t\t\theader:\n\t\t\t\t!a.meta.header || a.meta.header === \"none\"\n\t\t\t\t\t? a.meta.name || a.name\n\t\t\t\t\t: [\n\t\t\t\t\t\t\ta.meta.name || a.name,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcontent:\n\t\t\t\t\t\t\t\t\ta.meta.header === \"text\" ? \"textFilter\" : \"richSelectFilter\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t  ],\n\t\t\ttype: a.type,\n\t\t\tsort: typeToSort[a.type],\n\t\t\twidth: a.width || 200,\n\t\t};\n\n\t\tif (a.type === \"date\") column.format = webix.i18n.dateFormatStr;\n\t\tif (a.type === \"boolean\") {\n\t\t\tconst _ = this.app.getService(\"locale\")._;\n\t\t\tcolumn.template = obj => (obj[a.id] == 1 ? _(\"True\") : _(\"False\"));\n\t\t}\n\t\tif (\n\t\t\t(a.type === \"reference\" || a.type === \"picklist\") &&\n\t\t\t!this.IsBucketColumn(a.id)\n\t\t)\n\t\t\tcolumn.options = [];\n\n\t\treturn column;\n\t}\n\n\tSetColWidth(id, width, old, byUser) {\n\t\tif (byUser) {\n\t\t\tif (id === \"$selection\" || id === \"$subrow\") {\n\t\t\t\tconst table = this.Tbl;\n\t\t\t\ttable.blockEvent();\n\t\t\t\ttable.setColumnWidth(id, old);\n\t\t\t\ttable.unblockEvent();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.app.callEvent(\"onColumnResize\", [id, width]);\n\t\t}\n\t}\n\n\tGetTableData(mod) {\n\t\treturn Promise.all([\n\t\t\tthis.Local.getData(\n\t\t\t\tthis.Local.getDataConfig(mod),\n\t\t\t\tthis.State.mode == \"edit\"\n\t\t\t),\n\t\t\tthis.Local.getOptions(mod.columns),\n\t\t]);\n\t}\n\n\tFind(value) {\n\t\tconst h = this.app.getService(\"helpers\");\n\t\tconst table = this.Table;\n\t\tlet result = [];\n\t\tif (!table) return;\n\t\ttable.clearCss(\"webix_rpt_found_record\", true);\n\n\t\tif (value) {\n\t\t\tconst ignoreDateNumber = h.hasNonDigits(value);\n\t\t\tconst regexp = new RegExp(h.wildToRegexp(value), \"gi\");\n\t\t\tconst fields = table.config.columns.filter(\n\t\t\t\tc =>\n\t\t\t\t\t!(c.id === \"$selection\" || c.id === \"$subrow\") &&\n\t\t\t\t\t(!ignoreDateNumber || !(c.type === \"number\" || c.type === \"date\"))\n\t\t\t);\n\n\t\t\tconst matchers = [];\n\n\t\t\tfor (let i = 0; i < fields.length; ++i) {\n\t\t\t\tconst type = fields[i].type || \"text\";\n\t\t\t\tconst colId = fields[i].id;\n\t\t\t\tif (type === \"text\" || type === \"number\") {\n\t\t\t\t\tmatchers.push(o => regexp.test(o[colId]));\n\t\t\t\t} else if (type === \"reference\" || type === \"picklist\") {\n\t\t\t\t\tconst collection = table.getColumnConfig(colId).collection;\n\n\t\t\t\t\tconst optionsMatch = h.findOptions(collection, regexp);\n\t\t\t\t\tmatchers.push(h.matchPerColumn(colId, a => optionsMatch[a]));\n\t\t\t\t} else if (type === \"bool\") {\n\t\t\t\t\tswitch (value) {\n\t\t\t\t\t\tcase \"true\":\n\t\t\t\t\t\t\tmatchers.push(o => o[colId]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"false\":\n\t\t\t\t\t\t\tmatchers.push(o => !o[colId]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else if (type === \"date\") {\n\t\t\t\t\tconst dateFormats = table.getColumnConfig(colId).format;\n\t\t\t\t\tmatchers.push(o => regexp.test(dateFormats(o[colId])));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet found = false;\n\t\t\tresult = table.find(obj => {\n\t\t\t\tfor (let i = 0; i < matchers.length; ++i) {\n\t\t\t\t\tif (matchers[i](obj)) {\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\ttable.showItem(obj.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttable.addCss(obj.id, \"webix_rpt_found_record\", true);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t\ttable.refresh();\n\t\tthis.app.callEvent(\"onRecordsSearch\", [value, result]);\n\t}\n}\n","export default function handler(view) {\n\treturn {\n\t\tattachEvent: (key, handler) => {\n\t\t\twebix.UIManager.addHotKey(key, handler, view);\n\t\t\treturn { key, handler };\n\t\t},\n\t\tdetachEvent: ({ key, handler }) =>\n\t\t\twebix.UIManager.removeHotKey(key, handler, view),\n\t};\n}\n","export default class Charts {\n\tconstructor(_app) {\n\t\tthis._app = _app;\n\t\tthis.type = \"line\";\n\t\tthis.type = \"line\";\n\t\tthis.colors = [\n\t\t\t\"#FF9700\",\n\t\t\t\"#4CB050\",\n\t\t\t\"#00BCD4\",\n\t\t\t\"#3F51B5\",\n\t\t\t\"#9C28B1\",\n\t\t\t\"#F34336\",\n\t\t\t\"#FFEA3B\",\n\t\t\t\"#009788\",\n\t\t\t\"#2196F3\",\n\t\t\t\"#673BB7\",\n\t\t\t\"#EA1E63\",\n\t\t];\n\t\tthis.itemSupport = [\"line\", \"spline\", \"radar\"];\n\t\tthis.noAxisSupport = [\"pie\", \"donut\"];\n\t\tthis.lineTypes = [\"line\", \"spline\"];\n\t\tthis.multiTypeSupport = [\n\t\t\t\"bar\",\n\t\t\t\"stackedBar\",\n\t\t\t\"area\",\n\t\t\t\"stackedArea\",\n\t\t\t\"splineArea\",\n\t\t];\n\t\tthis.numLimit = 30;\n\t}\n\t/*\n\tGet chart type data.\n\tCreate an array of objects {id, value}\n\tand return this array.\n\t*/\n\tgetTypes() {\n\t\tconst _ = this._app.getService(\"locale\")._;\n\t\tif (!this.types)\n\t\t\tthis.types = [\n\t\t\t\t{ id: \"line\", value: _(\"Line\"), icon: \"rpi-chart-line\" },\n\t\t\t\t{\n\t\t\t\t\tid: \"spline\",\n\t\t\t\t\tvalue: _(\"Spline\"),\n\t\t\t\t\ticon: \"rpi-chart-bell-curve-cumulative\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"area\",\n\t\t\t\t\tvalue: _(\"Area\"),\n\t\t\t\t\ticon: \"rpi-chart-areaspline\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"stackedArea\",\n\t\t\t\t\tvalue: _(\"Stacked area\"),\n\t\t\t\t\ticon: \"rpi-chart-line-stacked\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"splineArea\",\n\t\t\t\t\tvalue: _(\"Spline area\"),\n\t\t\t\t\ticon: \"rpi-chart-areaspline-variant\",\n\t\t\t\t},\n\n\t\t\t\t{ id: \"bar\", value: _(\"Bar\"), icon: \"rpi-chart-bar\" },\n\t\t\t\t{\n\t\t\t\t\tid: \"stackedBar\",\n\t\t\t\t\tvalue: _(\"Stacked bar\"),\n\t\t\t\t\ticon: \"rpi-chart-bar-stacked\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"radar\",\n\t\t\t\t\tvalue: _(\"Radar\"),\n\t\t\t\t\ticon: \"rpi-vector-triangle\",\n\t\t\t\t},\n\t\t\t];\n\t\treturn this.types;\n\t}\n\n\tgetItemTypes() {\n\t\tconst _ = this._app.getService(\"locale\")._;\n\t\tif (!this.itemTypes)\n\t\t\tthis.itemTypes = [\n\t\t\t\t{\n\t\t\t\t\tid: \"r\",\n\t\t\t\t\tvalue: _(\"circle\"),\n\t\t\t\t\ticon: \"rpi-circle-outline\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"s\",\n\t\t\t\t\tvalue: _(\"square\"),\n\t\t\t\t\ticon: \"rpi-square-outline\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"t\",\n\t\t\t\t\tvalue: _(\"triangle\"),\n\t\t\t\t\ticon: \"rpi-triangle-outline\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"d\",\n\t\t\t\t\tvalue: _(\"diamond\"),\n\t\t\t\t\ticon: \"rpi-rhombus-outline\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"no\",\n\t\t\t\t\tvalue: _(\"no markers\"),\n\t\t\t\t},\n\t\t\t];\n\t\treturn this.itemTypes;\n\t}\n\n\tgetSeries(fiedls, type) {\n\t\tlet data = [];\n\t\tlet colorIndex = 0;\n\t\tfiedls.forEach(field => {\n\t\t\tlet series = {\n\t\t\t\tid: field.id,\n\t\t\t\tname: field.value,\n\t\t\t\tmodel: field.model || null,\n\t\t\t\tshow: true,\n\t\t\t\tmeta: {\n\t\t\t\t\tname: field.value,\n\t\t\t\t\tcolor: this.colors[colorIndex] || this.colors[0],\n\t\t\t\t},\n\t\t\t};\n\t\t\tcolorIndex++;\n\n\t\t\tif (this.itemSupport.indexOf(type) != -1) {\n\t\t\t\tseries.meta.markerType = \"r\";\n\t\t\t\tseries.meta.fillMarker = false;\n\t\t\t}\n\t\t\tdata.push(series);\n\t\t});\n\t\treturn data;\n\t}\n}\n","export function waitVisible(view){\n\tconst promise = webix.promise.defer();\n\n\tconst interval = setInterval(()=> {\n\t\tconst destructed = view.$destructed;\n\t\tif(destructed || view.isVisible()){\n\t\t\tif(destructed)\n\t\t\t\tpromise.reject();\n\t\t\telse\n\t\t\t\tpromise.resolve();\n\t\t\tclearInterval(interval);\n\t\t}\n\t}, 300);\n\n\treturn promise;\n}","import { JetView } from \"webix-jet\";\n\nexport default class AddView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst compact = this.getParam(\"compact\", true);\n\t\tconst cals = this.app.config.calendars;\n\n\t\tconst ui = {\n\t\t\tview: compact ? \"icon\" : \"button\",\n\t\t\ttype: \"icon\",\n\t\t\ticon: \"wxi-plus\",\n\t\t\tcss: \"webix_primary\",\n\t\t\tlabel: _(\"Create\"),\n\t\t\twidth: compact ? 50 : cals ? 185 : 100,\n\t\t\theight: compact ? 50 : webix.skin.$active.inputHeight,\n\t\t\ton: {\n\t\t\t\tonItemClick: () => this.AddEvent(),\n\t\t\t},\n\t\t};\n\n\t\treturn { view: \"align\", body: ui, align: \"middle\" };\n\t}\n\n\tAddEvent() {\n\t\tthis.app.getState().selected = { id: \"0\" };\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class DateView extends JetView {\n\tconfig() {\n\t\tconst toolbar = [\n\t\t\t{\n\t\t\t\tview: \"icon\",\n\t\t\t\ticon: \"wxi-angle-left\",\n\t\t\t\ttooltip: () => this.NavLabel(-1),\n\t\t\t\talign: \"left\",\n\t\t\t\ton: { onItemClick: () => this.ChangeDate(-1) },\n\t\t\t},\n\t\t\t{ view: \"label\", localId: \"title\", align: \"center\", width: 160 },\n\t\t\t{\n\t\t\t\tview: \"icon\",\n\t\t\t\ticon: \"wxi-angle-right\",\n\t\t\t\ttooltip: () => this.NavLabel(1),\n\t\t\t\talign: \"right\",\n\t\t\t\ton: { onItemClick: () => this.ChangeDate(1) },\n\t\t\t},\n\t\t];\n\n\t\treturn {\n\t\t\tcols: toolbar,\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tthis.on(this.State.$changes, \"date\", () => this.DateLabel());\n\t\tthis.on(this.State.$changes, \"mode\", () => this.DateLabel());\n\t\tif (this.app.config.timeline)\n\t\t\tthis.on(this.State.$changes, \"timelineMode\", () => this.DateLabel());\n\t}\n\n\tChangeDate(dir) {\n\t\tconst state = this.State;\n\t\tconst step = this.GetStep(state.mode);\n\t\tconst next = webix.Date.add(state.date, dir, step, true);\n\n\t\t// fix navigation in month mode when last day of month is selected\n\t\tif (state.mode === \"month\") {\n\t\t\tconst diff = Math.abs(state.date.getMonth() - next.getMonth());\n\t\t\tif (diff != 1 && diff < 6) next.setDate(0);\n\t\t}\n\n\t\tstate.$batch({\n\t\t\tdate: next,\n\t\t\tselected: null,\n\t\t});\n\t}\n\n\tGetStep(mode) {\n\t\tswitch (mode) {\n\t\t\tcase \"agenda\":\n\t\t\t\treturn \"month\";\n\t\t\tcase \"units\":\n\t\t\t\treturn \"day\";\n\t\t\tcase \"timeline\":\n\t\t\t\treturn this.State.timelineMode;\n\t\t\tdefault:\n\t\t\t\treturn mode;\n\t\t}\n\t}\n\n\tDateLabel() {\n\t\tconst date = this.State.date;\n\t\tconst mode = this.State.mode;\n\t\tlet format = webix.Date.dateToStr(\"%F %Y\");\n\t\tif (mode === \"year\") format = webix.Date.dateToStr(\"%Y\");\n\t\telse if (\n\t\t\tmode == \"day\" ||\n\t\t\tmode == \"units\" ||\n\t\t\t(mode == \"timeline\" && this.State.timelineMode == \"day\")\n\t\t)\n\t\t\tformat = webix.i18n.longDateFormatStr;\n\n\t\tthis.$$(\"title\").setHTML(format(date));\n\t}\n\n\tNavLabel(dir) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst modes = [\"month\", \"week\", \"day\"];\n\t\tlet mode = this.State.mode;\n\t\tmode = modes.indexOf(mode) !== -1 ? ` ${mode}` : \"\";\n\n\t\tdir = dir > 0 ? \"Next\" : \"Previous\";\n\n\t\treturn _(dir + mode);\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class NavBarView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst compact = this.getParam(\"compact\", true);\n\t\tconst units = !!this.app.config.units;\n\n\t\tconst toolbar = {\n\t\t\thidden: compact,\n\t\t\tview: \"tabbar\",\n\t\t\tbottomOffset: 0,\n\t\t\tlocalId: \"buttons\",\n\t\t\tborderless: true,\n\t\t\twidth: 320,\n\t\t\toptionWidth: 80,\n\t\t\toptions: [\n\t\t\t\t{ id: \"day\", value: _(\"Day\") },\n\t\t\t\t{ id: \"week\", value: _(\"Week\") },\n\t\t\t\t{ id: \"month\", value: _(\"Month\") },\n\t\t\t\t{ id: \"agenda\", value: _(\"Agenda\") },\n\t\t\t\t{ id: \"year\", value: _(\"Year\") },\n\t\t\t],\n\t\t};\n\n\t\tif (this.app.config.timeline) {\n\t\t\ttoolbar.width += 80;\n\t\t\ttoolbar.options.push({ id: \"timeline\", value: _(\"Timeline\") });\n\t\t}\n\n\t\tif (!compact) {\n\t\t\ttoolbar.on = { onChange: val => this.SetMode(val) };\n\t\t}\n\n\t\tif (units) {\n\t\t\ttoolbar.width += 80;\n\t\t\ttoolbar.options.push({ id: \"units\", value: _(\"Units\") });\n\t\t}\n\n\t\treturn toolbar;\n\t}\n\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tthis.on(this.State.$changes, \"mode\", val => {\n\t\t\tthis.$$(\"buttons\").setValue(val);\n\t\t});\n\t}\n\tSetMode(val) {\n\t\tthis.State.$batch({\n\t\t\tmode: val,\n\t\t\tselected: null,\n\t\t});\n\t}\n}\n","const defaultPalette = [\n\t[\"#61AEE6\", \"#01C2A5\", \"#E88DD9\", \"#D2FB9E\", \"#6BA8CB\", \"#61BBA5\", \"#CF89D5\"],\n\t[\"#EF9C80\", \"#8289EE\", \"#74B1A7\", \"#DD89AF\", \"#E48882\", \"#997CEB\", \"#ADD579\"],\n\t[\"#F68896\", \"#FFE999\", \"#6D4BCE\", \"#99CA58\", \"#D352BE\", \"#F7CC34\", \"#DA5C53\"],\n];\nconst modernPalette = [\n\t[\"#5890DC\", \"#3AA3E3\", \"#045AA3\", \"#014593\", \"#01C2A5\", \"#61A649\", \"#157B7A\"],\n\t[\"#04864F\", \"#AD44AB\", \"#CB61C8\", \"#AC3C6E\", \"#BA282E\", \"#BD4E1B\", \"#B87728\"],\n\t[\"#B65F06\", \"#7A67EB\", \"#4536AD\", \"#282A8A\", \"#36337E\", \"#585B85\", \"#2A2F50\"],\n];\nconst palettes = {\n\tmaterial: defaultPalette,\n\tmini: defaultPalette,\n\tflat: defaultPalette,\n\tcompact: defaultPalette,\n\tcontrast: defaultPalette,\n\twillow: modernPalette,\n\tdark: modernPalette,\n};\n\nexport default function getPalette() {\n\tconst aSkin = webix.skin.$active;\n\treturn {\n\t\tview: \"colorboard\",\n\t\tcss: \"webix_scheduler_palette\",\n\t\theight: aSkin.optionHeight * 3 + 4,\n\t\twidth: aSkin.optionHeight * 7 + 4,\n\t\tpalette: palettes[webix.skin.$name],\n\t};\n}\n","import { JetView } from \"webix-jet\";\nimport getPalette from \"helpers/palette\";\n\nexport default class SidePopupView extends JetView {\n\tconfig() {\n\t\tconst compact = this.getParam(\"compact\", true);\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tconst save = {\n\t\t\tview: \"button\",\n\t\t\tvalue: _(\"Save\"),\n\t\t\talign: \"right\",\n\t\t\tinputWidth: 100,\n\t\t\tcss: \"webix_primary\",\n\t\t\tclick: () => this.Save(),\n\t\t};\n\n\t\tconst aSkin = webix.skin.$active;\n\t\tconst compactBar = {\n\t\t\tview: \"toolbar\",\n\t\t\tpadding: {\n\t\t\t\tleft: aSkin.layoutPadding.form - (aSkin.inputHeight - 20) / 2,\n\t\t\t\tright: aSkin.layoutPadding.form,\n\t\t\t},\n\t\t\telements: [\n\t\t\t\t{ view: \"icon\", icon: \"wxi-close\", click: () => this.getRoot().hide() },\n\t\t\t\t{},\n\t\t\t\tsave,\n\t\t\t],\n\t\t};\n\n\t\tconst controls = [\n\t\t\t{\n\t\t\t\tview: \"button\",\n\t\t\t\tlocalId: \"removeBtn\",\n\t\t\t\tvalue: _(\"Delete\"),\n\t\t\t\tcss: \"webix_danger webix_scheduler_danger\",\n\t\t\t\thidden: true,\n\t\t\t\talign: compact ? \"center\" : \"left\",\n\t\t\t\tinputWidth: compact ? 330 : 100,\n\t\t\t\tclick: () => this.Delete(),\n\t\t\t},\n\t\t];\n\n\t\tif (!compact) controls.push(save);\n\n\t\tconst ui = this.app.getService(\"jet-win\").updateConfig({\n\t\t\tview: \"window\",\n\t\t\twidth: 400,\n\t\t\tclose: true,\n\t\t\tborderless: compact,\n\t\t\tfullscreen: compact,\n\t\t\tcss: \"webix_scheduler_cal_popup\",\n\t\t\thead: compact ? compactBar : _(\"Edit calendar\"),\n\t\t\tbody: {\n\t\t\t\tview: \"form\",\n\t\t\t\tlocalId: \"calendars:form\",\n\t\t\t\telements: [\n\t\t\t\t\t{ view: \"text\", label: _(\"Title\"), name: \"text\" },\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"colorpicker\",\n\t\t\t\t\t\tlabel: _(\"Color\"),\n\t\t\t\t\t\tname: \"color\",\n\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\ttype: \"colorboard\",\n\t\t\t\t\t\t\tpadding: 3,\n\t\t\t\t\t\t\tbody: getPalette(),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{ view: \"checkbox\", label: _(\"Active\"), name: \"active\" },\n\t\t\t\t\t{ cols: controls },\n\t\t\t\t],\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonHide: () => {\n\t\t\t\t\tthis.Form.clear();\n\t\t\t\t\tthis.$$(\"removeBtn\").hide();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tif (compact) ui.body.elements.splice(3, 0, {});\n\n\t\treturn ui;\n\t}\n\tinit() {\n\t\tthis.Cals = this.app.getService(\"local\").calendars(true);\n\t\tthis.Ops = this.app.getService(\"operations\");\n\t\tthis.Form = this.$$(\"calendars:form\");\n\t}\n\n\tShow(id) {\n\t\tif (id) {\n\t\t\tconst obj = this.Cals.getItem(id);\n\t\t\tthis.Form.setValues(obj);\n\t\t\tthis.$$(\"removeBtn\").show();\n\t\t} else {\n\t\t\tthis.Form.setValues({\n\t\t\t\tcolor: \"#997CEB\",\n\t\t\t\tactive: 1,\n\t\t\t});\n\t\t}\n\t\tthis.getRoot().show();\n\t\tthis.Form.focus();\n\t}\n\n\tSave() {\n\t\tconst obj = this.Form.getValues();\n\t\tif (obj.id) this.Ops.updateCalendar(obj.id, obj);\n\t\telse this.Ops.addCalendar(obj);\n\t\tthis.getRoot().hide();\n\t}\n\n\tDelete() {\n\t\tconst obj = this.Form.getValues();\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\twebix\n\t\t\t.confirm({\n\t\t\t\ttext: _(\"Do you really want to remove this calendar?\"),\n\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.Ops.removeCalendar(obj.id);\n\t\t\t\tthis.getRoot().hide();\n\t\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport EditorView from \"./editor\";\nimport getPalette from \"helpers/palette\";\nimport { waitVisible } from \"@xbs/jet-helpers\";\n\nexport default class SidePopupView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst ui = {\n\t\t\tview: \"popup\",\n\t\t\trelative: \"right\",\n\t\t\tbody: {\n\t\t\t\trows: [\n\t\t\t\t\twebix.extend(getPalette(), {\n\t\t\t\t\t\tlocalId: \"colors\",\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonItemClick: val => this.UpdateColor(val),\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\t{\n\t\t\t\t\t\tcss: \"webix_scheduler_settings\",\n\t\t\t\t\t\ttemplate: _(\"Settings\"),\n\t\t\t\t\t\theight: webix.skin.$active.inputHeight,\n\t\t\t\t\t\tonClick: {\n\t\t\t\t\t\t\twebix_template: () => this.ShowEditor(),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonHide: () => this.app.callEvent(\"side:popup:hide\", []),\n\t\t\t},\n\t\t};\n\n\t\treturn ui;\n\t}\n\n\tinit() {\n\t\twaitVisible(this.getRoot()).then(() => {\n\t\t\tthis.Editor = this.ui(EditorView);\n\t\t});\n\t}\n\n\tShow(id, node, color) {\n\t\tthis.Cid = id;\n\t\tthis.getRoot().show(node);\n\t\tthis.$$(\"colors\").setValue(color);\n\t}\n\n\tShowEditor() {\n\t\tthis.Editor.Show(this.Cid);\n\t\tthis.getRoot().hide();\n\t}\n\n\tUpdateColor(val) {\n\t\tthis.app.getService(\"operations\").updateCalendar(this.Cid, {\n\t\t\tcolor: val,\n\t\t});\n\t\tthis.getRoot().hide();\n\t}\n\n\tHide() {\n\t\tthis.getRoot().hide();\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport PopupView from \"./popup\";\nimport EditorView from \"./editor\";\n\nexport default class SideView extends JetView {\n\tconfig() {\n\t\tthis.Compact = this.getParam(\"compact\", true);\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst state = this.app.getState();\n\n\t\tconst calendar = {\n\t\t\tview: \"calendar\",\n\t\t\tlocalId: \"calendar\",\n\t\t\theight: 276,\n\t\t\tmonthSelect: false,\n\t\t\ton: {\n\t\t\t\tonAfterDateSelect: date => {\n\t\t\t\t\tstate.date = webix.Date.dayStart(date);\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tconst list = {\n\t\t\tview: \"list\",\n\t\t\tlocalId: \"calendars\",\n\t\t\ttype: this.ListType(_, state),\n\t\t\tborderless: true,\n\t\t\tautoheight: true,\n\t\t\tyCount: 5,\n\t\t\teditable: true,\n\t\t\teditValue: \"text\",\n\t\t\teditaction: \"custom\",\n\t\t\teditor: \"text\",\n\t\t\tcss: \"webix_scheduler_cal_list\",\n\t\t\ttooltip: () => \"\",\n\t\t\tonClick: {\n\t\t\t\twebix_scheduler_cal_edit: (e, id) => this.ShowPopup(e, id),\n\t\t\t\twebix_scheduler_cal_title: (e, id) => this.ToggleCalendar(id),\n\t\t\t\twebix_scheduler_active: (e, id) => this.ToggleCalendar(id),\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonBeforeEditStop: (v, editor) => this.SetTitle(editor.id, v.value),\n\t\t\t},\n\t\t};\n\n\t\tconst rows = [\n\t\t\t{ maxHeight: 100 },\n\t\t\tlist,\n\t\t\t{\n\t\t\t\tview: \"button\",\n\t\t\t\tlocalId: \"add\",\n\t\t\t\tvalue: _(\"Add calendar\"),\n\t\t\t\thidden: !state.readonly,\n\t\t\t\tinputWidth: 190,\n\t\t\t\talign: \"center\",\n\t\t\t\tclick: () => this.AddCalendar(),\n\t\t\t},\n\t\t\t{},\n\t\t];\n\n\t\tlet side = {\n\t\t\ttype: \"form\",\n\t\t\tpadding: { top: 8 },\n\t\t\trows: rows,\n\t\t};\n\n\t\tif (!this.Compact) {\n\t\t\tlist.on.onAfterScroll = () => this.Popup.Hide();\n\t\t\tside = {\n\t\t\t\tview: \"scrollview\",\n\t\t\t\tbody: {\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\trows: [calendar, side],\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\treturn side;\n\t}\n\n\tinit() {\n\t\tthis.Cals = this.$$(\"calendars\");\n\t\tthis.Data = this.app.getService(\"local\");\n\t\tthis.Ops = this.app.getService(\"operations\");\n\n\t\tthis.Popup = this.Compact ? this.ui(EditorView) : this.ui(PopupView);\n\t\twebix.extend(this.Cals, webix.EditAbility);\n\n\t\tthis.Data.calendars().then(data => this.Cals.parse(data));\n\n\t\tconst state = this.app.getState();\n\n\t\tif (!this.Compact) {\n\t\t\tthis.on(state.$changes, \"date\", value => {\n\t\t\t\tthis.$$(\"calendar\").setValue(value);\n\t\t\t});\n\t\t\tthis.on(this.app, \"side:popup:hide\", () => {\n\t\t\t\tthis.Cals.unselectAll();\n\t\t\t});\n\t\t}\n\n\t\tthis.on(state.$changes, \"readonly\", value => this.ToggleState(value));\n\t}\n\n\tListType(_, state) {\n\t\treturn {\n\t\t\tcheckbox: function(obj) {\n\t\t\t\tconst icon =\n\t\t\t\t\tobj.active * 1 ? \"wxi-checkbox-marked\" : \"wxi-checkbox-blank\";\n\t\t\t\treturn `<span style=\"color:${obj.color};\" \n\t\t\t\t\trole=\"checkbox\" tabindex=\"-1\" \n\t\t\t\t\taria-checked=\"${obj.active ? \"true\" : \"false\"}\" \n\t\t\t\t\tclass=\"webix_icon webix_scheduler_active ${icon}\">\n\t\t\t\t</span>`;\n\t\t\t},\n\t\t\ttemplate: (obj, common) => {\n\t\t\t\tconst edit = `\n\t\t\t\t\t<span\n\t\t\t\t\t\twebix_tooltip=\"${_(\"Edit calendar\")}\" \n\t\t\t\t\t\tclass=\"webix_icon wxi-dots webix_scheduler_cal_edit \n\t\t\t\t\t\t\t${webix.env.touch ? \" webix_scheduler_cal_visible\" : \"\"}\n\t\t\t\t\t\t\">\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\n\t\t\t\treturn `\n\t\t\t\t\t${common.checkbox(obj)}\n\t\t\t\t\t<span class=\"webix_scheduler_cal_title\">${obj.text || _(\"(no title)\")}</span>\n\t\t\t\t\t${state.readonly ? \"\" : edit}\n\t\t\t\t`;\n\t\t\t},\n\t\t};\n\t}\n\n\tAddCalendar() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tthis.Ops.addCalendar().then(id => {\n\t\t\tthis.Cals.edit(id);\n\t\t\tthis.Cals.getEditor()\n\t\t\t\t.getInputNode()\n\t\t\t\t.setAttribute(\"placeholder\", _(\"(no title)\"));\n\t\t});\n\t}\n\n\tShowPopup(e, id) {\n\t\tif (!this.Compact) {\n\t\t\tthis.Cals.select(id);\n\n\t\t\tconst color = this.Cals.getItem(id).color;\n\t\t\tthis.Popup.Show(id, this.Cals.getItemNode(id), color);\n\t\t} else this.Popup.Show(id);\n\t}\n\n\tToggleCalendar(id) {\n\t\tconst obj = this.Cals.getItem(id);\n\t\tthis.Ops.updateCalendar(id, { active: obj.active ^ 1 });\n\t}\n\n\tToggleState(value) {\n\t\tconst add = this.$$(\"add\");\n\t\tif (value) add.hide();\n\t\telse add.show();\n\n\t\tthis.Cals.refresh();\n\t}\n\n\tSetTitle(id, text) {\n\t\tthis.Ops.updateCalendar(id, { text }).then(\n\t\t\t() => this.EditStopSilent(),\n\t\t\t() => this.EditStopSilent(true)\n\t\t);\n\t\treturn false;\n\t}\n\n\tEditStopSilent(fail) {\n\t\tthis.Cals.blockEvent();\n\t\tif (fail) this.Cals.editCancel();\n\t\telse this.Cals.editStop();\n\t\tthis.Cals.unblockEvent();\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport side from \"views/side\";\n\nexport default class NavPopupView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst units = !!this.app.config.units;\n\n\t\tconst list = {\n\t\t\tview: \"list\",\n\t\t\tcss: \"webix_scheduler_navlist\",\n\t\t\tlocalId: \"modes\",\n\t\t\tautoheight: true,\n\t\t\tdata: [\n\t\t\t\t{ id: \"day\", value: _(\"Day\"), icon: \"shi-day\" },\n\t\t\t\t{ id: \"week\", value: _(\"Week\"), icon: \"shi-week\" },\n\t\t\t\t{ id: \"month\", value: _(\"Month\"), icon: \"shi-month\" },\n\t\t\t\t{ id: \"agenda\", value: _(\"Agenda\"), icon: \"shi-agenda\" },\n\t\t\t\t{ id: \"year\", value: _(\"Year\"), icon: \"shi-year\" },\n\t\t\t],\n\t\t\ton: {\n\t\t\t\tonItemClick: id => this.SetMode(id),\n\t\t\t},\n\t\t};\n\n\t\tif (units) {\n\t\t\tlist.data.push({ id: \"units\", value: _(\"Units\"), icon: \"shi-units\" });\n\t\t}\n\n\t\tif (this.app.config.timeline) {\n\t\t\tlist.data.push({\n\t\t\t\tid: \"timeline\",\n\t\t\t\tvalue: _(\"Timeline\"),\n\t\t\t\ticon: \"shi-timeline\",\n\t\t\t});\n\t\t}\n\n\t\tconst ui = {\n\t\t\tview: \"sidemenu\",\n\t\t\tanimate: false,\n\t\t\tborderless: true,\n\t\t\tcss: \"webix_scheduler_sidemenu\",\n\t\t\twidth: 300,\n\t\t\tstate: state => {\n\t\t\t\tconst tHeight = webix.skin.$active.tabbarHeight + 10;\n\t\t\t\tstate.left = this.Parent.left;\n\t\t\t\tstate.top = this.Parent.top + tHeight + 2;\n\t\t\t\tstate.height = this.Parent.height - tHeight - 2;\n\t\t\t},\n\t\t\tbody: list,\n\t\t};\n\n\t\tif (this.app.config.calendars)\n\t\t\tui.body = {\n\t\t\t\tview: \"scrollview\",\n\t\t\t\tbody: {\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\trows: [list, side],\n\t\t\t\t},\n\t\t\t};\n\n\t\treturn ui;\n\t}\n\tinit() {\n\t\tthis.State = this.app.getState();\n\n\t\tthis.on(this.app, \"view:resize\", () => {\n\t\t\tif (this.getRoot().isVisible()) this.Show(true);\n\t\t});\n\t}\n\tShow(updatePos) {\n\t\tif (!updatePos && this.getRoot().isVisible()) return;\n\n\t\tthis.Parent = this.app.getRoot().$view.getBoundingClientRect();\n\t\tthis.$$(\"modes\").select(this.State.mode);\n\t\tthis.getRoot().show();\n\t}\n\tSetMode(value) {\n\t\tthis.getRoot().hide();\n\n\t\t//wait until hide animation is complete\n\t\tsetTimeout(() => this.State.$batch({ mode: value, selected: null }), 500);\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport NavBarView from \"views/bars/nav\";\nimport DateView from \"views/bars/date\";\nimport AddView from \"views/bars/add\";\nimport NavPopupView from \"views/bars/navpopup\";\n\nexport default class TopBarView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tthis.Compact = this.getParam(\"compact\", true);\n\n\t\tconst todayIcon = {\n\t\t\tview: \"icon\",\n\t\t\ticon: \"wxi-calendar\",\n\t\t\tbatch: \"compact\",\n\t\t\ttooltip: _(\"Today\"),\n\t\t\tclick: () => this.SetToday(),\n\t\t};\n\t\tconst todayBtn = {\n\t\t\tview: \"align\",\n\t\t\talign: \"middle\",\n\t\t\tbatch: \"full\",\n\t\t\tbody: {\n\t\t\t\twidth: 80,\n\t\t\t\tview: \"button\",\n\t\t\t\tcss: \"webix_transparent\",\n\t\t\t\tvalue: _(\"Today\"),\n\t\t\t\tclick: () => this.SetToday(),\n\t\t\t},\n\t\t};\n\n\t\tconst ui = {\n\t\t\tview: \"toolbar\",\n\t\t\tcss: \"webix_scheduler_toolbar webix_dark\",\n\t\t\tresponsive: true,\n\t\t\tpaddingY: 0,\n\t\t\tpaddingX: 4,\n\t\t\theight: webix.skin.$active.tabbarHeight + 10,\n\t\t\tvisibleBatch: this.Compact ? \"compact\" : \"full\",\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\ticon: \"shi-menu\",\n\t\t\t\t\tclick: () => this.ShowNav(),\n\t\t\t\t\thidden: !this.Compact && !this.app.config.calendars,\n\t\t\t\t\tresponsiveCell: false,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"proxy\",\n\t\t\t\t\tlocalId: \"add\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tbody: AddView,\n\t\t\t\t\tbatch: \"full\",\n\t\t\t\t\t//[ToDO] makes sence to hide it on medium screens to allows smaller compactWidth\n\t\t\t\t\t//in this case click-to-add behaviour for modes must be implemenetd\n\t\t\t\t\tresponsiveCell: false,\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\tview: \"proxy\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tbody: DateView,\n\t\t\t\t\tresponsiveCell: false,\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t\ttodayBtn,\n\t\t\t\t{ width: 12 },\n\t\t\t\tNavBarView,\n\t\t\t\ttodayIcon,\n\t\t\t],\n\t\t};\n\n\t\treturn ui;\n\t}\n\tinit() {\n\t\tthis.State = this.app.getState();\n\n\t\tif (this.Compact) this.NavPopup = this.ui(NavPopupView);\n\n\t\tthis.on(this.State.$changes, \"readonly\", value => {\n\t\t\tthis.ToggleAdd(value);\n\t\t});\n\t}\n\tSetToday() {\n\t\tthis.State.date = webix.Date.dayStart(new Date());\n\t}\n\tShowNav() {\n\t\tif (this.Compact) this.NavPopup.Show();\n\t\telse this.app.callEvent(\"show:panel\");\n\t}\n\tToggleAdd(value) {\n\t\tconst add = this.$$(\"add\");\n\t\tif (value) add.hide();\n\t\telse if (!this.Compact) add.show();\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class EventActionMenu extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tbody: {\n\t\t\t\tview: \"menu\",\n\t\t\t\tlayout: \"y\",\n\t\t\t\twidth: 220,\n\t\t\t\tautoheight: true,\n\t\t\t\tdata: [\n\t\t\t\t\t{ id: \"this\", value: _(\"This event\") },\n\t\t\t\t\t{ id: \"next\", value: _(\"This event and the following\") },\n\t\t\t\t\t{ id: \"all\", value: _(\"All events\") },\n\t\t\t\t],\n\t\t\t\ton: {\n\t\t\t\t\tonMenuItemClick: id => {\n\t\t\t\t\t\tif (this.Result) this.Result.resolve(id);\n\t\t\t\t\t\tthis.Result = null;\n\t\t\t\t\t\tthis.Root.hide();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonHide: () => {\n\t\t\t\t\tif (this.Result) this.Result.reject();\n\t\t\t\t\tthis.Result = null;\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\tinit(view) {\n\t\tthis.Root = view;\n\t}\n\n\tShow(node) {\n\t\tthis.Result = webix.promise.defer();\n\t\tthis.Root.show(node);\n\t\treturn this.Result;\n\t}\n}\n","export function shrinkTo(start, end) {\n\treturn ev => {\n\t\tconst before = ev.start_date <= start;\n\t\tconst after = ev.end_date >= end;\n\n\t\tif (before || after) {\n\t\t\tconst t = webix.copy(ev);\n\t\t\tif (before) t.start_date = start;\n\t\t\tif (after) t.end_date = end;\n\t\t\treturn t;\n\t\t}\n\n\t\treturn ev;\n\t};\n}\n\nexport function isToday(date) {\n\treturn webix.Date.equal(\n\t\twebix.Date.datePart(date),\n\t\twebix.Date.datePart(new Date())\n\t);\n}\n\nexport function isMultiDay(ev) {\n\treturn (\n\t\tev.all_day ||\n\t\t(ev.start_date.getDate() != ev.end_date.getDate() &&\n\t\t\tev.end_date - ev.start_date >= 1000 * 60 * 60 * 24 * 1)\n\t);\n}\n\n/**\n * Returns the difference between dates\n * @param {Date} start - date 1\n * @param {Date} end - date 2\n * @returns {number} difference between dates in days\n */\nexport function daysBetweenInclusive(start, end) {\n\tconst millisecondsPerDay = 24 * 60 * 60 * 1000;\n\treturn Math.round(\n\t\t(webix.Date.dayStart(end) - webix.Date.dayStart(start)) / millisecondsPerDay\n\t);\n}\n\n/**\n * Checks if the dates are the same\n * @param {Date} adate\n * @param {Date} bdate\n * @returns {Boolean}\n */\nexport function isSameDate(adate, bdate) {\n\treturn webix.Date.equal(\n\t\twebix.Date.dayStart(adate),\n\t\twebix.Date.dayStart(bdate)\n\t);\n}\n\nexport function getYearDay(date) {\n\tconst start = webix.Date.yearStart(date);\n\treturn (date - start) / 1000 / 60 / 60 / 24 + 1;\n}\n","const icalFormat = webix.Date.dateToStr(\"%Y%m%dT000000Z\");\n\nexport function parse(string) {\n\t//FREQ=DAILY;INTERVAL=2\n\tconst parts = string.split(\";\");\n\tconst config = {};\n\tfor (let i = 0; i < parts.length; i++) {\n\t\tconst [code, name] = parts[i].split(\"=\");\n\t\tconfig[code] = name;\n\t}\n\n\tif (config.UNTIL) config.UNTIL = strToDate(config.UNTIL);\n\tif (config.EXDATE) {\n\t\tconfig.EXDATE = config.EXDATE.split(\",\").map(d => strToDate(d));\n\t}\n\n\treturn config;\n}\n\nfunction strToDate(str) {\n\treturn new Date(\n\t\tstr.substr(0, 4) * 1,\n\t\tstr.substr(4, 2) * 1 - 1,\n\t\tstr.substr(6, 2) * 1\n\t);\n}\n\nexport function serialize(config) {\n\tconst str = [];\n\tfor (let key in config) {\n\t\tlet value = config[key];\n\t\tif (key === \"UNTIL\") value = icalFormat(value);\n\n\t\tif (key === \"EXDATE\") {\n\t\t\tvalue = value.map(d => icalFormat(d));\n\t\t\tvalue = value.join(\",\");\n\t\t}\n\t\tif (value) str.push(`${key}=${value}`);\n\t}\n\n\treturn str.join(\";\");\n}\n","import { serialize, parse } from \"helpers/ical\";\nexport const WEEKDAYS = [\"SU\", \"MO\", \"TU\", \"WE\", \"TH\", \"FR\", \"SA\"];\n\nexport const FREQUENCE = {\n\tDAILY: \"day\",\n\tWEEKLY: \"week\",\n\tMONTHLY: \"month\",\n\tYEARLY: \"year\",\n};\n\n/**\n * Splits each recurring event into a series of events and returns the resulting array\n * @param {Date} sdate - the start date\n * @param {Date} edate - the end date\n * @param {Object} ev - the event data object\n * @returns {Array} with recurring events split into occurrences\n */\nexport function explodeEvent(sdate, edate, ev) {\n\tconst mode = ev.$recurring;\n\n\tconst consts = {};\n\tconst res = [];\n\n\t// when we use week-days in recurring mode, convert structure\n\t// list of days => list of steps to the next allowed day\n\tfillWdays(mode, consts);\n\n\tconst xdate = new Date(ev.start_date);\n\tconst length = ev.end_date - ev.start_date;\n\n\t// occurrences before active window\n\tlet count = 1;\n\twhile (\n\t\t(sdate - xdate >= (length || 1) &&\n\t\t\t(!mode.UNTIL || xdate < mode.UNTIL) &&\n\t\t\t(!mode.COUNT || count <= mode.COUNT)) ||\n\t\tfindDate(mode.EXDATE, xdate)\n\t) {\n\t\t++count;\n\t\tnext(xdate, mode, consts);\n\t}\n\n\t// occurrences inside of window\n\twhile (\n\t\tedate > xdate &&\n\t\t(!mode.UNTIL || xdate < mode.UNTIL) &&\n\t\t(!mode.COUNT || count <= mode.COUNT)\n\t) {\n\t\t// make copy of recurring event\n\t\tif (!findDate(mode.EXDATE, xdate)) {\n\t\t\tconst copy = webix.copy(ev);\n\n\t\t\txdate.setHours(ev.start_date.getHours());\n\t\t\tcopy.start_date = new Date(xdate);\n\t\t\tcopy.end_date = new Date(xdate * 1 + length);\n\n\t\t\tcopy.$id = ev.id;\n\t\t\tcopy.id = copy.start_date.valueOf() + \"_\" + ev.id;\n\t\t\tres.push(copy);\n\t\t}\n\t\tcount++;\n\n\t\tnext(xdate, mode, consts);\n\t}\n\treturn res;\n}\n\n// IE support\n/**\n * Finds a date in an array of dates\n * @param {Array} arr - all dates\n * @param {Date} date - the date to be checked\n * @returns {Boolean}\n */\nfunction findDate(arr, date) {\n\tif (!arr) return false;\n\n\tfor (let i = 0; i < arr.length; ++i) {\n\t\tif (webix.Date.equal(webix.Date.dayStart(date), arr[i])) return true;\n\t}\n\treturn false;\n}\n\n/**\n * Defines the object that stores the recurring pattern, for more details please refer to the iCalendar docs https://icalendar.org/iCalendar-RFC-5545/3-8-5-3-recurrence-rule.html\n * @typedef {Object} Recurring\n * @property {string} FREQ - the step of repetition: DAILY, WEEKLY, MONTHLY, YEARLY\n * @property {(number|string)} INTERVAL - how many steps are between occurrences\n * @property {string} BYDAY - week days, e.g. SU,MO,TU,WE,TH,FR,SA\n * @property {(number|string)} BYMONTH - the number or a month (1-12)\n * @property {(number|string)} BYMONTHDAY - the date (day of a month)\n * @property {(number|string)} BYSETPOS - the number of the week day within a month\n * @property {string} UNTIL - a date like 19970902T090000\n * @property {(number|string)} COUNT - how many times the event repeats\n * @property {string} EXDATE - string with 1 or more dates, on which the event does not repeat, e.g. 19960402T010000Z,19960403T010000Z,19960404T010000Z\n */\n\n/**\n * Fills the list of steps to the next allowed day for recurring events that repeat by certain week days\n * @param {Recurring} mode - the object with the recurring pattern\n * @param {Object} consts - (for events that have BYDAY in their pattern) stores wdays (Array) - the list of steps to the next allowed day\n */\nexport function fillWdays(mode, consts) {\n\tif (mode.BYDAY) {\n\t\tconst diff = (consts.wdays = [0, 0, 0, 0, 0, 0, 0]);\n\t\tconst line = mode.BYDAY.split(\",\")\n\t\t\t.map(a => WEEKDAYS.indexOf(a))\n\t\t\t.sort();\n\n\t\t// for each allowed day, fill range with steps\n\t\tfor (let i = 0; i < line.length; i++) {\n\t\t\tconst s = line[i];\n\t\t\tconst e = line[i + 1] || line[0] + 7;\n\n\t\t\tfor (let j = s; j < e; j++) {\n\t\t\t\tdiff[j % 7] = e - j;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Calculates the date of the next occurrence of a repeating event\n * @param {Date} date - the current date\n * @param {Recurring} mode - the object with the recurring pattern\n * @param {Object} consts - (for events that have BYDAY in their pattern) stores wdays (Array) - the list of steps to the next allowed day\n */\nexport function next(date, mode, consts) {\n\tlet interval = (mode.INTERVAL || 1) * 1;\n\n\tlet now, step;\n\tswitch (mode.FREQ) {\n\t\tcase \"DAILY\":\n\t\t\tdate.setDate(date.getDate() + interval);\n\t\t\tbreak;\n\t\tcase \"WEEKLY\":\n\t\t\tnow = date.getDay();\n\t\t\tstep = consts.wdays ? consts.wdays[now] : 7;\n\t\t\tif (step + now > 6 && interval > 1) {\n\t\t\t\t// when new day is on the different week\n\t\t\t\t// add week interval as well\n\t\t\t\tstep += 7 * (interval - 1);\n\t\t\t}\n\t\t\tdate.setDate(date.getDate() + step);\n\t\t\tbreak;\n\t\tcase \"YEARLY\": {\n\t\t\tif (mode.BYYEARDAY) {\n\t\t\t\tdate.setFullYear(date.getFullYear() + interval);\n\t\t\t\tdate.setMonth(0);\n\t\t\t\tdate.setDate(1);\n\t\t\t\tdate.setDate(mode.BYYEARDAY);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tinterval *= 12;\n\t\t\t// falls through\n\t\t}\n\t\t/*eslint no-fallthrough: \"error\"*/\n\t\tcase \"MONTHLY\":\n\t\t\tnow = date.getMonth();\n\t\t\tdate.setDate(1);\n\t\t\tdate.setMonth(now + interval);\n\t\t\tif (mode.BYMONTHDAY) {\n\t\t\t\tdate.setDate(mode.BYMONTHDAY);\n\t\t\t\t// when date is outside of month bounds, switch to last day of month\n\t\t\t\tif ((now + interval) % 12 != date.getMonth()) date.setDate(0);\n\t\t\t} else if (mode.BYSETPOS) {\n\t\t\t\t// go to last day of month before one in question\n\t\t\t\tdate.setDate(0);\n\t\t\t\t// find the matching day\n\t\t\t\tfor (let i = 0; i < mode.BYSETPOS; i++) {\n\t\t\t\t\tstep = consts.wdays[date.getDay()];\n\t\t\t\t\tdate.setDate(date.getDate() + step);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t}\n\n\treturn date;\n}\n\n/**\n * Defines the result of the check if a date fits a BYDAY pattern\n * @typedef {Object} weekdayCheckResult\n * @property {Boolean} result true if the date fits the BYDAY pattern, false otherwise\n * @property {Date} start - the copy of the start date\n * @property {Array} days - BYDAY pattern as an array of strings\n * @property {string} oldDay - the week day of the start date\n */\n/**\n * Checks if the start day fits the recurring BYDAY pattern\n * @param {Date} sdate - the start date of an event\n * @param {Recurring} mode - the object with the recurring pattern\n * @returns {weekdayCheckResult} the result of the check\n */\nfunction checkDay(sdate, mode) {\n\tconst start = new Date(sdate);\n\tconst days = mode.BYDAY.split(\",\");\n\tconst oldDay = WEEKDAYS[start.getDay()];\n\tconst result = days.indexOf(oldDay) !== -1;\n\n\treturn { result, start, days, oldDay };\n}\n\n/**\n * Synchronizes the start and end dates to the BYDAY recurring pattern\n * @param {Date} sdate\n * @param {Date} edate\n * @param {Recurring} mode - the object with the recurring pattern\n * @return {Array} - the start and end dates of an event\n */\nexport function datesToWeekdays(sdate, edate, mode) {\n\tconst { result, start, days } = checkDay(sdate, mode);\n\tif (result) {\n\t\treturn [sdate, edate];\n\t}\n\n\tconst diff = WEEKDAYS.indexOf(days[0]) - start.getDay();\n\tstart.setDate(start.getDate() + diff);\n\n\tconst end = new Date(edate);\n\tend.setDate(end.getDate() + diff);\n\n\treturn [start, end];\n}\n\n/**\n * Synchronizes BYDAY recurring pattern with the date of an event\n * @param {Date} sdate - the start date of an event\n * @param {Recurring} mode - the object with the recurring pattern\n * @returns {string} with the new BYDAY pattern\n */\nexport function WeekdaysToDates(sdate, mode) {\n\tlet { result, days, oldDay } = checkDay(sdate, mode);\n\tif (result) {\n\t\treturn mode.BYDAY;\n\t}\n\n\tif (mode.FREQ === \"WEEKLY\") {\n\t\tdays.splice(WEEKDAYS.indexOf(days[0]), 0, oldDay);\n\t} else {\n\t\tdays = [oldDay];\n\t}\n\treturn days.join(\",\");\n}\n\n/**\n * Returns selection parameters for the global state\n * @param {Object} obj - the event data object\n * @returns {Object} with selection parameters\n */\nexport function getParams(obj) {\n\treturn { id: obj.$id || obj.id, date: obj.$recurring ? obj.id : null };\n}\n\n/**\n * Defines the selection.date parameter of the global state\n * @typedef {(Date|string)} SDate - a Date object or the ID of an event occurrence that consists of a timestamp and the event ID from DB, separated with _\n */\n\n/**\n * Gets a date from the selection.date parameter of the global state\n * @param {(SDate)} sdate\n * @returns {Date}\n */\nexport function extractDate(sdate) {\n\treturn webix.Date.dayStart(\n\t\tsdate.getDate ? sdate : new Date(sdate.split(\"_\")[0] * 1)\n\t);\n}\n\n/**\n * Updates the end of a recurring event sequence\n * @param {SDate} sdate\n * @param {Object} ev - the event data object\n * @param {Boolean} block\n * @returns {string} - serialized recurrence pattern\n */\nexport function clipSequence(sdate, ev, block) {\n\tconst date = extractDate(sdate);\n\n\tif (!block || (!ev.$recurring.UNTIL || ev.$recurring.UNTIL > date))\n\t\tev.$recurring.UNTIL = date;\n\n\tif (ev.$recurring.COUNT) delete ev.$recurring.COUNT;\n\n\tif (ev.$recurring.EXDATE) {\n\t\tev.$recurring.EXDATE = ev.$recurring.EXDATE.filter(d => d < date);\n\t}\n\n\treturn serialize(ev.$recurring);\n}\n\n/**\n * Removes the specified date from the recurrence pattern\n * @param {SDate} sdate\n * @param {Object} ev - the event data object\n * @returns {string} - serialized recurrence pattern\n */\nexport function cutOccurrence(sdate, ev) {\n\tconst date = extractDate(sdate);\n\n\tif (!ev.$recurring.EXDATE) ev.$recurring.EXDATE = [];\n\tev.$recurring.EXDATE.push(date);\n\n\treturn serialize(ev.$recurring);\n}\n\n/**\n * Gets the start and end dates for a particular occurrence from a series\n * @param {Object} obj - the event data object\n * @param {SDate} sdate\n * @returns {Object} with start_date and end_date\n */\nexport function separateSequence(obj, sdate) {\n\tconst start_date =\n\t\ttypeof sdate === \"string\"\n\t\t\t? new Date(sdate.split(\"_\")[0] * 1)\n\t\t\t: new Date(sdate);\n\tconst len = (obj.end_date - obj.start_date) / 1000 / 60; // mins\n\tconst end_date = webix.Date.add(start_date, len, \"minute\", true);\n\treturn { start_date, end_date };\n}\n\n/**\n * Checks if this is the first occurrence of a series\n * @param {SDate} sdate\n * @param {Date} evStart\n * @returns {Boolean}\n */\nexport function isFirstOccurrence(sdate, evStart) {\n\t// editing 'this' event as next\n\tif (!sdate) return false;\n\n\tconst od = sdate.getDate ? sdate : new Date(sdate.split(\"_\")[0] * 1);\n\treturn od <= evStart;\n}\n\n/**\n * Corrects the edit mode for specific cases (depending on which occurrence was selected)\n * @param {Object} obj - the event data object\n * @param {string} mode - \"all\", \"next\", \"this\"\n * @returns {string}\n */\nexport function correctMode(obj, mode) {\n\tif (!obj.origin_id || !obj.recurring) {\n\t\tmode = \"all\";\n\t} else {\n\t\t// if this is 1st occ in 'next' which is the last part of 'all'\n\t\tif (this.app.getService(\"local\").isLastPart(obj)) {\n\t\t\tmode = \"\";\n\t\t}\n\t}\n\treturn mode;\n}\n\nconst dayLength = 86400000;\n/**\n * Moves a recurrence pattern if a recurring event was moved to another date\n * @param {Recurring} rec\n * @param {Object} newEvent - the new event data object\n * @param {Object} oldEvent - the old event data object\n * @returns {Recurring}\n */\nexport function movePattern(rec, newEvent, oldEvent) {\n\tlet days =\n\t\t(webix.Date.dayStart(newEvent.start_date) -\n\t\t\twebix.Date.dayStart(oldEvent.start_date)) /\n\t\tdayLength;\n\n\tif (days) {\n\t\tif (rec.UNTIL) {\n\t\t\tconst until = webix.Date.add(rec.UNTIL, days, \"day\", true);\n\n\t\t\tif (until > newEvent.end_date) rec.UNTIL = until;\n\t\t\telse\n\t\t\t\trec.UNTIL = webix.Date.dayStart(\n\t\t\t\t\twebix.Date.add(newEvent.end_date, 1, \"day\", true)\n\t\t\t\t);\n\t\t}\n\n\t\t// day of start_date changed and pattern doesn't have in anymore\n\t\tif (rec.BYDAY) {\n\t\t\tdays %= 7;\n\t\t\tif (days < 0) days += 7;\n\t\t\trec.BYDAY = rec.BYDAY.split(\",\")\n\t\t\t\t.map(d => WEEKDAYS[(WEEKDAYS.indexOf(d) + days) % 7])\n\t\t\t\t.join(\",\");\n\t\t}\n\n\t\t// in case day of start_date changed in monthly or yearly\n\t\tif (rec.BYMONTHDAY) {\n\t\t\tconst nmd = newEvent.start_date.getDate();\n\t\t\tif (nmd != rec.BYMONTHDAY) {\n\t\t\t\trec.BYMONTHDAY = nmd;\n\t\t\t}\n\t\t}\n\t}\n\n\t// week number of start_date changed in yearly or monthly\n\tif (rec.BYSETPOS) {\n\t\tconst nwn = getWeekNum(newEvent.start_date);\n\t\tif (rec.BYSETPOS != nwn) rec.BYSETPOS = nwn;\n\t}\n\n\t// month of start_date changed in a yearly event\n\tif (rec.BYMONTH) {\n\t\tconst nm = newEvent.start_date.getMonth() + 1;\n\t\tif (nm != rec.BYMONTH) rec.BYMONTH = nm;\n\t}\n\n\treturn rec;\n}\n\n/**\n * Returns the number of a week day within a month (e.g. 3rd Wednesday)\n * @param {Date} date\n * @returns {number}\n */\nexport function getWeekNum(date) {\n\tconst day = date.getDate();\n\treturn Math.floor(day / 7) + (day % 7 ? 1 : 0);\n}\n\n/**\n * Fills incomplete recurring patterns and ensures that they are consistent with the dates of events\n * @param {Object} ev - data object of an event\n */\nexport function checkPattern(ev) {\n\tconst mode = ev.$recurring || parse(ev.recurring);\n\n\t// when exact date not configured, fill recurring config\n\tif (mode.FREQ === \"WEEKLY\" && !mode.BYDAY) {\n\t\tmode.BYDAY = WEEKDAYS[ev.start_date.getDay()];\n\t\treturn;\n\t}\n\n\tif (\n\t\t(mode.FREQ === \"MONTHLY\" || mode.FREQ === \"YEARLY\") &&\n\t\t!mode.BYSETPOS &&\n\t\t!mode.BYMONTHDAY &&\n\t\t!mode.BYYEARDAY\n\t) {\n\t\tmode.BYMONTHDAY = ev.start_date.getDate();\n\t\treturn;\n\t}\n\n\tif (mode.FREQ === \"YEARLY\" && !mode.BYMONTH && !mode.BYYEARDAY) {\n\t\tmode.BYMONTH = ev.start_date.getMonth();\n\t\treturn;\n\t}\n\n\t// in case config is wrong, fix it\n\tif (mode.BYDAY) mode.BYDAY = WeekdaysToDates(ev.start_date, mode);\n\tif (mode.BYMONTHDAY) mode.BYMONTHDAY = ev.start_date.getDate();\n\tif (mode.BYMONTH) mode.BYMONTH = ev.start_date.getMonth() + 1;\n\tif (mode.BYSETPOS) mode.BYSETPOS = getWeekNum(ev.start_date);\n\n\tev.recurring = serialize(mode);\n}\n","import { JetView } from \"webix-jet\";\nimport { WEEKDAYS, fillWdays, next } from \"helpers/recurring\";\n\nexport default class RecurringFormView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst compact = this.getParam(\"compact\", true);\n\n\t\tconst aSkin = webix.skin.$active;\n\t\tconst form = {\n\t\t\tview: \"form\",\n\t\t\tlocalId: \"recurringForm\",\n\t\t\thidden: true,\n\t\t\telementsConfig: { labelPosition: \"left\" },\n\t\t\tpadding: {\n\t\t\t\ttop: aSkin.layoutPadding.form,\n\t\t\t\tbottom: 0,\n\t\t\t\tleft: compact ? aSkin.layoutPadding.form : 0,\n\t\t\t\tright: compact ? 14 : 0,\n\t\t\t},\n\t\t\tborderless: true,\n\t\t\trows: [\n\t\t\t\tthis.CreateIntervalControls(_),\n\t\t\t\t{\n\t\t\t\t\tlocalId: \"customRecControls\",\n\t\t\t\t\thidden: true,\n\t\t\t\t\trows: [this.CreateCheckboxes(_), this.CreateSelect(_)],\n\t\t\t\t},\n\t\t\t\tthis.CreateRadio(_),\n\t\t\t],\n\t\t};\n\n\t\tif (!compact) {\n\t\t\tform.on = {\n\t\t\t\tonChange: (o, v, m) => this.UpdateEvent(m),\n\t\t\t};\n\t\t}\n\n\t\treturn form;\n\t}\n\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tthis.Form = this.$$(\"recurringForm\");\n\t\tthis.Events = this.app.getService(\"local\").events(true);\n\n\t\t// commonly called controls\n\t\tthis.CheckBoxContainer = this.$$(\"weekly\");\n\t\tthis.Checkboxes = this.CheckBoxContainer.getChildViews().slice(1);\n\t\tthis.Checkboxes.pop();\n\t\tthis.PatternSelect = this.$$(\"patternSelect\");\n\t\tthis.UntilDateContainer = this.$$(\"untilDate\");\n\t\tthis.UntilDateCalendar = this.Form.elements.untilDate.getPopup().getBody();\n\t\tthis.UntilNumContainer = this.$$(\"untilCount\");\n\t\tthis.UntilNum = this.UntilNumContainer.getBody();\n\t\tthis.CustomRecControls = this.$$(\"customRecControls\");\n\t}\n\n\t// methods of main controls: counter of INTERVAL and richselect of FREQ\n\n\t/**\n\t * Returns the config object for interval counter and recurrence frequency selection\n\t * @param {function} _ - the translator method of the Locale plugin\n\t * @returns {Object}\n\t */\n\tCreateIntervalControls(_) {\n\t\treturn {\n\t\t\tmargin: 8,\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"counter\",\n\t\t\t\t\tlabel: _(\"Every\"),\n\t\t\t\t\tlabelWidth: 50,\n\t\t\t\t\tmin: 1,\n\t\t\t\t\tname: \"INTERVAL\",\n\t\t\t\t\tcss: \"webix_scheduler_counter\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\tname: \"FREQ\",\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{ id: \"DAILY\", value: _(\"day\") },\n\t\t\t\t\t\t{ id: \"WEEKLY\", value: _(\"week\") },\n\t\t\t\t\t\t{ id: \"MONTHLY\", value: _(\"month\") },\n\t\t\t\t\t\t{ id: \"YEARLY\", value: _(\"year\") },\n\t\t\t\t\t],\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: v => this.ChangeControls(v),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\t/**\n\t * Switches controls for detailed recurrence pattern selection depending on the frequency\n\t * @param {string} v - recurrence frequency\n\t */\n\tChangeControls(v) {\n\t\tthis._freq = v;\n\t\tif (v === \"DAILY\") {\n\t\t\tthis.CustomRecControls.hide();\n\t\t} else {\n\t\t\tthis.CustomRecControls.show();\n\t\t\tif (v === \"WEEKLY\") {\n\t\t\t\tthis.CheckBoxContainer.show();\n\t\t\t\tthis.PatternSelect.hide();\n\t\t\t} else {\n\t\t\t\tthis.CheckBoxContainer.hide();\n\t\t\t\tif (v === \"MONTHLY\" && this.PatternSelect.getValue() == 3)\n\t\t\t\t\tthis.PatternSelect.setValue(1);\n\t\t\t\tthis.PatternSelect.show();\n\t\t\t\tthis.PatternSelect.getList().refresh();\n\t\t\t\tthis.PatternSelect.refresh();\n\t\t\t}\n\t\t}\n\t}\n\n\t// methods of checkboxes for WEEKLY\n\n\t/**\n\t * Returns the config object for week day checkboxes\n\t * @param {function} _ - the translator method of the Locale plugin\n\t * @returns {Object}\n\t */\n\tCreateCheckboxes(_) {\n\t\tconst days = [];\n\t\tfor (let i = 0; i < 7; ++i) {\n\t\t\tdays.push({\n\t\t\t\tview: \"checkbox\",\n\t\t\t\tlabel: webix.i18n.calendar.dayShort[i],\n\t\t\t\tlabelPosition: \"top\",\n\t\t\t\tlabelAlign: \"center\",\n\t\t\t\tcss: \"webix_scheduler_day_checkbox\",\n\t\t\t\tinputWidth: 26,\n\t\t\t\twidth: 45,\n\t\t\t\talign: \"center\",\n\t\t\t\tname: WEEKDAYS[i],\n\t\t\t\ton: {\n\t\t\t\t\tonChange(v, o) {\n\t\t\t\t\t\tthis.$scope.CheckboxGuard(this.config.name, v, o);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\treturn {\n\t\t\tlocalId: \"weekly\",\n\t\t\tcols: [\n\t\t\t\t{ view: \"label\", label: _(\"on\"), width: 45 },\n\t\t\t\t...days,\n\t\t\t\t{ gravity: 0.00001 },\n\t\t\t],\n\t\t};\n\t}\n\n\t/**\n\t * Prevents the user from unchecking the only checked weekday checkbox\n\t * @param {string} day - the name of the related checkbox (SU, MO, TU, WE, TH, FR, or SA)\n\t * @param {(Boolean|number)} v - the new value of a checkbox (false/0 or true/1)\n\t * @param {(Boolean|number)} o - the old value of a checkbox (false/0 or true/1)\n\t */\n\tCheckboxGuard(day, v, o) {\n\t\tif (!webix.isUndefined(o) && !v && !this.GetBYDAY()) {\n\t\t\tthis.Form.setValues({ [day]: 1 }, true);\n\t\t}\n\t}\n\n\t/**\n\t * Sets values to weekday checkboxes according to BYDAY recurrence pattern (week days)\n\t * @param {Object} values - values from the form\n\t */\n\tSetBYDAY(values) {\n\t\tconst days = values.BYDAY.split(\",\");\n\t\tthis.Checkboxes.forEach(check => {\n\t\t\tvalues[check.config.name] = !!days.find(d => d == check.config.name);\n\t\t});\n\t}\n\n\t/**\n\t * Gets the BYDAY pattern from checkbox values\n\t * @returns {string}\n\t */\n\tGetBYDAY() {\n\t\tconst BYDAY = [];\n\t\tthis.Checkboxes.forEach(check => {\n\t\t\tif (check.getValue()) {\n\t\t\t\tBYDAY.push(check.config.name);\n\t\t\t}\n\t\t});\n\t\treturn BYDAY.join(\",\");\n\t}\n\n\t// methods of richselect with MONTHLY and YEARLY patterns\n\n\t/**\n\t * Returns the config object for a dropdown list with monthly/yearly recurrence patterns\n\t * @param {function} _ - the translator method of the Locale plugin\n\t * @returns {Object}\n\t */\n\tCreateSelect(_) {\n\t\treturn {\n\t\t\tview: \"richselect\",\n\t\t\tlocalId: \"patternSelect\",\n\t\t\tname: \"rec_pattern\",\n\t\t\tsuggest: {\n\t\t\t\tdata: [],\n\t\t\t\tbody: {\n\t\t\t\t\ttemplate: obj => {\n\t\t\t\t\t\tif (this._freq === \"YEARLY\" && obj.BYYEARDAY) {\n\t\t\t\t\t\t\treturn `${_(\"Every\")} ${obj.BYYEARDAY} ${_(\"day of year\")}`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst byDay = [];\n\t\t\t\t\t\tif (obj.BYDAY) {\n\t\t\t\t\t\t\tobj.BYDAY.forEach(d =>\n\t\t\t\t\t\t\t\tbyDay.push(webix.i18n.calendar.dayFull[d])\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet text = `${_(\"Every\")} ${obj.BYMONTHDAY || obj.BYSETPOS} ${\n\t\t\t\t\t\t\tobj.BYDAY ? byDay.join(\", \") : \"\"\n\t\t\t\t\t\t}`;\n\t\t\t\t\t\tif (this._freq === \"YEARLY\")\n\t\t\t\t\t\t\ttext += ` ${_(\"of\")} ${\n\t\t\t\t\t\t\t\twebix.i18n.calendar.monthFull[obj.BYMONTH - 1]\n\t\t\t\t\t\t\t}`;\n\t\t\t\t\t\treturn text;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tonShow() {\n\t\t\t\t\t\tthis.getList().filter(\n\t\t\t\t\t\t\tobj => this.$scope._freq === \"YEARLY\" || obj.id != 3\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * Describes calculated constants of a date\n\t * @typedef {Object} DateInfo\n\t * @property {number} day - the date (day of month)\n\t * @property {number} weekday - the number of a weekday (0-6)\n\t * @property {number} month - the number of month (0-11)\n\t * @property {number} weekNum - the number of a weekday within a month (e.g. 4th Friday)\n\t */\n\n\t/**\n\t * Sets pattern options for the dropdown list (monthly and yearly events)\n\t * @param {Object} ev - values from the form\n\t * @param {DateInfo} calculated - calculated constants of a date\n\t */\n\tSetPatternOptions(ev, calculated) {\n\t\tthis.PatternSelect.getList().parse([\n\t\t\t{\n\t\t\t\tid: 1,\n\t\t\t\tBYMONTH: ev.BYMONTH || calculated.month + 1,\n\t\t\t\tBYMONTHDAY: ev.BYMONTHDAY || calculated.day,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 2,\n\t\t\t\tBYSETPOS: ev.BYSETPOS || calculated.weekNum,\n\t\t\t\tBYDAY: [calculated.weekday],\n\t\t\t\tBYMONTH: ev.BYMONTH || calculated.month + 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 3,\n\t\t\t\tBYYEARDAY: ev.BYYEARDAY || calculated.yearday,\n\t\t\t},\n\t\t]);\n\t\tthis.PatternSelect.refresh();\n\t\tthis._freq = ev.FREQ;\n\n\t\tev.rec_pattern = ev.BYSETPOS ? 2 : ev.BYYEARDAY ? 3 : 1;\n\t}\n\n\t/**\n\t *\n\t * @param {Object} values - values from the form\n\t */\n\tGetRecPattern(values) {\n\t\tconst data = webix.copy(\n\t\t\tthis.PatternSelect.getList().getItem(values.rec_pattern)\n\t\t);\n\n\t\tif (this._freq === \"MONTHLY\") delete data.BYMONTH;\n\t\tif (data.BYDAY) data.BYDAY = data.BYDAY.map(d => WEEKDAYS[d]).join(\",\");\n\t\tdelete data.id;\n\n\t\treturn data;\n\t}\n\n\t// methods of radio for UNTIL\n\n\t/**\n\t * Returns the config object for the radio with options for setting the end of repetition\n\t * @param {function} _ - the translator method of the Locale plugin\n\t * @returns {Object}\n\t */\n\tCreateRadio(_) {\n\t\tconst selectors = {\n\t\t\twidth: 130,\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tlocalId: \"untilDate\",\n\t\t\t\t\talign: \"middle\",\n\t\t\t\t\tview: \"align\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tview: \"datepicker\",\n\t\t\t\t\t\tname: \"untilDate\",\n\t\t\t\t\t\ticons: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlocalId: \"untilCount\",\n\t\t\t\t\tview: \"align\",\n\t\t\t\t\talign: \"bottom\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tname: \"untilCount\",\n\t\t\t\t\t\tview: \"counter\",\n\t\t\t\t\t\tcss: \"webix_scheduler_counter\",\n\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\treturn {\n\t\t\trows: [\n\t\t\t\t{ view: \"label\", label: _(\"End repeat\") },\n\t\t\t\t{\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"radio\",\n\t\t\t\t\t\t\tname: \"until\",\n\t\t\t\t\t\t\tlocalId: \"until\",\n\t\t\t\t\t\t\tvertical: true,\n\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t{ id: 1, value: _(\"never\") },\n\t\t\t\t\t\t\t\t{ id: 2, value: _(\"date\") },\n\t\t\t\t\t\t\t\t{ id: 3, value: _(\"after several occurrences\") },\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\tonChange: v => this.ChangeSelectors(v),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectors,\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\t/**\n\t * Switches controls for dates or numbers for setting the end of repetition\n\t * @param {(number|string)} v - the value of the radio that sets the type of repetition end (1,2,3)\n\t */\n\tChangeSelectors(v) {\n\t\tthis.UntilDateContainer[v === \"2\" ? \"show\" : \"hide\"]();\n\t\tthis.UntilNumContainer[v === \"3\" ? \"show\" : \"hide\"]();\n\t}\n\n\t/**\n\t * Sets the values of controls that are used to choose the end of repetition\n\t * @param {Object} values - values from the form\n\t */\n\tSetUNTIL(values) {\n\t\tconst start = this._StartDate;\n\t\tvalues.until = values.COUNT ? 3 : values.UNTIL ? 2 : 1;\n\t\tvalues.untilDate = values.UNTIL || webix.Date.add(start, 1, \"year\", true);\n\t\tvalues.untilCount = values.COUNT || this.CountNum(values);\n\t\tthis.UntilDateCalendar.define({ minDate: start });\n\t}\n\n\t/**\n\t * Calculates the number of occurrences based on the end date of repetition (UNTIL)\n\t * @param {Object} values - values from the form\n\t */\n\tCountNum(values) {\n\t\tlet res = 0;\n\n\t\tif (values.UNTIL) {\n\t\t\tconst consts = {};\n\t\t\tfillWdays(values, consts);\n\t\t\tlet date = webix.Date.copy(this._StartDate);\n\n\t\t\twhile (date <= values.UNTIL) {\n\t\t\t\tdate = next(date, values, consts);\n\t\t\t\tres++;\n\t\t\t}\n\t\t} else {\n\t\t\tres = 3;\n\t\t}\n\n\t\treturn res;\n\t}\n\n\t// subform methods\n\n\t/**\n\t * Sets values into this form\n\t * @param {Object} event - the event data object\n\t * @param {DateInfo} calculated - calculated constants of a date\n\t * @param {Boolean} silent - if true, the form is marked as 'saved' (containing no unsaved values)\n\t */\n\tSetValues(event, calculated, silent) {\n\t\tif (!calculated) return this.Form.setValues(event, true);\n\n\t\tthis._StartDate = event.start_date;\n\t\tlet values = event.$recurring;\n\n\t\tif (!values) {\n\t\t\tvalues = { FREQ: \"DAILY\" };\n\t\t}\n\n\t\tif (!values.INTERVAL) values.INTERVAL = 1;\n\t\tif (!values.BYDAY) {\n\t\t\tvalues.BYDAY = WEEKDAYS[calculated.weekday];\n\t\t}\n\n\t\t// for a reset\n\t\tif (!values.EXDATE) values.EXDATE = [];\n\n\t\tthis.SetUNTIL(values);\n\t\tthis.SetBYDAY(values);\n\t\tthis.SetPatternOptions(values, calculated);\n\t\tthis.Form.setValues(values, true);\n\t\tif (silent) this.Form.setDirty();\n\t}\n\n\t/**\n\t * Defines the object that stores the recurring pattern, for more details please refer to the iCalendar docs https://icalendar.org/iCalendar-RFC-5545/3-8-5-3-recurrence-rule.html\n\t * @typedef {Object} Recurring\n\t * @property {string} FREQ - the step of repetition: DAILY, WEEKLY, MONTHLY, YEARLY\n\t * @property {(number|string)} INTERVAL - how many steps are between occurrences\n\t * @property {string} BYDAY - week days, e.g. SU,MO,TU,WE,TH,FR,SA\n\t * @property {(number|string)} BYMONTH - the number or a month (1-12)\n\t * @property {(number|string)} BYMONTHDAY - the date (day of a month)\n\t * @property {(number|string)} BYSETPOS - the number of the week day within a month\n\t * @property {string} UNTIL - a date like 19970902T090000\n\t * @property {(number|string)} COUNT - how many times the event repeats\n\t * @property {string} EXDATE - string with 1 or more dates, on which the event does not repeat, e.g. 19960402T010000Z,19960403T010000Z,19960404T010000Z\n\t */\n\n\t/**\n\t * Collects recurrence pattern object from form values and returns it\n\t * @returns {Recurring} the object that stores the recurring pattern\n\t */\n\tGetValues() {\n\t\tlet values = this.Form.getValues();\n\n\t\tlet res = {\n\t\t\tFREQ: values.FREQ,\n\t\t\tINTERVAL: values.INTERVAL,\n\t\t\tUNTIL: values.until == 2 ? values.untilDate : this.GetUntil(values),\n\t\t\tCOUNT: values.until == 3 ? values.untilCount : null,\n\t\t\tEXDATE: values.EXDATE || [],\n\t\t};\n\n\t\tif (values.FREQ === \"WEEKLY\") {\n\t\t\tres.BYDAY = this.GetBYDAY(values);\n\t\t} else if (values.FREQ === \"MONTHLY\" || values.FREQ === \"YEARLY\") {\n\t\t\tres = webix.extend(res, this.GetRecPattern(values));\n\t\t}\n\n\t\tthis.Form.setDirty();\n\n\t\treturn res;\n\t}\n\n\t/**\n\t * Calculates the end of repetition as date based on COUNT\n\t * @param {Object} values - values from the form\n\t * @returns {Date}\n\t */\n\tGetUntil(values) {\n\t\tif (values.until == 3) {\n\t\t\tconst consts = {};\n\t\t\tfillWdays(values, consts);\n\t\t\tlet date = webix.Date.copy(this._StartDate);\n\t\t\tfor (let i = 1; i < values.untilCount; ++i) {\n\t\t\t\tdate = next(date, values, consts);\n\t\t\t}\n\t\t\tdate = webix.Date.add(date, 1, \"day\", true);\n\t\t\tthis.Form.setValues({ untilDate: date }, true);\n\t\t\treturn date;\n\t\t} else return null;\n\t}\n\n\t/**\n\t * Collects all values and sends them to the master form for event update (via global app event)\n\t * @param {string} mode - \"user\" means that the change was made via UI\n\t */\n\tUpdateEvent(mode) {\n\t\tif (mode === \"user\") {\n\t\t\tconst change = this.GetValues();\n\t\t\tthis.app.callEvent(\"form:update:recurring\", [{ $recurring: change }]);\n\t\t\tthis.Form.setDirty();\n\t\t}\n\t}\n\n\t/**\n\t * Checks if this form has changed values\n\t * @returns {Boolean}\n\t */\n\tIsDirty() {\n\t\treturn this.Form.isDirty();\n\t}\n\n\t/**\n\t * Shows this form\n\t */\n\tShow() {\n\t\tthis.getRoot().show();\n\t}\n\n\t/**\n\t * Hides this form\n\t */\n\tHide() {\n\t\tthis.getRoot().hide();\n\t}\n}\n","import {\n\tisFirstOccurrence,\n\tcorrectMode,\n\textractDate,\n\tFREQUENCE,\n\tfillWdays,\n\tnext,\n} from \"./recurring\";\n\n/* public functions */\n\n/**\n * Changes the mode if the user selected the 1st occurrence in whole sequence or in 'next'\n * @param {string} mode - the mode of editing a recurring event (\"all\", \"next\", \"this\")\n * @param {object} obj - the event object\n * @param {Date} start - the start date of the event\n * @param {Date, string} date_id - the ID of an occurrence of a repeated event or the date of this occurrence\n */\nfunction changeMode(mode, obj, start, date_id) {\n\tif (mode && mode === \"next\" && isFirstOccurrence(date_id, start)) {\n\t\tmode = correctMode.call(this, obj, mode);\n\t}\n\n\treturn mode;\n}\n\n/**\n * Corrects recurring.COUNT or recurring.UNTIL based on all sub-events that are included in the edited range\n * @param {Object} obj - the event data\n * @param {string} mode - the mode of recurring editing (\"all\", \"next\")\n * @param {Date} sdate - the date of the currently selected event occurrence\n * @param {Object} collection - DataCollection of events\n */\nfunction correctCountUntil(obj, mode, sdate, collection) {\n\tconst oid = obj.origin_id || obj.$id || obj.id;\n\tconst parts = collection\n\t\t.find(e => {\n\t\t\treturn oid == e.origin_id && sdate < e.start_date;\n\t\t})\n\t\t.sort((a, b) => {\n\t\t\tif (a.start_date > b.start_date) return -1;\n\t\t\tif (a.start_date < b.start_date) return 1;\n\t\t\treturn 0;\n\t\t});\n\n\tconst rec = webix.copy(obj.$recurring);\n\n\tfor (let i = 0, last; i < parts.length; ++i) {\n\t\tlast = parts[i];\n\n\t\tif (last.$recurring) {\n\t\t\tif (last.$recurring.COUNT) {\n\t\t\t\tif (rec.COUNT && obj.$id != last.id) {\n\t\t\t\t\trec.COUNT = rec.COUNT * 1 + last.$recurring.COUNT * 1;\n\t\t\t\t} else {\n\t\t\t\t\trec.UNTIL = countToUntil(last);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\trec.UNTIL = last.$recurring.UNTIL;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (mode === \"next\" && !parts.length) {\n\t\tif (rec.COUNT) {\n\t\t\trec.COUNT = cutCount(obj, sdate);\n\t\t} else if (rec.UNTIL && obj.start_date >= rec.UNTIL) {\n\t\t\trec.UNTIL = webix.Date.add(\n\t\t\t\twebix.Date.dayStart(obj.start_date),\n\t\t\t\t1,\n\t\t\t\tFREQUENCE[rec.FREQ],\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\t}\n\n\treturn rec;\n}\n\n/**\n * Checks if the selected repeating event has only 1 occurrence\n * @param {Object} obj - the event data\n */\nfunction hasOneOccurrence(obj) {\n\t// as this a 'this' event\n\tif (!obj.recurring) return true;\n\n\t// as 'this' any occurrence in unedited sequence\n\tif (!obj.$recurring.UNTIL) return false;\n\n\tconst end = webix.Date.dayStart(webix.Date.add(obj.end_date, 1, \"day\", true));\n\treturn webix.Date.equal(end, obj.$recurring.UNTIL);\n}\n\n/* EO public functions */\n\n/* private functions */\nfunction countToUntil(last) {\n\tconst lr = last.$recurring;\n\tlet step = lr.COUNT * 1; // !\n\tif (lr.FREQ === \"WEEKLY\") {\n\t\tstep = Math.floor((lr.BYDAY.split(\",\").length / 7) * lr.COUNT);\n\t}\n\treturn webix.Date.add(last.start_date, step, FREQUENCE[lr.FREQ], true);\n}\n\nfunction cutCount(obj, sdate) {\n\tconst date = extractDate(sdate);\n\n\tconst consts = {};\n\tfillWdays(obj.$recurring, consts);\n\tlet nexto = webix.Date.dayStart(obj.start_date);\n\tlet count = 0;\n\twhile (nexto < date) {\n\t\tcount++;\n\t\tnexto = next(nexto, obj.$recurring, consts);\n\t}\n\treturn obj.$recurring.COUNT - count;\n}\n/* EO private functions */\n\nexport default function EditRecurringMixin(child) {\n\tchild.ChangeMode = changeMode;\n\tchild.CorrectCountUntil = correctCountUntil;\n\tchild.HasOneOccurrence = hasOneOccurrence;\n}\n","import { JetView } from \"webix-jet\";\nimport getPalette from \"helpers/palette\";\nimport { getYearDay } from \"helpers/dates\";\n\nimport {\n\tWEEKDAYS,\n\tfillWdays,\n\tnext,\n\tdatesToWeekdays,\n\tWeekdaysToDates,\n\tclipSequence,\n\tcutOccurrence,\n\tseparateSequence,\n} from \"helpers/recurring\";\nimport { serialize } from \"helpers/ical\";\nimport RecurringFormView from \"./recurringform\";\nimport EditRecurringMixin from \"helpers/editrecurring\";\n\nexport default class EventFormView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tthis.Compact = this.getParam(\"compact\", true);\n\n\t\tconst aSkin = webix.skin.$active;\n\t\tconst toolbar = {\n\t\t\tview: \"toolbar\",\n\t\t\tborderless: true,\n\t\t\tpadding: {\n\t\t\t\tleft: aSkin.layoutPadding.form - (aSkin.inputHeight - 20) / 2,\n\t\t\t\tright: 14,\n\t\t\t},\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\ticon: \"wxi-close\",\n\t\t\t\t\ttooltip: _(\"Close\"),\n\t\t\t\t\thotkey: \"esc\",\n\t\t\t\t\tclick: () => this.Close(),\n\t\t\t\t},\n\t\t\t\t{ view: \"label\", label: _(\"Edit event\") },\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\twidth: 130,\n\t\t\t\t\tcss: \"webix_primary\",\n\t\t\t\t\tvalue: _(\"Done\"),\n\t\t\t\t\thotkey: \"Ctrl+Enter\",\n\t\t\t\t\tclick: () => this.Done(),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst form = {\n\t\t\tview: \"form\",\n\t\t\tlocalId: \"form\",\n\t\t\tscroll: true,\n\t\t\tborderless: true,\n\t\t\tpadding: { right: 14 },\n\t\t\telementsConfig: { labelPosition: \"top\" },\n\t\t\telements: [\n\t\t\t\t{ view: \"text\", label: _(\"Event\"), name: \"text\" },\n\t\t\t\t{\n\t\t\t\t\tmargin: 8,\n\t\t\t\t\trows: [\n\t\t\t\t\t\tthis.GetDateTime(\"start\", _, aSkin),\n\t\t\t\t\t\tthis.GetDateTime(\"end\", _, aSkin),\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"checkbox\",\n\t\t\t\t\tname: \"all_day\",\n\t\t\t\t\tlabelPosition: \"left\",\n\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\tlabelRight: _(\"All Day\"),\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: v => this.ToggleTimeControls(v),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tthis.CreateCalendarColor(_),\n\t\t\t\t{\n\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\tlabel: _(\"Notes\"),\n\t\t\t\t\tname: \"details\",\n\t\t\t\t\theight: 150,\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t],\n\t\t\ton: {\n\t\t\t\tonChange: (v, o, m) => {\n\t\t\t\t\t// some fields need preprocessing\n\t\t\t\t\tconst change = this.Form.getDirtyValues();\n\t\t\t\t\tif (Object.keys(change).length) this.PrepareChange(change);\n\t\t\t\t\tif (!this.Compact && m === \"user\")\n\t\t\t\t\t\tthis.Wait(() => this.UpdateEvent(change));\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tif (this.app.config.recurring)\n\t\t\tform.elements.splice(3, 0, this.CreateRepeat(_, aSkin));\n\n\t\tif (this.app.config.units) {\n\t\t\tconst index = this.app.config.recurring ? 5 : 4;\n\t\t\tform.elements.splice(index, 0, this.CreateUnitSelector(_));\n\t\t}\n\n\t\tif (this.app.config.timeline) {\n\t\t\tlet index = this.app.config.recurring ? 5 : 4;\n\t\t\tif (this.app.config.units) index++;\n\t\t\tform.elements.splice(index, 0, this.CreateSectionSelector(_));\n\t\t}\n\n\t\tconst config = {\n\t\t\tview: \"proxy\", // for borders\n\t\t\tbody: {\n\t\t\t\tmargin: 0,\n\t\t\t\trows: [toolbar, form],\n\t\t\t},\n\t\t};\n\n\t\treturn config;\n\t}\n\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tthis.Form = this.$$(\"form\");\n\t\tthis.Local = this.app.getService(\"local\").events(true);\n\t\tthis.Ops = this.app.getService(\"operations\");\n\n\t\t// extending this class with common methods for editing of recurring events\n\t\tEditRecurringMixin(this);\n\n\t\t// most commonly called controls\n\t\tthis.RecurringOptions = this.$$(\"recOption\");\n\t\tthis.StartTime = this.$$(\"startTime\");\n\t\tthis.EndTime = this.$$(\"endTime\");\n\n\t\tthis.on(this.State.$changes, \"readonly\", (_v, o) => {\n\t\t\tif (!webix.isUndefined(o)) this.Close();\n\t\t});\n\n\t\tthis.on(this.app, \"form:update:recurring\", update => {\n\t\t\t// 'update' as imitated dirty value\n\t\t\tif (Object.keys(update).length) this.PrepareChange(update);\n\t\t\tthis.UpdateEvent(update);\n\t\t});\n\n\t\t// parse lists that are not data dependable\n\t\tconst local = this.app.getService(\"local\");\n\t\tif (this.app.config.calendars) {\n\t\t\tthis.Calendars = local.calendars(true);\n\t\t\tthis.$$(\"calendar\")\n\t\t\t\t.getList()\n\t\t\t\t.parse(this.Calendars);\n\t\t}\n\n\t\tif (this.app.config.units) {\n\t\t\tconst waitUnits = local.units();\n\t\t\tconst combo = this.Form.elements[\"units\"];\n\t\t\twaitUnits.then(units => {\n\t\t\t\tcombo.getList().parse(units);\n\t\t\t\tcombo.refresh();\n\t\t\t});\n\t\t}\n\n\t\tif (this.app.config.timeline) {\n\t\t\tthis.Sections = local.sections(true);\n\t\t\tthis.$$(\"sections\")\n\t\t\t\t.getList()\n\t\t\t\t.parse(this.Sections);\n\t\t}\n\t}\n\n\tready() {\n\t\tthis.SubForm = this.getSubView(\"recurringForm\");\n\t\tthis.on(this.State.$changes, \"selected\", v => {\n\t\t\tif (v) {\n\t\t\t\tthis.ClearTempEvent(); // support double clicks and 'Create' at any moment\n\t\t\t\tthis.Wait(() => this.FillForm(v));\n\t\t\t}\n\t\t});\n\t}\n\n\tdestroy() {\n\t\tthis.ClearTempEvent();\n\t}\n\n\t/**\n\t * Returns the config controls for editing recurring patterns of events\n\t * @param {function} _ - the method of the Locale plugin used to translate labels according to the current locale\n\t * @param {Object} aSkin - stores sizes and colors of a currently active Webix skin\n\t */\n\tCreateRepeat(_, aSkin) {\n\t\tconst rows = [\n\t\t\t{ view: \"label\", label: _(\"Repeat\"), height: aSkin.labelTopHeight },\n\t\t\t{\n\t\t\t\tmargin: 4,\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\t\tlocalId: \"recOption\",\n\t\t\t\t\t\tname: \"rec_option\",\n\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t{ id: \"none\", value: _(\"never\") },\n\t\t\t\t\t\t\t\t{ id: \"daily\", value: _(\"daily\") },\n\t\t\t\t\t\t\t\t{ id: \"weekly\" },\n\t\t\t\t\t\t\t\t{ id: \"monthly\" },\n\t\t\t\t\t\t\t\t{ id: \"yearly\" },\n\t\t\t\t\t\t\t\t{ id: \"work\", value: _(\"every working day\") },\n\t\t\t\t\t\t\t\t{ id: \"custom\", value: _(\"custom\") },\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: (v, o) => this.ToggleSubform(v, o),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\n\t\tif (this.Compact) {\n\t\t\trows[1].cols.push({\n\t\t\t\tlocalId: \"editCustomRec\",\n\t\t\t\tview: \"icon\",\n\t\t\t\ticon: \"wxi-pencil\",\n\t\t\t\ttooltip: _(\"Change recurring pattern\"),\n\t\t\t\thidden: true,\n\t\t\t\tclick: () => this.ShowSubForm(),\n\t\t\t});\n\t\t}\n\n\t\trows.push({ $subview: RecurringFormView, name: \"recurringForm\" });\n\n\t\treturn { localId: \"repeatControls\", rows: rows };\n\t}\n\n\t/**\n\t * Hides or shows time selectors\n\t * @param {number} v - the value of 'all day' checkbox (1 or 0)\n\t */\n\tToggleTimeControls(v) {\n\t\tif (v == 1) {\n\t\t\tthis.StartTime.hide();\n\t\t\tthis.EndTime.hide();\n\t\t} else {\n\t\t\tthis.StartTime.show();\n\t\t\tthis.EndTime.show();\n\t\t}\n\t}\n\n\t/**\n\t * Shows or hides the subform for editing recurring pattern; the subform is shown when v is 'custom'\n\t * @param {string} v - the new recurring pattern option\n\t * @param {string} o  - the new recurring pattern option\n\t */\n\tToggleSubform(v, o) {\n\t\tif (v === \"custom\") {\n\t\t\tif (this.Compact) {\n\t\t\t\tthis.$$(\"editCustomRec\").show();\n\t\t\t\tif (o) this.ShowSubForm();\n\t\t\t} else {\n\t\t\t\tthis.SubForm.Show();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.SubForm.Hide();\n\t\t\tif (this.Compact) this.$$(\"editCustomRec\").hide();\n\t\t}\n\t}\n\n\t/**\n\t * Returns the config of two controls: a selector of calendar and event color\n\t * @param {function} _ - the method of the Locale plugin used to translate labels according to the current locale\n\t */\n\tCreateCalendarColor(_) {\n\t\tconst ui = {\n\t\t\tmargin: 8,\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"colorpicker\",\n\t\t\t\t\tlabel: _(\"Color\"),\n\t\t\t\t\tname: \"color\",\n\t\t\t\t\tvalue: \"#1abc9c\",\n\t\t\t\t\tsuggest: {\n\t\t\t\t\t\ttype: \"colorboard\",\n\t\t\t\t\t\tpadding: 3,\n\t\t\t\t\t\tbody: getPalette(),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\tif (this.app.config.calendars) {\n\t\t\tui.cols.unshift({\n\t\t\t\tview: \"richselect\",\n\t\t\t\tlocalId: \"calendar\",\n\t\t\t\tlabel: _(\"Calendar\"),\n\t\t\t\tname: \"calendar\",\n\t\t\t\tcss: \"webix_scheduler_cal_color\",\n\t\t\t\toptions: {\n\t\t\t\t\tcss: \"webix_scheduler_cal_color_suggest\",\n\t\t\t\t\tdata: [],\n\t\t\t\t\tbody: {\n\t\t\t\t\t\ttooltip: () => \"\",\n\t\t\t\t\t\ttemplate: function(obj) {\n\t\t\t\t\t\t\tconst active = obj.active * 1;\n\t\t\t\t\t\t\tconst css = active ? \"\" : \"class='webix_scheduler_cal_disabled'\";\n\t\t\t\t\t\t\tconst tooltip = active\n\t\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t\t: `webix_tooltip=\"${_(\"Inactive calendar\")}\"`;\n\n\t\t\t\t\t\t\treturn `<div style=\"overflow: hidden;\" ${tooltip} ${css}>${obj.text ||\n\t\t\t\t\t\t\t\t_(\"(no title)\")}\n\t\t\t\t\t\t\t\t<span class=\"webix_scheduler_cal_marker\" style=\"background-color:${obj.color};\">\n\t\t\t\t\t\t\t</span></div>`;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\treturn ui;\n\t}\n\n\t/**\n\t * Returns the config of two controls: a selector of calendar and event color\n\t * @param {function} _ - the method of the Locale plugin used to translate labels according to the current locale\n\t */\n\tCreateUnitSelector(_) {\n\t\tconst ui = {\n\t\t\tview: \"multicombo\",\n\t\t\tname: \"units\",\n\t\t\tlabel: _(\"Units\"),\n\t\t\toptions: [],\n\t\t};\n\t\treturn ui;\n\t}\n\n\t/**\n\t * Returns the config of controls for selecting date and time\n\t * @param {string} type - \"start\" or \"end\"\n\t * @param {function*} _ - the method of the Locale plugin used to translate labels according to the current locale\n\t * @param {Object} aSkin - stores sizes and colors of a currently active Webix skin\n\t */\n\tGetDateTime(type, _, aSkin) {\n\t\treturn {\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\theight: aSkin.labelTopHeight,\n\t\t\t\t\tlabel: type === \"start\" ? _(\"Start\") : _(\"End\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmargin: 8,\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"datepicker\",\n\t\t\t\t\t\t\tname: `${type}_date`,\n\t\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\t\ttype: \"calendar\",\n\t\t\t\t\t\t\t\ticons: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"datepicker\",\n\t\t\t\t\t\t\tlocalId: `${type}Time`,\n\t\t\t\t\t\t\tname: `${type}_time`,\n\t\t\t\t\t\t\ttype: \"time\",\n\t\t\t\t\t\t\tformat: \"%H:%i\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tCreateSectionSelector(_) {\n\t\treturn {\n\t\t\tlocalId: \"sections\",\n\t\t\tview: \"richselect\",\n\t\t\tlabel: _(\"Section\"),\n\t\t\tname: \"section\",\n\t\t\toptions: {\n\t\t\t\tdata: [],\n\t\t\t\tbody: {\n\t\t\t\t\ttemplate: \"#text#\",\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\t// general form tasks\n\n\t/**\n\t * Fills the form with relevant values for editing of a selected event or adding a new event\n\t * @param {Object} ev - the current state.selected\n\t */\n\tFillForm(ev) {\n\t\tthis.Id = ev.id;\n\n\t\tthis.Form.focus();\n\t\tthis.Date = ev.date;\n\t\tif (typeof this.Date === \"string\") {\n\t\t\tthis.Date = new Date(this.Date.slice(0, this.Date.indexOf(\"_\")) * 1);\n\t\t}\n\n\t\tlet obj;\n\n\t\t// new record or a new copy of a record\n\t\tif (ev.id == \"0\") {\n\t\t\tif (this.State.clipboard && this.State.clipboard.selected) {\n\t\t\t\tobj = this.State.clipboard.selected;\n\t\t\t\tthis.$$(\"repeatControls\").hide();\n\t\t\t} else {\n\t\t\t\tobj = this.NewEvent(ev);\n\t\t\t}\n\n\t\t\tif (obj.then) {\n\t\t\t\treturn obj.then(res => {\n\t\t\t\t\tthis.Local.add({ id: ev.id, ...webix.copy(res) });\n\t\t\t\t\tthis.FillFormContinue(res);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.Local.add({ id: ev.id, ...webix.copy(obj) });\n\t\t\t}\n\t\t} else {\n\t\t\tobj = webix.copy(this.Local.getItem(ev.id));\n\n\t\t\tconst mode = this.getParam(\"mode\", true);\n\t\t\tif (mode) obj = this.AdaptObjToMode(mode, obj);\n\t\t}\n\n\t\tthis.FillFormContinue(obj);\n\t}\n\n\t/**\n\t * Fills the event object with relevant values according to the mode of editing\n\t * @param {string} mode - mode in which a recurring event will be edited (\"all\", \"next\", \"this\")\n\t * @param {Object} obj - event data\n\t */\n\tAdaptObjToMode(mode, obj) {\n\t\tmode = this.ChangeMode(\n\t\t\tmode,\n\t\t\tobj,\n\t\t\tobj.recurring\n\t\t\t\t? obj.start_date\n\t\t\t\t: this.Local.getItem(obj.origin_id).start_date,\n\t\t\tobj.recurring ? this.State.selected.date : obj.start_date\n\t\t);\n\t\tthis.setParam(\"mode\", mode, true);\n\n\t\tif (mode === \"all\" || mode === \"next\") {\n\t\t\tif (mode === \"all\" && obj.origin_id) {\n\t\t\t\tobj = webix.copy(this.Local.getItem(obj.origin_id));\n\t\t\t}\n\n\t\t\t// if this is a \"this\" sub-event\n\t\t\tif (!obj.$recurring)\n\t\t\t\tobj.$recurring = webix.copy(\n\t\t\t\t\tthis.Local.getItem(obj.origin_id).$recurring\n\t\t\t\t);\n\n\t\t\tif (obj.$recurring.COUNT || obj.$recurring.UNTIL) {\n\t\t\t\t// [FIXME] maybe need to store total UNTIL/COUNT on backend (mostly for dynamic loading)\n\t\t\t\tobj.$recurring = this.CorrectCountUntil(\n\t\t\t\t\tobj,\n\t\t\t\t\tmode,\n\t\t\t\t\tobj.start_date,\n\t\t\t\t\tthis.Local\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (mode === \"this\" || mode === \"next\") {\n\t\t\t// split event sequence or cut out an occurrence\n\t\t\tif (this.State.selected.date)\n\t\t\t\tobj = { ...obj, ...separateSequence(obj, this.State.selected.date) };\n\n\t\t\tif (mode === \"this\") {\n\t\t\t\tobj.$recurring = null;\n\t\t\t\tobj.recurring = \"\";\n\t\t\t\tthis.$$(\"repeatControls\").hide();\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t}\n\n\t/**\n\t * Splits start and end dates into date and time parts and fills the form with values\n\t * @param {Object} obj - the event data\n\t */\n\tFillFormContinue(obj) {\n\t\tobj.start_time = webix.Date.copy(obj.start_date);\n\t\tobj.end_time = webix.Date.copy(obj.end_date);\n\n\t\tobj.start_date = webix.Date.datePart(obj.start_date);\n\t\tobj.end_date = webix.Date.datePart(obj.end_date);\n\n\t\tif (this.app.config.recurring) this.SetRecurring(obj);\n\n\t\tthis.Form.setValues(obj);\n\t}\n\n\t/**\n\t * Describes calculated constants of a date\n\t * @typedef {Object} DateInfo\n\t * @property {number} day - the date (day of month)\n\t * @property {number} weekday - the number of a weekday (0-6)\n\t * @property {number} month - the number of month (0-11)\n\t * @property {number} weekNum - the number of a weekday within a month (e.g. 4th Friday)\n\t */\n\n\t/**\n\t * Calculates constants related to the start date of an event\n\t * @param {Date} start - the start date of an event\n\t * @returns {DateInfo}\n\t */\n\tGetFromStartDate(start) {\n\t\tconst res = {\n\t\t\tweekday: start.getDay(),\n\t\t\tday: start.getDate(),\n\t\t\tmonth: start.getMonth(),\n\t\t\tyearday: getYearDay(start),\n\t\t};\n\t\tres.weekNum = Math.floor(res.day / 7) + (res.day % 7 ? 1 : 0);\n\t\treturn res;\n\t}\n\n\t/**\n\t * Sets controls and their values for recurring patterns\n\t * @param {Object} obj - the event data\n\t */\n\tSetRecurring(obj) {\n\t\tconst today = this.GetFromStartDate(obj.start_date);\n\t\tconst roptions = this.ResetRecurringOptions(today);\n\t\tthis.RecurringOptions.getList().parse(roptions);\n\n\t\tthis.SubForm.SetValues(webix.copy(obj), today, true);\n\n\t\tif (!obj.$recurring) {\n\t\t\tobj.rec_option = \"none\";\n\t\t} else if (obj.$recurring.BYDAY === \"MO,TU,WE,TH,FR\") {\n\t\t\tobj.rec_option = \"work\";\n\t\t} else if (\n\t\t\t!obj.$recurring.UNTIL &&\n\t\t\t!obj.$recurring.COUNT &&\n\t\t\t(!obj.$recurring.INTERVAL || obj.$recurring.INTERVAL == 1) &&\n\t\t\t(obj.$recurring.FREQ === \"DAILY\" ||\n\t\t\t\t(obj.$recurring.FREQ === \"WEEKLY\" &&\n\t\t\t\t\tobj.$recurring.BYDAY == WEEKDAYS[today.weekday]) ||\n\t\t\t\t(obj.$recurring.FREQ === \"MONTHLY\" &&\n\t\t\t\t\tobj.$recurring.BYSETPOS &&\n\t\t\t\t\tobj.$recurring.BYSETPOS == today.weekNum &&\n\t\t\t\t\tobj.$recurring.BYDAY == WEEKDAYS[today.weekday]) ||\n\t\t\t\t(obj.$recurring.FREQ === \"YEARLY\" &&\n\t\t\t\t\tobj.$recurring.BYMONTH == today.month + 1 &&\n\t\t\t\t\tobj.$recurring.BYMONTHDAY == today.day))\n\t\t) {\n\t\t\tobj.rec_option = obj.$recurring.FREQ.toLowerCase();\n\t\t} else {\n\t\t\tobj.rec_option = \"custom\";\n\t\t}\n\t}\n\n\t/**\n\t * Returns date-dependent options for recurring pattern select list\n\t * @param {Date} start - the start date of an event\n\t */\n\tResetRecurringOptions(start) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn [\n\t\t\t{\n\t\t\t\tid: \"weekly\",\n\t\t\t\tvalue: `${_(\"weekly, every\")} ${\n\t\t\t\t\twebix.i18n.calendar.dayFull[start.weekday]\n\t\t\t\t}`,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"monthly\",\n\t\t\t\tvalue: `${_(\"monthly, every\")} ${start.weekNum} ${_(\"week on\")} ${\n\t\t\t\t\twebix.i18n.calendar.dayFull[start.weekday]\n\t\t\t\t}`,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"yearly\",\n\t\t\t\tvalue: `${_(\"yearly, every\")} ${\n\t\t\t\t\twebix.i18n.calendar.monthFull[start.month]\n\t\t\t\t} ${start.day}`,\n\t\t\t},\n\t\t];\n\t}\n\n\t/**\n\t * Joins date and time into one Date object\n\t * @param {Date} date - a date without a time part\n\t * @param {Date} time - a date with a time part\n\t */\n\tJoin(date, time) {\n\t\treturn webix.Date.add(date, webix.Date.timePart(time) / 60, \"minute\", true);\n\t}\n\n\t/**\n\t * Returns an object with values for adding a new event\n\t * @param {Object} params - current state.selected property\n\t */\n\tNewEvent(params) {\n\t\tconst start = this.GetStartDate();\n\t\tconst end =\n\t\t\tthis.State.selected.end_date || webix.Date.add(start, 1, \"hour\", true);\n\n\t\tconst obj = {\n\t\t\tstart_date: start,\n\t\t\tend_date: end,\n\t\t\ttext: \"\",\n\t\t\tdetails: \"\",\n\t\t};\n\t\tif (this.app.config.recurring) obj.recurring = \"\";\n\t\tif (this.app.config.timeline) {\n\t\t\tobj.section = params.section || this.Sections.getFirstId();\n\t\t}\n\n\t\tif (this.app.config.calendars) {\n\t\t\tlet active = this.State.active[0];\n\t\t\tif (!active) {\n\t\t\t\tconst first = this.Calendars.getFirstId();\n\t\t\t\tconst wait = first\n\t\t\t\t\t? this.Ops.updateCalendar(first, { active: 1 })\n\t\t\t\t\t: this.Ops.addCalendar();\n\n\t\t\t\treturn wait.then(() => {\n\t\t\t\t\tobj.calendar = this.State.active[0];\n\t\t\t\t\tobj.$color = this.Calendars.getItem(obj.calendar).color;\n\t\t\t\t\treturn obj;\n\t\t\t\t});\n\t\t\t}\n\t\t\tobj.calendar = active;\n\t\t\tobj.$color = this.Calendars.getItem(obj.calendar).color;\n\t\t} else obj.$color = \"#01C2A5\"; //same for default color in datacollection\n\n\t\tif (this.app.config.calendars && params.unit) {\n\t\t\tobj.units = params.unit;\n\t\t}\n\n\t\treturn obj;\n\t}\n\n\t/**\n\t * Returns a start date of a new object based on:\n\t * 1) the origin of the double click of the user\n\t * 2) the current date and time\n\t */\n\tGetStartDate() {\n\t\tif (this.Date) {\n\t\t\treturn webix.Date.copy(this.Date);\n\t\t} else {\n\t\t\tconst date = new Date();\n\t\t\tconst minutes = Math.ceil(date.getMinutes() / 30) * 30;\n\t\t\tconst res = webix.Date.copy(this.State.date);\n\t\t\tres.setHours(date.getHours(), minutes);\n\t\t\treturn res;\n\t\t}\n\t}\n\n\t/**\n\t * Launches saving of changes made in the form\n\t * @param {Object} change - an object with changed values\n\t */\n\tUpdateEvent(change) {\n\t\t// clear 'dirty' flag so that next change will definitely be 'dirty'\n\t\tthis.Form.setDirty();\n\n\t\tif (this.Id === \"0\") {\n\t\t\tconst data = this.PrepareOut(change);\n\t\t\tthis._inProgress = this.Ops.addEvent(data, true, this.Id);\n\t\t} else if (Object.keys(change).length) {\n\t\t\tthis._inProgress = this.UpdateExisting(this.Id, change);\n\t\t}\n\n\t\tif (this._inProgress) {\n\t\t\tthis.app.callEvent(\"backend:operation\", [this._inProgress]);\n\t\t\tthis._inProgress\n\t\t\t\t.then(id => {\n\t\t\t\t\tif (id) this.UpdateSelection(id);\n\n\t\t\t\t\t// make event visible if new dates are outside currently selected dates\n\t\t\t\t\tthis.ChangeDate(change, this.Form.getValues());\n\n\t\t\t\t\t// continue editing in simple mode\n\t\t\t\t\tthis.setParam(\"mode\", \"\", true);\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis._inProgress = null;\n\t\t\t\t});\n\t\t}\n\n\t\treturn this._inProgress || webix.promise.resolve();\n\t}\n\n\t/**\n\t * Updates an existing event\n\t * @param {(string|number)} sid - the ID of the event\n\t * @param {Object} change - the new data\n\t * @returns {Promise}\n\t */\n\tUpdateExisting(sid, change) {\n\t\tlet mode = this.getParam(\"mode\", true);\n\t\tconst obj = this.Local.getItem(sid);\n\n\t\tif ((mode === \"this\" && !this.HasOneOccurrence(obj)) || mode === \"next\") {\n\t\t\t// cut out occurrence or split event sequence and save as separate events\n\t\t\tchange.origin_id = obj.origin_id || obj.id;\n\t\t\tconst newEvent = this.PrepareOut(change);\n\n\t\t\tlet recurring = \"\";\n\t\t\tif (mode === \"this\") {\n\t\t\t\trecurring = cutOccurrence(this.State.selected.date, obj);\n\t\t\t} else {\n\t\t\t\tlet params;\n\t\t\t\tif (obj.recurring) {\n\t\t\t\t\tparams = [this.State.selected.date, obj];\n\t\t\t\t} else {\n\t\t\t\t\tsid = obj.origin_id;\n\t\t\t\t\tparams = [newEvent.start_date, this.Local.getItem(sid)];\n\t\t\t\t}\n\t\t\t\trecurring = clipSequence(...params);\n\t\t\t}\n\n\t\t\treturn this.Ops.updateEvent(\n\t\t\t\tsid,\n\t\t\t\t{ recurring },\n\t\t\t\tmode,\n\t\t\t\twebix.Date.dayStart(newEvent.start_date),\n\t\t\t\ttrue\n\t\t\t).then(() => {\n\t\t\t\tif (change.rec_option === \"none\") this.State.selected.date = null;\n\t\t\t\treturn this.Ops.addEvent(newEvent, true);\n\t\t\t});\n\t\t} else {\n\t\t\t// non-recurring and recurring in mode \"all\"\n\n\t\t\tif (mode === \"all\") {\n\t\t\t\tconst recVals = this.Form.getValues().$recurring;\n\t\t\t\tif (recVals && webix.isUndefined(change.recurring)) {\n\t\t\t\t\tdelete recVals.EXDATE;\n\t\t\t\t\tchange.recurring = serialize(recVals); // plus all that's been updated in form silently in FillForm\n\n\t\t\t\t\tthis.Form.setValues(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$recurring: recVals,\n\t\t\t\t\t\t\trecurring: change.recurring,\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t\tthis.SubForm.SetValues({ EXDATE: null });\n\t\t\t\t}\n\n\t\t\t\tif (obj.origin_id) this.Id = this.State.selected.id = obj.origin_id;\n\t\t\t}\n\n\t\t\treturn this.Ops.updateEvent(this.Id, change, mode, undefined, true).then(\n\t\t\t\t() => {\n\t\t\t\t\tif (change.rec_option === \"none\") this.State.selected.date = null;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * if event was saved as new, update selected silently to avoid triggering listeners\n\t * @param {(string|number)} id - the ID of the event\n\t */\n\tUpdateSelection(id) {\n\t\tthis.State.selected.id = this.Id = id;\n\t\tconst sdate = this.State.selected.date;\n\t\tif (sdate instanceof Date) {\n\t\t\tthis.State.selected.date = null;\n\t\t} else if (sdate) {\n\t\t\tconst fvals = this.Form.getValues();\n\t\t\tthis.State.selected.date =\n\t\t\t\tthis.Join(fvals.start_date, fvals.start_time).valueOf() + \"_\" + id;\n\t\t}\n\t}\n\n\t/**\n\t * Processes changes made in the form and prepares values for saving to the server\n\t * @param {Object} change - an object with changed values\n\t */\n\tPrepareChange(change) {\n\t\tif (change.rec_option) this.ProcessRecurringOption(change);\n\t\telse if (!webix.isUndefined(change.$recurring)) {\n\t\t\tthis.ProcessRecurringPattern(change);\n\t\t}\n\n\t\tthis.ProcessDates(change);\n\n\t\tif (this.app.config.recurring && change.start_date)\n\t\t\tthis.ApplyDatechangeToRecurring(change);\n\n\t\tthis.ProcessText(change, \"text\");\n\t\tthis.ProcessText(change, \"details\");\n\n\t\tthis._changedValues = change;\n\t}\n\n\t/**\n\t * Gets recurring pattern according to the new recurring option\n\t * @param {Object} change - an object with changed values\n\t */\n\tProcessRecurringOption(change) {\n\t\tconst fvals = this.Form.getValues();\n\n\t\tif (change.rec_option === \"none\") {\n\t\t\tchange.recurring = \"\";\n\t\t\tchange.series_end_date = \"\";\n\t\t} else if (change.rec_option === \"custom\") {\n\t\t\tif (fvals.$recurring) {\n\t\t\t\tthis.SubForm.SetValues(\n\t\t\t\t\t{ ...fvals, ...change },\n\t\t\t\t\tthis.GetFromStartDate(fvals.start_date)\n\t\t\t\t);\n\t\t\t}\n\t\t\tchange.$recurring = this.SubForm.GetValues();\n\t\t\tthis.ProcessRecurringPattern(change);\n\n\t\t\tif (!fvals.$recurring) {\n\t\t\t\tthis.Form.setValues({ $recurring: change.$recurring }, true);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.GetRecurring(change.rec_option, change, fvals.start_date);\n\t\t\tchange.series_end_date = \"\";\n\t\t}\n\n\t\tdelete change.rec_option;\n\t\tdelete change.$recurring;\n\t}\n\n\t/**\n\t * Serializes recurring pattern object and synchronizes dates with the new pattern\n\t * @param {Object} change - an object with changed values\n\t */\n\tProcessRecurringPattern(change) {\n\t\tconst fvals = this.Form.getValues();\n\t\tconst recurring = serialize(change.$recurring);\n\t\tconst old = this.Local.getItem(this.State.selected.id);\n\n\t\t// check if switch from a preset to custom and back and the pattern is the same\n\t\tif (!old || recurring !== old.recurring) {\n\t\t\tchange.recurring = recurring;\n\t\t\tchange.series_end_date = change.$recurring.UNTIL;\n\n\t\t\tif (change.$recurring.BYDAY) {\n\t\t\t\t[change.start_date, change.end_date] = datesToWeekdays(\n\t\t\t\t\tfvals.start_date,\n\t\t\t\t\tfvals.end_date,\n\t\t\t\t\tchange.$recurring\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.Form.setValues(change, true);\n\t\t}\n\t\tdelete change.$recurring;\n\t}\n\n\t/**\n\t * Sums up dates and time depending on the changes in dates, time and all_day flag\n\t * @param {Object} change - an object with changed values\n\t */\n\tProcessDates(change) {\n\t\tconst fvals = this.Form.getValues();\n\t\tif (webix.isUndefined(change.all_day)) {\n\t\t\tif ((change.start_date || change.start_time) && fvals.all_day == 0) {\n\t\t\t\tchange.start_date = this.Join(fvals.start_date, fvals.start_time);\n\t\t\t}\n\t\t\tif ((change.end_date || change.end_time) && fvals.all_day == 0) {\n\t\t\t\tchange.end_date = this.Join(fvals.end_date, fvals.end_time);\n\t\t\t}\n\t\t} else if (change.all_day == 1) {\n\t\t\tchange.start_date = fvals.start_date;\n\t\t\tchange.end_date = fvals.end_date;\n\t\t} else if (change.all_day == 0) {\n\t\t\tchange.start_date = this.Join(fvals.start_date, fvals.start_time);\n\t\t\tchange.end_date = this.Join(fvals.end_date, fvals.end_time);\n\t\t}\n\n\t\tif (change.start_date || change.end_date) this.CorrectDateTime(change);\n\t}\n\n\t/**\n\t * Corrects the unchanged field if start > end or end < start\n\t * @param {Object} change - an object with changed values\n\t */\n\tCorrectDateTime(change) {\n\t\tconst fvals = this.Form.getValues();\n\t\tconst old = this.Local.getItem(this.State.selected.id);\n\t\tconst ev_length = (old.end_date - old.start_date) / 1000 / 60; // minutes\n\n\t\tconst type = change.start_date ? \"start\" : \"end\";\n\t\tconst opposite = type === \"start\" ? \"end\" : \"start\";\n\n\t\tconst start = change.start_date || old.start_date;\n\t\tconst end = change.end_date || old.end_date;\n\n\t\tif ((start >= end && !fvals.all_day) || start > end) {\n\t\t\tchange[opposite + \"_date\"] = webix.Date.add(\n\t\t\t\tchange[type + \"_date\"],\n\t\t\t\t(type === \"start\" ? 1 : -1) * (ev_length || 60),\n\t\t\t\t\"minute\",\n\t\t\t\ttrue\n\t\t\t);\n\n\t\t\t// apply also to form\n\t\t\tthis.Form.setValues(\n\t\t\t\t{\n\t\t\t\t\tstart_date: webix.Date.datePart(change.start_date, true),\n\t\t\t\t\tend_date: webix.Date.datePart(change.end_date, true),\n\t\t\t\t\tstart_time: change.start_time || webix.Date.copy(change.start_date),\n\t\t\t\t\tend_time: change.end_time || webix.Date.copy(change.end_date),\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\tdelete change.start_time;\n\t\tdelete change.end_time;\n\t}\n\n\t/**\n\t * Removes trailing spaces from input text\n\t * @param {Object} change - an object with changed values\n\t * @param {string} field - the name of a text field ('text', 'details')\n\t */\n\tProcessText(change, field) {\n\t\tif (!this.webix.isUndefined(change[field])) {\n\t\t\tchange[field] = change[field].replace(/(<[^>]+>|^\\s+|\\s+$)/gi, \"\");\n\t\t\tconst prev = this.Local.getItem(this.State.selected.id)[field] || \"\";\n\t\t\tif (change[field] === prev.trim()) delete change[field];\n\t\t}\n\t}\n\n\t/**\n\t * Synchronizes recurring pattern with new start date\n\t * @param {Object} change - an object with changed values\n\t */\n\tApplyDatechangeToRecurring(change) {\n\t\tconst today = this.GetFromStartDate(change.start_date);\n\t\t// if date was changed after subform change, ignore\n\t\tconst fvals = this.Form.getValues();\n\t\tif (!change.recurring && fvals.$recurring) {\n\t\t\tif (fvals.rec_option === \"custom\") {\n\t\t\t\tconst recurring = fvals.$recurring;\n\n\t\t\t\tif (recurring.BYYEARDAY) {\n\t\t\t\t\trecurring.BYYEARDAY = today.yearday;\n\t\t\t\t}\n\t\t\t\tif (recurring.BYMONTH) {\n\t\t\t\t\trecurring.BYMONTH = today.month + 1;\n\t\t\t\t}\n\t\t\t\tif (recurring.BYMONTHDAY) {\n\t\t\t\t\trecurring.BYMONTHDAY = today.day;\n\t\t\t\t}\n\t\t\t\tif (recurring.BYSETPOS) {\n\t\t\t\t\trecurring.BYSETPOS = today.weekNum;\n\t\t\t\t}\n\t\t\t\tif (recurring.BYDAY) {\n\t\t\t\t\trecurring.BYDAY = WeekdaysToDates(\n\t\t\t\t\t\tchange.start_date,\n\t\t\t\t\t\tfvals.$recurring\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (recurring.UNTIL && recurring.UNTIL < change.start_date) {\n\t\t\t\t\tconst oldStart = this.Local.getItem(this.State.selected.id)\n\t\t\t\t\t\t.start_date;\n\t\t\t\t\tconst length = (fvals.$recurring.UNTIL - oldStart) / 1000 / 60; // minutes\n\t\t\t\t\trecurring.UNTIL = webix.Date.add(\n\t\t\t\t\t\tchange.start_date,\n\t\t\t\t\t\tlength,\n\t\t\t\t\t\t\"minute\",\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tchange.recurring = serialize(recurring);\n\n\t\t\t\tthis.SubForm.SetValues({ ...fvals, ...change }, today);\n\t\t\t} else {\n\t\t\t\tthis.GetRecurring(fvals.rec_option, change, fvals.start_date);\n\t\t\t\tdelete change.$recurring;\n\t\t\t}\n\t\t}\n\t\tthis.RecurringOptions.getList().parse(this.ResetRecurringOptions(today));\n\t\tthis.RecurringOptions.refresh();\n\t}\n\n\t/**\n\t * Assigns recurring pattern according to a preset\n\t * @param {string} r the ID of a recurring pattern option\n\t * @param {Object} change - an object with changed values\n\t * @param {Date} start - the start date of the event\n\t */\n\tGetRecurring(r, change, start) {\n\t\tlet $recurring = this.GetRecurringPreset(r, start);\n\n\t\tif (r === \"work\" && change.start_date) {\n\t\t\tconst BYDAY = WeekdaysToDates(change.start_date, $recurring);\n\t\t\tif ($recurring.BYDAY !== BYDAY) {\n\t\t\t\t$recurring.BYDAY = BYDAY;\n\t\t\t\tr = \"custom\";\n\t\t\t}\n\t\t}\n\n\t\tconst recurring = serialize($recurring);\n\t\tconst old = this.Local.getItem(this.State.selected.id);\n\n\t\t// check if switch from a preset to custom and back and the pattern is the same\n\t\tif (!old || recurring !== old.recurring) {\n\t\t\tchange.$recurring = $recurring;\n\t\t\tchange.recurring = recurring;\n\t\t\tthis.Form.setValues(\n\t\t\t\t{\n\t\t\t\t\t$recurring: change.$recurring,\n\t\t\t\t\trecurring,\n\t\t\t\t\trec_option: r,\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Gets a recurring pattern object for a pattern preset based on the start date of the event\n\t * @param {string} r - a recurring option (accepted values: \"daily\", \"weekly\", \"work\", \"monthly\", \"yearly\")\n\t * @param {Date} start - the start date of an event\n\t * @returns {Object} - $recurring\n\t */\n\tGetRecurringPreset(r, start) {\n\t\tconst today = this.GetFromStartDate(start);\n\t\tswitch (r) {\n\t\t\tcase \"daily\":\n\t\t\t\treturn { FREQ: \"DAILY\", INTERVAL: 1 };\n\t\t\tcase \"weekly\":\n\t\t\t\treturn {\n\t\t\t\t\tFREQ: \"WEEKLY\",\n\t\t\t\t\tINTERVAL: 1,\n\t\t\t\t\tBYDAY: WEEKDAYS[today.weekday],\n\t\t\t\t};\n\t\t\tcase \"work\":\n\t\t\t\treturn {\n\t\t\t\t\tFREQ: \"WEEKLY\",\n\t\t\t\t\tINTERVAL: 1,\n\t\t\t\t\tBYDAY: \"MO,TU,WE,TH,FR\",\n\t\t\t\t};\n\t\t\tcase \"monthly\":\n\t\t\t\treturn {\n\t\t\t\t\tFREQ: \"MONTHLY\",\n\t\t\t\t\tINTERVAL: 1,\n\t\t\t\t\tBYSETPOS: today.weekNum,\n\t\t\t\t\tBYDAY: WEEKDAYS[today.weekday],\n\t\t\t\t};\n\t\t\tcase \"yearly\":\n\t\t\t\treturn {\n\t\t\t\t\tFREQ: \"YEARLY\",\n\t\t\t\t\tINTERVAL: 1,\n\t\t\t\t\tBYMONTH: today.month + 1,\n\t\t\t\t\tBYMONTHDAY: today.day,\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\treturn { FREQ: \"DAILY\", INTERVAL: 1 };\n\t\t}\n\t}\n\n\t/**\n\t * Switches Scheduler to another date if the event after change is no longer visible\n\t * @param {Object} dirty - an object with changed values\n\t * @param {Object} fvals - an object with all current form values\n\t */\n\tChangeDate(dirty, fvals) {\n\t\tif (dirty) {\n\t\t\t// start date of non-repeating event changed or repeating event became non-repeating\n\t\t\tif ((dirty.start_date && !fvals.recurring) || dirty.recurring === \"\") {\n\t\t\t\tthis.State.selected.date = null;\n\t\t\t\tthis.UpdateStateDate(dirty.start_date || fvals.start_date);\n\t\t\t} else if (dirty.start_date || dirty.recurring) {\n\t\t\t\tconst date = this.GetClosestOccurrenceDate(dirty, fvals);\n\t\t\t\tthis.State.selected.date =\n\t\t\t\t\tdate.valueOf() + \"_\" + this.State.selected.id;\n\t\t\t\tthis.UpdateStateDate(date);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns the next closest occurrence date when dates or recurring pattern of an event was changed\n\t * @param {Object} dirty - an object with changed data\n\t * @param {Object} fvals - an object of all event form values\n\t * @returns {Date} the date of the next closest occurrence\n\t */\n\tGetClosestOccurrenceDate(dirty, fvals) {\n\t\tlet date = dirty.start_date\n\t\t\t? webix.Date.copy(dirty.start_date)\n\t\t\t: this.Join(fvals.start_date, fvals.start_time);\n\t\tlet end = webix.Date.dayStart(\n\t\t\tthis.State.selected.date\n\t\t\t\t? new Date(this.State.selected.date.split(\"_\")[0] * 1)\n\t\t\t\t: date\n\t\t);\n\t\tif (fvals.series_end_date) {\n\t\t\tend = new Date(\n\t\t\t\tMath.min(webix.Date.add(fvals.series_end_date, -1, \"day\", true), end)\n\t\t\t);\n\t\t}\n\n\t\tconst consts = {};\n\t\tfillWdays(fvals.$recurring, consts);\n\t\tlet temp = webix.Date.copy(date);\n\t\twhile (webix.Date.dayStart(temp) < end) {\n\t\t\ttemp = next(temp, fvals.$recurring, consts);\n\t\t\tif (Math.abs(end - temp) < Math.abs(end - date)) {\n\t\t\t\tdate = webix.Date.copy(temp);\n\t\t\t}\n\t\t}\n\t\treturn date;\n\t}\n\n\t/**\n\t * Updates state.date according to state.mode\n\t * @param {Date} date - new state.date\n\t */\n\tUpdateStateDate(date) {\n\t\tdate = webix.Date.dayStart(date);\n\t\tconst state = this.State;\n\t\tif (\n\t\t\tstate.mode === \"day\" ||\n\t\t\tstate.mode === \"units\" ||\n\t\t\t(state.mode === \"timeline\" && state.timelineMode === \"day\")\n\t\t) {\n\t\t\tconst sdate = webix.Date.dayStart(state.date);\n\t\t\tif (!webix.Date.equal(date, sdate)) {\n\t\t\t\tstate.date = webix.Date.dayStart(date);\n\t\t\t}\n\t\t} else {\n\t\t\tconst { start, end } = this.GetModeBounds();\n\t\t\tif (date < start || date >= end) {\n\t\t\t\tstate.date = webix.Date.dayStart(date);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns start and end dates of a currently displayed period\n\t */\n\tGetModeBounds() {\n\t\tconst state = this.State;\n\t\tlet mode = state.mode;\n\t\tif (mode === \"timeline\") mode = state.timelineMode;\n\t\telse if (mode === \"agenda\") mode = \"month\";\n\t\tlet start = webix.Date[mode + \"Start\"](state.date);\n\t\tlet end = webix.Date.add(start, 1, mode, true);\n\n\t\tif (state.mode === \"month\") {\n\t\t\tstart = webix.Date.weekStart(start);\n\t\t\tconst weeks = Math.ceil((end - start) / (24 * 60 * 60 * 1000) / 7);\n\t\t\tend = webix.Date.add(start, weeks, \"week\", true);\n\t\t}\n\n\t\treturn { start, end };\n\t}\n\n\t/**\n\t * Unites changed and unchanged fields into 1 object for saving newly added events\n\t * @param {Object} change - an object with changed values\n\t */\n\tPrepareOut(change) {\n\t\tlet obj = this.Form.getValues();\n\n\t\tif (!obj.all_day) {\n\t\t\tobj.start_date = this.Join(obj.start_date, obj.start_time);\n\t\t\tobj.end_date = this.Join(obj.end_date, obj.end_time);\n\t\t}\n\n\t\tobj = webix.extend(obj, change || {}, true);\n\n\t\tif (!(change && change.recurring) && obj.$recurring) {\n\t\t\tobj.$recurring.EXDATE = [];\n\t\t\tobj.recurring = serialize(obj.$recurring);\n\t\t}\n\n\t\tif (!obj.origin_id) obj.origin_id = 0;\n\n\t\t// go backend wants a number\n\t\tif (this.app.config.timeline && !obj.section) obj.section = 0;\n\n\t\treturn obj;\n\t}\n\n\t/**\n\t * Removes a temporary local event\n\t */\n\tClearTempEvent() {\n\t\tconst sid = this.Id;\n\t\tif (sid === \"0\" && this.Local.exists(sid)) {\n\t\t\tthis.Local.remove(sid);\n\t\t}\n\t}\n\n\t/**\n\t * Closes the form and either the whole right panel with it or returns to Info\n\t * @param {boolean} close - if true, the right panel is closed\n\t */\n\tBack(close) {\n\t\tthis.Form.clear();\n\n\t\tif (close || this.State.selected.id === \"0\") {\n\t\t\tthis.State.selected = null;\n\t\t} else {\n\t\t\tconst path = this.Compact ? \"event.formpopup/\" : \"../\";\n\t\t\tthis.show(path + \"event.info\", { target: \"edit\" });\n\t\t}\n\t}\n\n\t/**\n\t * Closes the right panel\n\t */\n\tClose() {\n\t\tif (this._inProgress) {\n\t\t\tthis._inProgress.then(() => {\n\t\t\t\tthis.Back(true);\n\t\t\t});\n\t\t} else {\n\t\t\tconst dirty =\n\t\t\t\tthis.Form.isDirty() || (this.Subform && this.SubForm.IsDirty());\n\t\t\tif (this.Compact && dirty) {\n\t\t\t\tconst _ = this.app.getService(\"locale\")._;\n\t\t\t\twebix\n\t\t\t\t\t.confirm({\n\t\t\t\t\t\ttext: _(\"Save changes?\"),\n\t\t\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => this.Done(true))\n\t\t\t\t\t.catch(() => this.Back(true));\n\t\t\t} else this.Back(true);\n\t\t}\n\t}\n\n\t/**\n\t * Closes the form\n\t * @param {boolean} close\n\t */\n\tDone(close) {\n\t\tif (this._inProgress) {\n\t\t\tthis._inProgress.then(() => {\n\t\t\t\tthis.Back();\n\t\t\t});\n\t\t} else if (this.State.selected.id === \"0\" || this.Compact) {\n\t\t\tlet change = {};\n\t\t\tif (this.Compact) {\n\t\t\t\tif (this._changedValues) change = this._changedValues;\n\n\t\t\t\tif (this.SubForm.IsDirty()) {\n\t\t\t\t\tchange.$recurring = this.SubForm.GetValues();\n\t\t\t\t\tchange.series_end_date = change.$recurring.UNTIL;\n\t\t\t\t\tdelete change.rec_option;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.UpdateEvent(change).then(() => this.Back(close));\n\t\t} else {\n\t\t\tthis.Back();\n\t\t}\n\t}\n\n\t/**\n\t * Waits until some asynchronous operation finishes (if there's any) and then executes 'handler'\n\t * @param {function} handler - the code that will be executed\n\t */\n\tWait(handler) {\n\t\tif (this._inProgress) {\n\t\t\tthis._inProgress.then(handler);\n\t\t} else {\n\t\t\thandler.call();\n\t\t}\n\t}\n\n\t// compact\n\n\t/**\n\t * Shows a subform with controls for editing recurring pattern in a window\n\t */\n\tShowSubForm() {\n\t\tthis.SubForm.Show();\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst subform = this.SubForm.getRoot();\n\n\t\tconst aSkin = webix.skin.$active;\n\t\twebix.fullscreen.set(subform, {\n\t\t\thead: {\n\t\t\t\tview: \"toolbar\",\n\t\t\t\tpadding: {\n\t\t\t\t\tleft: aSkin.layoutPadding.form - (aSkin.inputHeight - 20) / 2,\n\t\t\t\t\tright: 14,\n\t\t\t\t},\n\t\t\t\telements: [\n\t\t\t\t\t{ view: \"icon\", icon: \"shi-back\", click: () => this.HideSubPop() },\n\t\t\t\t\t{ view: \"label\", label: _(\"Change recurring pattern\") },\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\tvalue: _(\"Done\"),\n\t\t\t\t\t\twidth: 130,\n\t\t\t\t\t\tcss: \"webix_primary\",\n\t\t\t\t\t\tclick: () => this.HideSubPop(),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t});\n\n\t\tconst win = subform.getTopParentView();\n\t\twin.define({ css: \"webix_scheduler_subform_popup\" });\n\t}\n\n\t/**\n\t * Hides the window with the subform\n\t */\n\tHideSubPop() {\n\t\tthis.SubForm.Hide();\n\t\twebix.fullscreen.exit();\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class FormPopup extends JetView {\n\tconfig() {\n\t\treturn this.app.getService(\"jet-win\").updateConfig({\n\t\t\tview: \"window\",\n\t\t\tfullscreen: true,\n\t\t\thead: false,\n\t\t\tbody: { $subview: true },\n\t\t});\n\t}\n}\n","import { cutOccurrence } from \"helpers/recurring\";\nimport hotkey from \"jet-hotkey\";\n\n/**\n * Common function used to prepare data of a copied event\n * @param {Object} newEvent\n */\nexport function cleanEventData(newEvent) {\n\t// in recurring event, copy only this event and make sure it stays a part of the series\n\tconst isRecurring = newEvent.recurring || newEvent.$id || newEvent.origin_id;\n\tif (isRecurring) {\n\t\tnewEvent.recurring = \"\";\n\t\tdelete newEvent.$recurring;\n\t\tif (!newEvent.origin_id) newEvent.origin_id = newEvent.$id || newEvent.id;\n\n\t\tdelete newEvent.$id;\n\t}\n\n\tdelete newEvent.id;\n\n\tconst _ = this.app.getService(\"locale\")._;\n\tif (newEvent.text)\n\t\tnewEvent.text = `${_(\"Copy of\")} ${newEvent.text.replace(\n\t\t\t`${_(\"Copy of\")} `,\n\t\t\t\"\"\n\t\t)}`;\n}\n\n/** CopyPaste Mixin adds logic for copying and cutting events with hotkeys */\n\n/**\n * Handles events related to copying, cutting and pasting events (desktop devices)\n * @param {Object} view - a Webix data widget that is used to display events\n */\nfunction HandleCopyPaste(view) {\n\tthis.clipboardModes = [\"copy\", \"cut\"];\n\tthis.Ops = this.app.getService(\"operations\");\n\tconst ctrlKey = webix.env.isMac ? \"COMMAND\" : \"CTRL\";\n\t// when form is opened, hotkeys do not work because focus is on form, not on view\n\tthis.on(hotkey(view), `${ctrlKey}+C`, v => this.AddToClipboard(v, \"copy\"));\n\tthis.on(hotkey(view), `${ctrlKey}+X`, v => this.AddToClipboard(v, \"cut\"));\n\tthis.on(hotkey(view), `${ctrlKey}+V`, (v, e) => this.PasteFromClipboard(e));\n\tthis.on(hotkey(view), \"Esc\", (v, e) => this.PurgeClipboard(v, e));\n\n\tthis.on(this.State.$changes, \"mode\", () => {\n\t\twebix.UIManager.setFocus(view);\n\t});\n\n\tthis.on(this.State.$changes, \"clipboard\", (v, o) => {\n\t\tif (v) {\n\t\t\twebix.html.addCss(view.$view, \"webix_scheduler_clipboard_target\");\n\t\t} else if (o) {\n\t\t\twebix.html.removeCss(view.$view, \"webix_scheduler_clipboard_target\");\n\t\t}\n\t});\n\n\tthis.on(this.app, \"events:rendered\", () => {\n\t\tthis.RestoreClipboardSource(view);\n\t});\n\n\tif (this.$multi) {\n\t\tthis._globalClickHandler = webix.event(this.List.$view, \"click\", () => {\n\t\t\tif (this.State.clipboard && this.State.clipboard.source) {\n\t\t\t\tthis.ChangePasteTarget(this.List.$view);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tthis.on(view, \"onItemClick\", (id, e, node) => {\n\t\t\tif (this.State.clipboard && this.State.clipboard.source) {\n\t\t\t\tif (this.State.mode === \"timeline\") {\n\t\t\t\t\tnode = this.CreatePasteTarget(view, e);\n\t\t\t\t}\n\t\t\t\tthis.ChangePasteTarget(node);\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * Cleans up click handler when the view is destroyed\n */\nfunction OnDestroy() {\n\tif (this._globalClickHandler) {\n\t\twebix.eventRemove(this._globalClickHandler);\n\t\tthis._globalClickHandler = null;\n\t}\n}\n\n/**\n * Creates an HTML element that represents a paste target for widgets that do not have suitable elements (timeline mode)\n * @param {Object} view - a Webix data widget that is used to display events\n * @param {MouseEvent} e\n * @returns {HTMLElement}\n */\nfunction CreatePasteTarget(view, e) {\n\tconst scroll = view.getScrollState();\n\tconst x = e.clientX - view.$view.offsetLeft + scroll.x;\n\tconst y = e.clientY - view.$view.offsetTop + scroll.y;\n\tthis.mousePosUnit = Math.floor(x / this.Scales.cellWidth);\n\n\tconst target = webix.html.create(\"div\");\n\tconst sheight = this.GetSectionHeight();\n\ttarget.style.top = `${y - (y % sheight)}px`;\n\ttarget.style.left = `${x - (x % this.Scales.cellWidth)}px`;\n\ttarget.style.width = `${this.Scales.cellWidth}px`;\n\ttarget.style.height = `${sheight}px`;\n\ttarget.style.position = \"absolute\";\n\n\t// view.$view.firstChild.prepend(target); // when IE dies, replace with this line\n\tconst parent = view.$view.firstChild;\n\tparent.insertBefore(target, parent.childNodes[0]);\n\n\treturn target;\n}\n\n/**\n * Sets styling for a paste target and sets it to state.clipboard\n * @param {HTMLElement} node\n */\nfunction SetPasteTargetStyle(node) {\n\twebix.html.addCss(node, \"webix_scheduler_paste_target\");\n\tthis.State.clipboard.target = node;\n}\n\n/**\n * Removes styling from a paste target, cleans up its reference from state and removes it from the DOM if it was created specifically (timeline mode)\n */\nfunction ClearPasteTargetStyle() {\n\tconst clipboard = this.State.clipboard;\n\tif (clipboard && clipboard.target) {\n\t\twebix.html.removeCss(\n\t\t\tthis.State.clipboard.target,\n\t\t\t\"webix_scheduler_paste_target\"\n\t\t);\n\t\tif (this.State.mode === \"timeline\" && clipboard.target.parentNode) {\n\t\t\t// this.State.clipboard.target.remove(); // when IE dies, replace with this line\n\t\t\tconst target = clipboard.target;\n\t\t\ttarget.parentNode.removeChild(target);\n\t\t}\n\t\tthis.State.clipboard.target = null;\n\t}\n}\n\n/**\n * Makes another element the target for pasting\n * @param {HTMLElement} node\n */\nfunction ChangePasteTarget(node) {\n\tif (this.State.clipboard.target !== node) {\n\t\tthis.ClearPasteTargetStyle();\n\t\tthis.SetPasteTargetStyle(node);\n\t}\n}\n\n/**\n * Locates event node by event ID (checks the given one and locates it anew if the parent was re-rendered)\n * @param {HTMLElement} view - parent html element (top html element of a widget)\n * @param {HTMLElement} node - given html element of the event\n * @param {string} id - the ID of the event\n * @returns {HTMLElement}\n */\nfunction locateEvent(view, node, id) {\n\tif (node && view.contains(node)) return node;\n\treturn (\n\t\tview.querySelectorAll(`[webix_e_id=\"${id}\"]`)[0] ||\n\t\tview.querySelectorAll(`[webix_l_id=\"${id}\"]`)[0]\n\t);\n}\n\n/**\n * Adds the selected event to clipboard, sets mode, styles the node of the copied/cut event\n * @param {string} mode - \"copy\" or \"cut\"\n */\nfunction AddToClipboard(view, mode) {\n\tconst sel = this.State.selected;\n\tif (sel && sel.id !== \"0\") {\n\t\tthis.ClearPasteTargetStyle();\n\n\t\tconst source = locateEvent(view.$view, sel.node, sel.date || sel.id);\n\t\tif (source) this.SetClipboardSourceStyle(mode, source);\n\n\t\tconst event = this.GetEvent(sel.date || sel.id);\n\t\tthis.State.clipboard = {\n\t\t\tmode,\n\t\t\tselected: webix.copy(event),\n\t\t\tsource,\n\t\t};\n\t}\n}\n\n/**\n * Adds relevant styling to the node of the copied or cut event\n * @param {string} mode - \"copy\" or \"cut\"\n * @param {HTMLElement} node\n */\nfunction SetClipboardSourceStyle(mode, node) {\n\tconst css = `webix_scheduler_${mode}`;\n\tif (node.className.indexOf(css) === -1) webix.html.addCss(node, css);\n\tconst opMode = this.clipboardModes[this.clipboardModes.indexOf(mode) ^ 1];\n\tconst prevCss = `webix_scheduler_${opMode}`;\n\twebix.html.removeCss(node, prevCss);\n\n\tconst clipboard = this.State.clipboard;\n\tif (clipboard && clipboard.source && node != clipboard.source) {\n\t\twebix.html.removeCss(this.State.clipboard.source, css);\n\t\twebix.html.removeCss(this.State.clipboard.source, prevCss);\n\t}\n}\n\n/**\n * Locates the copied or cut event and highlights it\n * @param {Object} view - the widget that displays events\n */\nfunction RestoreClipboardSource(view) {\n\tconst clip = this.State.clipboard;\n\tif (clip) {\n\t\tconst source = locateEvent(view.$view, clip.source, clip.selected.id);\n\t\tif (source) {\n\t\t\tif (source !== clip.source) {\n\t\t\t\tthis.State.clipboard.source = source;\n\t\t\t}\n\t\t\tthis.SetClipboardSourceStyle(clip.mode, source);\n\t\t}\n\t}\n}\n\n/**\n * Pastes the event from clipboard to the target\n * @param {KeyboardEvent} e\n */\nfunction PasteFromClipboard(e) {\n\tconst clipboard = this.State.clipboard;\n\tif (clipboard && clipboard.source) {\n\t\tconst newEvent = this.GetEventData(clipboard, e);\n\n\t\tif (clipboard.mode === \"copy\") {\n\t\t\tthis.CopyEvent(newEvent);\n\t\t} else if (clipboard.mode === \"cut\") {\n\t\t\tthis.MoveEvent(newEvent);\n\t\t}\n\n\t\tthis.PurgeClipboard();\n\t}\n}\n\n/**\n * Collects new event data for the pasted event based on the chosen target\n * @param {Object} clipboard - clipboard property from the global app state\n * @param {KeyboardEvent} e\n * @returns {Object}\n */\nfunction GetEventData(clipboard, e) {\n\tconst newEvent = clipboard.selected;\n\n\tconst evLength =\n\t\tMath.floor(newEvent.end_date - newEvent.start_date) / (60 * 1000); // minutes\n\tnewEvent.start_date = this.GetTargetDate(e.target.getAttribute(\"webix_l_id\"));\n\tnewEvent.end_date = webix.Date.add(\n\t\tnewEvent.start_date,\n\t\tevLength,\n\t\t\"minute\",\n\t\ttrue\n\t);\n\n\tif (this.State.mode === \"units\") {\n\t\tnewEvent.units = this.Unit.id;\n\t} else if (this.State.mode === \"timeline\") {\n\t\tconst sec = e.target.getAttribute(\"webix_l_id\");\n\t\tif (sec) newEvent.section = sec;\n\t}\n\n\treturn newEvent;\n}\n\n/**\n * Saves the copy of the event\n * @param {Object} newEvent\n */\nfunction CopyEvent(newEvent) {\n\tcleanEventData.call(this, newEvent);\n\tthis.Ops.addEvent(newEvent, true).then(id =>\n\t\tthis.UpdateSelection(id, newEvent)\n\t);\n}\n\n/**\n * Saves the event to a new target\n * @param {Object} newEvent\n */\nfunction MoveEvent(newEvent) {\n\t// cut operation is either update - for normal events\n\t// or edit as 'this' - for recurring events\n\tif (newEvent.recurring) {\n\t\tconst recurring = cutOccurrence(newEvent.id, newEvent);\n\t\tconst updateId = newEvent.$id;\n\t\tcleanEventData.call(this, newEvent);\n\n\t\t// [todo] create 1 Op for updating as this because calling 2 methods (update, add) for this wasn't the best idea\n\t\tthis.Ops.updateEvent(\n\t\t\tupdateId,\n\t\t\t{ recurring },\n\t\t\t\"this\",\n\t\t\tnewEvent.start_date,\n\t\t\ttrue\n\t\t).then(() =>\n\t\t\tthis.Ops.addEvent(newEvent, true).then(id =>\n\t\t\t\tthis.UpdateSelection(id, newEvent)\n\t\t\t)\n\t\t);\n\t} else {\n\t\tconst update = {\n\t\t\tstart_date: newEvent.start_date,\n\t\t\tend_date: newEvent.end_date,\n\t\t};\n\t\tif (newEvent.units) update.units = newEvent.units;\n\t\tif (newEvent.section) update.section = newEvent.section;\n\t\tthis.Ops.updateEvent(newEvent.id, update, null, null, true).then(() => {\n\t\t\tthis.UpdateSelection(newEvent.id, newEvent);\n\t\t});\n\t}\n}\n\nfunction PurgeClipboard() {\n\tconst clip = this.State.clipboard;\n\tif (clip) {\n\t\tconst { mode, source } = clip;\n\t\twebix.html.removeCss(source, `webix_scheduler_${mode}`);\n\n\t\tthis.ClearPasteTargetStyle();\n\t\tthis.State.clipboard = null;\n\n\t\treturn false;\n\t}\n}\n\n/**\n *\n * @param {Object} child - the object of a JetView instance\n * @param {Object} mainWidget - the main widget within a jet view\n * @param {Object} config - some config that is passed for this view (e.g. multi: true)\n */\nexport default function CopyPasteMixin(child, mainWidget, config) {\n\tchild.AddToClipboard = AddToClipboard;\n\tchild.SetClipboardSourceStyle = SetClipboardSourceStyle;\n\tchild.RestoreClipboardSource = RestoreClipboardSource;\n\tchild.PasteFromClipboard = PasteFromClipboard;\n\tchild.GetEventData = GetEventData;\n\tchild.CopyEvent = CopyEvent;\n\tchild.MoveEvent = MoveEvent;\n\tchild.ClearPasteTargetStyle = ClearPasteTargetStyle;\n\tchild.SetPasteTargetStyle = SetPasteTargetStyle;\n\tchild.ChangePasteTarget = ChangePasteTarget;\n\tchild.CreatePasteTarget = CreatePasteTarget;\n\tchild.PurgeClipboard = PurgeClipboard;\n\n\tif (config && config.multi) {\n\t\tchild.$multi = true;\n\t\tchild.destroy = OnDestroy;\n\t}\n\n\tHandleCopyPaste.call(child, mainWidget);\n}\n","/* eslint-disable indent */\n/* eslint-disable no-mixed-spaces-and-tabs */\nimport { JetView } from \"webix-jet\";\nimport { FREQUENCE, WEEKDAYS, separateSequence } from \"../../helpers/recurring\";\nimport { cleanEventData } from \"helpers/copypaste\";\n\nimport EventActionMenu from \"./actionmenu\";\n\nexport default class EventView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tconst aSkin = webix.skin.$active;\n\t\tconst bar = {\n\t\t\tview: \"toolbar\",\n\t\t\tborderless: true,\n\t\t\tpadding: {\n\t\t\t\tleft: aSkin.layoutPadding.form - (aSkin.inputHeight - 20) / 2,\n\t\t\t\tright: 14,\n\t\t\t},\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\ticon: \"wxi-close\",\n\t\t\t\t\thotkey: \"esc\",\n\t\t\t\t\tclick: () => this.Back(),\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\twidth: 130,\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tlocalId: \"edit\",\n\t\t\t\t\tlabel: _(\"Edit\"),\n\t\t\t\t\tcss: \"webix_primary\",\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tthis.$scope.StartAction(\"Edit\", this.$view);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tif (this.app.config.copypaste) {\n\t\t\tbar.elements.splice(-1, 0, {\n\t\t\t\tview: \"icon\",\n\t\t\t\ticon: \"shi-content-copy\",\n\t\t\t\ttooltip: _(\"Copy event\"),\n\t\t\t\tclick: () => this.CopyEvent(),\n\t\t\t});\n\t\t}\n\n\t\tconst info = {\n\t\t\tlocalId: \"text\",\n\t\t\tview: \"template\",\n\t\t\tcss: \"webix_scheduler_info\",\n\t\t\ttemplate: obj => (obj.start_date ? this.InfoTemplate(obj) : \"\"),\n\t\t\tborderless: true,\n\t\t};\n\n\t\tconst deleteButton = {\n\t\t\tview: \"button\",\n\t\t\tlocalId: \"remove\",\n\t\t\tlabel: _(\"Delete event\"),\n\t\t\tcss: \"webix_danger webix_scheduler_danger\",\n\t\t\talign: \"center\",\n\t\t\tinputWidth: 330,\n\t\t\tclick: function() {\n\t\t\t\tthis.$scope.StartAction(\"Delete\", this.$view);\n\t\t\t},\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"proxy\", // for borders\n\t\t\tbody: {\n\t\t\t\tmargin: 0,\n\t\t\t\trows: [\n\t\t\t\t\tbar,\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tpadding: { right: 14 + 2 },\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\trows: [info, deleteButton],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tthis.UnitsLocal = this.app.getService(\"local\").units(true);\n\n\t\tthis.on(this.State.$changes, \"readonly\", v => {\n\t\t\tconst action = v ? \"hide\" : \"show\";\n\t\t\tthis.$$(\"edit\")[action]();\n\t\t\tthis.$$(\"remove\")[action]();\n\t\t});\n\n\t\tconst template = this.$$(\"text\");\n\n\t\tthis.on(this.State.$changes, \"selected\", v => {\n\t\t\tif (v) {\n\t\t\t\tthis.EventObj = this.app\n\t\t\t\t\t.getService(\"local\")\n\t\t\t\t\t.events(true)\n\t\t\t\t\t.getItem(v.id);\n\t\t\t\ttemplate.setValues(this.EventObj);\n\t\t\t}\n\t\t});\n\n\t\tthis.Menu = this.ui(EventActionMenu);\n\n\t\tif (this.app.config.units) {\n\t\t\tconst waitUnits = this.app.getService(\"local\").units();\n\t\t\twaitUnits.then(() => {\n\t\t\t\ttemplate.refresh();\n\t\t\t});\n\t\t}\n\n\t\tif (this.app.config.timeline) {\n\t\t\tconst local = this.app.getService(\"local\");\n\t\t\tlocal.sections().then(data => {\n\t\t\t\tthis.Sections = data;\n\t\t\t\ttemplate.refresh();\n\t\t\t});\n\t\t}\n\t}\n\n\tStartAction(mode, node) {\n\t\tif (\n\t\t\tthis.app.config.recurring &&\n\t\t\t(typeof this.State.selected.date === \"string\" || this.EventObj.origin_id)\n\t\t) {\n\t\t\tthis.Menu.Show(node).then(o => {\n\t\t\t\tif (mode === \"Delete\") this.DeleteEvent(o);\n\t\t\t\telse this.EditEvent(o);\n\t\t\t});\n\t\t} else {\n\t\t\tif (mode === \"Delete\") this.DeleteEvent();\n\t\t\telse this.EditEvent();\n\t\t}\n\t}\n\n\tEditEvent(o) {\n\t\tconst compact = this.getParam(\"compact\", true);\n\t\tconst path = compact ? \"event.formpopup/\" : \"../\";\n\t\tthis.show(path + \"event.form\", { target: \"edit\", params: { mode: o } });\n\t}\n\n\tDeleteEvent(mode) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\twebix\n\t\t\t.confirm({\n\t\t\t\ttitle: _(\"Delete event\"),\n\t\t\t\ttext: _(\"The event will be deleted permanently, are you sure?\"),\n\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tconst obj = this.EventObj;\n\t\t\t\tlet sdate = \"\";\n\t\t\t\tif (mode && mode !== \"all\") {\n\t\t\t\t\tif (this.State.selected) sdate = this.State.selected.date;\n\t\t\t\t\telse if (obj.$id) sdate = obj.id;\n\t\t\t\t}\n\t\t\t\tthis.app\n\t\t\t\t\t.getService(\"operations\")\n\t\t\t\t\t.removeEvent(this.EventObj, mode, sdate);\n\t\t\t\tthis.Back(true);\n\t\t\t});\n\t}\n\n\t/** Sets selected of the global reactive state to open form for copy creation */\n\tCopyEvent() {\n\t\tconst data = webix.copy(this.EventObj);\n\t\tcleanEventData.call(this, data);\n\t\tthis.State.$batch({\n\t\t\tselected: { id: \"0\" },\n\t\t\tclipboard: { mode: \"copy\", selected: data },\n\t\t});\n\t}\n\n\t/**\n\t * Closes the info panel\n\t * @param {Boolean} removal - indicates that the panel was closed after an event was removed\n\t */\n\tBack(removal) {\n\t\tif (removal) {\n\t\t\tconst clip = this.State.clipboard;\n\t\t\tif (\n\t\t\t\tclip &&\n\t\t\t\t(clip.selected.id === this.EventObj.id ||\n\t\t\t\t\tclip.selected.id.indexOf(\"_\" + this.EventObj.id) > -1)\n\t\t\t) {\n\t\t\t\tthis.State.clipboard = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.State.selected = null;\n\t}\n\n\tInfoTemplate(obj) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tif (this.app.config.recurring && this.State.selected.date) {\n\t\t\tobj = { ...obj, ...separateSequence(obj, this.State.selected.date) };\n\t\t}\n\t\tconst [start, end] = [obj.start_date, obj.end_date];\n\n\t\tconst oneday = webix.Date.equal(\n\t\t\twebix.Date.datePart(start, true),\n\t\t\twebix.Date.datePart(end, true)\n\t\t);\n\n\t\tconst allday =\n\t\t\twebix.Date.equal(webix.Date.datePart(start, true), start) &&\n\t\t\twebix.Date.equal(webix.Date.datePart(end, true), end) &&\n\t\t\tobj.all_day;\n\n\t\tconst time = webix.i18n.timeFormatStr;\n\t\tconst date = webix.i18n.longDateFormatStr;\n\n\t\tconst title = `<div class=\"webix_scheduler_event_title\">${obj.text ||\n\t\t\t_(\"(No title)\")}</div>`;\n\n\t\tconst startDate = date(start);\n\t\tconst endDate = date(end);\n\t\tconst startTime = time(start);\n\t\tconst endTime = time(end);\n\n\t\tlet fromTo = \"\";\n\t\tif (oneday) {\n\t\t\tfromTo = `<div class=\"webix_scheduler_event_text\">${startDate}</div>`;\n\t\t\tif (!allday)\n\t\t\t\tfromTo += `<div class=\"webix_scheduler_event_text\">${_(\n\t\t\t\t\t\"from\"\n\t\t\t\t)} ${startTime} ${_(\"to\")} ${endTime}</div>`;\n\t\t} else {\n\t\t\tfromTo = `<div class=\"webix_scheduler_event_text\">${_(\"from\")} ${\n\t\t\t\t!allday ? startTime : \"\"\n\t\t\t} ${startDate}</div><div class=\"webix_scheduler_event_text\">${_(\"to\")} ${\n\t\t\t\t!allday ? endTime : \"\"\n\t\t\t} ${endDate}</div>`;\n\t\t}\n\n\t\tconst recurring =\n\t\t\tthis.app.config.recurring && obj.recurring\n\t\t\t\t? this.GetRecurringText(obj, _)\n\t\t\t\t: \"\";\n\n\t\tlet units = \"\";\n\t\tif (this.app.config.units) {\n\t\t\tunits += `<div class=\"webix_scheduler_event_units_title\">${_(\n\t\t\t\t\"Assigned to units\"\n\t\t\t)}:</div><div class=\"webix_scheduler_event_units\">`;\n\t\t\tif (obj.units) {\n\t\t\t\tconst unitIDs = obj.units.split(\",\");\n\t\t\t\tunitIDs.forEach((id, index) => {\n\t\t\t\t\tconst isLast = index === unitIDs.length - 1;\n\t\t\t\t\tconst unitObj = this.UnitsLocal.getItem(id);\n\t\t\t\t\tconst unitValue =\n\t\t\t\t\t\tunitObj && unitObj.value ? unitObj.value : _(\"Unknown unit\");\n\t\t\t\t\tunits += `<div class=\"webix_scheduler_event_unit_item\">${unitValue}${\n\t\t\t\t\t\tisLast ? \"\" : \",\"\n\t\t\t\t\t}</div>`;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tunits += _(\"No units\");\n\t\t\t}\n\t\t\tunits += \"</div>\";\n\t\t}\n\n\t\tconst section =\n\t\t\tthis.app.config.timeline && this.Sections ? this.GetSection(obj, _) : \"\";\n\n\t\tlet details = \"\";\n\t\tif (obj.details)\n\t\t\tdetails = `<div class=\"webix_scheduler_event_details_title\">${_(\n\t\t\t\t\"Notes\"\n\t\t\t)}</div>\n\t\t\t\t<div class=\"webix_scheduler_event_text\">${obj.details.replace(\n\t\t\t\t\t/(?:\\r\\n|\\r|\\n)/g,\n\t\t\t\t\t\"<br>\"\n\t\t\t\t)}</div>`;\n\n\t\treturn `${title}\n\t\t\t<div class='webix_scheduler_event_from_to'>${fromTo}</div>\n\t\t\t<div class='webix_scheduler_event_recurring_pattern'>${recurring}</div>${units}${section}${details}`;\n\t}\n\n\tGetRecurringText(obj, _) {\n\t\tconst mode = obj.$recurring;\n\t\tconst interval = mode.INTERVAL && mode.INTERVAL > 1 ? mode.INTERVAL : \"\";\n\n\t\tlet pattern = \"\";\n\t\tif (mode.BYDAY) {\n\t\t\tpattern = ` ${_(\"on\")} ${mode.BYSETPOS || \"\"} ${mode.BYDAY.split(\",\")\n\t\t\t\t.map(d => webix.i18n.calendar.dayFull[WEEKDAYS.indexOf(d)])\n\t\t\t\t.join(\", \")} ${\n\t\t\t\tmode.BYMONTH\n\t\t\t\t\t? `${_(\"of\")} ${webix.i18n.calendar.monthFull[mode.BYMONTH - 1]}`\n\t\t\t\t\t: \"\"\n\t\t\t}`;\n\t\t} else if (mode.BYMONTHDAY) {\n\t\t\tpattern =\n\t\t\t\t(mode.BYMONTHDAY ? ` ${_(\"on\")} ` : \"\") +\n\t\t\t\t(mode.BYMONTH\n\t\t\t\t\t? `${mode.BYSETPOS ? _(\"of\") : \"\"} ${\n\t\t\t\t\t\t\twebix.i18n.calendar.monthFull[mode.BYMONTH - 1]\n\t\t\t\t\t  }`\n\t\t\t\t\t: \"\") +\n\t\t\t\t(mode.BYMONTHDAY ? ` ${mode.BYMONTHDAY}` : \"\");\n\t\t} else if (mode.BYYEARDAY) {\n\t\t\tpattern = `${_(\"day\")} ${mode.BYYEARDAY}`;\n\t\t}\n\n\t\treturn `${_(\"Repeats each\")} ${interval} ${_(\n\t\t\tFREQUENCE[mode.FREQ] + (interval ? \"s\" : \"\")\n\t\t)} ${pattern}${\n\t\t\tmode.COUNT\n\t\t\t\t? `, ${mode.COUNT} ${_(\"times\")}`\n\t\t\t\t: mode.UNTIL\n\t\t\t\t? ` ${_(\"till\")} ${webix.i18n.longDateFormatStr(mode.UNTIL)}`\n\t\t\t\t: \"\"\n\t\t}`;\n\t}\n\n\t/**\n\t * Returns a string with HTML for the info with the section\n\t * @param {Object} obj - data of an event\n\t * @param {function} _ - the translator function of the Locale plugin\n\t * @returns {string} a string with HTML for the info with the section\n\t */\n\tGetSection(obj, _) {\n\t\tconst section = this.Sections.getItem(obj.section);\n\t\tif (section)\n\t\t\treturn `<div class=\"webix_scheduler_section_tpl\"><span class=\"webix_scheduler_section_title\">${_(\n\t\t\t\t\"Section\"\n\t\t\t)}:</span> ${section.text}</div>`;\n\t\treturn \"\";\n\t}\n}\n","let BRIGHTNESS;\nlet FONT;\nwebix.ready(() => {\n\tconst dark = webix.skin.$name === \"contrast\" || webix.skin.$name === \"dark\";\n\tBRIGHTNESS = dark ? 0.35 : 0.75;\n\tFONT = dark ? \"#9f9d9d\" : \"#ffffff\";\n});\n\n/**\n * Gets contrasting text color for the event background color\n * @param {string} color - background color\n * @returns {string} text color\n */\nexport function getContrastingColor(color) {\n\tconst rgb = webix.color.toRgb(color);\n\tconst brightness = Math.round(\n\t\t(rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000\n\t);\n\treturn brightness > 180 ? \"#475466\" : \"#ffffff\";\n}\n\nexport function getDimmedColor(color) {\n\tlet [hue, saturation] = hexToHsv(color);\n\thue *= 0.95;\n\tsaturation *= 0.4;\n\treturn `rgb(${webix.color.hsvToRgb(hue, saturation, BRIGHTNESS)})`;\n}\n\nexport function getDimmedFont() {\n\treturn FONT;\n}\n\nfunction hexToHsv(hex) {\n\tconst [red, green, blue] = webix.color.toRgb(hex);\n\treturn webix.color.rgbToHsv(red, green, blue);\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class EventActionPopup extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tconst buttons = {\n\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tvalue: _(\"Cancel\"),\n\t\t\t\t\thotkey: \"esc\",\n\t\t\t\t\tclick: () => this.Cancel(),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"button\",\n\t\t\t\t\tvalue: _(\"Apply\"),\n\t\t\t\t\tcss: \"webix_primary\",\n\t\t\t\t\thotkey: \"enter\",\n\t\t\t\t\tclick: () => this.Done(),\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\treturn this.app.getService(\"jet-win\").updateConfig({\n\t\t\tview: \"window\",\n\t\t\thead: _(\"Edit recurring event\"),\n\t\t\tautoheight: true,\n\t\t\tcss: \"webix_scheduler_action_popup\",\n\t\t\tbody: {\n\t\t\t\ttype: \"form\",\n\t\t\t\tpadding: { top: 0 },\n\t\t\t\twidth: 340,\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"radio\",\n\t\t\t\t\t\tlocalId: \"option\",\n\t\t\t\t\t\tvertical: true,\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{ id: \"this\", value: _(\"This event\") },\n\t\t\t\t\t\t\t{ id: \"next\", value: _(\"This event and the following\") },\n\t\t\t\t\t\t\t{ id: \"all\", value: _(\"All events\") },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\tbuttons,\n\t\t\t\t],\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonHide: () => (this.Result = null),\n\t\t\t},\n\t\t});\n\t}\n\n\tinit(view) {\n\t\tthis.Root = view;\n\t}\n\n\tShow(promise) {\n\t\tthis.Result = promise;\n\t\tthis.$$(\"option\").setValue(\"this\");\n\t\tthis.Root.show();\n\t}\n\n\tDone() {\n\t\tconst id = this.$$(\"option\").getValue();\n\t\tif (this.Result) this.Result.resolve(id);\n\t\tthis.Root.hide();\n\t}\n\n\tCancel() {\n\t\tif (this.Result) this.Result.reject();\n\t\tthis.Root.hide();\n\t}\n}\n","import { getDimmedColor, getDimmedFont } from \"./colors\";\n\nexport function marker(obj) {\n\tconst color = obj.color || obj.$color;\n\treturn `<div class=\"webix_event_marker\"><div class=\"webix_event_marker_inner\" style=\"background-color:${\n\t\tobj.$past ? getDimmedColor(color) : color\n\t};\"></div></div>`;\n}\n\nexport function events(_) {\n\treturn function(obj, common) {\n\t\treturn `<div class=\"webix_event_overall ${\n\t\t\tobj.$past ? \"webix_scheduler_past_event\" : \"\"\n\t\t}\"><div class=\"webix_event_time\">${common.timeStart(obj)}</div>${marker(\n\t\t\tobj,\n\t\t\tcommon\n\t\t)}<div class=\"webix_event_text\">${obj.text || _(\"(No title)\")}</div></div>`;\n\t};\n}\n\nexport function dayEventColor(obj) {\n\tconst color = obj.color || obj.$color;\n\treturn `border-color:${\n\t\tobj.$past ? getDimmedColor(obj.$color) : obj.$color\n\t}; background-color:${obj.$past ? getDimmedColor(color) : color}; color:${\n\t\tobj.$past ? getDimmedFont() : obj.$textColor\n\t};`;\n}\n\nexport function timeStart(start, end) {\n\treturn `<div class=\"start\">${webix.i18n.timeFormatStr(\n\t\tstart\n\t)}</div><div class=\"end\">${webix.i18n.timeFormatStr(end)}</div>`;\n}\n\nfunction fill(obj, common, size) {\n\tconst v = common.master;\n\treturn (\n\t\tv[\"$\" + size] -\n\t\t(v.config[size == \"width\" ? \"xCount\" : \"yCount\"] - 1) * common[size]\n\t);\n}\n\nexport function templateStart(obj, common, marks) {\n\tlet { width, height } = common;\n\tif (obj.right) width = fill(obj, common, \"width\");\n\tif (obj.bottom) height = fill(obj, common, \"height\");\n\treturn (\n\t\t\"<div \" +\n\t\t/*@attr*/ \"webix_l_id\" +\n\t\t`=\"${obj.id}\" class=\"${common.classname(obj, common, marks)}\" ${common.aria(\n\t\t\tobj,\n\t\t\tcommon,\n\t\t\tmarks\n\t\t)} style=\"width:${width}px; height:${height}px; float:left; overflow:hidden;\">`\n\t);\n}\n","import { JetView } from \"webix-jet\";\nimport { events, timeStart } from \"helpers/templates\";\nimport { isMultiDay } from \"helpers/dates\";\nimport { getParams } from \"helpers/recurring\";\n\nexport default class UnitListView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\treturn {\n\t\t\tview: \"unitlist\",\n\t\t\tlocalId: \"list\",\n\t\t\tuniteBy: () => \"custom\",\n\t\t\ttype: {\n\t\t\t\ttemplate: events(_),\n\t\t\t\ttemplateHeader: obj => this.TemplateHeader(obj),\n\t\t\t\ttimeStart: obj => this.TimeStart(obj),\n\t\t\t\theight: 50,\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonUnits: () => this.SetUnits(),\n\t\t\t\tonItemClick: (id, node) => this.ShowEvent(id, node),\n\t\t\t},\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tthis.List = this.$$(\"list\");\n\t\twebix.extend(this.List, webix.OverlayBox);\n\t}\n\n\tShowEvent(id, node) {\n\t\tconst obj = this.List.getItem(id);\n\t\tconst sel = getParams(obj);\n\t\tsel.node = node;\n\t\tthis.State.selected = sel;\n\t}\n\n\tToggleOverlay() {\n\t\tif (!this.List.count()) {\n\t\t\tconst _ = this.app.getService(\"locale\")._;\n\t\t\tthis.List.showOverlay(_(\"No Events\"));\n\t\t} else {\n\t\t\tthis.List.hideOverlay();\n\t\t}\n\t}\n\n\tSetUnits() {\n\t\tlet units = this.List.units;\n\t\tconst data = this.data.all;\n\n\t\t// ignore clearAll\n\t\tif (Object.keys(units).length) {\n\t\t\tthis.List.units = {};\n\t\t\tlet start = this.data.start;\n\t\t\tconst end = this.data.end;\n\n\t\t\twhile (start < end) {\n\t\t\t\tconst next = webix.Date.add(start, 1, \"day\", true);\n\n\t\t\t\tlet result = data\n\t\t\t\t\t.filter(\n\t\t\t\t\t\td =>\n\t\t\t\t\t\t\td.start_date < next &&\n\t\t\t\t\t\t\t(d.end_date > start || (d.end_date >= start && d.all_day))\n\t\t\t\t\t)\n\t\t\t\t\t.map(ev => ev.id);\n\t\t\t\tif (result.length) {\n\t\t\t\t\tthis.List.units[start.valueOf()] = result;\n\t\t\t\t}\n\n\t\t\t\tstart = webix.Date.add(start, 1, \"day\", true);\n\t\t\t}\n\t\t}\n\t}\n\n\tTimeStart(ev) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tif (isMultiDay(ev)) return _(\"All Day\");\n\t\telse return timeStart(ev.start_date, ev.end_date);\n\t}\n}\n","import UnitListView from \"../common/unitlist\";\nimport { shrinkTo, isToday } from \"helpers/dates\";\n\nexport default class AgendaView extends UnitListView {\n\tconfig() {\n\t\tconst compact = this.getParam(\"compact\", true);\n\t\tconst ui = super.config();\n\t\tui.css = \"webix_scheduler_agenda\";\n\n\t\twebix.extend(\n\t\t\tui.type,\n\t\t\t{\n\t\t\t\theight: \"auto\",\n\t\t\t\theaderHeight: 50,\n\t\t\t\tclassname: obj => this.TemplateCss(obj),\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\n\t\twebix.extend(\n\t\t\tui.on,\n\t\t\t{\n\t\t\t\tonItemRender: obj => {\n\t\t\t\t\tif (obj.$unit) this.CurrentUnit = obj.$unit;\n\t\t\t\t},\n\t\t\t\tonItemClick: (id, e, node) => {\n\t\t\t\t\tnode = node.firstChild;\n\t\t\t\t\tthis.ShowEvent(id, node);\n\t\t\t\t\tif (!compact) this.SelectEvent(node);\n\t\t\t\t},\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\n\t\treturn ui;\n\t}\n\n\tinit() {\n\t\tsuper.init();\n\n\t\tthis.Data = this.app.getService(\"local\");\n\t\tconst events = this.Data.events(true);\n\n\t\tthis.on(this.State.$changes, \"date\", () => this.RefreshData());\n\t\tthis.on(this.State.$changes, \"active\", () => this.RefreshData());\n\t\tthis.on(this.State.$changes, \"selected\", v => {\n\t\t\tif (!v) this.SelectEvent(); //remove selection\n\t\t});\n\t\tthis.on(this.app, \"events:refresh\", () => this.RefreshData());\n\n\t\t// updates made in full mode by form\n\t\tthis.on(\n\t\t\tevents.data,\n\t\t\t\"onStoreUpdated\",\n\t\t\t(_i, _o, mode) => mode && this.RefreshData()\n\t\t);\n\t}\n\n\tRefreshData() {\n\t\tlet start = webix.Date.monthStart(this.State.date);\n\t\tlet end = webix.Date.add(start, 1, \"month\", true);\n\n\t\tthis.Data.getEvents(start, end).then(data => {\n\t\t\tthis.data = { all: data, start: start, end: end };\n\t\t\tif (this.app) {\n\t\t\t\tthis.List.clearAll();\n\t\t\t\tthis.List.parse(data.map(shrinkTo(start, end)));\n\t\t\t\tthis.ToggleOverlay();\n\t\t\t}\n\t\t});\n\t}\n\n\tSelectEvent(node) {\n\t\tif (node == this._selected) return;\n\n\t\tconst name = \"webix_agenda_selected\";\n\t\tif (this._selected) webix.html.removeCss(this._selected, name);\n\t\tif (node) webix.html.addCss(node, name);\n\n\t\tthis._selected = node;\n\t}\n\n\tTemplateHeader(datestring) {\n\t\tconst date = new Date(datestring * 1);\n\t\tconst today = isToday(date);\n\n\t\tconst fstring = `%F <span class='webix_scheduler_monthday${\n\t\t\ttoday ? \" webix_scheduler_today\" : \"\"\n\t\t}'>%j</span><br><span class='webix_scheduler_dayofweek'>%l</span>`;\n\n\t\treturn webix.Date.dateToStr(fstring)(date);\n\t}\n\n\tTemplateCss(obj) {\n\t\tconst ids = this.List.getUnitList(this.CurrentUnit);\n\n\t\tlet css = \"webix_list_item\";\n\t\tif (obj.id == ids[ids.length - 1]) css += \" webix_event_last\";\n\t\tif (obj.id == ids[0]) css += \" webix_event_first\";\n\n\t\treturn css;\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class HourscaleView extends JetView {\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"list\",\n\t\t\tborderless: true,\n\t\t\tlocalId: \"scale\",\n\t\t\tcss: \"webix_scheduler_scale\",\n\t\t\ttype: {\n\t\t\t\theight: 42,\n\t\t\t\theightSize: (obj, common) => {\n\t\t\t\t\tconst ind = this.List.getIndexById(obj.id);\n\t\t\t\t\treturn common.height - (ind === 0 ? 17 : 0) + \"px\";\n\t\t\t\t},\n\t\t\t},\n\t\t\tscroll: false,\n\t\t\tautoheight: true,\n\t\t\twidth: 51,\n\t\t\ttemplate: obj => this.HourScaleItem(obj),\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.List = this.$$(\"scale\");\n\t\tthis.ParseHours();\n\t}\n\n\tParseHours() {\n\t\tconst data = [];\n\t\tfor (let h = 0; h < 24; h++) {\n\t\t\tdata.push({ id: h + \"\" });\n\t\t}\n\t\tthis.List.parse(data);\n\t}\n\n\tHourScaleItem(obj) {\n\t\tif (this.List.getIndexById(obj.id) === 0) return \"\";\n\t\telse return `${(obj.id < 10 ? \"0\" : \"\") + obj.id}:00`;\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class MultiMoreView extends JetView {\n\tconfig() {\n\t\tconst more = {\n\t\t\tview: \"template\",\n\t\t\tlocalId: \"more\",\n\t\t\twidth: 50,\n\t\t\tcss: \"webix_scheduler_multi_space\",\n\t\t\ttooltip: () => \"\",\n\t\t\tonClick: {\n\t\t\t\t\"wxi-angle-down\": () => this.ExpandData(),\n\t\t\t\t\"wxi-angle-up\": () => this.WrapData(),\n\t\t\t},\n\t\t};\n\n\t\treturn {\n\t\t\tcols: [more, {}],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.List = this.$$(\"multiDayList\");\n\t\tthis.MoreIcon = this.$$(\"more\");\n\n\t\tthis._expandState = \"down\";\n\t\tthis.maxVisibleLines = 3;\n\t}\n\n\t/**\n\t *\n\t * @param {*} mode\n\t */\n\tSetMoreIcon(mode) {\n\t\tif (!mode) {\n\t\t\tthis.MoreIcon.setHTML(\"\");\n\t\t} else {\n\t\t\tconst tooltip = mode === \"up\" ? \"Collapse\" : \"Expand\";\n\t\t\tconst _ = this.app.getService(\"locale\")._;\n\t\t\tthis.MoreIcon.setHTML(\n\t\t\t\t`<div class=\"webix_scheduler_more_icon webix_icon wxi-angle-${mode}\" webix_tooltip=\"${_(\n\t\t\t\t\t`${tooltip} all-day events`\n\t\t\t\t)}\"><div>`\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Sets new height and delay for animation\n\t * @param {string} mode - \"up\" or \"down\"\n\t * @param {number} height\n\t * @param {function} handler\n\t */\n\tAnimate(mode, height, handler) {\n\t\tconst delay = 150;\n\t\tthis.List.$view.style.transition = `height ${delay}ms`;\n\t\tif (height) this.List.$view.style.height = `${height}px`;\n\n\t\tsetTimeout(() => {\n\t\t\tif (handler) handler();\n\n\t\t\tthis.List.$view.style.transition = \"\";\n\t\t\tthis._inAnimation = false;\n\t\t\tthis.SetMoreIcon(mode);\n\t\t}, delay);\n\t}\n}\n","function _select(id, functor) {\n\tconst trgs = this.LocateSelected(id);\n\tif (trgs) {\n\t\tfor (let i = 0; i < trgs.length; i++)\n\t\t\tfunctor(trgs[i], \"webix_scheduler_event_selected\");\n\t}\n}\n\nfunction Select(id) {\n\treturn _select.call(this, id, webix.html.addCss);\n}\n\nfunction Unselect(id) {\n\treturn _select.call(this, id, webix.html.removeCss);\n}\n\nfunction HandleSelection() {\n\tconst mode = this._SelectionMode;\n\tthis.State = this.app.getState();\n\n\tthis.on(this.State.$changes, \"selected\", (v, o) => {\n\t\tif (o) this.Unselect(o.date && typeof o.date === \"string\" ? o.date : o.id);\n\n\t\tif (v) {\n\t\t\tconst id = v.id === \"0\" || !v.date ? v.id : v.date;\n\t\t\tsetTimeout(\n\t\t\t\t() => this.Select(id),\n\t\t\t\tmode !== \"multi\" && id === \"0\" ? 150 : 0\n\t\t\t);\n\t\t}\n\t});\n\n\t// reapply selection to a saved new event\n\tif (mode !== \"multi\") {\n\t\tconst events = this.app.getService(\"local\").events(true);\n\t\tthis.on(events.data, \"onStoreUpdated\", (id, o, operation) => {\n\t\t\tif (\n\t\t\t\toperation === \"add\" &&\n\t\t\t\tid != \"0\" &&\n\t\t\t\tthis.State.selected &&\n\t\t\t\tthis.State.selected.id === \"0\"\n\t\t\t) {\n\t\t\t\tthis.State.selected.id = id;\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction locate(inner) {\n\treturn function LocateSelected(id) {\n\t\tif (this._DataObj) {\n\t\t\treturn Array.prototype.map.call(\n\t\t\t\tthis._DataObj.querySelectorAll(\n\t\t\t\t\t`[webix_${inner ? \"l\" : \"e\"}_id=\"${id}\"]`\n\t\t\t\t),\n\t\t\t\tel => (inner ? el.firstElementChild : el)\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n}\n\nexport default function SelectionMixin(child, mode, inner) {\n\tchild._SelectionMode = mode;\n\n\tchild.Select = Select;\n\tchild.Unselect = Unselect;\n\tchild.HandleSelection = HandleSelection;\n\tchild.LocateSelected = locate(inner);\n\n\tchild.HandleSelection();\n}\n","export const Resizer = {\n\t$dragIn: function() {\n\t\tconst ctx = this.getContext();\n\n\t\tif (ctx.from.mode !== this.mode) return false;\n\t\treturn true;\n\t},\n\t$dragPos: function(pos) {\n\t\tconst ctx = this.getContext();\n\n\t\tconst box = webix.html.offset(ctx.target);\n\t\tlet y = pos.y - box.y;\n\n\t\tif (y < ctx.y_diff) y = ctx.y_diff;\n\t\telse if (y > box.height) y = box.height;\n\n\t\tconst height = y - ctx.y_diff;\n\t\tResizer.updateNodeHeight.call(this, height);\n\n\t\tif (ctx.duration !== height) {\n\t\t\tctx.duration = height;\n\t\t\tthis.updateText(ctx);\n\t\t}\n\n\t\tpos.x = ctx.x_diff;\n\t\tpos.y = ctx.y_diff;\n\t},\n\tupdateNodeHeight: function(height) {\n\t\tconst node = webix.DragControl.getNode();\n\t\tnode.style.height = Math.max(this.master.minEventHeight, height) + \"px\";\n\t},\n\tgetActualDate: function(master, any) {\n\t\tconst ctx = this.getContext();\n\n\t\tconst date = webix.Date.copy(ctx.event.start_date);\n\t\tconst minutes =\n\t\t\t(Math.round((ctx.duration * 60) / master.List.type.height / 5) || 1) * 5;\n\n\t\twebix.Date.add(date, minutes, \"minute\");\n\n\t\tif (!any && webix.Date.equal(date, ctx.event.end_date)) return null;\n\n\t\treturn {\n\t\t\tstart_date: webix.Date.copy(ctx.event.start_date),\n\t\t\tend_date: date,\n\t\t};\n\t},\n};\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nconst d = webix.Date;\r\nfunction addMinutes(date, inc) {\r\n\treturn d.add(date, inc * 1, \"minute\", true);\r\n}\r\n\r\nfunction addHours(date, inc) {\r\n\treturn d.add(date, inc * 1, \"hour\", true);\r\n}\r\n\r\nfunction addDays(date, inc) {\r\n\treturn d.add(date, inc * 1, \"day\", true);\r\n}\r\n\r\nfunction addWeeks(date, inc) {\r\n\treturn d.add(date, inc * 1, \"week\", true);\r\n}\r\n\r\nfunction addMonths(date, inc) {\r\n\treturn d.add(date, inc * 1, \"month\", true);\r\n}\r\n\r\nfunction addQuarters(date, inc) {\r\n\treturn d.add(date, inc * 3, \"month\", true);\r\n}\r\n\r\nfunction addYears(date, inc) {\r\n\treturn d.add(date, inc * 1, \"year\", true);\r\n}\r\n\r\nfunction differenceInYears(a, b) {\r\n\treturn a.getFullYear() - b.getFullYear();\r\n}\r\n\r\nfunction differenceInMonths(a, b) {\r\n\treturn (\r\n\t\t(a.getFullYear() - b.getFullYear()) * 12 + (a.getMonth() - b.getMonth())\r\n\t);\r\n}\r\n\r\nconst day_length = 86400000;\r\nfunction differenceInCalendarDays(a, b) {\r\n\ta = new Date(a);\r\n\ta.setHours(0, 0, 0, 0);\r\n\tb = new Date(b);\r\n\tb.setHours(0, 0, 0, 0);\r\n\r\n\treturn Math.round((a.getTime() - b.getTime()) / day_length);\r\n}\r\n\r\nfunction differenceInQuarters(a, b) {\r\n\treturn (\r\n\t\t(a.getFullYear() - b.getFullYear()) * 4 +\r\n\t\t(Math.floor(a.getMonth() / 3) + 1) -\r\n\t\t(Math.floor(b.getMonth() / 3) + 1)\r\n\t);\r\n}\r\n\r\nfunction differenceInWeeks(a, b) {\r\n\tconst diff = differenceInCalendarDays(a, b) / 7;\r\n\tconst end = getDay(a);\r\n\tconst start = getDay(b);\r\n\r\n\treturn Math.ceil(Math.abs(diff) - (end <= start ? 0 : 1)) * Math.sign(diff);\r\n}\r\n\r\nfunction differenceInHours(a, b) {\r\n\treturn differenceInCalendarDays(a, b) * 24 + (a.getHours() - b.getHours());\r\n}\r\n\r\nfunction differenceInMinutes(a, b) {\r\n\treturn differenceInHours(a, b) * 60 + (a.getMinutes() - b.getMinutes());\r\n}\r\n\r\nconst f_cache = {};\r\nfunction format(date, format) {\r\n\treturn formatFunction(format)(date);\r\n}\r\nfunction formatFunction(format) {\r\n\tlet cb = f_cache[format];\r\n\tif (!cb) {\r\n\t\tcb = f_cache[format] = d.dateToStr(format);\r\n\t}\r\n\r\n\treturn cb;\r\n}\r\n\r\nfunction getDay(date) {\r\n\tlet shift = date.getDay();\r\n\tif (d.startOnMonday) {\r\n\t\tif (shift === 0) shift = 6;\r\n\t\telse shift--;\r\n\t}\r\n\treturn shift;\r\n}\r\n\r\nfunction getDatePart(date) {\r\n\treturn d.datePart(date, true);\r\n}\r\n\r\nfunction getTimePart(date) {\r\n\treturn d.timePart(date);\r\n}\n\nconst diff = {\r\n\tyear: differenceInYears,\r\n\tquarter: differenceInQuarters,\r\n\tmonth: differenceInMonths,\r\n\tweek: differenceInWeeks,\r\n\tday: differenceInCalendarDays,\r\n\thour: differenceInHours,\r\n\tminute: differenceInMinutes,\r\n};\r\n\r\nfunction countDaysInMonth(sdate) {\r\n\tif (!sdate) return 30;\r\n\r\n\tconst m = sdate.getMonth();\r\n\r\n\tif (m === 1) {\r\n\t\tconst y = sdate.getFullYear();\r\n\t\tif (y % 4) return 28;\r\n\t\tif (y % 100) return 29;\r\n\t\tif (y % 400) return 28;\r\n\t\treturn 29;\r\n\t}\r\n\r\n\tif ((m % 2 && m < 7) || (!(m % 2) && m > 7)) {\r\n\t\treturn 30;\r\n\t}\r\n\r\n\treturn 31;\r\n}\r\n/**\r\n * Smaller units for task position and width for scales with precision setting:\r\n * the name of the unit and the number within a larger unit\r\n */\r\nconst smallerCount = {\r\n\tyear: [\"quarter\", 4],\r\n\tquarter: [\"month\", 3],\r\n\tmonth: [\"day\", countDaysInMonth],\r\n\tweek: [\"day\", 7],\r\n\tday: [\"hour\", 24],\r\n\thour: [\"minute\", 60],\r\n};\r\n\r\nconst add = {\r\n\tyear: addYears,\r\n\tquarter: addQuarters,\r\n\tmonth: addMonths,\r\n\tweek: addWeeks,\r\n\tday: addDays,\r\n\thour: addHours,\r\n\tminute: addMinutes,\r\n};\r\n\r\n/**\r\n * Calculates the difference between two dates in units\r\n * @param {string} unit - the minimal unit of the current scale (\"hour\"-\"year\")\r\n * @param {Date} next - a later date\r\n * @param {Date} prev - an earlier date\r\n * @param {boolean} precise - current precision setting of the scales (if true, diff will be counted for smallerCount)\r\n * @param {boolean} wt - shows that diff will be counted for the width of a task\r\n * @returns {number} - an int (if precise is false) or a float number\r\n */\r\nfunction innerDiff(unit, next, prev, precise, wt) {\r\n\tconst minUnit = precise ? smallerCount[unit][0] : unit;\r\n\r\n\tlet start = prev;\r\n\tlet end = next;\r\n\tif (wt) {\r\n\t\tstart = getUnitStart(minUnit, prev);\r\n\t\tend = getUnitStart(minUnit, next);\r\n\t\tif (end < next) end = addUnit(minUnit)(end, 1);\r\n\t}\r\n\r\n\tif (precise) {\r\n\t\tlet filled = diff[minUnit](end, start);\r\n\t\tconst all = smallerCount[unit][1];\r\n\t\treturn filled / (typeof all === \"number\" ? all : all(prev));\r\n\t} else {\r\n\t\treturn diff[minUnit](end, start);\r\n\t}\r\n}\r\n\r\n/**\r\n * Returns a function for calculating the difference between two dates in units\r\n * @param {string} unit - the minimal unit of the current scale (\"hour\"-\"year\")\r\n * @returns {function} - details below\r\n */\r\nfunction getDiff(unit) {\r\n\t/**\r\n\t * the returned function calculates the difference between two dates based on passed parameters\r\n\t * @param {Date} next - first date\r\n\t * @param {Date} prev - second date\r\n\t * @param {boolean} precise false by default, true when used to count x-position\r\n\t * and width of tasks with 'step-1' precision\r\n\t * @param {boolean} wt - marker that diff is used to count width of a task;\r\n\t * if diff returns 0, you have to add 1; otherwise tasks that are within 1 unit will have 0 width\r\n\t * and will be displayed incorrectly\r\n\t * @returns {number} - the difference between two dates in 'units'; if 'precise' is true, the number is float, otherwise int\r\n\t */\r\n\treturn (next, prev, precise, wt) => {\r\n\t\tif (unit === \"month\" && precise) {\r\n\t\t\treturn getMonthDayDiff(next, prev, wt);\r\n\t\t} else {\r\n\t\t\treturn innerDiff(unit, next, prev, precise, wt);\r\n\t\t}\r\n\t};\r\n}\r\n\r\n/**\r\n * Calculates the difference in months between two days for a scale with precision setting\r\n * This is a specific case of diff counting, because a month can have 28-31 days\r\n * @param {Date} end - a later date\r\n * @param {Date} start - an earlier date\r\n * @param {Boolean} wt - shows that diff will be counted for the width of a task\r\n * @returns {number} - a float number\r\n */\r\nfunction getMonthDayDiff(end, start, wt) {\r\n\tif (sameMonth(start, end)) {\r\n\t\treturn innerDiff(\"month\", end, start, true, wt);\r\n\t}\r\n\r\n\t// if starts not on 1st day\r\n\tlet daysOfFirstMonth = 0;\r\n\tif (start.getDate() > 1) {\r\n\t\tconst me = new Date(start.getFullYear(), start.getMonth() + 1, 1);\r\n\t\tdaysOfFirstMonth = innerDiff(\"month\", me, start, true);\r\n\t\tstart = me;\r\n\t}\r\n\r\n\t// if lasts 1+ whole months\r\n\tlet months = 0;\r\n\tif (!sameMonth(start, end)) {\r\n\t\tmonths = innerDiff(\"month\", webix.Date.monthStart(end), start); // int part\r\n\t\tstart = webix.Date.add(start, months, \"month\", true);\r\n\t}\r\n\r\n\t// all above plus days of last month if any\r\n\treturn daysOfFirstMonth + months + innerDiff(\"month\", end, start, true);\r\n}\r\n\r\nfunction sameMonth(a, b) {\r\n\treturn webix.Date.equal(webix.Date.monthStart(a), webix.Date.monthStart(b));\r\n}\r\n\r\nfunction addUnit(unit) {\r\n\treturn add[unit];\r\n}\r\n\r\nfunction getUnitStart(unit, start) {\r\n\tlet t;\r\n\tswitch (unit) {\r\n\t\tcase \"year\":\r\n\t\t\treturn new Date(start.getFullYear(), 0, 1);\r\n\t\tcase \"quarter\":\r\n\t\t\treturn new Date(\r\n\t\t\t\tstart.getFullYear(),\r\n\t\t\t\tMath.floor(start.getMonth() / 3) * 3,\r\n\t\t\t\t1\r\n\t\t\t);\r\n\t\tcase \"month\":\r\n\t\t\treturn new Date(start.getFullYear(), start.getMonth(), 1);\r\n\t\tcase \"week\":\r\n\t\t\tt = new Date(start.getFullYear(), start.getMonth(), start.getDate());\r\n\t\t\tt.setDate(start.getDate() - getDay(start));\r\n\t\t\treturn t;\r\n\t\tcase \"day\":\r\n\t\t\tt = new Date(start.getFullYear(), start.getMonth(), start.getDate());\r\n\t\t\tt.setHours(0, 0, 0, 0);\r\n\t\t\treturn t;\r\n\t\tcase \"hour\":\r\n\t\t\tt = new Date(start.getFullYear(), start.getMonth(), start.getDate());\r\n\t\t\tt.setHours(start.getHours(), 0, 0, 0);\r\n\t\t\treturn t;\r\n\t\tdefault:\r\n\t\t\treturn new Date(start);\r\n\t}\r\n}\n\nfunction getMinUnit(scales) {\r\n\tconst start = new Date();\r\n\treturn scales\r\n\t\t.map(item => ({ item, len: addUnit(item.unit)(start, 1) }))\r\n\t\t.sort((a, b) => (a.len < b.len ? -1 : 1))[0].item.unit;\r\n}\r\n\r\n/**\r\n * Resets scales to new parameters and returns the object that stores related constants and functions\r\n * @param {Date} start - start date\r\n * @param {Date} end - end date\r\n * @param {boolean} precise - flag that defines whether to round task position and width to a smaller unit\r\n * @param {number} width - width of smallest cell unit\r\n * @param {number} height - height of scale cell\r\n * @param {Array} scales - a set of scales (objects)\r\n * @param {function} isHoliday - the function that checks if a day is a holiday\r\n * @returns {Object} scales\r\n */\r\nfunction resetScales(\r\n\tstart,\r\n\tend,\r\n\tprecise,\r\n\twidth,\r\n\theight,\r\n\tscales,\r\n\tisHoliday\r\n) {\r\n\t// console.log(\"[x] reset scales\");\r\n\r\n\tconst minUnit = getMinUnit(scales);\r\n\tconst diff = getDiff(minUnit);\r\n\r\n\tconst tempEnd = getUnitStart(minUnit, end);\r\n\tstart = getUnitStart(minUnit, start);\r\n\tend = tempEnd < end ? addUnit(minUnit)(tempEnd, 1) : tempEnd;\r\n\r\n\tconst fullWidth = diff(end, start) * width;\r\n\tconst fullHeight = height * scales.length;\r\n\r\n\tconst rows = scales.map(line => {\r\n\t\tconst cells = [];\r\n\t\tconst add = addUnit(line.unit);\r\n\t\tconst step = line.step || 1;\r\n\t\tconst countInWeeks = minUnit === \"week\" && line.unit !== \"week\";\r\n\r\n\t\tlet date = getUnitStart(line.unit, start);\r\n\t\twhile (date < end) {\r\n\t\t\tlet next = add(date, step);\r\n\r\n\t\t\tif (date < start) date = start;\r\n\t\t\tif (next > end) next = end;\r\n\r\n\t\t\t/**\r\n\t\t\t * Special handling for counting width of greater units in weeks\r\n\t\t\t * this code decides whether a week belongs to the current greater unit based on weekdays of this unit boundaries\r\n\t\t\t * if start day is Thursday+, then this greater unit should not count this week as its own\r\n\t\t\t * if end day is Thursday+, then this greater unit should count this week as its own\r\n\t\t\t */\r\n\t\t\tlet cdate = date;\r\n\t\t\tlet cnext = next;\r\n\t\t\tif (countInWeeks) {\r\n\t\t\t\tif (getDay(date) > 3) {\r\n\t\t\t\t\tcdate = webix.Date.add(date, 1, \"week\", true);\r\n\t\t\t\t}\r\n\t\t\t\tif (getDay(next) > 3) {\r\n\t\t\t\t\tcnext = webix.Date.add(next, 1, \"week\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst cellWidth = (diff(cnext, cdate) || 1) * width;\r\n\r\n\t\t\t/*[ToDo] suggestion\r\n\t\t\t value must not be formatted within engine as it depends on app locale\r\n\t\t\t use scales.format function to format dates in UI\r\n\t\t\t*/\r\n\r\n\t\t\tconst value =\r\n\t\t\t\ttypeof line.format === \"function\"\r\n\t\t\t\t\t? line.format(date, next)\r\n\t\t\t\t\t: format(date, line.format);\r\n\r\n\t\t\tlet css = \"\";\r\n\t\t\tif (line.css)\r\n\t\t\t\tcss += typeof line.css === \"function\" ? line.css(date) : line.css;\r\n\r\n\t\t\tcells.push({\r\n\t\t\t\twidth: cellWidth,\r\n\t\t\t\tvalue,\r\n\t\t\t\tcss,\r\n\t\t\t\tdate,\r\n\t\t\t\tformat: formatFunction(line.format),\r\n\t\t\t});\r\n\r\n\t\t\tdate = next;\r\n\t\t}\r\n\r\n\t\treturn { cells, add, height, type: line.unit, step: line.step || 1 };\r\n\t});\r\n\r\n\tprecise = !!(minUnit === \"day\" ? precise : precise != false);\r\n\r\n\treturn {\r\n\t\trows,\r\n\t\twidth: fullWidth,\r\n\t\theight: fullHeight,\r\n\t\tcellWidth: width,\r\n\t\tcellHeight: height,\r\n\t\tdiff,\r\n\t\tstart,\r\n\t\tend,\r\n\t\tminUnit,\r\n\t\tprecise,\r\n\t\tisHoliday,\r\n\t};\r\n}\r\n\r\nfunction grid(width, height, color) {\r\n\tconst canvas = document.createElement(\"canvas\");\r\n\tcanvas.setAttribute(\"width\", width);\r\n\tcanvas.setAttribute(\"height\", height);\r\n\r\n\tconst ctx = canvas.getContext(\"2d\");\r\n\tctx.strokeStyle = color;\r\n\tctx.moveTo(0, height);\r\n\tctx.lineTo(width, height);\r\n\tctx.lineTo(width, 0);\r\n\tctx.stroke();\r\n\r\n\treturn canvas.toDataURL();\r\n}\n\n/**\r\n * Prepares dimensional coordinates for a task\r\n * @param {Object} task - task data object\r\n * @param {number} i - the index of the task\r\n * @param {Object} scales - the data for current scales; the return value of resetScales()\r\n * @param {number} taskHeight - the height of a task bar\r\n * @param {number} y - the top position of a task after which the current task will be placed (timeline mode)\r\n * @returns {Object} task data object\r\n */\r\nfunction updateTask(task, i, scales, taskHeight, y) {\r\n\tif (task.type === \"split\" && task.$data && task.$data.length) {\r\n\t\ttask.$data.forEach(k => getSizes(k, i, scales, taskHeight));\r\n\t} else {\r\n\t\tgetSizes(task, i, scales, taskHeight, y);\r\n\t}\r\n\treturn task;\r\n}\r\n\r\nfunction getSizes(task, i, scales, taskHeight, y) {\r\n\tconst { start, end, cellWidth, cellHeight, diff, minUnit, precise } = scales;\r\n\tconst startDate = task.start_date < start ? start : task.start_date;\r\n\tconst endDate = task.end_date > end ? end : task.end_date;\r\n\tconst astart = getUnitStart(minUnit, start);\r\n\r\n\tconst ms = task.type == \"milestone\";\r\n\ttask.$h = taskHeight;\r\n\ttask.$x =\r\n\t\tMath.round(diff(startDate, astart, precise) * cellWidth) -\r\n\t\t(ms ? task.$h / 2 : 0);\r\n\ttask.$w = ms\r\n\t\t? task.$h\r\n\t\t: Math.round(diff(endDate, startDate, precise, true) * cellWidth);\r\n\ttask.$y = webix.isUndefined(y)\r\n\t\t? cellHeight * i + (cellHeight - taskHeight) / 2\r\n\t\t: y;\r\n}\r\n\r\n/**\r\n * Updates start, end and duration fields of tasks during initial loading and updating\r\n * @param {Object} task - task data object\r\n * @param {Object} scales - (optional) the data for current scales; the return value of resetScales()\r\n * @param {string} mode - (optional) update mode, \"start\" or \"end\"\r\n * @param {number} dir - (optional) direction of change (-1 is the past, 1 is the future)\r\n */\r\nfunction updateTaskDuration(task, scales, mode, dir) {\r\n\tif (\r\n\t\ttask.start_date &&\r\n\t\ttask.end_date &&\r\n\t\ttask.start_date.valueOf() >= task.end_date.valueOf()\r\n\t) {\r\n\t\ttask.end_date = null;\r\n\t\ttask.duration = 1;\r\n\r\n\t\tif (mode) mode = \"move\";\r\n\t}\r\n\r\n\tif (scales) {\r\n\t\texcludeHolidays(task, scales, mode, dir);\r\n\t} else {\r\n\t\tif (task.type == \"milestone\") {\r\n\t\t\tgetMilestone(task);\r\n\t\t} else {\r\n\t\t\tif (!task.duration) {\r\n\t\t\t\ttask.duration = getDuration(task);\r\n\t\t\t}\r\n\t\t\tif (!task.end_date) {\r\n\t\t\t\ttask.end_date = getEnd(task);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Excludes holidays from start, end and duration of tasks (can't start or end on a holiday)\r\n * @param {Object} task - task data object\r\n * @param {Object} scales - the data for current scales; the return value of resetScales()\r\n * @param {string} mode - (optional) update mode, \"start\" or \"end\"\r\n * @param {number} dir - (optional) direction of change (-1 is the past, 1 is the future)\r\n */\r\nfunction excludeHolidays(task, scales, mode, dir) {\r\n\tif (task.type == \"milestone\") {\r\n\t\ttask.start_date = mode\r\n\t\t\t? toWorkday(task.start_date, false, scales, dir)\r\n\t\t\t: toClosestWorkday(task.start_date, scales); //on load\r\n\t\treturn getMilestone(task);\r\n\t}\r\n\r\n\tif (!mode) {\r\n\t\t//on load\r\n\t\ttask.start_date = toClosestWorkday(task.start_date, scales);\r\n\t\ttask.end_date = getEndWorkday(task, scales);\r\n\t\ttask.duration = getDuration(task, scales);\r\n\t} else {\r\n\t\tif (mode == \"start\" || mode == \"move\") {\r\n\t\t\ttask.start_date = toWorkday(task.start_date, false, scales, dir);\r\n\t\t\tif (!task.duration) task.duration = getDuration(task, scales);\r\n\t\t\tif (!task.end_date) task.end_date = getEndWorkday(task, scales);\r\n\t\t} else {\r\n\t\t\t//end, duration\r\n\t\t\tif (!task.end_date) task.end_date = getEndWorkday(task, scales);\r\n\t\t\tif (!task.duration) {\r\n\t\t\t\ttask.end_date = toWorkday(task.end_date, true, scales, dir);\r\n\t\t\t\ttask.duration = getDuration(task, scales);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction getMilestone(task) {\r\n\ttask.duration = 0;\r\n\ttask.end_date = task.start_date;\r\n}\r\n\r\n/**\r\n * Returns the end date of a task\r\n * @param {Object} task - task data object\r\n */\r\nfunction getEnd(task) {\r\n\tif (task.duration < 1)\r\n\t\treturn addUnit(\"hour\")(task.start_date, Math.floor(24 * task.duration));\r\n\telse return addUnit(\"day\")(task.start_date, task.duration);\r\n}\r\n\r\n/**\r\n * Returns end date excluding holidays from duration\r\n * @param {Object} task - task data object\r\n * @param {Object} scales - the data for current scales; the return value of resetScales()\r\n * @returns {Date} end date\r\n */\r\nfunction getEndWorkday(task, scales) {\r\n\tif (task.duration < 1) return getEnd(task);\r\n\r\n\tlet date = getDatePart(task.start_date);\r\n\tfor (let w = 0, d = 0; w < task.duration; ) {\r\n\t\tif (!scales.isHoliday(date)) {\r\n\t\t\t++w;\r\n\t\t\td = 0;\r\n\t\t} else {\r\n\t\t\tif (++d === 30) holidayGuard();\r\n\t\t}\r\n\r\n\t\tdate = addDays(date, 1);\r\n\t}\r\n\treturn date;\r\n}\r\n\r\n/**\r\n * Calculates the duration of a task\r\n * @param {Object} task - task data object\r\n * @param {Object} scales - the data for current scales; the return value of resetScales()\r\n * @returns {number} task duration\r\n */\r\nfunction getDuration(task, scales) {\r\n\tconst d = getDiff(\"day\")(task.end_date, task.start_date, true);\r\n\t// allow float duration for tasks smaller than day\r\n\tif (d < 1) return parseFloat(d.toFixed(2));\r\n\r\n\tif (!scales) return Math.floor(d);\r\n\r\n\tlet date = task.start_date;\r\n\tlet duration = 0;\r\n\twhile (date < task.end_date) {\r\n\t\tif (!scales.isHoliday(date)) ++duration;\r\n\t\tdate = addDays(date, 1);\r\n\t}\r\n\treturn duration;\r\n}\r\n\r\n/**\r\n * Moves a date from a holiday to the closest working day (priority to the future)\r\n * @param {Date} date - original date\r\n * @param {Object} scales - the data for current scales; the return value of resetScales()\r\n * @returns {Date} the date of a closest work day\r\n */\r\nfunction toClosestWorkday(date, scales) {\r\n\tlet left = date;\r\n\tlet right = date;\r\n\tlet notRight;\r\n\tlet d = 0;\r\n\r\n\twhile (\r\n\t\td < 30 &&\r\n\t\t(notRight = scales.isHoliday(right)) &&\r\n\t\tscales.isHoliday(left)\r\n\t) {\r\n\t\tleft = addDays(left, -1);\r\n\t\tright = addDays(right, 1);\r\n\t\td++;\r\n\t}\r\n\tif (d === 30) holidayGuard();\r\n\r\n\treturn !notRight ? right : left;\r\n}\r\n\r\nfunction holidayGuard() {\r\n\talert(\r\n\t\t\"No work days found within 30 days, check your isHoliday function!\",\r\n\t\t\"error\"\r\n\t);\r\n\tthrow \"Wrong isHoliday function\";\r\n}\r\n\r\n/**\r\n * Moves a date from a holiday to a working day in the given direction\r\n * @param {Date} date - the current date\r\n * @param {Boolean} end - indicates if this is the end of a task\r\n * @param {Object} scales - the data for current scales; the return value of resetScales()\r\n * @param {number} dir - the direction in which nearest workday will be located; -1 is the past, 1 is the future\r\n * @returns {Date} the date of a working day\r\n */\r\nfunction toWorkday(date, end, scales, dir) {\r\n\tlet d = 0;\r\n\r\n\twhile (d < 30 && scales.isHoliday(getCheckDate(date, end))) {\r\n\t\tdate = addDays(date, dir);\r\n\t\td++;\r\n\t}\r\n\r\n\tif (d === 30) holidayGuard();\r\n\r\n\treturn date;\r\n}\r\n\r\n/**\r\n * Returns the date for a holiday check\r\n * @param {Date} date - the date\r\n * @param {Boolean} end - if true, means it's the end date (end dates are exclusive)\r\n * @returns {Date} the date that will be used for a check\r\n */\r\nfunction getCheckDate(date, end) {\r\n\treturn end && !getTimePart(date) ? addDays(date, -1) : date;\r\n}\n\nconst delta = 20;\r\n\r\nconst updateLink = function(link, startTask, endTask, height) {\r\n\tconst dy = Math.round(height / 2);\r\n\tif (!startTask || !endTask) {\r\n\t\tlink.$p = \"\";\r\n\t\treturn link;\r\n\t}\r\n\r\n\tlet sx, sy, ex, ey;\r\n\tlet s_start = false;\r\n\tlet e_start = false;\r\n\r\n\tswitch (link.type) {\r\n\t\tcase 0:\r\n\t\t\te_start = true;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 1:\r\n\t\t\ts_start = true;\r\n\t\t\te_start = true;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 3:\r\n\t\t\ts_start = true;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tsx = s_start ? startTask.$x : startTask.$x + startTask.$w;\r\n\tsy = startTask.$y;\r\n\tex = e_start ? endTask.$x : endTask.$x + endTask.$w;\r\n\tey = endTask.$y;\r\n\r\n\tif (differentX(startTask, endTask, sx, ex, height) || sy !== ey) {\r\n\t\tconst lineCoords = getLineCoords(\r\n\t\t\tsx,\r\n\t\t\tsy + dy,\r\n\t\t\tex,\r\n\t\t\tey + dy,\r\n\t\t\ts_start,\r\n\t\t\te_start,\r\n\t\t\t38 / 2\r\n\t\t);\r\n\r\n\t\tconst arrowCoords = getArrowCoords(ex, ey + dy, e_start);\r\n\t\tlink.$p = `${lineCoords},${arrowCoords}`;\r\n\t} else {\r\n\t\tlink.$p = \"\";\r\n\t}\r\n\r\n\treturn link;\r\n};\r\n\r\nfunction differentX(startTask, endTask, sx, ex, height) {\r\n\treturn startTask.type === \"milestone\" || endTask.type === \"milestone\"\r\n\t\t? Math.abs(sx - ex) > height / 2\r\n\t\t: sx !== ex;\r\n}\r\n\r\nfunction getLineCoords(sx, sy, ex, ey, s_start, e_start, gapp) {\r\n\tconst shift = delta * (s_start ? -1 : 1);\r\n\tconst backshift = delta * (e_start ? -1 : 1);\r\n\r\n\tconst sx1 = sx + shift;\r\n\tconst ex1 = ex + backshift;\r\n\tconst line = [sx, sy, sx1, sy, 0, 0, 0, 0, ex1, ey, ex, ey];\r\n\r\n\tconst dx = ex1 - sx1;\r\n\tlet dy = ey - sy;\r\n\r\n\tconst same = e_start === s_start;\r\n\tif (!same && ((ex1 <= sx && e_start) || (ex1 > sx && !e_start))) {\r\n\t\tdy -= gapp;\r\n\t}\r\n\r\n\tif ((same && e_start && sx1 > ex1) || (same && !e_start && sx1 < ex1)) {\r\n\t\tline[4] = line[2] + dx;\r\n\t\tline[5] = line[3];\r\n\t\tline[6] = line[4];\r\n\t\tline[7] = line[5] + dy;\r\n\t} else {\r\n\t\tline[4] = line[2];\r\n\t\tline[5] = line[3] + dy;\r\n\t\tline[6] = line[4] + dx;\r\n\t\tline[7] = line[5];\r\n\t}\r\n\r\n\treturn line.join(\",\");\r\n}\r\n\r\nfunction getArrowCoords(x, y, start) {\r\n\tif (start) {\r\n\t\treturn `${x - 5},${y - 3},${x - 5},${y + 3},${x},${y}`;\r\n\t} else {\r\n\t\treturn `${x + 5},${y + 3},${x + 5},${y - 3},${x},${y}`;\r\n\t}\r\n}\r\n\r\nfunction newLink(box, start, end) {\r\n\tif (start && end) {\r\n\t\tconst width = end.x - start.x;\r\n\t\tconst height = end.y - start.y;\r\n\t\tconst left = (width > 0 ? start.x : end.x) - box.left;\r\n\t\tconst top = (height > 0 ? start.y : end.y) - box.top;\r\n\t\tconst p = `${width > 0 ? 0 : -width},${height > 0 ? 0 : -height},${\r\n\t\t\twidth > 0 ? width : 0\r\n\t\t},${height > 0 ? height : 0}`;\r\n\t\treturn { width: Math.abs(width), height: Math.abs(height), left, top, p };\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n}\n\nexports.addUnit = addUnit;\nexports.getDiff = getDiff;\nexports.getUnitStart = getUnitStart;\nexports.grid = grid;\nexports.newLink = newLink;\nexports.resetScales = resetScales;\nexports.smallerCount = smallerCount;\nexports.updateLink = updateLink;\nexports.updateTask = updateTask;\nexports.updateTaskDuration = updateTaskDuration;\n//# sourceMappingURL=wgantt.js.map\n","import HourscaleView from \"../common/hourscale\";\nimport SelectionMixin from \"helpers/selection\";\nimport EditRecurringMixin from \"helpers/editrecurring\";\nimport { initDnD, locateEvent } from \"helpers/dnd\";\nimport { shrinkTo, isToday } from \"helpers/dates\";\nimport { dayEventColor } from \"helpers/templates\";\nimport { getParams } from \"helpers/recurring\";\nimport CopyPasteMixin from \"helpers/copypaste\";\n\nexport default class DayEventsView extends HourscaleView {\n\tconstructor(app, config) {\n\t\tsuper(app);\n\n\t\t// when dayevents is a part of week\n\t\tif (config) {\n\t\t\tthis.WeekDayNum = config.day;\n\t\t}\n\t}\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"list\",\n\t\t\tlocalId: \"dayList\",\n\t\t\tcss: \"webix_scheduler_day_events\",\n\t\t\tscroll: false,\n\t\t\tautoheight: true,\n\t\t\ttemplate: \"\",\n\t\t\ttype: {\n\t\t\t\theight: 42,\n\t\t\t\tcss: \"webix_scheduler_day_scale_item\",\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_scheduler_day_event: e => this.ShowEvent(e),\n\t\t\t},\n\t\t\tonDblClick: {\n\t\t\t\twebix_scheduler_day_scale_item: (_e, h) => this.ShowNew(h),\n\t\t\t},\n\t\t};\n\t}\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tthis.List = this.$$(\"dayList\");\n\n\t\tSelectionMixin(this, \"scale\");\n\t\tEditRecurringMixin(this);\n\n\t\tthis.List.$setSize = function(x, y) {\n\t\t\tif (webix.ui.view.prototype.$setSize.call(this, x, y)) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t};\n\n\t\tthis.minEventHeight = 62;\n\t\tthis.ParseHours();\n\n\t\tthis.on(this.State.$changes, \"readonly\", () => this.List.render());\n\n\t\tthis.List.attachEvent(\"onAfterRender\", () => this.RenderEvents());\n\t\tinitDnD.call(this, this.List, \"day\");\n\n\t\tconst compact = this.getParam(\"compact\", true);\n\t\tif (this.app.config.copypaste && !webix.env.mobile && !compact)\n\t\t\tCopyPasteMixin(this, this.List);\n\t}\n\n\turlChange() {\n\t\tthis.data = this.getParam(\"data\");\n\t\tif (this.data) {\n\t\t\tthis.Day = webix.Date.datePart(this.State.date, true);\n\n\t\t\tif (this.WeekDayNum > -1) {\n\t\t\t\tconst weekStart = this.data.start;\n\t\t\t\tthis.Day = webix.Date.add(weekStart, this.WeekDayNum, \"day\", true);\n\t\t\t}\n\n\t\t\tconst to = webix.Date.add(this.Day, 1, \"day\", true);\n\t\t\tthis.Events = this.FilterToday(this.Day, to);\n\n\t\t\tif (this._marker_update_interval)\n\t\t\t\tthis._marker_update_interval = clearInterval(\n\t\t\t\t\tthis._marker_update_interval\n\t\t\t\t);\n\n\t\t\tif (isToday(this.Day))\n\t\t\t\tthis._marker_update_interval = setInterval(() => {\n\t\t\t\t\tif (isToday(this.Day)) this.UpdateMarkerPosition();\n\t\t\t\t\telse {\n\t\t\t\t\t\twebix.html.remove(this._Marker);\n\t\t\t\t\t\tthis._Marker = this._marker_update_interval = clearInterval(\n\t\t\t\t\t\t\tthis._marker_update_interval\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}, 5 * 60 * 1000); // 5 minutes\n\n\t\t\tthis.List.render();\n\t\t}\n\t}\n\n\tGetEvent(id) {\n\t\tfor (let i = 0; i < this.Events.length; i++)\n\t\t\tif (this.Events[i].id == id) return this.Events[i];\n\t\treturn null;\n\t}\n\n\tFilterToday(value, to) {\n\t\tif (this.WeekDayNum > -1) {\n\t\t\treturn this.data.single.filter(ev => {\n\t\t\t\treturn ev.start_date < to && ev.end_date > value;\n\t\t\t});\n\t\t}\n\t\treturn this.data.single;\n\t}\n\n\tMarkToday() {\n\t\tif (this.Day && isToday(this.Day)) {\n\t\t\tconst marker = webix.html.create(\"div\", {\n\t\t\t\tclass: \"webix_scheduler_today_marker\",\n\t\t\t});\n\t\t\tthis._Marker = this.List.$view.firstChild.appendChild(marker);\n\t\t\tthis.UpdateMarkerPosition();\n\t\t} else {\n\t\t\tthis._Marker = null;\n\t\t}\n\t}\n\n\tUpdateMarkerPosition() {\n\t\tif (this._Marker) {\n\t\t\tconst current = new Date();\n\t\t\tconst time = current.getHours() * 60 + current.getMinutes();\n\t\t\tthis._Marker.style.top =\n\t\t\t\tMath.round((time * this.List.type.height) / 60) + \"px\";\n\t\t}\n\t}\n\n\tRenderEvents() {\n\t\tconst evs = this.Events;\n\t\tif (evs && evs.length) {\n\t\t\tthis.PrepareEvents();\n\t\t\tconst container = webix.html.create(\"div\", {\n\t\t\t\trole: \"presentation\",\n\t\t\t});\n\t\t\tcontainer.innerHTML = evs.map(i => this.ToHTML(i)).join(\"\");\n\t\t\tthis._DataObj = this.List.$view.firstChild.appendChild(container);\n\t\t\tthis.app.callEvent(\"events:rendered\", []);\n\t\t}\n\t\tthis.MarkToday();\n\t}\n\n\tPrepareEvents() {\n\t\tconst evs = this.Events;\n\t\tlet stack = [];\n\n\t\tfor (let i = 0; i < evs.length; i++) {\n\t\t\tconst ev = evs[i];\n\t\t\tev.$inner = false;\n\n\t\t\tlet orderSet = this.PruneStack(ev, stack);\n\n\t\t\tif (stack.length) {\n\t\t\t\tstack[stack.length - 1].$inner = true;\n\t\t\t}\n\n\t\t\tif (!orderSet) {\n\t\t\t\tif (stack.length) {\n\t\t\t\t\tev.$sorder = stack[stack.length - 1].$sorder + 1;\n\t\t\t\t\tev.$inner = false;\n\t\t\t\t} else {\n\t\t\t\t\tev.$sorder = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// insert new event into stack\n\t\t\tstack.splice(ev.$sorder, 0, ev);\n\t\t\tif (stack.length > (stack.max_count || 0)) {\n\t\t\t\tstack.max_count = stack.length;\n\t\t\t}\n\t\t}\n\n\t\tthis.SetPosition(stack, evs);\n\t}\n\n\t// returns true if new event was marked for inserting;\n\t// false if stack is empty or there is no suitable place for new event inside\n\tPruneStack(newEvent, stack) {\n\t\t// clean events from top of stack if new event starts after they end\n\t\twhile (\n\t\t\tstack.length &&\n\t\t\tthis.GetEventEndDate(stack[stack.length - 1]) <= newEvent.start_date\n\t\t) {\n\t\t\tstack.splice(stack.length - 1, 1);\n\t\t}\n\n\t\t// clean 1 event from within remaining stack if this event ends before new event starts\n\t\tfor (let j = 0; j < stack.length; j++) {\n\t\t\tif (this.GetEventEndDate(stack[j]) <= newEvent.start_date) {\n\t\t\t\tnewEvent.$sorder = stack[j].$sorder; // mark new event for this place in stack\n\t\t\t\tstack.splice(j, 1);\n\t\t\t\tnewEvent.$inner = true;\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tSetPosition(stack, evs) {\n\t\t//scale start correction\n\t\tconst delta = this.List.getFirstId() * this.List.type.height;\n\n\t\tfor (let i = 0; i < evs.length; i++) {\n\t\t\tconst ev = evs[i];\n\n\t\t\tev.$count = stack.max_count;\n\t\t\tlet temp_width = Math.floor(this.List.$width / ev.$count);\n\t\t\tev.$left = ev.$sorder * temp_width;\n\t\t\tif (!ev.$inner) temp_width = temp_width * (ev.$count - ev.$sorder);\n\t\t\tev.$width = temp_width - 8;\n\n\t\t\tconst evCorrectedCopy = shrinkTo(\n\t\t\t\tthis.Day,\n\t\t\t\twebix.Date.add(this.Day, 1, \"day\", true)\n\t\t\t)(ev);\n\t\t\tconst sm =\n\t\t\t\tevCorrectedCopy.start_date.getHours() * 60 +\n\t\t\t\tevCorrectedCopy.start_date.getMinutes();\n\t\t\tconst em =\n\t\t\t\tevCorrectedCopy.end_date.getHours() * 60 +\n\t\t\t\t\tevCorrectedCopy.end_date.getMinutes() || 24 * 60;\n\n\t\t\tev.$top = Math.round((sm * this.List.type.height) / 60) - delta;\n\t\t\tev.$height = Math.max(\n\t\t\t\tthis.minEventHeight,\n\t\t\t\t((em - sm) * this.List.type.height) / 60\n\t\t\t);\n\t\t}\n\t}\n\n\tToHTML(obj) {\n\t\tconst content = this.EventTemplate(obj);\n\t\treturn this.EventTemplateStart(obj) + content + \"</div>\";\n\t}\n\n\tGetEventEndDate(ev) {\n\t\tlet end_date = ev.end_date;\n\t\tconst duration =\n\t\t\t(((ev.end_date - ev.start_date) / 60000) * this.List.type.height) / 60;\n\n\t\tif (duration < this.minEventHeight) {\n\t\t\tend_date = webix.Date.add(\n\t\t\t\tev.start_date,\n\t\t\t\tMath.ceil((this.minEventHeight / this.List.type.height) * 60),\n\t\t\t\t\"minute\",\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\t\treturn end_date;\n\t}\n\n\tEventTemplateStart(obj) {\n\t\tconst css = `class=\"webix_scheduler_day_event ${\n\t\t\tthis.State.selected &&\n\t\t\t(obj.id == this.State.selected.id || obj.id == this.State.selected.date)\n\t\t\t\t? \"webix_scheduler_event_selected\"\n\t\t\t\t: \"\"\n\t\t} ${obj.$past ? \"webix_scheduler_past_event\" : \"\"}\"`;\n\n\t\treturn `<div webix_e_id='${obj.id}' ${css} style='left:${\n\t\t\tobj.$left\n\t\t}px; top:${obj.$top}px; width:${obj.$width}px; height:${\n\t\t\tobj.$height\n\t\t}px; ${dayEventColor(obj)}'>`;\n\t}\n\n\tEventTemplate(obj) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst resizer = this.State.readonly\n\t\t\t? \"\"\n\t\t\t: \"<div class='webix_icon webix_scheduler_resizer' webix_resizer='true'></div>\";\n\n\t\treturn `<div class=\"webix_scheduler_inner_day\"><span class=\"webix_scheduler_event_name\">${obj.text ||\n\t\t\t_(\n\t\t\t\t\"(No title)\"\n\t\t\t)}</span><div class=\"webix_scheduler_event_time\">${webix.i18n.timeFormatStr(\n\t\t\tobj.start_date\n\t\t)} - ${webix.i18n.timeFormatStr(obj.end_date)}</div></div>${resizer}`;\n\t}\n\n\tShowEvent(e) {\n\t\tconst event = locateEvent(e, this.List.$view);\n\t\tif (event.id && event.id != \"0\") {\n\t\t\tconst obj = this.GetEvent(event.id);\n\t\t\tconst sel = webix.extend(event, getParams(obj), true);\n\t\t\tthis.State.selected = sel;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns the target date for an event\n\t * @param {(string|number)} h - the ID of the hour segment of the main view\n\t * @returns {Date}\n\t */\n\tGetTargetDate(h) {\n\t\tconst date = webix.Date.copy(this.Day || this.State.date);\n\t\tif (h) date.setHours(h);\n\t\treturn date;\n\t}\n\n\t/**\n\t * Sets selected in the global reactive state to display a newly created event\n\t * @param {(string|number)} h - the ID of the hour segment of the main view\n\t */\n\tShowNew(h) {\n\t\tconst state = this.State;\n\t\tif (!state.readonly && !state.clipboard) {\n\t\t\tstate.selected = { id: \"0\", date: this.GetTargetDate(h) };\n\t\t}\n\t}\n\n\t/**\n\t * Updates selected in global reactive state\n\t * @param {(string|number)} id - the ID of the event\n\t * @param {Object} newEvent - the data of the new event that should be selected\n\t */\n\tUpdateSelection(id, newEvent) {\n\t\tif (this.State.selected) {\n\t\t\tnewEvent.id = id;\n\t\t\tthis.State.selected = getParams(newEvent);\n\t\t}\n\t}\n}\n","import MultiMoreView from \"../common/multimore\";\nimport SelectionMixin from \"helpers/selection\";\nimport { dayEventColor } from \"helpers/templates\";\nimport { getParams } from \"helpers/recurring\";\nimport CopyPasteMixin from \"helpers/copypaste\";\nimport EditRecurringMixin from \"helpers/editrecurring\";\n\nexport default class MultidayEventList extends MultiMoreView {\n\tconfig() {\n\t\tconst ui = super.config();\n\n\t\tui.cols[1] = {\n\t\t\tview: \"list\",\n\t\t\tlocalId: \"multiDayList\",\n\t\t\tautoheight: true,\n\t\t\tscroll: false,\n\t\t\tcss: \"webix_scheduler_multilist\",\n\t\t\ttype: {\n\t\t\t\theight: 36,\n\t\t\t\ttemplate: (obj, common) => this.EventTemplate(obj, common),\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_scheduler_multiday_event: (e, id, node) =>\n\t\t\t\t\tthis.ShowEvent(id, node),\n\t\t\t},\n\t\t};\n\n\t\treturn ui;\n\t}\n\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tsuper.init();\n\n\t\tthis._DataObj = this.List.$view.firstChild;\n\t\tSelectionMixin(this, \"multi\", true);\n\n\t\tthis.MoreIcon = this.$$(\"more\");\n\t\tthis._moreBtn = {\n\t\t\tid: \"$wsh_multi_more\",\n\t\t\t$css: \"webix_scheduler_multi_more\",\n\t\t};\n\n\t\tthis.on(this.$$(\"multiDayList\"), \"onAfterRender\", () => {\n\t\t\tthis.app.callEvent(\"events:rendered\", []);\n\t\t});\n\n\t\tif (this.app.config.copypaste && !webix.env.mobile) {\n\t\t\tEditRecurringMixin(this);\n\t\t\tCopyPasteMixin(this, this.List, { multi: true });\n\t\t}\n\t}\n\n\turlChange() {\n\t\tconst data = this.getParam(\"data\");\n\t\tif (data) {\n\t\t\tthis.LimitData(data.multi);\n\t\t\tthis.List.clearAll();\n\t\t\tthis.List.parse(data.multi);\n\t\t}\n\t}\n\n\tEventTemplate(obj, common) {\n\t\tconst height = common.height - 8;\n\t\tconst size = `height:${height}px; line-height:${height}px; width:calc(100% - 5px);`;\n\t\tconst color = obj.id !== \"$wsh_multi_more\" ? dayEventColor(obj) : \"\";\n\t\tconst css = this.GetStyle(obj);\n\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn `\n\t\t\t<div\n\t\t\t\tclass=\"${css}\"\n\t\t\t\tstyle=\"${size} ${color}\">\n\t\t\t\t\t${obj.text || _(\"(No title)\")}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tGetStyle(obj) {\n\t\tlet css = \"webix_scheduler_multiday_event\";\n\t\tif (obj.id == \"$wsh_multi_more\") return css;\n\n\t\tconst date = this.State.date;\n\t\tconst end =\n\t\t\t!obj.all_day && !webix.Date.timePart(obj.end_date)\n\t\t\t\t? webix.Date.add(obj.end_date, -1, \"day\", true)\n\t\t\t\t: obj.end_date;\n\n\t\tcss +=\n\t\t\tthis.State.selected &&\n\t\t\t(obj.id == this.State.selected.id || obj.id == this.State.selected.date)\n\t\t\t\t? \" webix_scheduler_event_selected\"\n\t\t\t\t: \"\";\n\n\t\tcss += obj.$past ? \" webix_scheduler_past_event\" : \"\";\n\n\t\tif (obj.start_date < date) css += \" webix_scheduler_event_break_left\";\n\t\tif (end >= webix.Date.add(date, 1, \"day\", true))\n\t\t\tcss += \" webix_scheduler_event_break_right\";\n\n\t\treturn css;\n\t}\n\n\tLimitData(data) {\n\t\tif (data.length > this.maxVisibleLines) {\n\t\t\tconst excess = data.length - 2;\n\t\t\tconst _ = this.app.getService(\"locale\")._;\n\t\t\tthis._moreBtn.text = `${excess} ${_(\"more\")}`;\n\n\t\t\tif (this._expandState === \"down\") {\n\t\t\t\tthis._reserve = data.splice(2, excess, this._moreBtn);\n\t\t\t} else {\n\t\t\t\tthis._reserve = data.slice(2);\n\t\t\t}\n\n\t\t\tthis.SetMoreIcon(this._expandState);\n\t\t\tthis._reserveIds = this._reserve.map(d => d.id);\n\t\t} else {\n\t\t\tthis.SetMoreIcon();\n\t\t}\n\t}\n\n\tWrapData() {\n\t\tif (!this._inAnimation) {\n\t\t\tthis._inAnimation = true;\n\t\t\tthis._expandState = \"down\";\n\n\t\t\tconst height =\n\t\t\t\tthis.List.$height -\n\t\t\t\t(this._reserveIds.length - 1) * this.List.type.height;\n\t\t\tthis.Animate(\"down\", height, () => {\n\t\t\t\tthis.List.add(this._moreBtn);\n\t\t\t\tthis.List.remove(this._reserveIds);\n\t\t\t});\n\t\t}\n\t}\n\n\tExpandData() {\n\t\tif (!this._inAnimation) {\n\t\t\tthis._inAnimation = true;\n\t\t\tthis._expandState = \"up\";\n\n\t\t\tthis.Animate(\"up\");\n\n\t\t\tthis.List.remove(\"$wsh_multi_more\");\n\t\t\tthis.List.parse(this._reserve);\n\t\t}\n\t}\n\n\t// height change and delay for animation\n\tAnimate(mode, height, handler) {\n\t\tthis.List.$view.style.transition = \"height 150ms\";\n\t\tif (height) this.List.$view.style.height = `${height}px`;\n\n\t\tsetTimeout(() => {\n\t\t\tif (handler) handler();\n\n\t\t\tthis.List.$view.style.transition = \"\";\n\t\t\tthis._inAnimation = false;\n\t\t\tthis.SetMoreIcon(mode);\n\t\t}, 150);\n\t}\n\n\tSetMoreIcon(mode) {\n\t\tif (!mode) {\n\t\t\tthis.MoreIcon.setHTML(\"\");\n\t\t} else {\n\t\t\tthis._expandState = mode;\n\n\t\t\tconst tooltip = mode === \"up\" ? \"Collapse\" : \"Expand\";\n\t\t\tconst _ = this.app.getService(\"locale\")._;\n\t\t\tthis.MoreIcon.setHTML(\n\t\t\t\t`<div class=\"webix_scheduler_more_icon webix_icon wxi-angle-${mode}\" webix_tooltip=\"${_(\n\t\t\t\t\t`${tooltip} all-day events`\n\t\t\t\t)}\"><div>`\n\t\t\t);\n\t\t}\n\t}\n\n\tShowEvent(id, node) {\n\t\tif (id === \"$wsh_multi_more\") {\n\t\t\tthis.ExpandData();\n\t\t} else {\n\t\t\tconst obj = this.List.getItem(id);\n\t\t\tconst sel = getParams(obj);\n\t\t\tsel.node = node;\n\t\t\tthis.State.selected = sel;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns the data object of an event\n\t * @param {(string|number)} id\n\t * @returns {Object}\n\t */\n\tGetEvent(id) {\n\t\treturn this.List.getItem(id);\n\t}\n\n\t/**\n\t * Returns the target date for an event\n\t * @returns {Date}\n\t */\n\tGetTargetDate() {\n\t\treturn this.State.date;\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport MultidayEventList from \"./multiday\";\nimport DayEventsView from \"./events\";\nimport HourscaleView from \"../common/hourscale\";\nimport { isMultiDay } from \"helpers/dates\";\n\nexport default class DayView extends JetView {\n\tconfig() {\n\t\tconst header = {\n\t\t\tview: \"template\",\n\t\t\tlocalId: \"header\",\n\t\t\tcss: \"webix_scheduler_day_header\",\n\t\t\theight: 32,\n\t\t\ttemplate: obj => {\n\t\t\t\treturn obj.date ? webix.Date.dateToStr(\"%l\")(obj.date) : \"\";\n\t\t\t},\n\t\t};\n\n\t\tconst config = {\n\t\t\tcss: \"webix_scheduler_day\",\n\t\t\trows: [\n\t\t\t\theader,\n\t\t\t\t{\n\t\t\t\t\tlocalId: \"multi\",\n\t\t\t\t\thidden: true,\n\t\t\t\t\tcols: [MultidayEventList],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlocalId: \"scroll\",\n\t\t\t\t\tview: \"scrollview\",\n\t\t\t\t\tcss: \"webix_scheduler_day_scroll\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tcols: [HourscaleView, DayEventsView],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\treturn config;\n\t}\n\n\tinit() {\n\t\tconst state = this.app.getState();\n\t\tthis.on(state.$changes, \"date\", value => this.RefreshData(value));\n\t\tthis.on(state.$changes, \"active\", () => this.RefreshData(state.date));\n\t\tthis.on(this.app, \"events:refresh\", () => this.RefreshData(state.date));\n\n\t\t// updates made in form\n\t\tconst events = this.app.getService(\"local\").events(true);\n\t\tthis.on(\n\t\t\tevents.data,\n\t\t\t\"onStoreUpdated\",\n\t\t\t(_i, _o, mode) => mode && this.RefreshData(state.date)\n\t\t);\n\n\t\tthis.on(state.$changes, \"selected\", v => {\n\t\t\tif (v && !state.clipboard) this.ScrollScale(v);\n\t\t});\n\t}\n\n\tRefreshData(value) {\n\t\tthis.$$(\"header\").setValues({ date: value });\n\n\t\tthis.GetDay(value).then(data => {\n\t\t\t// this.app will be null if compact trigger was called in main.js\n\t\t\tif (this.app) this.setParam(\"data\", data, true);\n\n\t\t\tif (data.multi.length) {\n\t\t\t\tthis.$$(\"multi\").show();\n\t\t\t} else this.$$(\"multi\").hide();\n\t\t});\n\t}\n\n\tGetDay(date) {\n\t\tconst end = webix.Date.add(date, 1, \"day\", true);\n\t\treturn this.app\n\t\t\t.getService(\"local\")\n\t\t\t.getEvents(date, end)\n\t\t\t.then(evs => {\n\t\t\t\tconst multi = [],\n\t\t\t\t\tsingle = [];\n\t\t\t\tevs.forEach(ev => {\n\t\t\t\t\tif (isMultiDay(ev)) {\n\t\t\t\t\t\tmulti.push(ev);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsingle.push(ev);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn { multi, single };\n\t\t\t});\n\t}\n\n\tScrollScale(v) {\n\t\tif (v.id === \"0\" && !v.date) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst y = (new Date().getHours() + 2) * 40;\n\t\t\t\tthis.$$(\"scroll\").scrollTo(0, y);\n\t\t\t}, 100);\n\t\t}\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class CalendarView extends JetView {\n\tconfig() {\n\t\tthis.Events = {};\n\n\t\treturn {\n\t\t\tview: \"calendar\",\n\t\t\tlocalId: \"calendar\",\n\t\t\tevents: (day, isOutside) => this.MarkEvent(day, isOutside),\n\t\t\ticons: false,\n\t\t\tnavigation: false,\n\t\t\tmonthHeader: false,\n\t\t\tskipEmptyWeeks: true,\n\t\t\twidth: 0,\n\t\t\theight: 410,\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.Calendar = this.getRoot();\n\t\tthis.Calendar.attachEvent(\"onAfterDateSelect\", date => {\n\t\t\tthis.app.getState().date = webix.Date.dayStart(date);\n\t\t});\n\t}\n\n\turlChange() {\n\t\tthis.data = this.getParam(\"data\");\n\t\tif (this.data) this.RefreshData();\n\t}\n\n\tRefreshData() {\n\t\tlet { start, weeks, data } = this.data;\n\t\tconst end = webix.Date.add(start, weeks, \"week\", true);\n\n\t\tthis.Events = {};\n\n\t\twhile (start < end) {\n\t\t\tconst next = webix.Date.add(start, 1, \"day\", true);\n\t\t\tfor (let i = 0; i < data.length; i++)\n\t\t\t\tif (\n\t\t\t\t\t(data[i].all_day\n\t\t\t\t\t\t? data[i].end_date >= start\n\t\t\t\t\t\t: data[i].end_date > start) &&\n\t\t\t\t\tdata[i].start_date < next\n\t\t\t\t)\n\t\t\t\t\tthis.Events[start.valueOf()] = true;\n\t\t\tstart = next;\n\t\t}\n\n\t\tthis.Calendar.setValue(this.app.getState().date);\n\t}\n\n\t// adds dots to days with events\n\tMarkEvent(day, isOutside) {\n\t\tlet css = \"\";\n\n\t\tif (!isOutside) css += webix.Date.isHoliday(day) || \"\";\n\t\tif (this.Events[day.valueOf()]) css += \" webix_cal_day_with_event\";\n\n\t\treturn css;\n\t}\n}\n","/* eslint-disable indent */\n\nimport { JetView } from \"webix-jet\";\nimport EditRecurringMixin from \"helpers/editrecurring\";\nimport { daysBetweenInclusive } from \"helpers/dates\";\nimport { marker, dayEventColor } from \"helpers/templates\";\nimport { getParams } from \"helpers/recurring\";\nimport { initDnD } from \"helpers/dnd\";\n\nexport default class MoreWindowView extends JetView {\n\tconstructor(app, c) {\n\t\tsuper(app);\n\t\tthis.Events = c.events;\n\t\tthis.drag = webix.isUndefined(c.drag) ? true : c.drag;\n\t}\n\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\twidth: 266,\n\t\t\tpadding: 8,\n\t\t\tminHeight: 70,\n\t\t\trelative: \"right\",\n\t\t\tbody: {\n\t\t\t\tview: \"list\",\n\t\t\t\tcss: \"webix_scheduler_more_list\",\n\t\t\t\tborderless: true,\n\t\t\t\tautoheight: true,\n\t\t\t\tyCount: 3,\n\t\t\t\ttooltip: {\n\t\t\t\t\ttemplate: \"\",\n\t\t\t\t},\n\t\t\t\tonClick: {\n\t\t\t\t\twebix_scheduler_month_event: (e, id) => this.ShowEvent(id),\n\t\t\t\t\twebix_scheduler_month_event_single: (e, id) => this.ShowEvent(id),\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\theight: 56,\n\t\t\t\t\ttemplate: (o, c) => this.MoreTemplate(o, c, _),\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\tinit(view) {\n\t\tthis.Win = view;\n\n\t\tEditRecurringMixin(this);\n\n\t\tif (this.drag) initDnD.call(this, view.getBody(), \"more\", true);\n\t}\n\n\tMoreTemplate(obj, _c, _) {\n\t\tconst i18n = webix.i18n;\n\t\tconst single = !daysBetweenInclusive(\n\t\t\tobj.start_date,\n\t\t\tobj.all_day ? webix.Date.add(obj.end_date, 1, \"day\", true) : obj.end_date\n\t\t);\n\t\tconst style = single ? \"\" : dayEventColor(obj);\n\n\t\tconst oneDay =\n\t\t\t!single && this.webix.Date.equal(obj.start_date, obj.end_date);\n\n\t\tlet css = `webix_scheduler_month_event${single ? \"_single\" : \"\"}`;\n\t\tif (obj.$past) css += \" webix_scheduler_past_event\";\n\n\t\treturn `\n\t\t\t<div\n\t\t\t\tclass=\"${css}\"\n\t\t\t\tstyle=\"${style}\"\n\t\t\t>\n\t\t\t\t${single ? marker(obj) : \"\"}\n\t\t\t\t<div webix_tooltip=\"${obj.text}\" class=\"webix_event_text\">${obj.text ||\n\t\t\t_(\"(No title)\")}</div>\n\t\t\t\t<div class=\"webix_event_time\">\n\t\t\t\t\t${this.DayFormatStr(obj.start_date)}\n\t\t\t\t\t${\n\t\t\t\t\t\toneDay\n\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t: `${i18n.timeFormatStr(obj.start_date)} -\n\t\t\t\t\t\t${single ? \"\" : \" \" + this.DayFormatStr(obj.end_date)}\n\t\t\t\t\t\t${i18n.timeFormatStr(obj.end_date)}`\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tDayFormatStr(date) {\n\t\treturn webix.Date.dateToStr(\"%F %j\")(date);\n\t}\n\n\tShowEvent(id) {\n\t\tconst obj = this.Events.getItem(id);\n\t\tthis.app.getState().selected = getParams(obj);\n\t\tthis.HideWindow();\n\t}\n\n\tShowWindow(id, node, data) {\n\t\tif (this.ID === id && this.Win.isVisible()) return this.Win.hide();\n\n\t\tthis.ID = id;\n\t\tdata = data.map(v => this.Events.getItem(v));\n\n\t\tconst list = this.Win.getBody();\n\t\tlist.clearAll();\n\t\tlist.parse(data);\n\n\t\tthis.Win.show(node);\n\t}\n\n\tHideWindow() {\n\t\tthis.Win.hide();\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport MoreWindowView from \"./more\";\nimport SelectionMixin from \"helpers/selection\";\nimport EditRecurringMixin from \"helpers/editrecurring\";\nimport { marker, dayEventColor, templateStart } from \"helpers/templates\";\nimport { initDnD, locateEvent } from \"helpers/dnd\";\nimport { daysBetweenInclusive, isToday } from \"helpers/dates\";\nimport { getParams } from \"helpers/recurring\";\nimport CopyPasteMixin from \"helpers/copypaste\";\n\nexport default class MonthEventsView extends JetView {\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"dataview\",\n\t\t\tcss: \"webix_scheduler_calendar\",\n\t\t\tprerender: true,\n\t\t\txCount: 7,\n\t\t\tyCount: 5,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tscroll: false,\n\t\t\ttooltip: {\n\t\t\t\ttemplate: \"\",\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_cal_date: (_ev, id) => this.ShowDay(id),\n\t\t\t\twebix_scheduler_month_event: ev => this.ShowEvent(ev),\n\t\t\t\twebix_scheduler_month_event_single: ev => this.ShowEvent(ev),\n\t\t\t\twebix_scheduler_more: (_ev, id) => this.ShowMore(id),\n\t\t\t},\n\t\t\tonDblClick: {\n\t\t\t\twebix_cal_day: (_e, id) => this.ShowNew(id),\n\t\t\t},\n\t\t\ttype: {\n\t\t\t\theight: \"auto\",\n\t\t\t\twidth: \"auto\",\n\t\t\t\ttemplate: (o, c) => this.CalendarTemplate(o, c),\n\t\t\t\ttemplateStart,\n\t\t\t\theaderHeight: 32,\n\t\t\t\teventHeight: 28,\n\t\t\t\tpadding: 8,\n\t\t\t},\n\t\t};\n\t}\n\n\tinit(view) {\n\t\tthis.State = this.app.getState();\n\t\tthis.Calendar = view;\n\t\tview.type.master = this.Calendar;\n\n\t\tSelectionMixin(this, \"month\");\n\t\tEditRecurringMixin(this);\n\n\t\tthis.Events = new webix.DataCollection({});\n\t\tthis.MoreWindow = this.ui(\n\t\t\tnew (this.app.dynamic(MoreWindowView))(this.app, {\n\t\t\t\tevents: this.Events,\n\t\t\t})\n\t\t);\n\n\t\tview.attachEvent(\"onAfterRender\", () => this.RenderEvents());\n\t\tinitDnD.call(this, this.Calendar, \"month\");\n\n\t\tif (this.app.config.copypaste && !webix.env.mobile)\n\t\t\tCopyPasteMixin(this, view);\n\t}\n\n\turlChange() {\n\t\tthis.data = this.getParam(\"data\", true); // IE hack\n\t\tif (this.data) this.RefreshData();\n\t}\n\n\tCalendarTemplate(obj) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tlet html = `<span class=\"webix_cal_date\">${obj.date.getDate()}</span>`;\n\t\tif (obj.$more && obj.$more.length) {\n\t\t\thtml += `<div class=\"webix_scheduler_more\">${obj.$more.length} ${_(\n\t\t\t\t\"more\"\n\t\t\t)}</div>`;\n\t\t}\n\t\treturn html;\n\t}\n\n\tGetDayCss(day, month) {\n\t\tlet css = \"webix_cal_day\";\n\t\tif (isToday(day)) css += \" webix_cal_today\";\n\t\tif (day.getMonth() != month) css += \" webix_cal_outside\";\n\t\telse css += \" \" + (webix.Date.isHoliday(day) || \"\");\n\t\treturn css;\n\t}\n\n\tGetMonthData() {\n\t\tconst data = [];\n\t\tconst { start, weeks } = this.data;\n\t\tconst month = webix.Date.add(start, 1, \"week\", true).getMonth();\n\n\t\tlet day = webix.Date.copy(start);\n\t\tfor (let i = 0; i < weeks * 7; i++) {\n\t\t\tconst obj = {\n\t\t\t\tdate: webix.Date.copy(day),\n\t\t\t\t$css: this.GetDayCss(day, month),\n\t\t\t};\n\n\t\t\tif ((i + 1) % 7 === 0) obj.right = true;\n\t\t\tif (i >= (weeks - 1) * 7) obj.bottom = true;\n\n\t\t\tdata.push(obj);\n\t\t\twebix.Date.add(day, 1, \"day\");\n\t\t}\n\t\treturn data;\n\t}\n\n\tRenderEvents() {\n\t\t// No Events, No Render\n\t\tif (!this.Events.count() || !this.Calendar.count()) return;\n\n\t\tconst container = webix.html.create(\"div\", {\n\t\t\trole: \"presentation\",\n\t\t\tclass: \"webix_scheduler_month_events\",\n\t\t});\n\n\t\tconst { start } = this.data;\n\t\tconst type = this.Calendar.type;\n\t\tconst maxLines = Math.floor(\n\t\t\t(type.height - type.headerHeight + type.padding - 2) /\n\t\t\t\t(type.eventHeight + type.padding)\n\t\t);\n\n\t\tlet wStart = webix.Date.copy(start);\n\t\tlet wEnd = webix.Date.add(wStart, 1, \"week\", true);\n\n\t\tlet html = \"\";\n\t\tlet cache = {};\n\t\tconst me = this.GetTargetDate(this.Calendar.getLastId());\n\t\tconst ms = this.GetTargetDate(this.Calendar.getFirstId());\n\t\tthis.Calendar.data.each(function(day, dayIndex) {\n\t\t\t// next week\n\t\t\tif (day.date >= wEnd) {\n\t\t\t\tcache = {};\n\t\t\t\twStart = wEnd;\n\t\t\t\twEnd = webix.Date.add(wStart, 1, \"week\", true);\n\t\t\t}\n\n\t\t\tconst more = [];\n\t\t\tconst dayHTML = [];\n\t\t\tthis.Events.data.each(function(ev) {\n\t\t\t\tconst id = ev.id;\n\n\t\t\t\t// will not be this week\n\t\t\t\tif (\n\t\t\t\t\tev.start_date >= wEnd ||\n\t\t\t\t\tev.end_date < wStart ||\n\t\t\t\t\t(!ev.all_day && webix.Date.equal(ev.end_date, wStart))\n\t\t\t\t)\n\t\t\t\t\treturn;\n\n\t\t\t\t// if already processed - check and skip\n\t\t\t\tif (!webix.isUndefined(cache[id])) {\n\t\t\t\t\tif (\n\t\t\t\t\t\t(day.date <= ev.end_date && ev.all_day) ||\n\t\t\t\t\t\tday.date < ev.end_date\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (cache[id] >= maxLines) {\n\t\t\t\t\t\t\tmore.push(id);\n\t\t\t\t\t\t} else dayHTML[cache[id]] = \"\";\n\t\t\t\t\t} else delete cache[id];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// today\n\t\t\t\tif (\n\t\t\t\t\tev.start_date < webix.Date.add(day.date, 1, \"day\", true) &&\n\t\t\t\t\tev.end_date >= day.date\n\t\t\t\t) {\n\t\t\t\t\tlet index = 0;\n\t\t\t\t\t// search for the first available index\n\t\t\t\t\twhile (!webix.isUndefined(dayHTML[index])) index++;\n\n\t\t\t\t\tcache[id] = index;\n\t\t\t\t\tif (index >= maxLines) return more.push(id);\n\n\t\t\t\t\tconst config = { ms, me };\n\t\t\t\t\tconfig.single = this.IsSingleDay(ev);\n\n\t\t\t\t\tconfig.length = 1;\n\t\t\t\t\tif (!config.single) {\n\t\t\t\t\t\tconfig.es = ev.start_date;\n\t\t\t\t\t\tconfig.ee =\n\t\t\t\t\t\t\t!ev.all_day && !webix.Date.timePart(ev.end_date)\n\t\t\t\t\t\t\t\t? webix.Date.add(ev.end_date, -1, \"day\", true)\n\t\t\t\t\t\t\t\t: ev.end_date;\n\n\t\t\t\t\t\tconfig.length += daysBetweenInclusive(\n\t\t\t\t\t\t\t(config.ls = new Date(Math.max(wStart, config.es))),\n\t\t\t\t\t\t\t(config.le = new Date(Math.min(wEnd - 1, config.ee)))\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tconfig.index = dayIndex;\n\t\t\t\t\tdayHTML[index] = this.ToHTML(ev, index, config);\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tconst prevLength = day.$more && day.$more.length;\n\t\t\tday.$more = more;\n\t\t\tif (prevLength != more.length) this.Calendar.render(day.id, day, \"paint\");\n\n\t\t\thtml += dayHTML.join(\"\");\n\t\t}, this);\n\n\t\tcontainer.innerHTML = html;\n\t\tthis._DataObj = this.Calendar.$view.firstChild.appendChild(container);\n\t\tthis.app.callEvent(\"events:rendered\", []);\n\t}\n\n\tIsSingleDay(ev) {\n\t\tif (ev.all_day)\n\t\t\treturn !daysBetweenInclusive(\n\t\t\t\tev.start_date,\n\t\t\t\twebix.Date.add(ev.end_date, 1, \"day\", true)\n\t\t\t);\n\n\t\tlet len = daysBetweenInclusive(ev.start_date, ev.end_date);\n\n\t\tif (\n\t\t\tlen === 1 &&\n\t\t\twebix.Date.timePart(ev.start_date) &&\n\t\t\t!webix.Date.timePart(ev.end_date)\n\t\t)\n\t\t\tlen = 0;\n\n\t\treturn !len;\n\t}\n\n\tToHTML(obj, index, c) {\n\t\tconst type = this.Calendar.type;\n\t\tconst style = c.single ? \"\" : dayEventColor(obj);\n\t\tconst width = c.length * type.width - type.padding;\n\t\tconst height = type.eventHeight;\n\t\tconst pos = this.GetPosition(type, index, c.index);\n\n\t\tlet extra = \"\";\n\t\tif (c.single) {\n\t\t\textra =\n\t\t\t\tmarker(obj) +\n\t\t\t\t`<span class=\"webix_event_time\">${webix.i18n.timeFormatStr(\n\t\t\t\t\tobj.start_date\n\t\t\t\t)}</span>`;\n\t\t}\n\t\tconst css = this.GetStyle(obj, c);\n\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn `\n\t\t\t<div\n\t\t\t\twebix_tooltip=\"${obj.text}\"\n\t\t\t\twebix_e_id=\"${obj.id}\"\n\t\t\t\tclass=\"${css}\"\n\t\t\t\tstyle=\"height:${height}px;line-height:${height}px; width:${width}px; ${pos +\n\t\t\tstyle}\">\n\t\t\t\t\t${extra + (obj.text || _(\"(No title)\"))}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tGetStyle(obj, c) {\n\t\tlet css = `webix_scheduler_month_event${c.single ? \"_single\" : \"\"}`;\n\t\tcss +=\n\t\t\tthis.State.selected &&\n\t\t\t(obj.id == this.State.selected.id || obj.id == this.State.selected.date)\n\t\t\t\t? \" webix_scheduler_event_selected\"\n\t\t\t\t: \"\";\n\n\t\tcss += obj.$past ? \" webix_scheduler_past_event\" : \"\";\n\n\t\tif (!c.single) {\n\t\t\tif (c.es < c.ms && webix.Date.equal(c.ms, webix.Date.dayStart(c.ls)))\n\t\t\t\tcss += \" webix_scheduler_event_break_left\";\n\t\t\telse if (\n\t\t\t\tc.ee >= webix.Date.add(c.me, 1, \"day\", true) &&\n\t\t\t\twebix.Date.equal(c.me, webix.Date.dayStart(c.le))\n\t\t\t)\n\t\t\t\tcss += \" webix_scheduler_event_break_right\";\n\t\t}\n\t\treturn css;\n\t}\n\n\tGetPosition(type, index, dayIndex) {\n\t\tconst row = Math.floor(dayIndex / this.Calendar.config.xCount);\n\t\tconst col = dayIndex % this.Calendar.config.xCount;\n\n\t\treturn `\n\t\t\ttop:${row * type.height +\n\t\t\t\ttype.headerHeight +\n\t\t\t\tindex * (type.eventHeight + type.padding)}px;\n\t\t\tleft:${col * type.width}px;\n\t\t`;\n\t}\n\n\tRefreshData() {\n\t\tconst { data, weeks } = this.data;\n\n\t\tthis.Events.clearAll();\n\t\tthis.Events.parse(data);\n\t\tthis.Events.sort(function(a, b) {\n\t\t\tconst start_a = webix.Date.dayStart(a.start_date);\n\t\t\tconst start_b = webix.Date.dayStart(b.start_date);\n\n\t\t\tif (webix.Date.equal(start_a, start_b)) {\n\t\t\t\tconst days_a = daysBetweenInclusive(a.start_date, a.end_date);\n\t\t\t\tconst days_b = daysBetweenInclusive(b.start_date, b.end_date);\n\t\t\t\treturn days_b - days_a || a.start_date - b.start_date;\n\t\t\t}\n\t\t\treturn start_a - start_b;\n\t\t});\n\n\t\tconst monthData = this.GetMonthData();\n\n\t\tthis.Calendar.clearAll();\n\t\tif (this.Calendar.config.yCount != weeks) {\n\t\t\tthis.Calendar.define(\"yCount\", weeks);\n\t\t\tthis.Calendar.resize();\n\t\t}\n\t\tthis.Calendar.parse(monthData);\n\t}\n\n\tShowMore(id) {\n\t\tthis.MoreWindow.ShowWindow(\n\t\t\tid,\n\t\t\tthis.Calendar.getItemNode(id),\n\t\t\tthis.Calendar.getItem(id).$more || []\n\t\t);\n\t\treturn false;\n\t}\n\n\tShowEvent(e) {\n\t\tconst event = locateEvent(e, this.Calendar.$view);\n\t\tif (event.id && event.id != \"0\") {\n\t\t\tconst obj = this.Events.getItem(event.id);\n\t\t\tconst sel = webix.extend(event, getParams(obj), true);\n\t\t\tthis.State.selected = sel;\n\t\t}\n\t\treturn false;\n\t}\n\n\tShowNew(id) {\n\t\tconst state = this.State;\n\t\tif (!state.readonly && !state.clipboard) {\n\t\t\tconst date = this.GetTargetDate(id);\n\t\t\tstate.selected = { id: \"0\", date };\n\t\t}\n\t}\n\n\tShowDay(id) {\n\t\tconst state = this.app.getState();\n\n\t\tstate.$batch({\n\t\t\tdate: this.GetTargetDate(id),\n\t\t\tmode: \"day\",\n\t\t});\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns the target date for an event\n\t * @param {(string|number)} id - the ID of the day in the calendar\n\t * @returns\n\t */\n\tGetTargetDate(id) {\n\t\treturn id ? this.Calendar.getItem(id).date : this.State.date;\n\t}\n\n\t/**\n\t * Returns the data object of an event\n\t * @param {(string|number)} id - the ID of the event\n\t * @returns {Object}\n\t */\n\tGetEvent(id) {\n\t\treturn this.Events.getItem(id);\n\t}\n\n\t/**\n\t * Updates selected in global reactive state\n\t * @param {(string|number)} id - the ID of the event\n\t * @param {Object} newEvent - the data of the new event that should be selected\n\t */\n\tUpdateSelection(id, newEvent) {\n\t\tif (this.State.selected) {\n\t\t\tnewEvent.id = id;\n\t\t\tthis.State.selected = getParams(newEvent);\n\t\t}\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { templateStart } from \"helpers/templates\";\n\nexport default class MonthHeaderView extends JetView {\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"dataview\",\n\t\t\tcss: \"webix_scheduler_calendar_header\",\n\t\t\txCount: 7,\n\t\t\tyCount: 1,\n\t\t\twidth: 0,\n\t\t\theight: 32,\n\t\t\tscroll: false,\n\t\t\ttype: {\n\t\t\t\theight: \"auto\",\n\t\t\t\twidth: \"auto\",\n\t\t\t\ttemplateStart,\n\t\t\t},\n\t\t};\n\t}\n\n\tinit(view) {\n\t\tview.type.master = view;\n\t\tview.parse(this.GetHeaderData());\n\t}\n\n\tGetHeaderData() {\n\t\tconst data = [];\n\t\tconst k = webix.Date.startOnMonday ? 1 : 0;\n\n\t\tfor (let i = 0; i < 7; i++)\n\t\t\tdata.push({ value: webix.i18n.calendar.dayShort[(k + i) % 7] });\n\n\t\tdata[data.length - 1][\"right\"] = true;\n\t\treturn data;\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { events, timeStart } from \"helpers/templates\";\nimport { shrinkTo, isMultiDay } from \"helpers/dates\";\nimport { getParams } from \"helpers/recurring\";\n\nexport default class MonthListView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst config = {\n\t\t\tview: \"list\",\n\t\t\ttype: {\n\t\t\t\theight: 50,\n\t\t\t\ttemplate: events(_),\n\t\t\t\ttimeStart: ev => this.TimeStart(ev),\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonItemClick: id => this.ShowEvent(id),\n\t\t\t},\n\t\t};\n\n\t\treturn config;\n\t}\n\tinit() {\n\t\tthis.List = this.getRoot();\n\t\tthis.State = this.app.getState();\n\n\t\twebix.extend(this.List, webix.OverlayBox);\n\t}\n\n\turlChange() {\n\t\tthis.data = this.getParam(\"data\");\n\t\tif (this.data) this.RefreshData();\n\t}\n\n\tRefreshData() {\n\t\tconst start = webix.Date.datePart(this.State.date, true);\n\t\tconst end = webix.Date.add(start, 1, \"day\", true);\n\t\tthis.app\n\t\t\t.getService(\"local\")\n\t\t\t.getEvents(start, end)\n\t\t\t.then(evs => {\n\t\t\t\tthis.List.clearAll();\n\t\t\t\tthis.List.parse(evs.map(shrinkTo(start, end)));\n\t\t\t\tthis.ToggleOverlay();\n\t\t\t});\n\t}\n\n\tToggleOverlay() {\n\t\tif (!this.List.count()) {\n\t\t\tconst _ = this.app.getService(\"locale\")._;\n\t\t\tthis.List.showOverlay(_(\"No Events\"));\n\t\t} else {\n\t\t\tthis.List.hideOverlay();\n\t\t}\n\t}\n\n\tShowEvent(id) {\n\t\tconst obj = this.List.getItem(id);\n\t\tthis.State.selected = getParams(obj);\n\t}\n\n\tTimeStart(ev) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tif (isMultiDay(ev)) return _(\"All Day\");\n\t\telse return timeStart(ev.start_date, ev.end_date);\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport MonthListView from \"./list\";\nimport CalendarView from \"./compact\";\nimport MonthEventsView from \"./events\";\nimport MonthHeaderView from \"./header\";\n\nexport default class MonthView extends JetView {\n\tconfig() {\n\t\tconst compact = this.getParam(\"compact\", true);\n\t\tconst views = compact\n\t\t\t? [CalendarView, MonthListView]\n\t\t\t: [MonthHeaderView, MonthEventsView];\n\n\t\treturn {\n\t\t\trows: views,\n\t\t};\n\t}\n\tinit() {\n\t\tthis.Data = this.app.getService(\"local\");\n\t\tconst state = this.app.getState();\n\t\tthis.on(state.$changes, \"date\", value => this.RefreshData(value));\n\t\tthis.on(state.$changes, \"active\", () => this.RefreshData(state.date));\n\t\tthis.on(this.app, \"events:refresh\", () => this.RefreshData(state.date));\n\n\t\t// updates made in form\n\t\tconst events = this.app.getService(\"local\").events(true);\n\t\tthis.on(\n\t\t\tevents.data,\n\t\t\t\"onStoreUpdated\",\n\t\t\t(_i, _o, mode) => mode && this.RefreshData(state.date)\n\t\t);\n\t}\n\tRefreshData(value) {\n\t\tlet start = webix.Date.monthStart(value);\n\t\tlet end = webix.Date.add(start, 1, \"month\", true);\n\n\t\tstart = webix.Date.weekStart(\n\t\t\tnew Date(start.getFullYear(), start.getMonth(), 1)\n\t\t);\n\t\tconst weeks = Math.ceil((end - start) / (24 * 60 * 60 * 1000) / 7);\n\t\tend = webix.Date.add(start, weeks, \"week\", true);\n\n\t\tthis.Data.getEvents(start, end).then(data => {\n\t\t\tif (this.app) this.setParam(\"data\", { start, weeks, data }, true);\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class BarView extends JetView {\n\tconfig() {\n\t\tconst active = webix.skin.$active;\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst state = this.getParam(\"state\", true);\n\n\t\treturn {\n\t\t\tview: \"toolbar\",\n\t\t\theight: active.barHeight,\n\t\t\telements: [\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\tview: \"richselect\",\n\t\t\t\t\tlabel: _(\"Timeline scale\"),\n\t\t\t\t\tlabelWidth: 120,\n\t\t\t\t\twidth: 260,\n\t\t\t\t\tvalue: state.timelineMode,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{ id: \"day\", value: _(\"Day\") },\n\t\t\t\t\t\t{ id: \"week\", value: _(\"Week\") },\n\t\t\t\t\t\t{ id: \"month\", value: _(\"Month\") },\n\t\t\t\t\t],\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: v => {\n\t\t\t\t\t\t\tstate.timelineMode = v;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n}\n","import MoreWindowView from \"../month/more\";\nimport EditRecurringMixin from \"helpers/editrecurring\";\nimport { initDnD } from \"helpers/dnd\";\n\nexport default class MoreView extends MoreWindowView {\n\tconfig() {\n\t\tconst ui = super.config();\n\n\t\tui.width = 360;\n\t\tui.relative = \"bottom\";\n\n\t\treturn ui;\n\t}\n\n\tinit(view) {\n\t\tthis.Win = view;\n\n\t\tEditRecurringMixin(this);\n\n\t\t// set dnd mode to timeline to allow dnd between more popup and timeline chart\n\t\tinitDnD.call(this, view.getBody(), \"timelineMore\", true);\n\t}\n\n\t/**\n\t * Show the popup with extra events\n\t * @param {(string|number)} id - the ID of a section\n\t * @param {HTMLElement} node - the HTML element of the section from left part of the timeline chart\n\t * @param {Array<Object>} data - an array of events\n\t * @returns\n\t */\n\tShowWindow(id, node, data) {\n\t\tif (this.ID === id && this.Win.isVisible()) return this.Win.hide();\n\n\t\tthis.ID = id;\n\t\tdata = data.map(v => this.Events.getItem(v));\n\n\t\tconst list = this.Win.getBody();\n\t\tlist.clearAll();\n\t\tlist.parse(data);\n\n\t\tthis.Win.show(node, { x: node.clientWidth }); // here we position the popup to the left of the node as well as bottom\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport {\n\tsmallerCount,\n\tgetUnitStart,\n\tgrid,\n\tupdateTask,\n\taddUnit,\n} from \"@xbs/webix-gantt-lib\";\nimport { dayEventColor } from \"helpers/templates\";\nimport { initDnD, switchCursor, locateEvent } from \"helpers/dnd\";\nimport { getParams } from \"helpers/recurring\";\nimport SelectionMixin from \"helpers/selection\";\nimport EditRecurringMixin from \"helpers/editrecurring\";\nimport MoreWindowView from \"./more\";\nimport CopyPasteMixin from \"helpers/copypaste\";\n\nexport default class ChartView extends JetView {\n\tconfig() {\n\t\tconst height = this.GetSectionHeight();\n\t\tconst compact = this.getParam(\"compact\", true);\n\n\t\treturn {\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"treetable\",\n\t\t\t\t\tlocalId: \"sections\",\n\t\t\t\t\tcss: \"webix_scheduler_timeline_sections\",\n\t\t\t\t\twidth: compact ? 80 : 200,\n\t\t\t\t\theader: false,\n\t\t\t\t\tscroll: \"y\",\n\t\t\t\t\trowHeight: height,\n\t\t\t\t\tscrollAlignY: false,\n\t\t\t\t\tcolumns: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: \"text\",\n\t\t\t\t\t\t\theader: \"\",\n\t\t\t\t\t\t\tfillspace: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"list\",\n\t\t\t\t\tlocalId: \"list\",\n\t\t\t\t\ttype: { height, template: \"\" },\n\t\t\t\t\tcss: `webix_scheduler_timeline${\n\t\t\t\t\t\twebix.env.touch ? \"_touch\" : \"\"\n\t\t\t\t\t}_bars`,\n\t\t\t\t\tonClick: {\n\t\t\t\t\t\twebix_scheduler_timeline_event: e => this.ShowEvent(e),\n\t\t\t\t\t},\n\t\t\t\t\tonDblClick: {\n\t\t\t\t\t\twebix_list_item: (e, id) => this.ShowNew(e, id),\n\t\t\t\t\t},\n\t\t\t\t\ttooltip: {\n\t\t\t\t\t\ttemplate: \"\",\n\t\t\t\t\t},\n\t\t\t\t\tscroll: \"xy\",\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.Tree = this.$$(\"sections\");\n\t\tthis.Bars = this.$$(\"list\");\n\t\tthis.State = this.getParam(\"state\", true);\n\t\tthis.InnerState = this.getParam(\"innerState\", true);\n\t\tthis.Data = this.app.getService(\"local\");\n\t\tthis.Events = new webix.DataCollection({\n\t\t\tscheme: {\n\t\t\t\t$change: obj => this.RefreshTask(obj.id),\n\t\t\t},\n\t\t});\n\n\t\tthis.MoreWindow = this.ui(\n\t\t\tnew (this.app.dynamic(MoreWindowView))(this.app, {\n\t\t\t\tevents: this.Events,\n\t\t\t})\n\t\t);\n\n\t\tSelectionMixin(this, \"month\");\n\t\tEditRecurringMixin(this);\n\n\t\tthis._sectionsReady = this.Data.sections().then(data => {\n\t\t\tthis.Sections = data;\n\t\t\tthis.Tree.parse(data);\n\t\t\tthis.Bars.parse(data);\n\t\t});\n\n\t\tthis.HandleScroll();\n\n\t\t// updates made in form\n\t\tconst events = this.app.getService(\"local\").events(true);\n\t\tthis.on(\n\t\t\tevents.data,\n\t\t\t\"onStoreUpdated\",\n\t\t\t(_i, _o, mode) => mode && this.RefreshData()\n\t\t);\n\t\t// calendars\n\t\tthis.on(this.app, \"events:refresh\", () => this.RefreshData());\n\t\tthis.on(this.State.$changes, \"active\", (_v, o) => o && this.RefreshData());\n\n\t\tinitDnD.call(this, this.Bars, \"timeline\");\n\t\tthis._mousemove_handler = webix.event(this.Bars.$view, \"pointermove\", e => {\n\t\t\tif (e.pointerType == \"mouse\") switchCursor(e, this.Bars.$view);\n\t\t});\n\n\t\tconst compact = this.getParam(\"compact\", true);\n\t\tif (this.app.config.copypaste && !webix.env.mobile && !compact)\n\t\t\tCopyPasteMixin(this, this.Bars);\n\t}\n\n\turlChange() {\n\t\tconst scales = (this.Scales = this.getParam(\"scales\", true));\n\t\tthis.DrawGrid(scales);\n\t\tthis.RefreshData(scales);\n\t}\n\n\tGetSectionHeight() {\n\t\tconst active = webix.skin.$active;\n\t\tthis._sectionSize = 5;\n\t\treturn (active.barHeight - active.borderWidth * 2) * this._sectionSize;\n\t}\n\n\t/**\n\t * Reloads data into timeline\n\t * @param {Object} scales - current chart scales\n\t */\n\tRefreshData(scales) {\n\t\tif (!scales) scales = this.Scales;\n\t\twebix.promise\n\t\t\t.all([this._sectionsReady, this.Data.getEvents(scales.start, scales.end)])\n\t\t\t.then(res => {\n\t\t\t\tthis.ClearCollections();\n\n\t\t\t\tthis.Events.parse(res[1]);\n\t\t\t\tthis.RenderEvents();\n\t\t\t});\n\t}\n\n\tClearCollections() {\n\t\tthis.Events.clearAll();\n\t\tthis._processed = [];\n\t\tthis._lastRow = {};\n\t\tthis._moreEvents = {};\n\t}\n\n\t/**\n\t * Updates task object with new coordinates and allocates it to the correct position inside a section\n\t * @param {(string|number)} updID - the ID of an event\n\t */\n\tRefreshTask(updID) {\n\t\tconst t = this.GetEvent(updID);\n\n\t\tconst sectionIndex = indexOf(this.Sections.data.order, t.section);\n\t\tif (sectionIndex == -1) {\n\t\t\tt.$hide = true;\n\t\t\treturn;\n\t\t}\n\n\t\tconst type = this.State.timelineMode;\n\t\tlet unit = this.GetUnitCount(type);\n\t\tif (type !== \"day\" || type !== \"week\") unit = this.GetUnitCount(unit);\n\n\t\tconst prev = this._processed.find(obj => {\n\t\t\tif (obj.section == t.section) {\n\t\t\t\tif (type === \"day\")\n\t\t\t\t\treturn this.CheckDates(obj.end_date, t.start_date, obj.all_day);\n\n\t\t\t\tconst prev = webix.Date.timePart(obj.end_date)\n\t\t\t\t\t? this.GetUnitStart(unit, webix.Date.add(obj.end_date, 1, unit, true))\n\t\t\t\t\t: obj.end_date;\n\t\t\t\tconst next = this.GetUnitStart(unit, t.start_date);\n\t\t\t\treturn this.CheckDates(prev, next, obj.all_day);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tlet y;\n\t\tif (prev) {\n\t\t\ty = prev.$y;\n\t\t\tthis._processed.splice(\n\t\t\t\tthis._processed.findIndex(p => prev.id == p.id),\n\t\t\t\t1\n\t\t\t);\n\t\t} else {\n\t\t\tif (webix.isUndefined(this._lastRow[t.section]))\n\t\t\t\tthis._lastRow[t.section] = 0;\n\t\t\telse this._lastRow[t.section]++;\n\n\t\t\tif (this._lastRow[t.section] >= this._sectionSize - 1) t.$more = true;\n\t\t\telse t.$more = false;\n\t\t}\n\n\t\tthis.UpdateTask(t, sectionIndex, y);\n\n\t\tthis._processed.push(t);\n\t\tthis._processed.sort((a, b) => a.$y - b.$y);\n\t}\n\n\t/**\n\t * Checks if the start of one event follows the end of the previous one\n\t * @param {Date} prev - the end date of the previous event\n\t * @param {Date} next - the start date of the next event\n\t * @param {Boolean} all_day - the flag that indicates that the previous event is all-day (which means that the end date is really 1 day later)\n\t * @returns {Boolean} true if the start follows the end, false otherwise\n\t */\n\tCheckDates(prev, next, all_day) {\n\t\treturn (all_day ? webix.Date.add(prev, 1, \"day\", true) : prev) <= next;\n\t}\n\n\t/**\n\t * Creates a layer with events\n\t */\n\tRenderEvents() {\n\t\tif (this._DataObj) {\n\t\t\tthis.Bars.$view.firstChild.removeChild(this._DataObj);\n\t\t\tdelete this._DataObj;\n\t\t}\n\n\t\t// No Events, No Render\n\t\tif (!this.Events.count() || !this.Bars.count()) return;\n\n\t\tconst container = webix.html.create(\"div\", {\n\t\t\trole: \"presentation\",\n\t\t});\n\t\tlet html = \"\";\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tthis.Events.data.each(obj => {\n\t\t\tif (!obj.$hide) {\n\t\t\t\tif (!obj.$more || this._lastRow[obj.section] == 4) {\n\t\t\t\t\thtml += this.BarsTemplate(obj, _);\n\t\t\t\t} else {\n\t\t\t\t\tif (!this._moreEvents[obj.section]) {\n\t\t\t\t\t\tthis._moreEvents[obj.section] = [];\n\n\t\t\t\t\t\thtml += this.MoreBarTemplate(obj, _);\n\t\t\t\t\t}\n\t\t\t\t\tthis._moreEvents[obj.section].push(obj.id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tcontainer.innerHTML = html;\n\t\tthis._DataObj = this.Bars.$view.firstChild.appendChild(container);\n\t\tthis.app.callEvent(\"events:rendered\", []);\n\t}\n\n\t/**\n\t * Paints a grid\n\t * @param {Object} scales - scales object as returned by this.Local.getScales()\n\t */\n\tDrawGrid(scales) {\n\t\tconst view = this.Bars;\n\t\tconst colors = { contrast: \"#808080\", dark: \"#384047\" };\n\t\tview.$view.style.backgroundImage = `url(${this.GetGrid(\n\t\t\tscales,\n\t\t\tcolors[webix.skin.$name] || \"#ddd\"\n\t\t)})`;\n\t\tview.$view.style.marginTop = \"0px\";\n\n\t\t// sync grid to scroll position\n\t\tview.$view.style.backgroundPosition = `-${this.InnerState.left}px -${this.InnerState.top}px`;\n\n\t\tthis.Resize(scales.width);\n\t}\n\n\t/**\n\t * Changes the width of the root component (list with bars)\n\t * @param {number} width\n\t */\n\tResize(width) {\n\t\tconst area = this.Bars.$view.querySelector(\".webix_scroll_cont\");\n\t\tarea.style.width = width + \"px\";\n\t\tarea.style.minHeight = \"1px\";\n\t}\n\n\t/**\n\t * Handles scrolling\n\t */\n\tHandleScroll() {\n\t\tthis.InnerState = this.getParam(\"innerState\", true);\n\n\t\tthis._scroll_handler = webix.event(this.Bars.$view, \"scroll\", ev => {\n\t\t\tconst bars = ev.target;\n\t\t\tconst top = Math.round(bars.scrollTop);\n\t\t\tconst left = Math.round(bars.scrollLeft);\n\t\t\tthis.Bars.$view.style.backgroundPosition = `-${left}px -${top}px`;\n\t\t\tthis.InnerState.$batch({ top, left });\n\t\t\tthis.Tree.scrollTo(0, top);\n\n\t\t\tthis.MoreWindow.HideWindow();\n\t\t});\n\n\t\tthis.on(this.Tree, \"onScrollY\", function() {\n\t\t\tconst y = this.getScrollState().y;\n\t\t\tthis.$scope.Bars.scrollTo(this.$scope.InnerState.left, y);\n\t\t});\n\t}\n\n\t/**\n\t * Returns a string with HTML of a task node content\n\t * @param {Object} obj - task data\n\t * @param {function} _ - the translator function of jet locale plugin, see https://webix.gitbook.io/webix-jet/part-ii-webix-jet-in-details/plugins#applying-the-locale\n\t * @returns {string} a string with HTML of an event bar\n\t */\n\tBarsTemplate(obj, _) {\n\t\tconst style = dayEventColor(obj);\n\t\tconst scales = this.Scales;\n\n\t\tlet w = obj.$w - 2;\n\t\t// all day events last 1 day longer than their end_date\n\t\tif (obj.all_day && obj.end_date < scales.end) {\n\t\t\tw += this.GetUnitWidth(scales, obj.start_date);\n\t\t}\n\n\t\tconst content = `<div class=\"webix_scheduler_timeline_content\">${obj.text ||\n\t\t\t_(\"(no title)\")}</div>`;\n\n\t\tlet css = \"webix_scheduler_timeline_event\";\n\t\tcss +=\n\t\t\tthis.State.selected &&\n\t\t\t(obj.id == this.State.selected.id || obj.id == this.State.selected.date)\n\t\t\t\t? \" webix_scheduler_event_selected\"\n\t\t\t\t: \"\";\n\n\t\tif (obj.start_date < this.Scales.start)\n\t\t\tcss += \" webix_scheduler_event_break_left\";\n\t\telse if (obj.end_date > this.Scales.end)\n\t\t\tcss += \" webix_scheduler_event_break_right\";\n\n\t\tconst tooltip = this.GetTooltip(obj);\n\t\treturn `<div webix_e_id=\"${obj.id}\" \n\t\t\twebix_tooltip=\"${tooltip}\" class=\"${css}\" \n\t\t\tstyle=\"left:${obj.$x}px;top:${obj.$y}px;width:${w}px;height:${obj.$h}px;${style}\">\n\t\t\t${content}\n\t\t</div>`;\n\t}\n\n\t/**\n\t * Returns a string with a tooltip for an event\n\t * @param {Object} obj - event data\n\t * @returns {string} a string with HTML of a tooltip\n\t */\n\tGetTooltip(obj) {\n\t\treturn obj.text;\n\t}\n\n\t/**\n\t * Defines the looks and contents of the bar that allows to see events that did not fit into a 5-line section\n\t * @param {Object} obj - the event data\n\t * @param {function} _ - the translator function of the Locale plugin\n\t * @returns {string} with the HTML of the bar\n\t */\n\tMoreBarTemplate(obj, _) {\n\t\tconst text = _(\"Show more\");\n\t\tconst content = `<div class=\"webix_scheduler_timeline_content\" webix_tooltip=\"${text}\">${text}</div>`;\n\t\tconst css = \"webix_scheduler_timeline_event webix_scheduler_multi_more\";\n\n\t\treturn `<div webix_e_id=\"$wsh_multi_more\" webix_r_id=\"${obj.section}\" class=\"${css}\" style=\"left:0px;top:${obj.$y}px;width:100%;height:${obj.$h}px;\">\n\t\t\t${content}\n\t\t</div>`;\n\t}\n\n\t/**\n\t * Either shows the selected event in Info or opens the list of extra events in a popup\n\t * @param {MouseEvent} e - a native browser event\n\t * @returns {Boolean} always false to prevent bubbling\n\t */\n\tShowEvent(e) {\n\t\tconst event = locateEvent(e, this.Bars.$view);\n\t\tif (event.id === \"$wsh_multi_more\") {\n\t\t\tconst id = event.node.getAttribute(\"webix_r_id\");\n\t\t\tthis.MoreWindow.ShowWindow(\n\t\t\t\tid,\n\t\t\t\tthis.Tree.getItemNode(id),\n\t\t\t\tthis._moreEvents[id] || []\n\t\t\t);\n\t\t} else if (event.id && event.id != \"0\") {\n\t\t\tconst obj = this.GetEvent(event.id);\n\t\t\tconst sel = webix.extend(event, getParams(obj), true);\n\t\t\tthis.State.selected = sel;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Initiates creating a new event\n\t * @param {MouseEvent} e - a native browser event\n\t * @param {(string|number)} id - the ID of a section\n\t */\n\tShowNew(e, id) {\n\t\tconst state = this.State;\n\t\tif (!state.readonly && !state.clipboard) {\n\t\t\tconst scales = this.Scales;\n\t\t\tconst start = scales.start;\n\n\t\t\tconst unit = scales.precise\n\t\t\t\t? this.GetUnitCount(scales.minUnit)\n\t\t\t\t: scales.minUnit;\n\t\t\tconst n = Math.floor(e.offsetX / this.GetUnitWidth(scales));\n\t\t\tconst date = this.AddUnit(unit, start, n);\n\n\t\t\tstate.selected = { id: \"0\", date, section: id };\n\t\t}\n\t}\n\n\t/**\n\t * Returns the event data by its ID\n\t * @param {(string|id)} id - the ID of an event\n\t * @returns {Object} the event data\n\t */\n\tGetEvent(id) {\n\t\treturn this.Events.getItem(id);\n\t}\n\n\t/**\n\t * Updates selected in global reactive state\n\t * @param {(string|number)} id - the ID of an event\n\t * @param {Object} newEvent - the new event that should be selected\n\t */\n\tUpdateSelection(id, newEvent) {\n\t\tif (this.State.selected) {\n\t\t\tnewEvent.id = id;\n\t\t\tthis.State.selected = getParams(newEvent);\n\t\t}\n\t}\n\n\t/**\n\t * Returns the target date for an event\n\t * @returns {Date}\n\t */\n\tGetTargetDate() {\n\t\tconst clickedUnit = this.mousePosUnit || 0;\n\t\tconst scales = this.Scales;\n\t\treturn this.AddUnit(scales.minUnit, scales.start, clickedUnit);\n\t}\n\n\t/* Method wrappers for gantt-lib functions */\n\n\tGetUnitCount(type) {\n\t\treturn smallerCount[type][0];\n\t}\n\n\tGetUnitStart(unit, date) {\n\t\treturn getUnitStart(unit, date);\n\t}\n\n\tAddUnit(unit, date, count) {\n\t\treturn addUnit(unit)(date, count);\n\t}\n\n\tGetGrid(scales, color) {\n\t\treturn grid(scales.cellWidth, scales.cellHeight, color);\n\t}\n\n\tUpdateTask(task, sectionIndex, y) {\n\t\treturn updateTask(\n\t\t\ttask,\n\t\t\tthis._lastRow[task.section] + sectionIndex * this._sectionSize,\n\t\t\tthis.Scales,\n\t\t\tthis.Scales.cellHeight - 12,\n\t\t\ty\n\t\t);\n\t}\n\n\tGetUnitWidth(scales, date) {\n\t\tif (\n\t\t\tscales.precise &&\n\t\t\t(scales.minUnit !== \"day\" || scales.minUnit !== \"month\")\n\t\t) {\n\t\t\tconst count = smallerCount[scales.minUnit][1];\n\t\t\tconst number = typeof count === \"number\" ? count : count(date);\n\t\t\treturn Math.floor(scales.cellWidth / number);\n\t\t}\n\t\treturn scales.cellWidth;\n\t}\n}\n\n/**\n * Case-insensitive indexOf\n * @param {Array<any>} arr - the array to be checked\n * @param {any} el - something that you need to find in the array\n * @returns {number} the index of the first found element or -1\n */\nfunction indexOf(arr, el) {\n\tfor (let i = 0; i < arr.length; ++i) {\n\t\tif (arr[i] == el) return i;\n\t}\n\treturn -1;\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class ScalesView extends JetView {\n\tconfig() {\n\t\tconst compact = this.getParam(\"compact\", true);\n\t\treturn {\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\twidth: compact ? 80 : 200,\n\t\t\t\t\tcss: \"webix_scheduler_timeline_space\",\n\t\t\t\t\tborderless: false,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"template\",\n\t\t\t\t\tlocalId: \"scale\",\n\t\t\t\t\theight: 20,\n\t\t\t\t\tcss: \"webix_scheduler_timeline_scale\",\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit() {\n\t\tconst scale = this.$$(\"scale\");\n\t\tconst innerState = (this.InnerState = this.getParam(\"innerState\", true));\n\t\tthis.on(innerState.$changes, \"left\", x => scale.scrollTo(x, null));\n\t}\n\n\turlChange() {\n\t\tthis.RenderScales();\n\t}\n\n\t/**\n\t * Renders gantt scales\n\t */\n\tRenderScales() {\n\t\tconst scales = this.getParam(\"scales\", true);\n\t\tconst view = this.$$(\"scale\");\n\t\tconst html = scales.rows\n\t\t\t.map(line => {\n\t\t\t\treturn (\n\t\t\t\t\t`<div class=\"webix_scheduler_timeline_scale_row\" style='height:${line.height}px;width:${scales.width}px'>` +\n\t\t\t\t\tline.cells.map(cell => this.CellTemplate(cell, line.type)).join(\"\") +\n\t\t\t\t\t\"</div>\"\n\t\t\t\t);\n\t\t\t})\n\t\t\t.join(\"\");\n\n\t\tview.config.height = scales.height;\n\t\tview.setHTML(html);\n\t\tview.resize();\n\t}\n\n\t/**\n\t * Returns the template string for a scale unit\n\t * @param {Object} cell - a scale unit\n\t * @returns {string} - the template string of the scale cell\n\t */\n\tCellTemplate(cell) {\n\t\tconst css = `webix_scheduler_timeline_scale_cell ${cell.css}`;\n\t\treturn `<div class=\"${css}\" style=\"width:${cell.width}px;\">${cell.format(\n\t\t\tcell.date\n\t\t)}</div>`;\n\t}\n\n\tDateIsToday(date) {\n\t\tconst today = webix.Date.dayStart(new Date());\n\t\treturn webix.Date.equal(today, webix.Date.dayStart(date));\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport BarView from \"./bar\";\nimport ScaleView from \"./scale\";\nimport ChartView from \"./chart\";\n\nimport {\n\taddUnit,\n\tresetScales,\n\tgetUnitStart,\n\tsmallerCount,\n} from \"@xbs/webix-gantt-lib\";\n\nimport { createState } from \"jet-restate\";\n\nexport default class TimelineView extends JetView {\n\tconfig() {\n\t\tconst ui = {\n\t\t\trows: [BarView, ScaleView, ChartView],\n\t\t};\n\n\t\treturn ui;\n\t}\n\n\tinit() {\n\t\tconst state = (this.State = this.getParam(\"state\", true));\n\n\t\tconst innerState = (this.InnerState = createState({\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t}));\n\t\tthis.setParam(\"innerState\", innerState, true);\n\n\t\tthis.on(state.$changes, \"date\", v => this.SetScales(v, state.timelineMode));\n\n\t\tthis.on(state.$changes, \"timelineMode\", (t, o) => {\n\t\t\tif (o) this.SetScales(state.date, t);\n\t\t});\n\t}\n\n\tSetScales(date, type) {\n\t\tconst scales = this.ResetScales(type, date);\n\t\tthis.setParam(\"scales\", scales, true);\n\t}\n\n\tGetScalesArray(type) {\n\t\tswitch (type) {\n\t\t\tcase \"day\":\n\t\t\t\treturn [{ unit: \"hour\", format: \"%H:00\" }];\n\t\t\tcase \"week\":\n\t\t\t\treturn [{ unit: \"day\", step: 1, format: \"%d\" }];\n\t\t\tcase \"month\":\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tunit: \"week\",\n\t\t\t\t\t\tformat: function(start) {\n\t\t\t\t\t\t\tconst parser = webix.Date.dateToStr(\"%d %M\");\n\t\t\t\t\t\t\tconst wstart = webix.Date.weekStart(start);\n\t\t\t\t\t\t\tconst wend = webix.Date.add(\n\t\t\t\t\t\t\t\twebix.Date.add(wstart, 1, \"week\", true),\n\t\t\t\t\t\t\t\t-1,\n\t\t\t\t\t\t\t\t\"day\",\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn parser(wstart) + \" - \" + parser(wend);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\tdefault: {\n\t\t\t\tconst unit = this.GetDefaultScaleUnit(type);\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tunit,\n\t\t\t\t\t\tformat: (start, end) => {\n\t\t\t\t\t\t\tconst parser = webix.Date.dateToStr(\"%d %M %YYYY\");\n\t\t\t\t\t\t\treturn parser(start) + \" - \" + parser(end);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\t}\n\n\tGetScalesCellWidth(type) {\n\t\tswitch (type) {\n\t\t\tcase \"day\":\n\t\t\t\treturn 80;\n\t\t\tcase \"week\":\n\t\t\t\treturn 300;\n\t\t\tcase \"month\":\n\t\t\t\treturn 400;\n\t\t\tdefault:\n\t\t\t\treturn 100;\n\t\t}\n\t}\n\n\tGetScalePrecision(type) {\n\t\tswitch (type) {\n\t\t\tcase \"day\":\n\t\t\t\treturn false;\n\t\t\tcase \"week\":\n\t\t\t\treturn false;\n\t\t\tcase \"month\":\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\t/* Method wrappers for gantt-lib functions */\n\n\tAddUnit(unit, date, step) {\n\t\treturn addUnit(unit)(date, step);\n\t}\n\n\tGetUnitStart(unit, date) {\n\t\treturn getUnitStart(unit, date);\n\t}\n\n\tResetScales(unit, date) {\n\t\tconst start = this.GetUnitStart(unit, date);\n\t\tconst end = this.AddUnit(unit, start, 1);\n\t\tconst active = webix.skin.$active;\n\t\treturn resetScales(\n\t\t\tstart,\n\t\t\tend,\n\t\t\tthis.GetScalePrecision(unit),\n\t\t\tthis.GetScalesCellWidth(unit),\n\t\t\tactive.barHeight - active.borderWidth * 2,\n\t\t\tthis.GetScalesArray(unit)\n\t\t);\n\t}\n\n\tGetDefaultScaleUnit(type) {\n\t\treturn smallerCount[type][0] || type;\n\t}\n}\n","import DayEventsView from \"../day/events\";\nimport SelectionMixin from \"helpers/selection\";\nimport EditRecurringMixin from \"helpers/editrecurring\";\nimport { initDnD } from \"helpers/dnd\";\nimport CopyPasteMixin from \"helpers/copypaste\";\n\nexport default class UnitEventsView extends DayEventsView {\n\tconstructor(app, config) {\n\t\tsuper(app);\n\n\t\tif (config) {\n\t\t\tthis.Unit = config.unit;\n\t\t}\n\t}\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"list\",\n\t\t\tlocalId: \"unitList\",\n\t\t\tcss: \"webix_scheduler_day_events\",\n\t\t\tscroll: false,\n\t\t\tautoheight: true,\n\t\t\ttemplate: \"\",\n\t\t\ttype: {\n\t\t\t\theight: 42,\n\t\t\t\tcss: \"webix_scheduler_day_scale_item\",\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_scheduler_day_event: e => this.ShowEvent(e),\n\t\t\t},\n\t\t\tonDblClick: {\n\t\t\t\twebix_scheduler_day_scale_item: (_e, h) => this.ShowNew(h),\n\t\t\t},\n\t\t};\n\t}\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tthis.List = this.$$(\"unitList\");\n\n\t\tSelectionMixin(this, \"scale\");\n\t\tEditRecurringMixin(this);\n\n\t\tthis.List.$setSize = function(x, y) {\n\t\t\tif (webix.ui.view.prototype.$setSize.call(this, x, y)) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t};\n\n\t\tthis.minEventHeight = 62;\n\t\tthis.ParseHours();\n\n\t\tthis.on(this.State.$changes, \"readonly\", () => this.List.render());\n\n\t\tthis.List.attachEvent(\"onAfterRender\", () => this.RenderEvents());\n\t\tinitDnD.call(this, this.List, \"units\");\n\n\t\tconst compact = this.getParam(\"compact\", true);\n\t\tif (this.app.config.copypaste && !webix.env.mobile && !compact)\n\t\t\tCopyPasteMixin(this, this.List);\n\t}\n\n\tFilterToday(value, to) {\n\t\tconst dayEvents = super.FilterToday(value, to);\n\n\t\treturn dayEvents.filter(obj => {\n\t\t\tif (obj.units) {\n\t\t\t\tconst units = obj.units.split(\",\");\n\t\t\t\tconst unitID = this.Unit.id + \"\";\n\t\t\t\treturn units.indexOf(unitID) !== -1;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tShowNew(h) {\n\t\tconst state = this.State;\n\t\tif (!state.readonly && !state.clipboard) {\n\t\t\tconst date = webix.Date.copy(this.Day || state.date);\n\t\t\tconst unit = this.Unit.id;\n\t\t\tdate.setHours(h);\n\t\t\tstate.selected = { id: \"0\", date, unit };\n\t\t}\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class UnitsHeaderView extends JetView {\n\tconfig() {\n\t\treturn {\n\t\t\ttype: \"clean\",\n\t\t\tcols: [\n\t\t\t\t{ borderless: false, width: 51 },\n\t\t\t\t{\n\t\t\t\t\tview: \"dataview\",\n\t\t\t\t\tlocalId: \"header\",\n\t\t\t\t\tcss: \"webix_scheduler_day_header\",\n\t\t\t\t\txCount: 1,\n\t\t\t\t\tyCount: 1,\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 32,\n\t\t\t\t\tscroll: false,\n\t\t\t\t\ttype: {\n\t\t\t\t\t\theight: \"auto\",\n\t\t\t\t\t\twidth: \"auto\",\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: obj => obj.value,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.Header = this.$$(\"header\");\n\n\t\tthis.Units = this.app.getService(\"local\").units();\n\n\t\tthis.Units.then(unitsCache => {\n\t\t\tthis.Header.sync(unitsCache, () => {\n\t\t\t\tthis.Header.define({ xCount: unitsCache.count() });\n\t\t\t\tthis.Header.resize();\n\t\t\t});\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport SelectionMixin from \"helpers/selection\";\nimport { dayEventColor } from \"helpers/templates\";\nimport { getParams } from \"helpers/recurring\";\nimport CopyPasteMixin from \"helpers/copypaste\";\nimport { initDnD } from \"helpers/dnd\";\nimport EditRecurringMixin from \"helpers/editrecurring\";\n\nexport default class UnitMultidayList extends JetView {\n\tconstructor(app, config) {\n\t\tsuper(app);\n\n\t\tif (config) {\n\t\t\tthis.Unit = config.unit;\n\t\t}\n\t}\n\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"list\",\n\t\t\tlocalId: \"multiDayList\",\n\t\t\tautoheight: true,\n\t\t\tscroll: false,\n\t\t\tcss: \"webix_scheduler_multilist\",\n\t\t\ttype: {\n\t\t\t\theight: 36,\n\t\t\t\ttemplate: (obj, common) => this.EventTemplate(obj, common),\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_scheduler_multiday_event: (e, id, node) =>\n\t\t\t\t\tthis.ShowEvent(id, node),\n\t\t\t},\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tthis.List = this.$$(\"multiDayList\");\n\n\t\tthis._expandState = \"down\";\n\t\tthis.maxVisibleLines = 3;\n\n\t\tthis._DataObj = this.List.$view.firstChild;\n\t\tSelectionMixin(this, \"multi\", true);\n\n\t\tthis._moreBtn = {\n\t\t\tid: \"$wsh_multi_more\",\n\t\t\t$css: \"webix_scheduler_multi_more\",\n\t\t};\n\n\t\tthis.on(this.app, \"units:multi:state\", state => {\n\t\t\tif (state !== this._expandState) {\n\t\t\t\tstate === \"down\" ? this.WrapData() : this.ExpandData();\n\t\t\t}\n\t\t});\n\n\t\tinitDnD.call(this, this.List, \"multidayUnits\");\n\t\tEditRecurringMixin(this);\n\n\t\tif (this.app.config.copypaste && !webix.env.mobile)\n\t\t\tCopyPasteMixin(this, this.List, { multi: true });\n\t}\n\n\turlChange() {\n\t\tconst data = this.getParam(\"data\");\n\t\tif (data) {\n\t\t\tconst copy = webix.copy(data.multi);\n\t\t\tconst multi = this.FilterByUnits(copy);\n\t\t\tthis.LimitData(multi);\n\t\t\tthis.List.clearAll();\n\t\t\tthis.List.parse(multi);\n\t\t}\n\t}\n\n\tEventTemplate(obj, common) {\n\t\tconst height = common.height - 8;\n\t\tconst size = `height:${height}px; line-height:${height}px; width:calc(100% - 5px);`;\n\t\tconst color = obj.id !== \"$wsh_multi_more\" ? dayEventColor(obj) : \"\";\n\t\tconst css = this.GetStyle(obj);\n\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn `\n\t\t\t<div\n\t\t\t\tclass=\"${css}\"\n\t\t\t\tstyle=\"${size} ${color}\">\n\t\t\t\t\t${obj.text || _(\"(No title)\")}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tGetStyle(obj) {\n\t\tlet css = \"webix_scheduler_multiday_event\";\n\t\tif (obj.id == \"$wsh_multi_more\") return css;\n\n\t\tconst date = this.State.date;\n\t\tconst end =\n\t\t\t!obj.all_day && !webix.Date.timePart(obj.end_date)\n\t\t\t\t? webix.Date.add(obj.end_date, -1, \"day\", true)\n\t\t\t\t: obj.end_date;\n\n\t\tcss +=\n\t\t\tthis.State.selected &&\n\t\t\t(obj.id == this.State.selected.id || obj.id == this.State.selected.date)\n\t\t\t\t? \" webix_scheduler_event_selected\"\n\t\t\t\t: \"\";\n\n\t\tcss += obj.$past ? \" webix_scheduler_past_event\" : \"\";\n\n\t\tif (obj.start_date < date) css += \" webix_scheduler_event_break_left\";\n\t\tif (end >= webix.Date.add(date, 1, \"day\", true))\n\t\t\tcss += \" webix_scheduler_event_break_right\";\n\n\t\treturn css;\n\t}\n\n\tLimitData(data) {\n\t\tdelete this._reserve;\n\t\tdelete this._reserveIds;\n\t\tif (data.length > this.maxVisibleLines) {\n\t\t\tconst excess = data.length - 2;\n\t\t\tconst _ = this.app.getService(\"locale\")._;\n\t\t\tthis._moreBtn.text = `${excess} ${_(\"more\")}`;\n\n\t\t\tif (this._expandState === \"down\") {\n\t\t\t\tthis._reserve = data.splice(2, excess, this._moreBtn);\n\t\t\t} else {\n\t\t\t\tthis._reserve = data.slice(2);\n\t\t\t}\n\n\t\t\tthis._reserveIds = this._reserve.map(d => d.id);\n\n\t\t\tthis.app.callEvent(\"units:multi:state\", [this._expandState, false]);\n\t\t}\n\t}\n\n\tWrapData() {\n\t\tif (!this._inAnimation) {\n\t\t\tthis._expandState = \"down\";\n\n\t\t\tif (this._reserveIds) {\n\t\t\t\tthis._inAnimation = true;\n\t\t\t\tconst height =\n\t\t\t\t\tthis.List.$height -\n\t\t\t\t\t(this._reserveIds.length - 1) * this.List.type.height;\n\t\t\t\tthis.Animate(\"down\", height, () => {\n\t\t\t\t\tthis.List.add(this._moreBtn);\n\t\t\t\t\tthis.List.remove(this._reserveIds);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tExpandData() {\n\t\tconst expandable = this.List.exists(\"$wsh_multi_more\");\n\t\tif (!this._inAnimation) {\n\t\t\tthis._expandState = \"up\";\n\t\t\tif (expandable) {\n\t\t\t\tthis._inAnimation = true;\n\t\t\t\tthis.Animate(\"up\");\n\n\t\t\t\tthis.List.remove(\"$wsh_multi_more\");\n\t\t\t\tthis.List.parse(this._reserve);\n\t\t\t}\n\t\t}\n\t}\n\n\tAnimate(mode, height, handler) {\n\t\tthis.List.$view.style.transition = \"height 150ms\";\n\t\tif (height) this.List.$view.style.height = `${height}px`;\n\n\t\tsetTimeout(() => {\n\t\t\tif (handler) handler();\n\n\t\t\tthis.List.$view.style.transition = \"\";\n\t\t\tthis._inAnimation = false;\n\t\t}, 150);\n\t}\n\n\tShowEvent(id, node) {\n\t\tif (id === \"$wsh_multi_more\") {\n\t\t\tthis.app.callEvent(\"units:multi:state\", [\"up\", true]);\n\t\t} else {\n\t\t\tconst obj = this.List.getItem(id);\n\t\t\tconst sel = getParams(obj);\n\t\t\tsel.node = node;\n\t\t\tthis.State.selected = sel;\n\t\t}\n\t\treturn false;\n\t}\n\n\tFilterByUnits(multiEvents) {\n\t\treturn multiEvents.filter(obj => {\n\t\t\tif (obj.units) {\n\t\t\t\tconst units = obj.units.split(\",\");\n\t\t\t\tconst unitID = this.Unit.id + \"\";\n\t\t\t\treturn units.indexOf(unitID) !== -1;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\t/**\n\t * Returns the event object by its ID\n\t * @param {(string|number)} id - the ID of the event\n\t * @returns {Object}\n\t */\n\tGetEvent(id) {\n\t\treturn this.List.getItem(id);\n\t}\n\n\t/**\n\t * Returns the target date for the event\n\t * @returns {Date}\n\t */\n\tGetTargetDate() {\n\t\treturn this.State.date;\n\t}\n}\n","import MultiMoreView from \"../common/multimore\";\nimport UnitMultidayList from \"./multidaylist\";\nexport default class UnitMultidayView extends MultiMoreView {\n\tconfig() {\n\t\tconst ui = super.config();\n\t\tconst units = this.app.getService(\"local\").units();\n\n\t\tconst more = ui.cols[0];\n\t\tmore.onClick = {\n\t\t\t\"wxi-angle-down\": () =>\n\t\t\t\tthis.app.callEvent(\"units:multi:state\", [\"up\", true]),\n\t\t\t\"wxi-angle-up\": () =>\n\t\t\t\tthis.app.callEvent(\"units:multi:state\", [\"down\", true]),\n\t\t};\n\n\t\tui.cols[1] = { cols: [] };\n\n\t\treturn units.then(unitsCache => {\n\t\t\tconst data = unitsCache.serialize();\n\t\t\tfor (let i = 0; i < data.length; ++i) {\n\t\t\t\tui.cols[1].cols.push(\n\t\t\t\t\tnew (this.app.dynamic(UnitMultidayList))(this.app, {\n\t\t\t\t\t\tunit: data[i],\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn ui;\n\t\t});\n\t}\n\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tthis.MoreIcon = this.$$(\"more\");\n\n\t\tthis.on(this.State.$changes, \"date\", () => {\n\t\t\tthis.SetMoreIcon();\n\t\t});\n\n\t\tthis.on(this.app, \"units:multi:state\", (state, animate) => {\n\t\t\tthis.Animate(state, animate ? 150 : 1);\n\t\t});\n\t}\n\n\t/**\n\t * Sets a delay for animation of inner views (collapse/expand)\n\t * @param {string} mode - \"up\" or \"down\" - the direction of the icon\n\t * @param {number} delay - delay in milliseconds\n\t */\n\tAnimate(mode, delay) {\n\t\tsetTimeout(() => {\n\t\t\tthis.SetMoreIcon(mode);\n\t\t}, delay);\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport HourscaleView from \"../common/hourscale\";\nimport UnitEventsView from \"./events\";\nimport UnitsHeaderView from \"./header\";\nimport UnitMultidayView from \"./multiday\";\n\nimport { isMultiDay } from \"helpers/dates\";\n\nexport default class UnitsView extends JetView {\n\tconfig() {\n\t\tthis.Compact = this.getParam(\"compact\", true);\n\t\tconst units = this.app.getService(\"local\").units();\n\n\t\tconst multi = {\n\t\t\tlocalId: \"multi\",\n\t\t\thidden: true,\n\t\t\tcols: [UnitMultidayView],\n\t\t};\n\n\t\tconst days = {\n\t\t\tlocalId: \"scroll\",\n\t\t\tview: \"scrollview\",\n\t\t\tscroll: \"y\",\n\t\t\tcss: \"webix_scheduler_week_days\",\n\t\t\tbody: {\n\t\t\t\tcols: [HourscaleView],\n\t\t\t},\n\t\t};\n\n\t\treturn units.then(unitsCache => {\n\t\t\tconst data = unitsCache.serialize();\n\t\t\tfor (let i = 0; i < data.length; ++i) {\n\t\t\t\tdays.body.cols.push(\n\t\t\t\t\tnew (this.app.dynamic(UnitEventsView))(this.app, {\n\t\t\t\t\t\tunit: data[i],\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\trows: [UnitsHeaderView, multi, days],\n\t\t\t};\n\t\t});\n\t}\n\tinit() {\n\t\tconst state = this.app.getState();\n\n\t\tthis.on(state.$changes, \"date\", value => this.RefreshData(value));\n\t\tthis.on(state.$changes, \"active\", () => this.RefreshData(state.date));\n\t\tthis.on(this.app, \"events:refresh\", () => this.RefreshData(state.date));\n\n\t\t// updates made in form\n\t\tconst events = this.app.getService(\"local\").events(true);\n\t\tthis.on(\n\t\t\tevents.data,\n\t\t\t\"onStoreUpdated\",\n\t\t\t(_i, _o, mode) => mode && this.RefreshData(state.date)\n\t\t);\n\t}\n\n\tRefreshData(value) {\n\t\tthis.GetDay(value).then(data => {\n\t\t\t// this.app will be null if compact trigger was called in main.js\n\t\t\tif (this.app) this.setParam(\"data\", data, true);\n\n\t\t\tif (data.multi.length) {\n\t\t\t\tthis.$$(\"multi\").show();\n\t\t\t} else this.$$(\"multi\").hide();\n\t\t});\n\t}\n\n\tGetDay(date) {\n\t\tconst end = webix.Date.add(date, 1, \"day\", true);\n\t\treturn this.app\n\t\t\t.getService(\"local\")\n\t\t\t.getEvents(date, end)\n\t\t\t.then(evs => {\n\t\t\t\tconst multi = [],\n\t\t\t\t\tsingle = [];\n\t\t\t\tevs.forEach(ev => {\n\t\t\t\t\tif (isMultiDay(ev)) {\n\t\t\t\t\t\tmulti.push(ev);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsingle.push(ev);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn { multi, single };\n\t\t\t});\n\t}\n}\n","import UnitListView from \"../common/unitlist\";\nimport { isToday } from \"helpers/dates\";\n\nexport default class WeekEventsView extends UnitListView {\n\tconfig() {\n\t\tconst ui = super.config();\n\t\tui.css = \"webix_scheduler_week\";\n\t\tui.type.headerHeight = 28;\n\n\t\treturn ui;\n\t}\n\n\turlChange() {\n\t\tthis.data = this.getParam(\"data\");\n\t\tif (this.data) {\n\t\t\tthis.List.clearAll();\n\t\t\tthis.List.parse(this.data.all);\n\t\t\tthis.ToggleOverlay();\n\t\t}\n\t}\n\n\tTemplateHeader(datestring) {\n\t\tconst date = new Date(datestring * 1);\n\t\tconst today = isToday(date);\n\n\t\tconst fstring = `%l, %F <span class='webix_scheduler_monthday${\n\t\t\ttoday ? \" webix_scheduler_today\" : \"\"\n\t\t}'>%j</span>`;\n\n\t\treturn `<span class=\"webix_unit_header_inner\">${webix.Date.dateToStr(\n\t\t\tfstring\n\t\t)(date)}</span>`;\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { isToday } from \"helpers/dates\";\n\nexport default class WeekHeaderView extends JetView {\n\tconfig() {\n\t\treturn {\n\t\t\ttype: \"clean\",\n\t\t\tcols: [\n\t\t\t\t{ borderless: false, width: 51 },\n\t\t\t\t{\n\t\t\t\t\tview: \"dataview\",\n\t\t\t\t\tlocalId: \"header\",\n\t\t\t\t\tcss: \"webix_scheduler_day_header\",\n\t\t\t\t\txCount: 7,\n\t\t\t\t\tyCount: 1,\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 32,\n\t\t\t\t\tscroll: false,\n\t\t\t\t\ttype: {\n\t\t\t\t\t\theight: \"auto\",\n\t\t\t\t\t\twidth: \"auto\",\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: obj => {\n\t\t\t\t\t\treturn `<span class=\"webix_scheduler_weekday\">${obj.day}</span> <span class=\"webix_scheduler_monthday\">${obj.date}</span>`;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\turlChange() {\n\t\tthis.data = this.getParam(\"data\");\n\t\tif (this.data) {\n\t\t\tthis.RefreshData();\n\t\t}\n\t}\n\n\tRefreshData() {\n\t\tlet start = this.data.start;\n\t\tconst data = [];\n\t\twhile (start < this.data.end) {\n\t\t\tconst obj = {\n\t\t\t\tday: webix.i18n.calendar.dayShort[start.getDay()],\n\t\t\t\tdate: start.getDate(),\n\t\t\t};\n\t\t\tif (isToday(start)) {\n\t\t\t\tobj.$css = \"webix_scheduler_list_today\";\n\t\t\t}\n\t\t\tdata.push(obj);\n\t\t\tstart = webix.Date.add(start, 1, \"day\", true);\n\t\t}\n\n\t\tconst header = this.$$(\"header\");\n\t\theader.clearAll();\n\t\theader.parse(data);\n\t}\n}\n","import MultiMoreView from \"../common/multimore\";\nimport SelectionMixin from \"helpers/selection\";\nimport EditRecurringMixin from \"helpers/editrecurring\";\nimport { dayEventColor } from \"helpers/templates\";\nimport { initDnD, locateEvent } from \"helpers/dnd\";\nimport { daysBetweenInclusive } from \"helpers/dates\";\nimport { getParams } from \"helpers/recurring\";\nimport CopyPasteMixin from \"helpers/copypaste\";\n\nexport default class MultiDayEventsView extends MultiMoreView {\n\tconfig() {\n\t\tconst ui = super.config();\n\n\t\tui.cols[1] = {\n\t\t\tview: \"dataview\",\n\t\t\tlocalId: \"multiDayList\",\n\t\t\tcss: \"webix_scheduler_multidays\",\n\t\t\tscroll: false,\n\t\t\theight: 32,\n\t\t\txCount: 7,\n\t\t\tyCount: 1,\n\t\t\twidth: 0,\n\t\t\ttype: {\n\t\t\t\twidth: \"auto\",\n\t\t\t\theight: \"auto\",\n\t\t\t\titemHeight: 36,\n\t\t\t},\n\t\t\ttemplate: \"\",\n\t\t\ttooltip: {\n\t\t\t\ttemplate: \"\",\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_scheduler_multiday_event: e => this.ShowEvent(e),\n\t\t\t},\n\t\t};\n\n\t\treturn ui;\n\t}\n\tinit() {\n\t\tthis.State = this.app.getState();\n\t\tsuper.init();\n\n\t\tSelectionMixin(this, \"multi\");\n\t\tEditRecurringMixin(this);\n\n\t\tthis.Events = new webix.DataCollection({});\n\n\t\tthis.List.attachEvent(\"onAfterRender\", () => this.RenderEvents());\n\t\tinitDnD.call(this, this.List, \"multiday\");\n\n\t\tif (this.app.config.copypaste && !webix.env.mobile)\n\t\t\tCopyPasteMixin(this, this.List);\n\t}\n\n\turlChange() {\n\t\tthis.data = this.getParam(\"data\");\n\t\tif (this.data) {\n\t\t\tthis.ParseDays(this.data.multi);\n\t\t}\n\t}\n\n\tParseDays(events) {\n\t\tif (!events.length) return;\n\n\t\tthis.Events.clearAll();\n\t\tthis.Events.parse(events);\n\n\t\tconst days = [];\n\t\tfor (let d = 0; d < 7; d++) {\n\t\t\tdays.push({\n\t\t\t\tid: d + 1,\n\t\t\t\tdate: webix.Date.add(this.data.start, d, \"day\", true),\n\t\t\t});\n\t\t}\n\t\tthis.BreakEventsByDay(days);\n\n\t\tthis.SetMoreIcon(\n\t\t\tthis._maxEvents > this.maxVisibleLines ? this._expandState : null\n\t\t);\n\n\t\tthis.List.blockEvent();\n\t\tthis.List.parse(days);\n\t\tthis.ResetListHeight();\n\t\tthis.List.unblockEvent();\n\n\t\tthis.RenderEvents();\n\t}\n\n\tBreakEventsByDay(data) {\n\t\tthis.Days = [];\n\t\tconst processed = {};\n\t\tthis._maxEvents = 0;\n\n\t\tdata.forEach((day, dayIndex) => {\n\t\t\tconst today = day.date;\n\t\t\tthis.Days.push([]);\n\n\t\t\tthis.Events.data.each(ev => {\n\t\t\t\tif (!webix.isUndefined(processed[ev.id])) {\n\t\t\t\t\tif ((today <= ev.end_date && ev.all_day) || today < ev.end_date) {\n\t\t\t\t\t\tthis.Days[dayIndex][processed[ev.id]] = \"\";\n\t\t\t\t\t} else delete processed[ev.id];\n\t\t\t\t} else if (\n\t\t\t\t\tev.start_date < webix.Date.add(today, 1, \"day\", true) &&\n\t\t\t\t\tev.end_date >= today\n\t\t\t\t) {\n\t\t\t\t\tlet index = 0;\n\t\t\t\t\t// search for the first available index\n\t\t\t\t\twhile (!webix.isUndefined(this.Days[dayIndex][index])) index++;\n\n\t\t\t\t\tprocessed[ev.id] = index;\n\n\t\t\t\t\tconst config = {};\n\t\t\t\t\tconfig.es = ev.start_date;\n\t\t\t\t\tconfig.ee =\n\t\t\t\t\t\t!ev.all_day && !webix.Date.timePart(ev.end_date)\n\t\t\t\t\t\t\t? webix.Date.add(ev.end_date, -1, \"day\", true)\n\t\t\t\t\t\t\t: ev.end_date;\n\n\t\t\t\t\tconfig.length =\n\t\t\t\t\t\t1 +\n\t\t\t\t\t\tdaysBetweenInclusive(\n\t\t\t\t\t\t\t(config.ls = new Date(Math.max(this.data.start, config.es))),\n\t\t\t\t\t\t\t(config.le = new Date(Math.min(this.data.end - 1, config.ee)))\n\t\t\t\t\t\t);\n\n\t\t\t\t\tev.$config = config;\n\t\t\t\t\tthis.Days[dayIndex][index] = ev;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (this.Days[dayIndex].length > this._maxEvents)\n\t\t\t\tthis._maxEvents = this.Days[dayIndex].length;\n\t\t});\n\t}\n\n\tRenderEvents() {\n\t\tconst allEvents = this.Events.count();\n\n\t\tif (!allEvents) return;\n\n\t\tconst container = webix.html.create(\"div\", {\n\t\t\trole: \"presentation\",\n\t\t});\n\n\t\tlet html = \"\";\n\t\tlet renderedEvents = 0;\n\t\tconst toHide =\n\t\t\tthis._expandState === \"down\" && this._maxEvents > this.maxVisibleLines;\n\n\t\tthis.List.data.each((_day, dayIndex) => {\n\t\t\tconst dayHTML = [];\n\t\t\tconst visible = toHide\n\t\t\t\t? this.maxVisibleLines - 1\n\t\t\t\t: this.Days[dayIndex].length;\n\n\t\t\tfor (let i = 0; i < visible; ++i) {\n\t\t\t\tdayHTML[i] = this.Days[dayIndex][i];\n\n\t\t\t\tif (dayHTML[i]) {\n\t\t\t\t\tdayHTML[i] = this.ToHTML(dayHTML[i], dayIndex, i);\n\t\t\t\t\trenderedEvents++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thtml += dayHTML.join(\"\");\n\t\t});\n\n\t\tif (toHide) {\n\t\t\thtml += this.MoreOption(allEvents - renderedEvents);\n\t\t}\n\n\t\tcontainer.innerHTML = html;\n\t\tthis._DataObj = this.List.$view.firstChild.appendChild(container);\n\t\tthis.app.callEvent(\"events:rendered\", []);\n\t}\n\n\tToHTML(obj, cIndex, rIndex) {\n\t\tconst style = dayEventColor(obj);\n\t\tconst size = this.GetSizePosition(obj.$config.length, cIndex, rIndex);\n\t\tconst css = this.GetStyle(obj, obj.$config);\n\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn `\n\t\t\t<div\n\t\t\t\twebix_tooltip=\"${obj.text || _(\"(No title)\")}\"\n\t\t\t\twebix_e_id=\"${obj.id}\"\n\t\t\t\tclass=\"${css}\"\n\t\t\t\tstyle=\"${size} ${style}\">\n\t\t\t\t\t${obj.text || _(\"(No title)\")}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tGetStyle(obj, c) {\n\t\tconst { start, end } = this.data;\n\t\tlet css = \"webix_scheduler_multiday_event\";\n\t\tcss +=\n\t\t\tthis.State.selected &&\n\t\t\t(obj.id == this.State.selected.id || obj.id == this.State.selected.date)\n\t\t\t\t? \" webix_scheduler_event_selected\"\n\t\t\t\t: \"\";\n\n\t\tif (c.es < start && webix.Date.equal(start, webix.Date.dayStart(c.ls)))\n\t\t\tcss += \" webix_scheduler_event_break_left\";\n\t\tif (\n\t\t\tc.ee >= end &&\n\t\t\twebix.Date.equal(\n\t\t\t\twebix.Date.add(end, -1, \"day\", true),\n\t\t\t\twebix.Date.dayStart(c.le)\n\t\t\t)\n\t\t)\n\t\t\tcss += \" webix_scheduler_event_break_right\";\n\n\t\tcss += obj.$past ? \" webix_scheduler_past_event\" : \"\";\n\n\t\treturn css;\n\t}\n\n\tMoreOption(excess) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst size = this.GetSizePosition(\n\t\t\tthis.List.config.xCount,\n\t\t\t0,\n\t\t\tthis.maxVisibleLines - 1\n\t\t);\n\n\t\treturn `<div webix_e_id=\"$wsh_multi_more\" class=\"webix_scheduler_multiday_event webix_scheduler_multi_more\" style=\"${size}\">${excess} ${_(\n\t\t\t\"more\"\n\t\t)}</div>`;\n\t}\n\n\tGetSizePosition(length, cIndex, rIndex) {\n\t\t// numbers are for space between events and borders of component\n\t\tconst width = length * this.List.type.width - 4;\n\t\tconst height = this.List.type.itemHeight - 8;\n\t\tconst left = this.List.type.width * cIndex + 1;\n\t\tconst top = rIndex * this.List.type.itemHeight + 4;\n\n\t\treturn `width:${width}px; height:${height}px; line-height:${height}px; left:${left}px; top:${top}px;`;\n\t}\n\n\tShowEvent(e) {\n\t\tconst event = locateEvent(e, this.List.$view);\n\t\tif (event.id) {\n\t\t\tif (event.id === \"$wsh_multi_more\") return this.ExpandData();\n\n\t\t\tconst obj = this.Events.getItem(event.id);\n\t\t\tconst sel = webix.extend(event, getParams(obj), true);\n\t\t\tthis.State.selected = sel;\n\t\t}\n\t\treturn false;\n\t}\n\n\tExpandData() {\n\t\tif (!this._inAnimation) {\n\t\t\tthis._inAnimation = true;\n\n\t\t\tthis._expandState = \"up\";\n\t\t\tthis.Animate(\"up\");\n\n\t\t\tthis.ResetListHeight(this._maxEvents);\n\t\t}\n\t}\n\n\tWrapData() {\n\t\tif (!this._inAnimation) {\n\t\t\tthis._inAnimation = true;\n\t\t\tthis._expandState = \"down\";\n\n\t\t\tconst height =\n\t\t\t\tthis.List.$height -\n\t\t\t\t(this._maxEvents - this.maxVisibleLines) * this.List.type.height;\n\t\t\tthis.Animate(\"down\", height, () => {\n\t\t\t\tthis.ResetListHeight(this.maxVisibleLines);\n\t\t\t});\n\t\t}\n\t}\n\n\tResetListHeight(count) {\n\t\tif (!count)\n\t\t\tcount =\n\t\t\t\tthis._expandState === \"down\"\n\t\t\t\t\t? Math.min(this._maxEvents, this.maxVisibleLines)\n\t\t\t\t\t: this._maxEvents;\n\n\t\tconst height = count * this.List.type.itemHeight;\n\t\tif (this.List.type.height !== height) {\n\t\t\tthis.List.type.height = height;\n\t\t\tthis.List.define(\"height\", height);\n\t\t\tthis.List.resize();\n\t\t}\n\t}\n\n\t/**\n\t * Returns the data object for an event\n\t * @param {(string|number)} id - the ID of an event\n\t * @returns {Object} - the event object\n\t */\n\tGetEvent(id) {\n\t\treturn this.Events.getItem(id);\n\t}\n\n\t/**\n\t * Returns the target date for an event\n\t * @param {(string|number)} id - the ID of a data item of the main view (corresponds to a day)\n\t * @returns {Date}\n\t */\n\tGetTargetDate(id) {\n\t\treturn id ? this.List.getItem(id).date : this.State.date;\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport DayEventsView from \"../day/events\";\nimport WeekHeaderView from \"./header\";\nimport WeekEventsView from \"./compact\";\nimport HourscaleView from \"../common/hourscale\";\nimport MultiDayEventsView from \"./multiday\";\n\nimport { isMultiDay } from \"helpers/dates\";\n\nexport default class WeekView extends JetView {\n\tconfig() {\n\t\tthis.Compact = this.getParam(\"compact\", true);\n\n\t\tif (this.Compact) {\n\t\t\treturn {\n\t\t\t\trows: [WeekEventsView],\n\t\t\t};\n\t\t} else {\n\t\t\tconst days = {\n\t\t\t\tlocalId: \"scroll\",\n\t\t\t\tview: \"scrollview\",\n\t\t\t\tscroll: \"y\",\n\t\t\t\tcss: \"webix_scheduler_week_days\",\n\t\t\t\tbody: {\n\t\t\t\t\tcols: [HourscaleView],\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tconst weekLength = 7;\n\t\t\tfor (let i = 0; i < weekLength; ++i) {\n\t\t\t\tdays.body.cols.push(\n\t\t\t\t\tnew (this.app.dynamic(DayEventsView))(this.app, {\n\t\t\t\t\t\tday: i,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\trows: [\n\t\t\t\t\tWeekHeaderView,\n\t\t\t\t\t{ localId: \"multi\", hidden: true, cols: [MultiDayEventsView] },\n\t\t\t\t\tdays,\n\t\t\t\t],\n\t\t\t};\n\t\t}\n\t}\n\tinit() {\n\t\tconst state = this.app.getState();\n\n\t\tthis.on(state.$changes, \"date\", value => this.RefreshData(value));\n\t\tthis.on(state.$changes, \"active\", () => this.RefreshData(state.date));\n\t\tthis.on(this.app, \"events:refresh\", () => this.RefreshData(state.date));\n\n\t\t// updates made in form\n\t\tconst events = this.app.getService(\"local\").events(true);\n\t\tthis.on(\n\t\t\tevents.data,\n\t\t\t\"onStoreUpdated\",\n\t\t\t(_i, _o, mode) => mode && this.RefreshData(state.date)\n\t\t);\n\n\t\tif (!this.Compact) {\n\t\t\tthis.on(state.$changes, \"selected\", v => v && this.ScrollScale(v));\n\t\t}\n\t}\n\n\tRefreshData(date) {\n\t\tconst start = webix.Date.weekStart(date);\n\t\tconst end = webix.Date.add(start, 1, \"week\", true);\n\t\tthis.GetWeek(start, end).then(data => {\n\t\t\t// this.app will be null if compact trigger was called in main.js\n\t\t\tif (this.app) this.setParam(\"data\", data, true);\n\n\t\t\tif (data.multi.length) {\n\t\t\t\tthis.$$(\"multi\").show();\n\t\t\t} else this.$$(\"multi\").hide();\n\t\t});\n\t}\n\n\tGetWeek(start, end) {\n\t\treturn this.app\n\t\t\t.getService(\"local\")\n\t\t\t.getEvents(start, end)\n\t\t\t.then(evs => {\n\t\t\t\tif (this.Compact) {\n\t\t\t\t\treturn { start, end, all: evs };\n\t\t\t\t}\n\n\t\t\t\tconst multi = [],\n\t\t\t\t\tsingle = [];\n\n\t\t\t\tevs.forEach(ev => {\n\t\t\t\t\tif (isMultiDay(ev)) {\n\t\t\t\t\t\tmulti.push(ev);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsingle.push(ev);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn { start, end, multi, single };\n\t\t\t});\n\t}\n\n\tScrollScale(v) {\n\t\tif (v.id === \"0\" && !v.date) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst y = (new Date().getHours() + 2) * 40;\n\t\t\t\tthis.$$(\"scroll\").scrollTo(0, y);\n\t\t\t}, 100);\n\t\t}\n\t}\n}\n","import { ignoreInitial } from \"jet-restate\";\nimport { JetView } from \"webix-jet\";\nimport MoreWindowView from \"../month/more\";\n\nexport default class YearCalendarView extends JetView {\n\tconstructor(app, config) {\n\t\tsuper(app, config);\n\n\t\tthis._month = config.month;\n\t}\n\n\tconfig() {\n\t\tthis.DayEvents = {};\n\n\t\treturn {\n\t\t\tview: \"calendar\",\n\t\t\tlocalId: \"calendar\",\n\t\t\tevents: day => this.MarkEvent(day),\n\t\t\ticons: false,\n\t\t\tnavigation: false,\n\t\t\tcalendarHeader: \"%F\",\n\t\t\tskipEmptyWeeks: true,\n\t\t\tborderless: true,\n\t\t\tonClick: {\n\t\t\t\twebix_cal_day_with_event: e => this.ShowEvents(e),\n\t\t\t\twebix_cal_month: () => this.ShowMonth(),\n\t\t\t},\n\t\t\tonDblClick: {\n\t\t\t\twebix_cal_day: e => this.ShowNew(e),\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonChange: (date, mode) => mode === \"user\" && this.SetStateDate(date),\n\t\t\t},\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.Data = this.app.getService(\"local\");\n\t\tthis.Calendar = this.getRoot();\n\t\tthis.Events = new webix.DataCollection({});\n\t\tconst state = (this.State = this.app.getState());\n\n\t\tthis.on(state.$changes, \"date\", date => this.ManageDateChange(date));\n\n\t\tthis.on(\n\t\t\tstate.$changes,\n\t\t\t\"active\",\n\t\t\tignoreInitial(() => this.RefreshData(this.GetMonthStart(state.date)))\n\t\t);\n\t\tthis.on(this.app, \"events:refresh\", () =>\n\t\t\tthis.RefreshData(this.GetMonthStart(state.date))\n\t\t);\n\n\t\t// updates made in form\n\t\tconst events = this.app.getService(\"local\").events(true);\n\t\tthis.on(\n\t\t\tevents.data,\n\t\t\t\"onStoreUpdated\",\n\t\t\t(_i, _o, mode) => mode && this.RefreshData(this.GetMonthStart(state.date))\n\t\t);\n\n\t\tthis.Popup = this.ui(\n\t\t\tnew (this.app.dynamic(MoreWindowView))(this.app, {\n\t\t\t\tevents: this.Events,\n\t\t\t\tdrag: false,\n\t\t\t})\n\t\t);\n\t}\n\n\t/**\n\t * Sets the date in the global reactive state\n\t * @param {Date} date\n\t */\n\tSetStateDate(date) {\n\t\tthis.State.date = webix.Date.dayStart(date);\n\t}\n\n\t/**\n\t * Switches the calendar to a new month and gets events for it\n\t * @param {Date} date\n\t */\n\tManageDateChange(date) {\n\t\tif (!this._date || this._date.getFullYear() != date.getFullYear()) {\n\t\t\tlet monthStart = (this.MonthStart = this.GetMonthStart(date));\n\t\t\tthis.Calendar.showCalendar(monthStart);\n\t\t\tthis.RefreshData(monthStart);\n\t\t}\n\t\tif (this._month === date.getMonth()) this.Calendar.setValue(date);\n\t\telse if (this.Calendar.getValue()) this.Calendar.setValue();\n\t\tthis._date = date;\n\t}\n\n\t/**\n\t * Gets the date at the start of the current month\n\t * @param {Date} date\n\t * @returns {Date}\n\t */\n\tGetMonthStart(date) {\n\t\treturn new Date(date.getFullYear(), this._month, 1);\n\t}\n\n\t/**\n\t * Gets events for the given month\n\t * @param {Date} monthStart - the start of the month\n\t */\n\tRefreshData(monthStart) {\n\t\tthis.DayEvents = {};\n\t\tconst monthEnd = webix.Date.add(monthStart, 1, \"month\", true);\n\n\t\tthis.Data.getEvents(monthStart, monthEnd).then(data => {\n\t\t\tthis.Events.clearAll();\n\t\t\tthis.Events.parse(data);\n\t\t\twhile (monthStart < monthEnd) {\n\t\t\t\tlet next = webix.Date.add(monthStart, 1, \"day\", true);\n\t\t\t\tdata.forEach(obj => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t(obj.all_day\n\t\t\t\t\t\t\t? obj.end_date >= monthStart\n\t\t\t\t\t\t\t: obj.end_date > monthStart) &&\n\t\t\t\t\t\tobj.start_date < next\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst dateKey = monthStart.valueOf();\n\t\t\t\t\t\tif (!this.DayEvents[dateKey]) this.DayEvents[dateKey] = [];\n\t\t\t\t\t\tthis.DayEvents[dateKey].push(obj.id);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tmonthStart = next;\n\t\t\t}\n\t\t\tthis.Calendar.refresh();\n\t\t});\n\t}\n\n\t/**\n\t * Adds dots to days with events\n\t * @param {Date} day - the date\n\t * @returns {string} the name of the CSS class\n\t */\n\tMarkEvent(day) {\n\t\tlet css = webix.Date.isHoliday(day) || \"\";\n\t\tif (this.DayEvents[day.valueOf()]) css += \" webix_cal_day_with_event\";\n\t\treturn css;\n\t}\n\n\t/**\n\t * Returns a timestamp of the day that was clicked\n\t * @param {MouseEvent} e - the mouse event\n\t * @returns {number|null} the timestamp or null\n\t */\n\tGetDay(e) {\n\t\tconst day = e.target.innerHTML;\n\t\tif (day) return new Date(this.MonthStart).setDate(day * 1);\n\t\treturn null;\n\t}\n\n\t/**\n\t * Shows a popup with a list of events for the day\n\t * @param {MouseEvent} e - the mouse event\n\t */\n\tShowEvents(e) {\n\t\tconst date = this.GetDay(e);\n\t\tif (date) {\n\t\t\tconst data = this.DayEvents[date];\n\t\t\tthis.Popup.ShowWindow(date, e.target.parentNode, data || []);\n\t\t}\n\t}\n\n\t/**\n\t * Opens this day and opens the form with data for a new event\n\t * @param {MouseEvent} e - the mouse event\n\t */\n\tShowNew(e) {\n\t\tconst state = this.State;\n\t\tif (!state.readonly && !state.clipboard) {\n\t\t\tconst date = this.GetDay(e);\n\t\t\tif (date) {\n\t\t\t\t// no $batch because view needs to be ready\n\t\t\t\tstate.mode = \"day\";\n\t\t\t\tstate.selected = { id: \"0\", date };\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Opens the month view for the selected month\n\t */\n\tShowMonth() {\n\t\tthis.State.$batch({\n\t\t\tmode: \"month\",\n\t\t\tdate: this.MonthStart,\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport YearCalendarView from \"./calendar\";\n\nexport default class YearView extends JetView {\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"scrollview\",\n\t\t\tbody: {\n\t\t\t\tpadding: 20,\n\t\t\t\tview: \"flexlayout\",\n\t\t\t\tcss: \"webix_scheduler_year\",\n\t\t\t\tcols: this.GetCalendars(),\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * Creates 12 calendars for each month of the current year\n\t * @returns {Array} an array of calendar views\n\t */\n\tGetCalendars() {\n\t\tconst calendars = [];\n\t\tfor (let i = 0; i < 12; i++) {\n\t\t\tcalendars.push(\n\t\t\t\tnew (this.app.dynamic(YearCalendarView))(this.app, { month: i })\n\t\t\t);\n\t\t}\n\t\treturn calendars;\n\t}\n}\n","/*Thai (Thailand) locale\n * modified to use Budhist Era Years\n */\n\nwebix.i18n.locales[\"th-TH\"] = {\n   groupDelimiter: \",\",\n   groupSize: 3,\n   decimalDelimiter: \".\",\n   decimalSize: 2,\n   dateFormat: (date) => {\n      if (date == null) return \"\";\n      else if (typeof date == \"string\") return date;\n\n      const format = webix.Date.dateToStr(`%j/%m/${date.getFullYear() + 543}`);\n      return format(date);\n   },\n   timeFormat: \"%G:%i\",\n   longDateFormat: (date) => {\n      if (date == null) return \"\";\n      else if (typeof date == \"string\") return date;\n\n      const format = webix.Date.dateToStr(`%j %F ${date.getFullYear() + 543}`);\n      return format(date);\n   },\n   fullDateFormat: (date) => {\n      if (date == null) return \"\";\n      else if (typeof date == \"string\") return date;\n\n      const format = webix.Date.dateToStr(\n         `%j %F ${date.getFullYear() + 543} %G:%i`\n      );\n      return format(date);\n   },\n   am: [\"am\", \"AM\"],\n   pm: [\"pm\", \"PM\"],\n   price: \"{obj}\",\n   priceSettings: {\n      groupDelimiter: \",\",\n      groupSize: 3,\n      decimalDelimiter: \".\",\n      decimalSize: 2,\n   },\n   calendar: {\n      monthFull: [\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n      ],\n      monthShort: [\n         \"..\",\n         \"..\",\n         \"..\",\n         \"..\",\n         \"..\",\n         \"..\",\n         \"..\",\n         \"..\",\n         \"..\",\n         \"..\",\n         \"..\",\n         \"..\",\n      ],\n      dayFull: [\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n         \"\",\n      ],\n      dayShort: [\".\", \".\", \".\", \".\", \".\", \".\", \".\"],\n   },\n   aria: {\n      dateFormat: (date) => {\n         if (date == null) return \"\";\n         else if (typeof date == \"string\") return date;\n\n         const format = webix.Date.dateToStr(\n            `%d %F ${date.getFullYear() + 543}`\n         );\n         return format(date);\n      },\n      monthFormat: (date) => {\n         if (date == null) return \"\";\n         else if (typeof date == \"string\") return date;\n\n         const format = webix.Date.dateToStr(`%F ${date.getFullYear() + 543}`);\n         return format(date);\n      },\n      yearFormat: (date) => {\n         if (date == null) return \"\";\n         else if (typeof date == \"string\") return date;\n\n         const format = webix.Date.dateToStr(`${date.getFullYear() + 543}`);\n         return format(date);\n      },\n   },\n};\n","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js?url=false!./gantt.min.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js?url=false!./reports.min.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js?url=false!./query.min.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js?url=false!./scheduler.min.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js?url=false!./querybuilder.min.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/css-loader/dist/cjs.js?url=false!./hint.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import tinymce from \"tinymce\";\nimport \"tinymce/icons/default\";\nimport \"tinymce/themes/silver\";\nimport \"tinymce/plugins/link\";\nimport \"tinymce/skins/ui/oxide/skin.min.css\";\nimport \"tinymce/skins/ui/oxide/content.css\"; // content.min.css ?\nimport \"tinymce/skins/content/default/content.min.css\";\n\nwebix.protoUI(\n   {\n      name: \"tinymce-editor\",\n      defaults: {\n         config: { theme: \"silver\", statusbar: false },\n         value: \"\",\n      },\n      $init: function () {\n         webix.html.addStyle(\".tox-tinymce{ border:0px !important}\");\n\n         this._mce_id = \"webix_mce_\" + (this.config.id || webix.uid());\n         this.$view.innerHTML =\n            \"<textarea id='\" +\n            this._mce_id +\n            \"' style='width:100%; height:100%'></textarea>\";\n\n         this._waitEditor = webix.promise.defer();\n\n         this.$ready.push(this._require_tinymce_once);\n      },\n      render: function () {\n         this._set_inner_size();\n      },\n      _require_tinymce_once: function () {\n         var c = this.config;\n\n         if (c.cdn === false || window.tinymce) {\n            this._init_tinymce_once();\n            return;\n         }\n\n         var apiKey = c.apiKey ? c.apiKey : \"no-api-key\";\n         var cdn =\n            c.cdn ||\n            \"https://cdn.tiny.cloud/1/\" + apiKey + \"/tinymce/5.0.14-54\";\n\n         //path to tinymce codebase\n         window.tinyMCEPreInit = {\n            query: \"\",\n            base: cdn,\n            suffix: \".min\",\n         };\n\n         webix\n            .require([cdn + \"/tinymce.min.js\"])\n            .then(webix.bind(this._init_tinymce_once, this))\n            .catch(function (e) {\n               console.log(e);\n            });\n      },\n      _init_tinymce_once: function () {\n         if (!tinymce.dom.Event.domLoaded) {\n            // woraround event logic in tinymce\n            tinymce.dom.Event.domLoaded = true;\n         }\n\n         var editor_config = webix.copy(this.config.config || {});\n         webix.extend(\n            editor_config,\n            {\n               selector: \"#\" + this._mce_id,\n               resize: false,\n            },\n            true\n         );\n\n         var custom_setup = editor_config.setup;\n         editor_config.setup = webix.bind(function (editor) {\n            if (custom_setup) custom_setup(editor);\n            editor.on(\"init\", webix.bind(this._mce_editor_ready, this), true);\n         }, this);\n\n         webix.delay(function () {\n            tinymce.init(editor_config);\n         }, this);\n      },\n      _mce_editor_ready: function (event) {\n         this._editor = event.target;\n\n         this.setValue(this.config.value);\n         this._set_inner_size();\n         this._waitEditor.resolve(this._editor);\n      },\n      _set_inner_size: function () {\n         if (this._editor) {\n            this.$view.querySelector(\".tox-tinymce\").style.height =\n               this.$height + \"px\";\n         }\n      },\n      $setSize: function (x, y) {\n         if (webix.ui.view.prototype.$setSize.call(this, x, y)) {\n            this._set_inner_size();\n         }\n      },\n      setValue: function (value) {\n         this.config.value = value;\n         this._waitEditor.then(function (editor) {\n            editor.setContent(value);\n         });\n      },\n      getValue: function () {\n         return this._editor ? this._editor.getContent() : this.config.value;\n      },\n      focus: function () {\n         this._waitEditor.then(function (editor) {\n            editor.focus();\n         });\n      },\n      getEditor: function (wait) {\n         return wait ? this._waitEditor : this._editor;\n      },\n   },\n   webix.ui.view\n);\n","/**\n * webixResources.js\n * This file should include all extra webix resources (components, locales, etc.)\n * This will be bundeled by webpack into a single file and loaded as a dynamic\n * import after webix is loaded.\n *\n * Notes:\n * - use `webpackMode: \"eager\"` comment to include the dynamic import in this\n *   package\n */\n\n// CSS\nimport \"./components/gantt/gantt.min.css\";\nimport \"./components/reports/reports.min.css\";\nimport \"./components/query/query.min.css\";\nimport \"./components/scheduler/scheduler.min.css\";\nimport \"./components/querybuilder/querybuilder.min.css\";\nimport \"./components/hint/hint.css\";\n\n// Components\nimport(\n   /* webpackMode: \"eager\" */\n   \"./components/gantt/gantt.min.js\"\n).then((gantt) => (window.gantt = gantt));\nimport \"./components/hint/hint.js\";\nimport(\n   /* webpackMode: \"eager\" */\n   \"./components/kanban/kanban.min.js\"\n).then((kanban) => (window.kanban = kanban));\nimport(\n   /* webpackMode: \"eager\" */\n   \"./components/pivot/pivot.min.js\"\n).then((pivot) => (window.pivot = pivot));\nimport \"./components/query/query.min.js\";\n// Should use webix/query, querybuilder no longer maintained\n// But we still use this in some places (processing record rules, etc)\nimport \"./components/querybuilder/querybuilder.min.js\";\nimport(\n   /* webpackMode: \"eager\" */\n   \"./components/reports/reports.min.js\"\n).then((report) => (window.reports = report));\nimport(\n   /* webpackMode: \"eager\" */\n   \"./components/scheduler/scheduler.min.js\"\n).then((scheduler) => (window.scheduler = scheduler));\n\n// Extras\nimport \"./extras/tinymce\";\n\n// Locales\nimport \"./locales/th-TH.js\";\n"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","id","module","exports","___CSS_LOADER_EXPORT___","push","webix","config","this","webixJet","_events","_subs","_data","params","extend","JetBase","_root","_detachEvents","_destroySubs","_container","app","_parent","value","url","_segment","update","show","parent","view","getParentView","getParam","suburl","toString","root_1","getRoot","queryView","obj","localId","$scope","name","attachEvent","key","kid","contains","sub","getSubViewInfo","subview","popup","events","i","length","detachEvent","subView","destructor","current","default","branch","child","_getDefaultSub","_routed_view","parse","substr","parts","split","chunks","test","result","pos","indexOf","params_1","_i","dchunk","decodeURIComponent","page","isNew","url2str","stack","stack_1","chunk","obj2str","join","str","encodeURIComponent","c","route","index","_next","path","Route","slice","setParams","old","kids","reset","concat","_join","Promise","res","rej","redirect","confirm","callEvent","catch","err","then","NavigationBlocked","_this","n","_super","_children","__extends","JetView","ui","container","jetview","createView","render","setParam","parent_1","target","_renderFrameLock","_show","segment","_init_url_data","_urlChange","linkRouter","getRouter","set","silent","_$view","_$","_$url","message","destroy","_destroyKids","plugin","getUrl","tagName","refresh","_render","root","r","document","body","toNode","cfg","_render_final","response","slot","$$","reject","copyConfig","oldui","parent_2","asWin","setPosition","isVisible","_init","_initUrl","ready","_initError","init","waits","frame","wait","all","urlChange","lock","_renderFrame","next","_createSubView","shift","_override","error","createFromURL","uis","_ui","JetViewRaw","cb","SubRouter","a","append","_once","t","window","version","start","_services","EventSystem","JetAppBase","_subSegment","handler","getSubView","prototype","$subview","addSubView","isArray","Array","method","point","DataCollection","RegExp","Map","Date","copy","$router","srcElement","getAttribute","trigger_1","_forView","trigger","cancelBubble","preventDefault","route_1","parentNode","clickHandler","views","_loadError","hidden","replace","require","__esModule","loadView","over","override","dv","get","router","rest","apply","data","bind","er","debug","console","text","innerHTML","type","expire","event","_first_start","top","base","setTimeout","animation","node_1","html","addCss","removeCss","now","urlString","template","uid","_detectPrefix","onpopstate","HashRouter","routes","compare","history","pushState","prefix","sufix","_getRaw","routerPrefix","location","href","isPatched","patch","w","win","promise","freeze","some","$freeze","resize","baseAdd","baselayout","addView","baseRemove","removeView","jview_1","subs_1","arguments","subs","layout","protoUI","$init","$app","$ready","proxy","JetApp","UrlRouter","pathname","search","_$config","EmptyRouter","has","store","Object","hasOwnProperty","call","forEach","context","warn","x","String","russianPluralGroups","end","pluralTypes","arabic","lastTwo","bosnian_serbian","chinese","croatian","french","german","russian","lithuanian","czech","polish","icelandic","slovenian","pluralTypeToLanguages","escape","token","dollarRegex","defaultTokenRegex","transformPhrase","phrase","substitutions","locale","tokenRegex","TypeError","interpolationRegex","options","smart_count","texts","count","ret","langToPluralType","langs","lang","en","pluralTypeName","expression","argument","Polyglot","opts","phrases","currentLocale","allowMissing","onMissingKey","suffix","RangeError","interpolation","newLocale","morePhrases","prefixedKey","unset","clear","newPhrases","_","webixPolyglot","plugins","_view","storage","setLangData","pconfig","polyglot","poly","service","put","locName","i18n","setLocale","setLang","getLang","setService","once","setSize","appView","appWidth","$width","appHeight","$height","_fillApp","define","width","height","left","setHandlers","$destructed","$view","enable","resizeEv","link","source","defineProperty","createState","handlers","out","observe","mask","queue","waitInQueue","notify","meta","list","enumerable","configurable","values_1","sconfig","nested","reactive","$extend","val","valueOf","DragScroll","ctx","_auto_scroll_delay","delay","autoScroll","clearTimeout","yScroll","direction","xScroll","box","offset","from","autoYScroll","senseY","autoXScroll","senseX","DragControl","active","node","getNode","$dragPos","style","y","sense","scroll","getScrollState","autoScrollTo","snode","Math","min","scrollWidth","mode","scrollTo","abs","initDnD","ctrl","master","Local","getService","addDrag","addDrop","getMoveMode","rect","getBoundingClientRect","p","minWidth","env","touch","delta","updateDragScrollConfig","ds","scales","getScales","round","cellWidth","cellHeight","$longTouchLimit","$dragCreate","pointer","State","readonly","getContext","$touch","locateEvent","item","getItem","$group","classList","Modes","getItemNode","scroll_1","evContext","getEventContext","step","precise","nsc","getSmallerCount","minUnit","dx","querySelector","parseInt","l","dragScroll","cloneNode","className","visibility","cursor","appendChild","display","$dragDestroy","$waitUpdate","Action","action","finally","remove","$dragIn","s","$dragOut","$drop","time","timeShift","ev","elementFromPoint","locate","changedTouches","touches","pageX","pageY","clientX","clientY","setDragOffset","x_offset","y_offset","nscroll","max","links","css","fromStart","opacity","create","toStart","linkType","targetId","move","progress","prevProgress","progressNode","updateTaskTemplate","zIndex","boxShadow","contrast","dark","skin","$name","isUndefined","DragProgressTemplate","selection","class","tb","floor","offsetX","getIdByIndex","dates","BarsView","borderless","cells","relative","BarsType","on","onItemClick","ItemClickHandler","tooltip","GetTooltip","_a","getChildViews","holidays","bars","Holidays","Links","Bars","Ops","Helpers","local","linkCollection","ldata","LinksData","Calendars","resourceCalendars","HandleScroll","HandleDrag","HandleSelection","InitMarkers","HandleHolidays","$changes","v","SyncData","refreshLinks","RefreshLinks","RenderResourceHolidays","DrawGrid","VisibleTasks","ApplySelection","o","showCriticalPath","assignments","excludeHolidays","task","tasks","updateAssignedTaskDates","updateScaleMinMax","$batch","selected","backgroundImage","drawGridInner","marginTop","state","getState","backgroundPosition","Resize","unselect","clearAll","getVisibleTasksCollection","taskCalendarMap","sync","$data","GetSplitBox","top_1","html_1","order","isLast_1","TemplateStart","BarsTemplate","TemplateEnd","templateStart","isLast","templateEnd","last","first","$x","$w","rwidth","$y","$h","h","diff","BarCSS","contentCss","ContentCss","ceil","sqrt","pow","drag","baseline","planned_start","TemplateBaseline","$x0","$w0","$critical","_mousemove_handler","pointerType","eventRemove","_scroll_handler","markers","m","$interval","clearInterval","temp","scrollTop","scrollLeft","holidaysContainer","containerForMarkers","lines","GetLinks","attrs","viewBox","scrollHeight","setAttribute","SetHolidaysScroll","resources","resourcesDiagram","resHolidaysContainer","selLine","insertBefore","firstChild","ind","getIndexById","exists","ScrollToTask","RenderMarkers","start_date","setInterval","GetMarkerPosition","MarkerTemplate","date","astart","getUnitStart","startOnMonday","links_1","each","$p","critical","criticalPath","isLinkCritical","LinksTemplate","setHTML","tid","find","updateLink","area","minHeight","ops","inProgress","updateTaskTime","refreshTasks","RefreshTaskLinks","updateTask","addLink","newLink","top_2","shift_1","points","map","unit","getSmallerUnit","addUnit","splitCont","sort","b","_b","RenderHolidays","func","dayStart","add","hourOffset","getHours","equal","timePart","html_2","EachScaleDate","isHoliday","HolidayTemplate","calendar","dateStart","isResourceHoliday","ResourceHolidayTemplate","ResourceWorkDayTemplate","taskId","MarkResourceHolidays","GetDateBox","parser","longDateFormatStr","tip","end_date","duration","ScalesView","RenderScales","rows","line","canMarkHolidays","cell","CellTemplate","FormatDate","format","dateToStr","ChartView","ScaleView","hide","DiagramView","WorkloadMarkersType","filterMode","showSubItems","level","LocalState","Unit","Scales","RDCollection","getRDCollection","RestoreTreeState","filter","ToggleBranch","by","dir","as","open","close","getBranch","opened","_treeOpened","clientHeight","t_1","openAll","u","common","MarkerStartTemplate","classname","aria","$level","GetMarkerData","MarkerToHTML","resId","resource_id","calendarId","calendar_id","calendars","d","hourParts","units","markerWidth","halfStep","CheckResourceHoliday","hours","overloaded","CheckOverload","marker","unitLoadNorm","day","number","localeCompare","ignorePunctuation","numeric","arrayEquals","every","includes","TreeView","compact","Compact","columns","header","TreeTemplate","fillspace","batch","tree","prerender","treeWidth","rowHeight","headerRowHeight","scrollAlignY","resizeColumn","headerOnly","size","onViewResize","Tree","onAfterOpen","onAfterClose","onAfterSort","SortTasks","onColumnResize","user","NormalizeColumns","onClick","gti-menu","ToggleColumns","ls","_unit","_collapsed","ShowInUnits","col","columnId","getColumnConfig","refreshColumns","icon","treetable","category","resourceAvatar","space","cols","lastFillspace","showColumnBatch","SetColumns","getColumnIndex","lv","isColumnVisible","cv","vis","hideColumn","showColumn","RDiagramView","elements","onChange","localState","radio","words","BaselineView","icons","autoheight","elementsConfig","labelPosition","padding","right","visibleBatch","label","suggest","autowidth","click","AddBtnClickHandler","RemoveBtnClickHandler","UpdateTaskTime","UpdateTask","Form","Tasks","FillData","showBatch","setValues","vals","f","_eventSource","$eventSource","updateDates","planned_end","planned_duration","getValues","PrepareDates","updatePlannedTaskDuration","blockEvent","unblockEvent","TableView","table","editable","hover","scheme","ttype","conf","collection","editor","onBeforeEditStart","onBeforeEditStop","UpdateLink","row","onAfterLoad","wxi-trash","title","DeleteLink","$active","layoutMargin","form","bottom","_id","related","getLinks","editCancel","updateItem","removeLink","editors","gantt_numeditor","inp","ResourcesView","single","IsSingle","button","editaction","ResourceTemplate","listItemHeight","OptionTemplate","EditorOptionTemplate","ValueTemplate","editFormat","parseFloat","editParse","isNaN","DeleteIconTemplate","Table","column","editRow","getEditor","getPopup","focus","addCellCss","resource","FilterOptions","onAfterEditStart","getInputNode","range","GetRange","ApplyEditorLimits","GetValueStep","ApplyEditorStep","removeCellCss","ApplyValueRange","UpdateAssignment","webix_gantt_remove_icon","RemoveAssignment","margin","Resources","getAssignments","assignees","GetData","disable","sortResources","tableIds","rInd","updateAssignment","CloseEditor","resourceItem","getResourceValueRange","getResourceValueStep","removeAssignment","ShowPopup","addAssignment","getDefaultResourceValue","EditorTemplate","GetUnitName","getResourceUnit","fitMaster","AddAssignment","Popup","GetPopupConfig","SetPopupPlaceholder","placeholder","getBody","FormView","isResources","aSkin","bar","layoutPadding","inputHeight","Close","Done","types","projects","splice","accItems","collapsed","accordion","multi","ToggleControls","typeSelect","SetResourceHolidays","SetBaselineVisibility","typeList","getList","$count","LimitTypeOptions","SetResourcesVisibility","RemoveTagsFromText","updateTaskDuration","_inProgress","isDirty","Back","exit","edit","arr","els","getTaskCalendar","el","TaskView","editButton","EditTask","info","InfoTemplate","deleteButton","align","inputWidth","DeleteTask","Text","FillTemplate","sources","targets","removeTask","BaseTemplate","LinkTemplate","BaselineTemplateChunk","details","DateFormat","InfoTemplateChunk","ResourcesTemplateChunk","maxWidth","s0","getTextSize","s1","avatar","dpt","TaskPopup","updateConfig","fullscreen","head","maxAvatarNumber","TitleTemplate","dateFormatStr","ResourcesTemplate","unshift","select","wxi-plus","AddTask","wxi-plus-circle","onBeforeOpen","HandleToggle","onBeforeSelect","BeforeSelectHandler","onBeforeDrag","BeforeDragHandler","onBeforeDrop","BeforeDropHandler","Mode","Assignments","pid","$dragHTML","moveTask","resDisplayed","clearEvID","RefreshData","loaders","waitData","GetLoaders","ApplySorting","getSelectedId","pdata","_isTaskVisible","showItem","setState","newTask","GetNewTask","AddTaskWithAssignment","assigned","SplitTaskWithAssignment","splitTaskWithDnd","addTask","GetDates","waitArr","getParentId","rId","sibling","aops","dataSorter","sortState","RefreshTasks","assigned_1","GetAssignmentsHTML","assignedArr","num","pop","lastStr","numStr","TopView","sizeTrigger","_compactValue","_compactHandler","_app","_forceCompact","forceCompact","_compactWidth","compactWidth","_checkTrigger","$setSize","fCompact","SetCompactMode","oid","ShowTask","HideTask","ProgressBar","showProgress","hideProgress","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","resetScales","dateToLocalStr","parseFormat","scaleStart","scaleEnd","oldScale","_scales","_scaleBase","setScales","_taskHeight","refreshResourceTasks","preciseTimeUnit","scaleCellWidth","barHeight","borderWidth","force","_tasks","createTasks","getTreeData","TreeCollection","data->onStoreLoad","data->onStoreUpdated","_links","$change","parseFormatDate","$css","$sort","$serialize","taskOut","$export","updID","k","refreshBaseline","createLinks","found","tcollection","taskParent","$parent","taskSplit","_categories","categories","_resources","rData","ctg","_assignments","aCopy","assign","_calendars","createCalendars","weekDays","datePart","clean","getRange","latestDate_1","isTaskCritical","latestDate","dependent","isNoSlack","nextStart","currentEnd","g","getResourceTree","_calendarMap","refreshCalendarMap","cal","grouping","collections","Infinity","_url","Backend","ajax","json","post","del","_local","_helpers","_back","_state","Operations","addMode","cleanData","added","adjustScale","completeAdd","position","syncProject","inner","updatePlanned","removeAssignments","syncTasks","field","_updatePlannedTaskDuration","change","getWorkDateDiff","p_1","eachSubItem","newDate","changedKid","sign","ad","setProjectData","offsetDate","us","completeRemoval","linkExists","duplicate","oldParent","oldIndex","getBranchIndex","reorderTask","collection_1","waitArr_1","toInteger","dirtyNumber","NaN","Number","requiredArgs","required","args","toDate","argStr","getTime","addDays","dirtyDate","dirtyAmount","amount","setDate","getDate","addMonths","dayOfMonth","endOfDesiredMonth","setMonth","getMonth","setFullYear","getFullYear","addMilliseconds","timestamp","startOfWeek","dirtyOptions","localeWeekStartsOn","weekStartsOn","defaultWeekStartsOn","getDay","setHours","getTimezoneOffsetInMilliseconds","utcDate","UTC","getMinutes","getSeconds","getMilliseconds","setUTCFullYear","startOfDay","compareAsc","dirtyDateLeft","dirtyDateRight","dateLeft","dateRight","differenceInCalendarMonths","monthDiff","differenceInCalendarYears","differenceInMilliseconds","roundingMap","trunc","getRoundingMethod","endOfDay","endOfMonth","month","isLastDayOfMonth","differenceInMonths","difference","isLastMonthNotFull","year","isLastYearNotFull","quarter","roundingMethod","week","startOfWeekLeft","startOfWeekRight","timestampLeft","timestampRight","startOfDayLeft","startOfDayRight","hour","minute","smallerCount","months","days","innerDiff","prev","wt","filled","getDiff","sameMonth","daysOfFirstMonth","me","setSizes","taskHeight","startDate","endDate","ms","getMilestone","getEnd","getEndWorkday","setMinutes","setSeconds","setMilliseconds","holidayGuard","getDuration","toFixed","toClosestWorkday","notRight","alert","toWorkday","getCheckDate","getTimezoneOffset","defaultResourceUnit","defaultResourceValues","resourceValueRanges","resourceValueSteps","initials","match","charAt","toUpperCase","charCodeAt","cssClass","withTooltip","txt","avatarCss","inc","getTaskHeight","len","tempEnd","fullWidth","fullHeight","countInWeeks","cdate","cnext","startTask","endTask","dy","s_start","e_start","sx","sy","ex","ey","lineCoords","gapp","sx1","ex1","same","arrowCoords","color","canvas","createElement","strokeStyle","moveTo","lineTo","stroke","toDataURL","helpers","closedResources","Grouping","_rdCollection","Group","syncRDWithData","getDiagramItemData","groupResourceDiagram","refreshTaskDiagram","updateUnitDurations","updateTaskDiagram","refreshResourceDiagram","assignment","calculateUnitDuration","calculateLoad","truncateX","getUnitLoad","startUnitEnd","load","startUnitStart","endUnitStart","days_1","findUnitDuration","days_2","plusUnit","getDifference","checkHoliday","pruneDiagram","rec","oa","toRemove","eachLeaf","group","collect","_resourcesTree","resourceTaskLoader","syncResourceTree","task_1","tasksWithResources","getResourceTaskData","eachChild","inTree","becomesTask","pId","refreshResourceTree","unassignedBranch","checkResourceOpen","property","ws","sum","j","appId","defaults","dynamic","appNode","addStyle","firstShow","defaultHandler","onShow","use","App","locales","$exportView","export_mode","reload","jetapp","services","Edit","Delete task","Delete link","The task will be deleted permanently, are you sure?","The link will be deleted permanently, are you sure?","Predecessors","Successors","Title","Start date","End date","Duration","Progress","Notes","Type","Project","Milestone","Add task","Add project","(no title)","Save changes?","Related tasks","Task","Link","End to start","Start to start","End to end","Start to end","Lasts","Add assignment","Assignment","Assigned","Delete assignment","Are you sure to delete this assignment?","No resources to add","Unassigned","Hours per","Tasks per","Name","Hours","Split task","Planned dates","Planned dates will be removed, are you sure?","Add dates","Remove dates","$kanban","$skin","_template_types","subtype","on_click","kanban","getKanban","setListStatus","MouseEvents","images","jpg","jpeg","png","gif","ppt","pptx","pptm","pps","ppsx","ppsm","doc","docx","docm","xls","xlsx","xlsm","xlsb","pdf","wav","aif","mp3","mid","mpg","mov","wmv","avi","mp4","zip","jar","rar","gz","isImage","toLowerCase","attachments","comments","cardActions","templateTags","tags","_tags","tag","templateIcons","templateAvatar","users","_users","user_id","image","templateBody","templateAttachments","templateFooter","_colors","KanbanView","on_context","_kanban_event","_fixOrder","$index","sid","tindex","tobj","DataMove","statusChange","dp","status","ignore","webix_move_index","webix_move_id","webix_move_parent","serverStatus","save","_setHandlers","eachOtherList","webix_kanban_user_avatar","_handle_icons","webix_kanban_footer_icon","_typeof","$drag","drag_container","$dropHTML","self","eachList","dtype","defaultSetter","defaultFilter","dataview","files","sizetext","_format_size","dnd","hideOverlay","showOverlay","getValue","fileSize","uploader","removeIcon","percent","preventEvent","modal","paddingX","paddingY","_close","$hide","yCount","_statuses","upload","onItemDblClick","getElementsByTagName","values","_removeCard","_fixStatus","$list","_afterInit","_form","_removeBtn","_header","addDropZone","OverlayBox","_sublists","getForm","listIndex","_assignList","_prepareEditor","unselectAll","selectedTask","masterId","contextmenu","cid","showEditor","_hide_chat","_save","serialize","delimiter","provideApi","_strToArr","_destroy_with_me","_data_unification","colors","reconstruct","_initEditor","_initUserList","_initMenu","_initComments","_this2","_applyOrder","oldid","newid","getOwnerList","changeId","_serialize","getTags","getUsers","getColors","getStatuses","cardActions_setter","menu","defer","callback","_this3","_editor","getUserList","_userList","getMenu","_menu","getComments","_comments","_this4","userList","userlist","_this5","setContext","_this6","_this7","chat","_syncData","subList","prevList","_prepareLists","_subfilters","statuses","sets","importData","DataLoader","headerlayout","[object Object]","param","super","jview","$reorderOnly","object","operation","fixMath","math","getField","name2","askin","portlet","Property","plusLabel","inputPadding","webix_pivot_handle_add_value","forms","Add","input","triggerEvent","fields","GetValue","_activeInput","wavg","getFormView","corrections","GetCorrections","CheckCorrections","structure","getStructure","external","ItemConfig","PrepareValue","onBeforeShow","FilterSuggest","ListTemplate","pivotPropertyRemove","activeVal","isSymbolAllowed","char","getLastSymbolIndex","startsWith","_addFirst","$enterKey","selectionStart","substring","nextSymbol","disabled","operations","suggestClick","activeElement","UIManager","getFocus","setValue","setValueHere","formula","str1","str2","lastSymbol","$setValue","setSelectionRange","ValuesProperty","typeName","ToggleColors","OutComplexMath","def","defaultOperation","defIndex","findIndex","SetOperation","getOperation","SuggestData","mini","palette","getPalette","getValueColor","fieldsRegex","fieldsMatch","matchAll","methods","methodsRegex","methodsMatch","GroupProperty","oldValue","ChartSettings","complexData","labelWidth","labelRight","checkValue","uncheckValue","OutValues","innerChange","chart","HandleVisibility","InValues","stackedArea","stacked","horizontal","TableSettings","datatable","footer","totalColumn","FilterView","filters","filterObj","collectFieldValues","ModeView","toolbarHeight","optionWidth","SetMode","dataPadding","ToolbarView","buttonHeight","ToggleConfig","webix_pivot_settings","scrollSize","$customScroll","_GetScrollWidth","GetFilters","filterPopup","filtersView","FiltersChanged","ToggleReadonly","oldStructure","JSON","stringify","FilterConfig","activeCss","condition","webix_pivot_filter","Show","outer","scrollbarWidth","offsetWidth","removeChild","$mainView","xAxis","yAxis","commonAxisSettings","scaleColor","lineColor","IsPieBased","multilevel","ValueFormat","pieInnerText","LoadData","getData","UpdateChart","removeAllSeries","SetSeries","SetLegend","addSeries","GetSeriesConfig","settings","alpha","borderColor","legend","valign","hotkey","ToggleForm","GroupConfig","_v","HandleFieldChange","SetValues","oldMode","isChart","SetValue","CorrectFilters","CorrectInputs","setStructure","groupBy","inputs","ShowConfig","HideConfig","leftSplit","UpdateTable","CheckFreeze","rightSplit","totalCols","totalOps","total","lastId","colspan","totalIndex","_store","_prepareData","marks","Proxy","prop","freezeColumns","SetFirstColumn","CellFormat","cssFormat","rid","HeaderTemplate","asc","desc","DataDimension","_sort","_label","_meta","_table","_getter","_prepared","_indexes","_values","_prepareOptions","_keys","fSize","indexes","DataExport","pivot","_pivot","cleanRows","maxRow","getLimit","resetCursor","Set","rAggr","rowData","cAggr","scaleWidth","getWidth","_cleanRows","columnData","aggregateColumns","mark","getXHeader","rowsLength","Function","propertyName","methodName","contextName","optimize","allMath","getMath","to","array","getter","cache","optimizeRangeGroup","optimizeGroup","rule","getColumn","and","buildFinder","check","DataPivot","_rows","_cols","_dims","_context","_cursor","_order","_base_order","getIndexes","_group","_nextRow","_nextColumn","_ops","dimsSize","_fillRow","dimSize","dimOutSize","levels","_groupOps","_groupLength","limit","_sizes","getSize","closeLevels","kAgr","vAgr","z","_fillGroupRow","hConfig","_opInfo","nonEmpty","isNested","rpref","ostep","unitsInParent","reduce","fullLength","unitSizes","opNames","rowspan","getLabel","metaLine","getMeta","rules","_masterRules","_groupResultOps","branchMode","branchMath","_rowResultOps","compactOps","op","_rowOps","_colResultOps","_colOps","_marks","_setSizes","dmr","opsLength","rarr","_fillGroupRowInner","rl","collectRaggr","ctemp","cfrom","cind","cto","opset","dataset","raws","dimsData","ok","sizes","kind","optimizer","getName","trim","RawTable","_columns","_raw","_parse_inner","dataLength","columnsLength","setter","ColumnTable","_parse_init","acc","avg","summ","any","eq","neq","gt","gte","lt","lte","in","hasPrefix","predicates","Analytic","_tables","_dimensions","_preds","_maths","_comps","tables","addTable","dimensions","addDimension","_predicateGetter","preserve","used","driver","prepare","rDims","cDims","fn","LocalData","_filtersHash","externalProcessing","_setOperations","_initRengine","extraOperations","_reng","addMath","totalOperations","addComparator","addPredicate","firstRow","dataType","useOldData","_dataLoad","_rengineToWebix","getTable","getPivotData","loadError","newConfig","_old","rengine.Analytic","_setFilters","_setTotalOperations","_setPredicates","setDimensions","getRows","getColumns","getLimits","getOps","headerConfig","toArray","toNested","toXHeader","isComplex","_updateTotalMath","minY","maxY","minX","maxX","getChartData","getHeader","_toTree","getFields","prepareData","fieldObj","hash","predicate","replaceAll","struct","hdata","resetDimensions","chartType","axis","pieGroup","rowIndex","columnIndex","scale","prepareStructure","initial","exportView","Chart","Click to configure","Configure Pivot","Total","Fields","Methods","Columns","Add column","Rows","Add row","Clean rows","Filters","Add filter","Group By","Chart type","Logarithmic scale","X axis title","Y axis title","Scale color","Circled lines","Horizontal","Stacked","Lines","Line","Radar","Bar","Area","Spline","Spline Area","Pie","Donut","Values","Add value","Field not defined","Highlight","Min X","Max X","Min Y","Max Y","Footer","Total Column","Off","On","Sum Only","3D","Show values inside","complex","Incorrect formula in values","ignoreInitial","withContext","BaseExportView","subMenuPos","subsign","GetTemplate","submenuConfig","onMenuItemClick","PopupAction","BaseToolbarView","ShowExportPopup","viewId","ExportMenu","Toolbar","Charts","Host","mod","Export","host","CheckColumns","config_1","GetChartConfig","GetChartData","seriesFrom","ConvertDataBySeries","FormatLabels","numLimit","labelColumn","labelOptions","option","undefined","legendPosition","series","axises","seriesConfig","ApplyTypeConfig","onAfterRender","CorrectLabels","GetLegendConfig","logarithmic","verticalLabels","itemTypes","itemSupport","markerType","getDataConfig","getOptions","fill","radius","fillMarker","disableItems","border","baseColumn","dataColumn","aRow","toPNG","toPDF","bindOut","newValue","subkey","_value","factory","heatmap","empty","main","alt","CommonView","JoinListTemplate","webix_rpt_action_remove","RemoveJoin","ShowJoins","AppState","Models","getModels","ShowDeleteButton","SourcesList","JoinTemplate","AddJoin","addJoin","joins","cleanLinkedModels","block","sf","tf","getLinkedModels","toolbar","prompt","getTopParentView","newname","selectMask","$cssName","webix_rpt_qselect_icon","richselect","extendStatics","setPrototypeOf","__proto__","__","constructor","__assign","getUrlString","_loadViewDynamic","_loop_1","webix$1","key2","ActionsPopupView","Item","Hide","BaseView","GetButton","GetList","AND","OR","GLUE","glue","editCss","DisableSwitch","Template","action-menu","Actions","action-close","Delete","wbq-filter_join","SwitchGlue","EditStart","EditStop","AddGroup","LastValue","ConvertTo","ConvertFrom","after","getFirstId","CreateMode","Save","DeleteSilent","grand","pIndex","Active","ActiveId","asString","Format","AdjustToField","ApplyFilter","GetField","fselect","CreateFilter","conditions","place","FilterPopup","at","TopBarView","TopListView","log","queryToFilter","query","con","glueOr","glueAnd","simple","GetFilter","getFilterFunction","notEqual","less","greater","greaterOrEqual","lessOrEqual","notContains","beginsWith","notBeginsWith","endsWith","notEndsWith","between","notBetween","or","Add Filter","Add Group","Apply","Cancel","QueryView","getFieldData","model","fixDates","$observe","QueryBuilderView","DeleteQuery","CopyQuery","RenameQuery","SaveQuery","QSelectTemplate","onClearClick","NewQuery","Query","qData","Queries","getQueries","saved","models","changed","saveBtn","updateQuery","addQuery","cancel","deleteQuery","QueryMenu","tabbar","tabMinWidth","ShowView","newModule","ChangeModule","ChangeModel","ShowHideButton","timer","debounce","TrackChanges","_key","oldColumns","numColumns","UpdateMeta","publicFields","prev_1","groupColumns","was_1","now_1","Reset","getModuleSaveData","moduleId","updateModule","SaveCallback","addModule","getModule","setDataSource","InitStateValue","InitName","getSeries","masterName","SummaryPopupView","ClickHandler","GetOptions","ApplyAction","SetActionStates","disableItem","enableItem","pstate","ParentState","BucketView","ValueSeparator","other","Changed","isNotEmpty","AddNewBucket","Forms","GetRowKeys","Data","Sort","CreateForm","Focus","keys_1","GetColumnData","baseOptions","keyOption","appState","moduleConfig","buckets","getOptionsList","LoadBuckets","AddBucket","bucket","LoadOther","GetRowForm","separator","ActiveForm","GetValues","otherForm","otherName","validate","names","ForEachFormRow","markInvalid","CorrectValues","GetValidBuckets","$checked","DeleteBucket","Master","List","AddColumn","View","onEnter","getSelectedItem","BucketState","Find","adjust","GetColumns","selectIcon","modifiers","renderModifier","_modifiers","$renderTag","content","removeItem","webix_rpt_date_selector","multicombo","getModifier","setModifier","_custom_last_size","px","py","BucketSettingsView","Views","ShowColumns","Update","RowTemplate","ToggleSub","_hasFocus","onSubViewOpen","HideAllEditors","onSubViewClose","ResetEditor","webix_rpt_bucket_delete","RemoveColumn","newColumn","ColumnList","BucketPopup","tableData","_ActiveEditor","newV","oldV","openSub","subrow","prevId","closeSub","FocusEditor","$subopen","DateView","GetPopupTemplate","ActiveGroup","isSelected","Summaries","labels","AddNewAggregation","GroupState","SummaryColumns","ValidateFormData","aggregate","LoadAggregations","ApplyOneRowMode","AddAggregation","summary","aggregation","GetDefaultFormData","formId","GetOperations","onTimedKeypress","NewColumnTemplate","this_1","DeleteAggregation","formList","valid","oId","cId","ChangeNewColumnName","OtherSettingsView","GetDateOptions","ChangeGroupBy","onModifierClick","ShowModifierPopup","groupState","LoadColumns","DatePopup","DatePopupView","ToggleGroupBy","ToggleBuckets","ToggleSortBy","gravity","ChangeSortBy","ChangeDirection","sortBy","chartState","Axis","ChartState","AxisPropertiesView","labelAlign","ApplyYAxis","ApplyXAxis","BaseStructureView","SaveOrder","Id","ColorPopupView","onColorSelect","GetSeries","updatedSeries","closeIcon","$renderInput","badge","webix_input_icon","hideCloseIcon","_onSearch","showCloseIcon","setIcon","nodes","getElementsByClassName","setBadge","Series","SeriesPropertiesView","ItemListTemplate","getItemTypes","getTypes","labelField","ChangeLabelField","valueFields","SubState","UpdateSeries","SeriesProperties","onAfterDrop","data->onClearAll","webix_rpt_chart_color","ShowColorPopup","action-visible","HideField","action-hidden","ShowField","webix_rpt_config_row_name","axisFields","UpdateAxis","AxisProperties","AxisRowTemplate","legendFields","ChangeLegend","GetDataInputs","Types","ValueFields","GetInitState","UpdateModuleState","ApplyChartType","ApplySeriesFrom","GenerateSeries","prevType","ShowAxisInputs","RenderSeries","LoadSeries","noAxisSupport","sourceArray","ApplySeriesKeys","base_1","prevValue","ColorPopup","ActiveSeries","Column","ColumnPropertiesView","valueField","colorField","lc","vc","cc","OnChange","StructureView","ChangeReportType","ColumnsView","onSearchChange","FilterFields","ColumnProperties","FrozenTemplate","GetFreeze","freezeColumn","EmptyView","mods","getModules","GetText","GetSVG","CssFactory","TooltipFactory","bases","valueColumn","colorColumn","props","MenuPopup","ID","trg","GridsView","GetListTemplate","webix_rpt_action_menu","Menu","onDblClick","onAfterSelect","LoadModule","Sorting","SearchCompare","parsed","updated","sState","prevState","ChangeSortButtons","btn","prevBtn","ExportView","typeToSort","boolean","picklist","reference","$selection","plainOutput","filterHTML","toExcel","toCSV","GetTableConfig","table_1","GetTableData","IsBucketColumn","groups","dateColumns","gColumns","GetColumnConfig","grid","byUser","SetColWidth","_1","Tbl","setColumnWidth","clearCss","ignoreDateNumber_1","hasNonDigits","regexp_1","wildToRegexp","matchers_1","colId","optionsMatch_1","findOptions","matchPerColumn","dateFormats_1","found_1","addHotKey","removeHotKey","offIcon","onIcon","SetVisibleButtons","newBtn","deleteModule","copyModule","m14","m15","m16","m17","m18","m19","m20","m21","m22","m23","m24","m25","m26","m27","m28","m29","m30","m31","m32","m33","_fieldData","_optionsData","_modules","modules","_models","_models_async","refs","ref","_refs","major","newField","onlyNew","getRefs","was","origin","queryObj","collectTables","check_1","_queries","q","moduleProps","replacements","wild","regexp","lineTypes","multiTypeSupport","fiedls","colorIndex","All reports","Are you sure to delete this report?","Are you sure to delete this query?","Average","Color column","Common","Copy of","Count","Created on","Data source","Day","Delete report","Description","Enter query name","To Excel","To CSV","To PNG","To PDF","Filter","Filtering query","Frozen columns above","Group summaries","Join data","Heatmap","Labels column","Max","Min","Month","New","Click 'New' button to add a new report","Select any report from the list","No reports","No saved queries","Last modified","New column name","New report","Please delete the related query filter first","Please delete the related group rule first","Rename","Report name","Reports","Save query","Specify columns to group by and output(s)","Specify columns to sort by","Sum","Type to search","Year","Axes","X Axis","Y Axis","Data series","Keys column","X axis column","Values column","Color","Marker type","Fill marker","Legend","Gridlines","Bottom","None","Right","Stacked area","Spline area","Stacked bar","Create copy","circle","square","triangle","diamond","no markers","Vertical labels","Extract series from","True","False","Save filter to use it in other reports","No filter","Select","Data buckets","Bucket name","Bucket values","Add bucket","Specify columns and their data buckets","Search","Other","Other values","Are you sure to delete?","waitVisible","interval","destructed","AddView","cals","AddEvent","NavLabel","ChangeDate","DateLabel","timeline","GetStep","timelineMode","NavBarView","bottomOffset","defaultPalette","modernPalette","palettes","material","flat","willow","optionHeight","SidePopupView","compactBar","controls","onHide","Cals","updateCalendar","addCalendar","removeCalendar","UpdateColor","webix_template","ShowEditor","Editor","EditorView","Cid","SideView","monthSelect","onAfterDateSelect","ListType","editValue","webix_scheduler_cal_edit","webix_scheduler_cal_title","ToggleCalendar","webix_scheduler_active","SetTitle","side","maxHeight","AddCalendar","onAfterScroll","PopupView","EditAbility","ToggleState","checkbox","EditStopSilent","fail","editStop","NavPopupView","animate","tHeight","tabbarHeight","Parent","updatePos","todayIcon","SetToday","todayBtn","responsive","ShowNav","responsiveCell","NavPopup","ToggleAdd","EventActionMenu","Result","Root","shrinkTo","before","isToday","isMultiDay","all_day","daysBetweenInclusive","isSameDate","adate","bdate","icalFormat","string","name_1","UNTIL","strToDate","EXDATE","WEEKDAYS","FREQUENCE","DAILY","WEEKLY","MONTHLY","YEARLY","findDate","fillWdays","consts","BYDAY","wdays","INTERVAL","FREQ","BYYEARDAY","BYMONTHDAY","BYSETPOS","checkDay","sdate","oldDay","WeekdaysToDates","getParams","$id","$recurring","extractDate","clipSequence","COUNT","cutOccurrence","separateSequence","isFirstOccurrence","evStart","correctMode","origin_id","recurring","isLastPart","movePattern","newEvent","oldEvent","until","nmd","nwn","getWeekNum","BYMONTH","nm","checkPattern","RecurringFormView","CreateIntervalControls","CreateCheckboxes","CreateSelect","CreateRadio","UpdateEvent","Events","CheckBoxContainer","Checkboxes","PatternSelect","UntilDateContainer","UntilDateCalendar","untilDate","UntilNumContainer","UntilNum","CustomRecControls","ChangeControls","_freq","dayShort","CheckboxGuard","GetBYDAY","byDay","dayFull","monthFull","calculated","weekNum","weekday","yearday","rec_pattern","vertical","ChangeSelectors","_StartDate","untilCount","CountNum","minDate","SetUNTIL","SetBYDAY","SetPatternOptions","setDirty","GetUntil","GetRecPattern","changeMode","date_id","correctCountUntil","countToUntil","nexto","hasOneOccurrence","lr","EditRecurringMixin","ChangeMode","CorrectCountUntil","HasOneOccurrence","EventFormView","GetDateTime","ToggleTimeControls","CreateCalendarColor","getDirtyValues","PrepareChange","Wait","CreateRepeat","CreateUnitSelector","CreateSectionSelector","RecurringOptions","StartTime","EndTime","waitUnits","combo_1","Sections","sections","SubForm","ClearTempEvent","FillForm","labelTopHeight","ToggleSubform","ShowSubForm","clipboard","NewEvent","FillFormContinue","AdaptObjToMode","start_time","end_time","SetRecurring","yearStart","today","GetFromStartDate","roptions","ResetRecurringOptions","rec_option","GetStartDate","section","$color","minutes","PrepareOut","addEvent","UpdateExisting","UpdateSelection","newEvent_1","updateEvent","recVals","fvals","Join","ProcessRecurringOption","ProcessRecurringPattern","ProcessDates","ApplyDatechangeToRecurring","ProcessText","_changedValues","series_end_date","GetRecurring","edate","CorrectDateTime","ev_length","opposite","oldStart","length_1","GetRecurringPreset","dirty","UpdateStateDate","GetClosestOccurrenceDate","GetModeBounds","weekStart","weeks","Subform","IsDirty","subform","HideSubPop","FormPopup","cleanEventData","HandleCopyPaste","clipboardModes","ctrlKey","isMac","AddToClipboard","PasteFromClipboard","PurgeClipboard","setFocus","RestoreClipboardSource","$multi","_globalClickHandler","ChangePasteTarget","CreatePasteTarget","OnDestroy","offsetLeft","offsetTop","mousePosUnit","sheight","GetSectionHeight","childNodes","SetPasteTargetStyle","ClearPasteTargetStyle","querySelectorAll","sel","SetClipboardSourceStyle","event_1","GetEvent","prevCss","clip","GetEventData","CopyEvent","MoveEvent","evLength","GetTargetDate","sec","updateId","CopyPasteMixin","mainWidget","BRIGHTNESS","FONT","EventView","StartAction","copypaste","UnitsLocal","EventObj","DeleteEvent","EditEvent","removeEvent","removal","oneday","allday","timeFormatStr","startTime","endTime","fromTo","GetRecurringText","unitIDs_1","unitObj","unitValue","GetSection","pattern","EventActionPopup","buttons","MainView","topbar","ToggleEvent","ToggleSidePanel","_dndActionPopup","ShowEvent","HideEvent","sameEvent","_sidePanel","getDimmedColor","hex","toRgb","red","green","blue","rgbToHsv","hue","saturation","hsvToRgb","$past","timeStart","dayEventColor","$textColor","UnitListView","uniteBy","templateHeader","TemplateHeader","TimeStart","onUnits","SetUnits","start_1","AgendaView","headerHeight","TemplateCss","onItemRender","$unit","CurrentUnit","SelectEvent","_o","monthStart","getEvents","ToggleOverlay","_selected","datestring","fstring","ids","getUnitList","HourscaleView","heightSize","HourScaleItem","ParseHours","MultiMoreView","wxi-angle-down","ExpandData","wxi-angle-up","WrapData","MoreIcon","_expandState","maxVisibleLines","transition","_inAnimation","SetMoreIcon","_select","functor","trgs","LocateSelected","Unselect","_SelectionMode","id_1","SelectionMixin","_DataObj","firstElementChild","Resizer","y_diff","updateNodeHeight","updateText","x_diff","minEventHeight","getActualDate","differenceInCalendarDays","differenceInHours","f_cache","formatFunction","getSizes","d_1","dragOnly","modes","attr","updateSelection","editRecurring","newSubEvent","joinDateTime","shiftDate","mainDate","occDate","changeDate","ddate","dtime","$resize","moveMode","more","_waitPopup","finishOperation","copyEvent","$creation","$copy","$last_y","metaKey","dragCreate","scrollY_1","parentTopOffset","$top","$left","calId","ToHTML","getMaster","EventTemplate","noff","toff","$marked","markDropArea","drop","$extra","extra","getLastId","xCount","multiday","children","HideWindow","getEventUnits","sourceUnit","currentUnits","targetUnit","newUnits","multidayUnits","getStep","wrongDates","allDay","timelineMore","offsetParent","WeekDayNum","DayEventsView","webix_scheduler_day_event","webix_scheduler_day_scale_item","_e","ShowNew","RenderEvents","mobile","FilterToday","_marker_update_interval","UpdateMarkerPosition","_Marker","evs","PrepareEvents","role","MarkToday","$inner","orderSet","PruneStack","$sorder","max_count","SetPosition","GetEventEndDate","temp_width","evCorrectedCopy","sm","em","EventTemplateStart","resizer","MultidayEventList","webix_scheduler_multiday_event","_moreBtn","LimitData","GetStyle","excess","_reserve","_reserveIds","Animate","DayView","ScrollScale","GetDay","CalendarView","isOutside","MarkEvent","navigation","monthHeader","skipEmptyWeeks","Calendar","MoreWindowView","webix_scheduler_month_event","webix_scheduler_month_event_single","MoreTemplate","Win","_c","oneDay","DayFormatStr","MonthEventsView","webix_cal_date","_ev","ShowDay","webix_scheduler_more","ShowMore","webix_cal_day","CalendarTemplate","eventHeight","MoreWindow","$more","GetDayCss","maxLines","wStart","wEnd","dayIndex","dayHTML","IsSingleDay","es","ee","le","prevLength","GetPosition","start_a","start_b","days_a","monthData","GetMonthData","ShowWindow","MonthHeaderView","GetHeaderData","MonthListView","MonthView","BarView","MoreView","clientWidth","webix_scheduler_timeline_event","webix_list_item","InnerState","RefreshTask","_sectionsReady","_sectionSize","ClearCollections","_processed","_lastRow","_moreEvents","sectionIndex","GetUnitCount","CheckDates","GetUnitStart","MoreBarTemplate","GetGrid","GetUnitWidth","AddUnit","clickedUnit","innerState","TimelineView","SetScales","ResetScales","wstart","wend","GetDefaultScaleUnit","GetScalePrecision","GetScalesCellWidth","GetScalesArray","UnitEventsView","unitID","UnitsHeaderView","Header","Units","unitsCache","UnitMultidayList","FilterByUnits","expandable","multiEvents","UnitMultidayView","UnitsView","WeekEventsView","WeekHeaderView","MultiDayEventsView","itemHeight","ParseDays","BreakEventsByDay","_maxEvents","ResetListHeight","Days","processed","$config","allEvents","renderedEvents","toHide","_day","visible","MoreOption","cIndex","rIndex","GetSizePosition","WeekView","GetWeek","_month","YearCalendarView","DayEvents","calendarHeader","webix_cal_day_with_event","ShowEvents","webix_cal_month","ShowMonth","SetStateDate","ManageDateChange","GetMonthStart","_date","MonthStart","showCalendar","monthEnd","dateKey","YearView","GetCalendars","m34","m35","m36","m37","m38","m39","m40","m41","m42","m43","createEvents","events_ready","cals_ready","createUnits","units_ready","_sections","createSections","sections_ready","utc","serverUTC","loaded_ranges","getColor","eventOut","getLocal","getDynamic","dimPastEvents","xdate","isPast","roundTime","parseFormatStr","fromStr","sortCalendars","onAfterDelete","setActive","onAfterAdd","data->onDataUpdate","rgb","tosave","cev","isFirst","recurring_update_mode","recurring_update_date","Week","Agenda","Timeline","Today","Create","Next","Previous","Next day","Previous day","Next week","Previous week","Next month","Previous month","Add calendar","Do you really want to remove this calendar?","Edit calendar","Settings","Inactive calendar","No Events","All Day","Expand all-day events","Collapse all-day events","The event will be deleted permanently, are you sure?","Delete event","(No title)","Event","Start","End","Edit event","Assigned to units","No units","Unknown unit","never","none","daily","weekly","monthly","yearly","years","Repeat","End repeat","Repeats each","till","times","weekly, every","monthly, every","yearly, every","every working day","custom","Every","of","day of year","after several occurrences","week on","Change recurring pattern","All events","This event","This event and the following","Edit recurring event","Timeline scale","Section","Show more","Copy event","groupDelimiter","groupSize","decimalDelimiter","decimalSize","dateFormat","timeFormat","longDateFormat","fullDateFormat","am","pm","price","priceSettings","monthShort","monthFormat","yearFormat","theme","statusbar","_mce_id","_waitEditor","_require_tinymce_once","_set_inner_size","cdn","tinymce","_init_tinymce_once","apiKey","tinyMCEPreInit","editor_config","selector","custom_setup","setup","_mce_editor_ready","setContent","getContent","gantt","report","reports","scheduler"],"sourceRoot":""}